(self.webpackChunkmotion_app=self.webpackChunkmotion_app||[]).push([[179],{388:(Ee,Ce,J)=>{"use strict";function D(n){return"function"==typeof n}function Y(n){const e=n(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const T=Y(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function B(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class k{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(D(i))try{i()}catch(o){t=o instanceof T?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{j(o)}catch(s){t=t??[],s instanceof T?t=[...t,...s.errors]:t.push(s)}}if(t)throw new T(t)}}add(t){var e;if(t&&t!==this)if(this.closed)j(t);else{if(t instanceof k){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&B(e,t)}remove(t){const{_finalizers:e}=this;e&&B(e,t),t instanceof k&&t._removeParent(this)}}k.EMPTY=(()=>{const n=new k;return n.closed=!0,n})();const C=k.EMPTY;function f(n){return n instanceof k||n&&"closed"in n&&D(n.remove)&&D(n.add)&&D(n.unsubscribe)}function j(n){D(n)?n():n.unsubscribe()}const X={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},q={setTimeout(n,t,...e){const{delegate:i}=q;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=q;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function H(n){q.setTimeout(()=>{const{onUnhandledError:t}=X;if(!t)throw n;t(n)})}function W(){}const l=m("C",void 0,void 0);function m(n,t,e){return{kind:n,value:t,error:e}}let _=null;function w(n){if(X.useDeprecatedSynchronousErrorHandling){const t=!_;if(t&&(_={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:i}=_;if(_=null,e)throw i}}else n()}class M extends k{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,f(t)&&t.add(this)):this.destination=vt}static create(t,e,i){return new he(t,e,i)}next(t){this.isStopped?De(function h(n){return m("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?De(function u(n){return m("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?De(l,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const P=Function.prototype.bind;function K(n,t){return P.call(n,t)}class ie{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){ye(i)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){ye(i)}else ye(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){ye(e)}}}class he extends M{constructor(t,e,i){let r;if(super(),D(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&X.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&K(t.next,o),error:t.error&&K(t.error,o),complete:t.complete&&K(t.complete,o)}):r=t}this.destination=new ie(r)}}function ye(n){X.useDeprecatedSynchronousErrorHandling?function b(n){X.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=n)}(n):H(n)}function De(n,t){const{onStoppedNotification:e}=X;e&&q.setTimeout(()=>e(n,t))}const vt={closed:!0,next:W,error:function ge(n){throw n},complete:W},Ht="function"==typeof Symbol&&Symbol.observable||"@@observable";function Kt(n){return n}function Jt(n){return 0===n.length?Kt:1===n.length?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}let Qe=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){const o=function z(n){return n&&n instanceof M||function A(n){return n&&D(n.next)&&D(n.error)&&D(n.complete)}(n)&&f(n)}(e)?e:new he(e,i,r);return w(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=U(i))((r,o)=>{const s=new he({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Ht](){return this}pipe(...e){return Jt(e)(this)}toPromise(e){return new(e=U(e))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function U(n){var t;return null!==(t=n??X.Promise)&&void 0!==t?t:Promise}const N=Y(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let I=(()=>{class n extends Qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new ne(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new N}next(e){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(e)}})}error(e){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){w(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:o}=this;return i||r?C:(this.currentObservers=null,o.push(e),new k(()=>{this.currentObservers=null,B(o,e)}))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){const e=new Qe;return e.source=this,e}}return n.create=(t,e)=>new ne(t,e),n})();class ne extends I{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)}error(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:C}}function re(n){return D(n?.lift)}function ce(n){return t=>{if(re(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,t,e,i,r){return new We(n,t,e,i,r)}class We extends M{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function $(n,t){return ce((e,i)=>{let r=0;e.subscribe(ee(i,o=>{i.next(n.call(t,o,r++))}))})}function _t(n){return this instanceof _t?(this.v=n,this):new _t(n)}function rn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(n,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(E){i[E]&&(r[E]=function(S){return new Promise(function(R,G){o.push([E,S,R,G])>1||a(E,S)})})}function a(E,S){try{!function c(E){E.value instanceof _t?Promise.resolve(E.value.v).then(d,p):g(o[0][2],E)}(i[E](S))}catch(R){g(o[0][3],R)}}function d(E){a("next",E)}function p(E){a("throw",E)}function g(E,S){E(S),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Mi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function Z(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}const _h=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ry(n){return D(n?.then)}function oy(n){return D(n[Ht])}function sy(n){return Symbol.asyncIterator&&D(n?.[Symbol.asyncIterator])}function ay(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ly=function N1(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cy(n){return D(n?.[ly])}function uy(n){return rn(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:i,done:r}=yield _t(e.read());if(r)return yield _t(void 0);yield yield _t(i)}}finally{e.releaseLock()}})}function dy(n){return D(n?.getReader)}function ni(n){if(n instanceof Qe)return n;if(null!=n){if(oy(n))return function L1(n){return new Qe(t=>{const e=n[Ht]();if(D(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(_h(n))return function B1(n){return new Qe(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(ry(n))return function U1(n){return new Qe(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,H)})}(n);if(sy(n))return hy(n);if(cy(n))return function V1(n){return new Qe(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(dy(n))return function H1(n){return hy(uy(n))}(n)}throw ay(n)}function hy(n){return new Qe(t=>{(function j1(n,t){var e,i,r,o;return function x(n,t,e,i){return new(e||(e=Promise))(function(o,s){function a(p){try{d(i.next(p))}catch(g){s(g)}}function c(p){try{d(i.throw(p))}catch(g){s(g)}}function d(p){p.done?o(p.value):function r(o){return o instanceof e?o:new e(function(s){s(o)})}(p.value).then(a,c)}d((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Mi(n);!(i=yield e.next()).done;)if(t.next(i.value),t.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Tr(n,t,e,i=0,r=!1){const o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function vn(n,t,e=1/0){return D(t)?vn((i,r)=>$((o,s)=>t(i,o,r,s))(ni(n(i,r))),e):("number"==typeof t&&(e=t),ce((i,r)=>function z1(n,t,e,i,r,o,s,a){const c=[];let d=0,p=0,g=!1;const E=()=>{g&&!c.length&&!d&&t.complete()},S=G=>d<i?R(G):c.push(G),R=G=>{o&&t.next(G),d++;let te=!1;ni(e(G,p++)).subscribe(ee(t,le=>{r?.(le),o?S(le):t.next(le)},()=>{te=!0},void 0,()=>{if(te)try{for(d--;c.length&&d<i;){const le=c.shift();s?Tr(t,s,()=>R(le)):R(le)}E()}catch(le){t.error(le)}}))};return n.subscribe(ee(t,S,()=>{g=!0,E()})),()=>{a?.()}}(i,r,n,e)))}function ms(n=1/0){return vn(Kt,n)}const fr=new Qe(n=>n.complete());function fy(n){return n&&D(n.schedule)}function yh(n){return n[n.length-1]}function py(n){return D(yh(n))?n.pop():void 0}function Ta(n){return fy(yh(n))?n.pop():void 0}function my(n,t=0){return ce((e,i)=>{e.subscribe(ee(i,r=>Tr(i,n,()=>i.next(r),t),()=>Tr(i,n,()=>i.complete(),t),r=>Tr(i,n,()=>i.error(r),t)))})}function gy(n,t=0){return ce((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function _y(n,t){if(!n)throw new Error("Iterable cannot be null");return new Qe(e=>{Tr(e,t,()=>{const i=n[Symbol.asyncIterator]();Tr(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function hn(n,t){return t?function Z1(n,t){if(null!=n){if(oy(n))return function q1(n,t){return ni(n).pipe(gy(t),my(t))}(n,t);if(_h(n))return function Y1(n,t){return new Qe(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}(n,t);if(ry(n))return function W1(n,t){return ni(n).pipe(gy(t),my(t))}(n,t);if(sy(n))return _y(n,t);if(cy(n))return function X1(n,t){return new Qe(e=>{let i;return Tr(e,t,()=>{i=n[ly](),Tr(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void e.error(s)}o?e.complete():e.next(r)},0,!0)}),()=>D(i?.return)&&i.return()})}(n,t);if(dy(n))return function K1(n,t){return _y(uy(n),t)}(n,t)}throw ay(n)}(n,t):ni(n)}function to(...n){const t=Ta(n),e=function G1(n,t){return"number"==typeof yh(n)?n.pop():t}(n,1/0),i=n;return i.length?1===i.length?ni(i[0]):ms(e)(hn(i,t)):fr}function vh(n={}){const{connector:t=(()=>new I),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,d=0,p=!1,g=!1;const E=()=>{a?.unsubscribe(),a=void 0},S=()=>{E(),s=c=void 0,p=g=!1},R=()=>{const G=s;S(),G?.unsubscribe()};return ce((G,te)=>{d++,!g&&!p&&E();const le=c=c??t();te.add(()=>{d--,0===d&&!g&&!p&&(a=bh(R,r))}),le.subscribe(te),!s&&d>0&&(s=new he({next:_e=>le.next(_e),error:_e=>{g=!0,E(),a=bh(S,e,_e),le.error(_e)},complete:()=>{p=!0,E(),a=bh(S,i),le.complete()}}),ni(G).subscribe(s))})(o)}}function bh(n,t,...e){if(!0===t)return void n();if(!1===t)return;const i=new he({next:()=>{i.unsubscribe(),n()}});return t(...e).subscribe(i)}function Bt(n){for(let t in n)if(n[t]===Bt)return t;throw Error("Could not find renamed property on target object.")}function wh(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Ut(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Eh(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Q1=Bt({__forward_ref__:Bt});function Et(n){return n.__forward_ref__=Et,n.toString=function(){return Ut(this())},n}function Ye(n){return Ch(n)?n():n}function Ch(n){return"function"==typeof n&&n.hasOwnProperty(Q1)&&n.__forward_ref__===Et}class de extends Error{constructor(t,e){super(function _c(n,t){return`NG0${Math.abs(n)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function tt(n){return"string"==typeof n?n:null==n?"":String(n)}function yc(n,t){throw new de(-201,!1)}function ui(n,t){null==n&&function At(n,t,e,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${e} ${i} ${t} <=Actual]`))}(t,n,null,"!=")}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function at(n){return{providers:n.providers||[],imports:n.imports||[]}}function vc(n){return yy(n,bc)||yy(n,by)}function yy(n,t){return n.hasOwnProperty(t)?n[t]:null}function vy(n){return n&&(n.hasOwnProperty(Dh)||n.hasOwnProperty(ak))?n[Dh]:null}const bc=Bt({\u0275prov:Bt}),Dh=Bt({\u0275inj:Bt}),by=Bt({ngInjectableDef:Bt}),ak=Bt({ngInjectorDef:Bt});var je=(()=>((je=je||{})[je.Default=0]="Default",je[je.Host=1]="Host",je[je.Self=2]="Self",je[je.SkipSelf=4]="SkipSelf",je[je.Optional=8]="Optional",je))();let Sh;function Ti(n){const t=Sh;return Sh=n,t}function wy(n,t,e){const i=vc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&je.Optional?null:void 0!==t?t:void yc(Ut(n))}function no(n){return{toString:n}.toString()}var Yi=(()=>((Yi=Yi||{})[Yi.OnPush=0]="OnPush",Yi[Yi.Default=1]="Default",Yi))(),Xi=(()=>{return(n=Xi||(Xi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Xi;var n})();const jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gs={},Tt=[],wc=Bt({\u0275cmp:Bt}),xh=Bt({\u0275dir:Bt}),Mh=Bt({\u0275pipe:Bt}),Ey=Bt({\u0275mod:Bt}),Ir=Bt({\u0275fac:Bt}),ka=Bt({__NG_ELEMENT_ID__:Bt});let ck=0;function Wt(n){return no(()=>{const e=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Yi.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Tt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Xi.Emulated,id:"c"+ck++,styles:n.styles||Tt,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.dependencies,s=n.features;return r.inputs=Sy(n.inputs,i),r.outputs=Sy(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(Cy).filter(Dy):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(Wn).filter(Dy):null,r})}function Cy(n){return Rt(n)||qn(n)}function Dy(n){return null!==n}function dt(n){return no(()=>({type:n.type,bootstrap:n.bootstrap||Tt,declarations:n.declarations||Tt,imports:n.imports||Tt,exports:n.exports||Tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sy(n,t){if(null==n)return gs;const e={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),e[r]=i,t&&(t[r]=o)}return e}const ke=Wt;function Rt(n){return n[wc]||null}function qn(n){return n[xh]||null}function Wn(n){return n[Mh]||null}function di(n,t){const e=n[Ey]||null;if(!e&&!0===t)throw new Error(`Type ${Ut(n)} does not have '\u0275mod' property.`);return e}function ri(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zi(n){return Array.isArray(n)&&!0===n[1]}function Ih(n){return 0!=(8&n.flags)}function Sc(n){return 2==(2&n.flags)}function xc(n){return 1==(1&n.flags)}function Qi(n){return null!==n.template}function mk(n){return 0!=(256&n[2])}function Po(n,t){return n.hasOwnProperty(Ir)?n[Ir]:null}class yk{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function kn(){return Ty}function Ty(n){return n.type.prototype.ngOnChanges&&(n.setInput=bk),vk}function vk(){const n=Iy(this),t=n?.current;if(t){const e=n.previous;if(e===gs)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function bk(n,t,e,i){const r=Iy(n)||function wk(n,t){return n[ky]=t}(n,{previous:gs,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[e],c=s[a];o[a]=new yk(c&&c.currentValue,t,s===gs),n[i]=t}kn.ngInherit=!0;const ky="__ngSimpleChanges__";function Iy(n){return n[ky]||null}function fn(n){for(;Array.isArray(n);)n=n[0];return n}function Mc(n,t){return fn(t[n])}function Ai(n,t){return fn(t[n.index])}function Fh(n,t){return n.data[t]}function fi(n,t){const e=t[n];return ri(e)?e:e[0]}function Tc(n){return 64==(64&n[2])}function io(n,t){return null==t?null:n[t]}function Ay(n){n[18]=0}function Nh(n,t){n[5]+=t;let e=n,i=n[3];for(;null!==i&&(1===t&&1===e[5]||-1===t&&0===e[5]);)i[5]+=t,e=i,i=i[3]}const Je={lFrame:Hy(null),bindingsEnabled:!0};function Oy(){return Je.bindingsEnabled}function me(){return Je.lFrame.lView}function bt(){return Je.lFrame.tView}function Es(n){return Je.lFrame.contextLView=n,n[8]}function Cs(n){return Je.lFrame.contextLView=null,n}function bn(){let n=Py();for(;null!==n&&64===n.type;)n=n.parent;return n}function Py(){return Je.lFrame.currentTNode}function pr(n,t){const e=Je.lFrame;e.currentTNode=n,e.isParent=t}function Lh(){return Je.lFrame.isParent}function Bh(){Je.lFrame.isParent=!1}function Ds(){return Je.lFrame.bindingIndex++}function Nk(n,t){const e=Je.lFrame;e.bindingIndex=e.bindingRootIndex=n,Uh(t)}function Uh(n){Je.lFrame.currentDirectiveIndex=n}function By(){return Je.lFrame.currentQueryIndex}function Hh(n){Je.lFrame.currentQueryIndex=n}function Bk(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function Uy(n,t,e){if(e&je.SkipSelf){let r=t,o=n;for(;!(r=r.parent,null!==r||e&je.Host||(r=Bk(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;t=r,n=o}const i=Je.lFrame=Vy();return i.currentTNode=t,i.lView=n,!0}function jh(n){const t=Vy(),e=n[1];Je.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Vy(){const n=Je.lFrame,t=null===n?null:n.child;return null===t?Hy(n):t}function Hy(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function jy(){const n=Je.lFrame;return Je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const zy=jy;function zh(){const n=jy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xn(){return Je.lFrame.selectedIndex}function ro(n){Je.lFrame.selectedIndex=n}function sn(){const n=Je.lFrame;return Fh(n.tView,n.selectedIndex)}function Fo(){Je.lFrame.currentNamespace="svg"}function kc(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){const o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-e,s),a&&((n.contentHooks||(n.contentHooks=[])).push(e,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-e,c),d&&((n.viewHooks||(n.viewHooks=[])).push(e,d),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,d)),null!=p&&(n.destroyHooks||(n.destroyHooks=[])).push(e,p)}}function Ic(n,t,e){$y(n,t,3,e)}function Ac(n,t,e,i){(3&n[2])===e&&$y(n,t,e,i)}function Gh(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function $y(n,t,e,i){const o=i??-1,s=t.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=i&&a>=i)break}else t[c]<0&&(n[18]+=65536),(a<o||-1==o)&&(Gk(n,e,t,c),n[18]=(4294901760&n[18])+c+2),c++}function Gk(n,t,e,i){const r=e[i]<0,o=e[i+1],a=n[r?-e[i]:e[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Fa{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Rc(n,t,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{const o=r,s=e[++i];qy(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function Gy(n){return 3===n||4===n||6===n}function qy(n){return 64===n.charCodeAt(0)}function Oc(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?e=r:0===e||Wy(n,e,r,null,-1===e||2===e?t[++i]:null)}}return n}function Wy(n,t,e,i,r){let o=0,s=n.length;if(-1===t)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}function Yy(n){return-1!==n}function Ss(n){return 32767&n}function xs(n,t){let e=function Kk(n){return n>>16}(n),i=t;for(;e>0;)i=i[15],e--;return i}let Wh=!0;function Pc(n){const t=Wh;return Wh=n,t}let Zk=0;const mr={};function La(n,t){const e=Xh(n,t);if(-1!==e)return e;const i=t[1];i.firstCreatePass&&(n.injectorIndex=t.length,Yh(i.data,n),Yh(t,null),Yh(i.blueprint,null));const r=Fc(n,t),o=n.injectorIndex;if(Yy(r)){const s=Ss(r),a=xs(r,t),c=a[1].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|c[s+d]}return t[o+8]=r,o}function Yh(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Xh(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function Fc(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;null!==r;){if(i=iv(r),null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Nc(n,t,e){!function Qk(n,t,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(ka)&&(i=e[ka]),null==i&&(i=e[ka]=Zk++);const r=255&i;t.data[n+(r>>5)]|=1<<r}(n,t,e)}function Zy(n,t,e){if(e&je.Optional||void 0!==n)return n;yc()}function Qy(n,t,e,i){if(e&je.Optional&&void 0===i&&(i=null),0==(e&(je.Self|je.Host))){const r=n[9],o=Ti(void 0);try{return r?r.get(t,i,e&je.Optional):wy(t,i,e&je.Optional)}finally{Ti(o)}}return Zy(i,0,e)}function Jy(n,t,e,i=je.Default,r){if(null!==n){if(1024&t[2]){const s=function iI(n,t,e,i,r){let o=n,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=ev(o,s,e,i|je.Self,mr);if(a!==mr)return a;let c=o.parent;if(!c){const d=s[21];if(d){const p=d.get(e,mr,i);if(p!==mr)return p}c=iv(s),s=s[15]}o=c}return r}(n,t,e,i,mr);if(s!==mr)return s}const o=ev(n,t,e,i,mr);if(o!==mr)return o}return Qy(t,e,i,r)}function ev(n,t,e,i,r){const o=function tI(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(ka)?n[ka]:void 0;return"number"==typeof t?t>=0?255&t:nI:t}(e);if("function"==typeof o){if(!Uy(t,n,i))return i&je.Host?Zy(r,0,i):Qy(t,e,i,r);try{const s=o(i);if(null!=s||i&je.Optional)return s;yc()}finally{zy()}}else if("number"==typeof o){let s=null,a=Xh(n,t),c=-1,d=i&je.Host?t[16][6]:null;for((-1===a||i&je.SkipSelf)&&(c=-1===a?Fc(n,t):t[a+8],-1!==c&&nv(i,!1)?(s=t[1],a=Ss(c),t=xs(c,t)):a=-1);-1!==a;){const p=t[1];if(tv(o,a,p.data)){const g=eI(a,t,e,s,i,d);if(g!==mr)return g}c=t[a+8],-1!==c&&nv(i,t[1].data[a+8]===d)&&tv(o,a,t)?(s=p,a=Ss(c),t=xs(c,t)):a=-1}}return r}function eI(n,t,e,i,r,o){const s=t[1],a=s.data[n+8],p=Lc(a,s,e,null==i?Sc(a)&&Wh:i!=s&&0!=(3&a.type),r&je.Host&&o===a);return null!==p?Ba(t,s,p,a):mr}function Lc(n,t,e,i,r){const o=n.providerIndexes,s=t.data,a=1048575&o,c=n.directiveStart,p=o>>20,E=r?a+p:n.directiveEnd;for(let S=i?a:a+p;S<E;S++){const R=s[S];if(S<c&&e===R||S>=c&&R.type===e)return S}if(r){const S=s[c];if(S&&Qi(S)&&S.type===e)return c}return null}function Ba(n,t,e,i){let r=n[e];const o=t.data;if(function qk(n){return n instanceof Fa}(r)){const s=r;s.resolving&&function J1(n,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Mt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tt(n)}(o[e]));const a=Pc(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Ti(s.injectImpl):null;Uy(n,i,je.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&function $k(n,t,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){const s=Ty(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,s)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,r),o&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,o))}(e,o[e],t)}finally{null!==c&&Ti(c),Pc(a),s.resolving=!1,zy()}}return r}function tv(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function nv(n,t){return!(n&je.Self||n&je.Host&&t)}class Ms{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return Jy(this._tNode,this._lView,t,i,e)}}function nI(){return new Ms(bn(),me())}function ln(n){return no(()=>{const t=n.prototype.constructor,e=t[Ir]||Kh(t),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[Ir]||Kh(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Kh(n){return Ch(n)?()=>{const t=Kh(Ye(n));return t&&t()}:Po(n)}function iv(n){const t=n[1],e=t.type;return 2===e?t.declTNode:1===e?n[6]:null}function gr(n){return function Jk(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const o=e[r];if(Gy(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(o===t)return e[r+1];r+=2}}}return null}(bn(),n)}const ks="__parameters__";function As(n,t,e){return no(()=>{const i=function Zh(n){return function(...e){if(n){const i=n(...e);for(const r in i)this[r]=i[r]}}}(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,d,p){const g=c.hasOwnProperty(ks)?c[ks]:Object.defineProperty(c,ks,{value:[]})[ks];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(s),c}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ve{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=xe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pi(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)?(t===n&&(t=n.slice(0,e)),pi(i,t)):t!==n&&t.push(i)}return t}function Or(n,t){n.forEach(e=>Array.isArray(e)?Or(e,t):t(e))}function ov(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Bc(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Ha(n,t){const e=[];for(let i=0;i<n;i++)e.push(t);return e}function mi(n,t,e){let i=Rs(n,t);return i>=0?n[1|i]=e:(i=~i,function aI(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(1===r)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;)n[r]=n[r-2],r--;n[t]=e,n[t+1]=i}}(n,i,t,e)),i}function Jh(n,t){const e=Rs(n,t);if(e>=0)return n[1|e]}function Rs(n,t){return function lv(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}(n,t,1)}const ja={},tf="__NG_DI_FLAG__",Vc="ngTempTokenPath",mI=/\n/gm,cv="__source";let za;function Os(n){const t=za;return za=n,t}function _I(n,t=je.Default){if(void 0===za)throw new de(-203,!1);return null===za?wy(n,void 0,t):za.get(n,t&je.Optional?null:void 0,t)}function se(n,t=je.Default){return(function lk(){return Sh}()||_I)(Ye(n),t)}function Vt(n,t=je.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),se(n,t)}function nf(n){const t=[];for(let e=0;e<n.length;e++){const i=Ye(n[e]);if(Array.isArray(i)){if(0===i.length)throw new de(900,!1);let r,o=je.Default;for(let s=0;s<i.length;s++){const a=i[s],c=yI(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}t.push(se(r,o))}else t.push(se(i))}return t}function $a(n,t){return n[tf]=t,n.prototype[tf]=t,n}function yI(n){return n[tf]}const so=$a(As("Optional"),8),Ps=$a(As("SkipSelf"),4);let sf,zc;function Ns(n){return function af(){if(void 0===zc&&(zc=null,jt.trustedTypes))try{zc=jt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zc}()?.createHTML(n)||n}class No{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class OI extends No{getTypeName(){return"HTML"}}class PI extends No{getTypeName(){return"Style"}}class FI extends No{getTypeName(){return"Script"}}class NI extends No{getTypeName(){return"URL"}}class LI extends No{getTypeName(){return"ResourceURL"}}function gi(n){return n instanceof No?n.changingThisBreaksApplicationSecurity:n}function _r(n,t){const e=function BI(n){return n instanceof No&&n.getTypeName()||null}(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class $I{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ns(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class GI{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ns(t),e;const i=this.inertDocument.createElement("body");return i.innerHTML=Ns(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const s=e.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&t.removeAttribute(s)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const WI=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Gc(n){return(n=String(n)).match(WI)?n:"unsafe:"+n}function Pr(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function Wa(...n){const t={};for(const e of n)for(const i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}const Cv=Pr("area,br,col,hr,img,wbr"),Dv=Pr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Sv=Pr("rp,rt"),cf=Wa(Cv,Wa(Dv,Pr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wa(Sv,Pr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wa(Sv,Dv)),uf=Pr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xv=Wa(uf,Pr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Pr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),YI=Pr("script,style,template");class XI{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!cf.hasOwnProperty(e))return this.sanitizedSomething=!0,!YI.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=t.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!xv.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;uf[a]&&(c=Gc(c)),this.buf.push(" ",s,'="',Mv(c),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();cf.hasOwnProperty(e)&&!Cv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Mv(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const KI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ZI=/([^\#-~ |!])/g;function Mv(n){return n.replace(/&/g,"&amp;").replace(KI,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ZI,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qc;function Tv(n,t){let e=null;try{qc=qc||function Ev(n){const t=new GI(n);return function qI(){try{return!!(new window.DOMParser).parseFromString(Ns(""),"text/html")}catch{return!1}}()?new $I(t):t}(n);let i=t?String(t):"";e=qc.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=qc.getInertBodyElement(i)}while(i!==o);return Ns((new XI).sanitizeChildren(df(e)||e))}finally{if(e){const i=df(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function df(n){return"content"in n&&function QI(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var kt=(()=>((kt=kt||{})[kt.NONE=0]="NONE",kt[kt.HTML=1]="HTML",kt[kt.STYLE=2]="STYLE",kt[kt.SCRIPT=3]="SCRIPT",kt[kt.URL=4]="URL",kt[kt.RESOURCE_URL=5]="RESOURCE_URL",kt))();const ff=new ve("ENVIRONMENT_INITIALIZER"),Iv=new ve("INJECTOR",-1),Av=new ve("INJECTOR_DEF_TYPES");class Rv{get(t,e=ja){if(e===ja){const i=new Error(`NullInjectorError: No provider for ${Ut(t)}!`);throw i.name="NullInjectorError",i}return e}}function sA(...n){return{\u0275providers:Ov(0,n)}}function Ov(n,...t){const e=[],i=new Set;let r;return Or(t,o=>{const s=o;pf(s,e,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&Pv(r,e),e}function Pv(n,t){for(let e=0;e<n.length;e++){const{providers:r}=n[e];Or(r,o=>{t.push(o)})}}function pf(n,t,e,i){if(!(n=Ye(n)))return!1;let r=null,o=vy(n);const s=!o&&Rt(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=vy(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of c)pf(d,t,e,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;i.add(r);try{Or(o.imports,p=>{pf(p,t,e,i)&&(d||(d=[]),d.push(p))})}finally{}void 0!==d&&Pv(d,t)}if(!a){const d=Po(r)||(()=>new r);t.push({provide:r,useFactory:d,deps:Tt},{provide:Av,useValue:r,multi:!0},{provide:ff,useValue:()=>se(r),multi:!0})}const c=o.providers;null==c||a||Or(c,p=>{t.push(p)})}}return r!==n&&void 0!==n.providers}const aA=Bt({provide:String,useValue:Bt});function mf(n){return null!==n&&"object"==typeof n&&aA in n}function Lo(n){return"function"==typeof n}const gf=new ve("Set Injector scope."),Wc={},cA={};let _f;function Yc(){return void 0===_f&&(_f=new Rv),_f}class ao{}class Lv extends ao{constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vf(t,s=>this.processProvider(s)),this.records.set(Iv,Ls(void 0,this)),r.has("environment")&&this.records.set(ao,Ls(void 0,this));const o=this.records.get(gf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Av.multi,Tt,je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Os(this),i=Ti(void 0);try{return t()}finally{Os(e),Ti(i)}}get(t,e=ja,i=je.Default){this.assertNotDestroyed();const r=Os(this),o=Ti(void 0);try{if(!(i&je.SkipSelf)){let a=this.records.get(t);if(void 0===a){const c=function pA(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(t)&&vc(t);a=c&&this.injectableDefInScope(c)?Ls(yf(t),Wc):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(i&je.Self?Yc():this.parent).get(t,e=i&je.Optional&&e===ja?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[Vc]=s[Vc]||[]).unshift(Ut(t)),r)throw s;return function vI(n,t,e,i){const r=n[Vc];throw t[cv]&&r.unshift(t[cv]),n.message=function bI(n,t,e,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ut(t);if(Array.isArray(t))r=t.map(Ut).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ut(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(mI,"\n  ")}`}("\n"+n.message,r,e,i),n.ngTokenPath=r,n[Vc]=null,n}(s,t,"R3InjectorError",this.source)}throw s}finally{Ti(o),Os(r)}}resolveInjectorInitializers(){const t=Os(this),e=Ti(void 0);try{const i=this.get(ff.multi,Tt,je.Self);for(const r of i)r()}finally{Os(t),Ti(e)}}toString(){const t=[],e=this.records;for(const i of e.keys())t.push(Ut(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(t){let e=Lo(t=Ye(t))?t:Ye(t&&t.provide);const i=function dA(n){return mf(n)?Ls(void 0,n.useValue):Ls(Bv(n),Wc)}(t);if(Lo(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Ls(void 0,Wc,!0),r.factory=()=>nf(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){return e.value===Wc&&(e.value=cA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function fA(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Ye(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function yf(n){const t=vc(n),e=null!==t?t.factory:Po(n);if(null!==e)return e;if(n instanceof ve)throw new de(204,!1);if(n instanceof Function)return function uA(n){const t=n.length;if(t>0)throw Ha(t,"?"),new de(204,!1);const e=function ok(n){const t=n&&(n[bc]||n[by]);if(t){const e=function sk(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new de(204,!1)}function Bv(n,t,e){let i;if(Lo(n)){const r=Ye(n);return Po(r)||yf(r)}if(mf(n))i=()=>Ye(n.useValue);else if(function Nv(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...nf(n.deps||[]));else if(function Fv(n){return!(!n||!n.useExisting)}(n))i=()=>se(Ye(n.useExisting));else{const r=Ye(n&&(n.useClass||n.provide));if(!function hA(n){return!!n.deps}(n))return Po(r)||yf(r);i=()=>new r(...nf(n.deps))}return i}function Ls(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function mA(n){return!!n.\u0275providers}function vf(n,t){for(const e of n)Array.isArray(e)?vf(e,t):mA(e)?vf(e.\u0275providers,t):t(e)}class Uv{}class yA{resolveComponentFactory(t){throw function _A(n){const t=Error(`No component factory found for ${Ut(n)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=n,t}(t)}}let Bo=(()=>{class n{}return n.NULL=new yA,n})();function vA(){return Bs(bn(),me())}function Bs(n,t){return new lt(Ai(n,t))}let lt=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=vA,n})();function bA(n){return n instanceof lt?n.nativeElement:n}class Xa{}let Fr=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function wA(){const n=me(),e=fi(bn().index,n);return(ri(e)?e:n)[11]}(),n})(),EA=(()=>{class n{}return n.\u0275prov=xe({token:n,providedIn:"root",factory:()=>null}),n})();class Uo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const CA=new Uo("14.2.4"),bf={};function Sf(n){return n.ngOriginalError}class Nr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Sf(t);for(;e&&Sf(e);)e=Sf(e);return e||null}}const xf=new Map;let FA=0;const Tf="__ngContext__";function Ln(n,t){ri(t)?(n[Tf]=t[20],function LA(n){xf.set(n[20],n)}(t)):n[Tf]=t}function Lr(n){return n instanceof Function?n():n}var oi=(()=>((oi=oi||{})[oi.Important=1]="Important",oi[oi.DashCase=2]="DashCase",oi))();function If(n,t){return undefined(n,t)}function Za(n){const t=n[3];return Zi(t)?t[3]:t}function Af(n){return eb(n[13])}function Rf(n){return eb(n[4])}function eb(n){for(;null!==n&&!Zi(n);)n=n[4];return n}function Vs(n,t,e,i,r){if(null!=i){let o,s=!1;Zi(i)?o=i:ri(i)&&(s=!0,i=i[0]);const a=fn(i);0===n&&null!==e?null==r?sb(t,e,a):Vo(t,e,a,r||null,!0):1===n&&null!==e?Vo(t,e,a,r||null,!0):2===n?function fb(n,t,e){const i=Xc(n,t);i&&function uR(n,t,e,i){n.removeChild(t,e,i)}(n,i,t,e)}(t,a,s):3===n&&t.destroyNode(a),null!=o&&function fR(n,t,e,i,r){const o=e[7];o!==fn(e)&&Vs(t,n,i,o,r);for(let a=10;a<e.length;a++){const c=e[a];Qa(c[1],c,n,t,i,o)}}(t,n,o,e,r)}}function Pf(n,t,e){return n.createElement(t,e)}function nb(n,t){const e=n[9],i=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Nh(r,-1)),e.splice(i,1)}function Ff(n,t){if(n.length<=10)return;const e=10+t,i=n[e];if(i){const r=i[17];null!==r&&r!==n&&nb(r,i),t>0&&(n[e-1][4]=i[4]);const o=Bc(n,10+t);!function nR(n,t){Qa(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function ib(n,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&Qa(n,t,e,3,null,null),function oR(n){let t=n[13];if(!t)return Nf(n[1],n);for(;t;){let e=null;if(ri(t))e=t[13];else{const i=t[10];i&&(e=i)}if(!e){for(;t&&!t[4]&&t!==n;)ri(t)&&Nf(t[1],t),t=t[3];null===t&&(t=n),ri(t)&&Nf(t[1],t),e=t&&t[4]}t=e}}(t)}}function Nf(n,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function cR(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let i=0;i<e.length;i+=2){const r=t[e[i]];if(!(r instanceof Fa)){const o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];try{c.call(a)}finally{}}else try{o.call(r)}finally{}}}}(n,t),function lR(n,t){const e=n.cleanup,i=t[7];let r=-1;if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+1],a="function"==typeof s?s(t):fn(t[s]),c=i[r=e[o+2]],d=e[o+3];"boolean"==typeof d?a.removeEventListener(e[o],c,d):d>=0?i[r=d]():i[r=-d].unsubscribe(),o+=2}else{const s=i[r=e[o+1]];e[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();t[7]=null}}(n,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Zi(t[3])){e!==t[3]&&nb(e,t);const i=t[19];null!==i&&i.detachView(n)}!function BA(n){xf.delete(n[20])}(t)}}function rb(n,t,e){return function ob(n,t,e){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return e[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===Xi.None||r===Xi.Emulated)return null}return Ai(i,e)}(n,t.parent,e)}function Vo(n,t,e,i,r){n.insertBefore(t,e,i,r)}function sb(n,t,e){n.appendChild(t,e)}function ab(n,t,e,i,r){null!==i?Vo(n,t,e,i,r):sb(n,t,e)}function Xc(n,t){return n.parentNode(t)}function lb(n,t,e){return ub(n,t,e)}let ub=function cb(n,t,e){return 40&n.type?Ai(n,e):null};function Kc(n,t,e,i){const r=rb(n,i,t),o=t[11],a=lb(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(e))for(let c=0;c<e.length;c++)ab(o,r,e[c],a,!1);else ab(o,r,e,a,!1)}function Zc(n,t){if(null!==t){const e=t.type;if(3&e)return Ai(t,n);if(4&e)return Bf(-1,n[t.index]);if(8&e){const i=t.child;if(null!==i)return Zc(n,i);{const r=n[t.index];return Zi(r)?Bf(-1,r):fn(r)}}if(32&e)return If(t,n)()||fn(n[t.index]);{const i=hb(n,t);return null!==i?Array.isArray(i)?i[0]:Zc(Za(n[16]),i):Zc(n,t.next)}}return null}function hb(n,t){return null!==t?n[16][6].projection[t.projection]:null}function Bf(n,t){const e=10+n+1;if(e<t.length){const i=t[e],r=i[1].firstChild;if(null!==r)return Zc(i,r)}return t[7]}function Uf(n,t,e,i,r,o,s){for(;null!=e;){const a=i[e.index],c=e.type;if(s&&0===t&&(a&&Ln(fn(a),i),e.flags|=4),64!=(64&e.flags))if(8&c)Uf(n,t,e.child,i,r,o,!1),Vs(t,n,r,a,o);else if(32&c){const d=If(e,i);let p;for(;p=d();)Vs(t,n,r,p,o);Vs(t,n,r,a,o)}else 16&c?pb(n,t,i,e,r,o):Vs(t,n,r,a,o);e=s?e.projectionNext:e.next}}function Qa(n,t,e,i,r,o){Uf(e,i,n.firstChild,t,r,o,!1)}function pb(n,t,e,i,r,o){const s=e[16],c=s[6].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Vs(t,n,r,c[d],o);else Uf(n,t,c,s[3],r,o,!0)}function mb(n,t,e){n.setAttribute(t,"style",e)}function Vf(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function gb(n,t,e){let i=n.length;for(;;){const r=n.indexOf(t,e);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}const _b="ng-template";function mR(n,t,e){let i=0;for(;i<n.length;){let r=n[i++];if(e&&"class"===r){if(r=n[i],-1!==gb(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function yb(n){return 4===n.type&&n.value!==_b}function gR(n,t,e){return t===(4!==n.type||e?n.value:_b)}function _R(n,t,e){let i=4;const r=n.attrs||[],o=function bR(n){for(let t=0;t<n.length;t++)if(Gy(n[t]))return t;return n.length}(r);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!gR(n,c,e)||""===c&&1===t.length){if(Ji(i))return!1;s=!0}}else{const d=8&i?c:t[++a];if(8&i&&null!==n.attrs){if(!mR(n.attrs,d,e)){if(Ji(i))return!1;s=!0}continue}const g=yR(8&i?"class":c,r,yb(n),e);if(-1===g){if(Ji(i))return!1;s=!0;continue}if(""!==d){let E;E=g>o?"":r[g+1].toLowerCase();const S=8&i?E:null;if(S&&-1!==gb(S,d,0)||2&i&&d!==E){if(Ji(i))return!1;s=!0}}}}else{if(!s&&!Ji(i)&&!Ji(c))return!1;if(s&&Ji(c))continue;s=!1,i=c|1&i}}return Ji(i)||s}function Ji(n){return 0==(1&n)}function yR(n,t,e,i){if(null===t)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){const s=t[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function wR(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const i=n[e];if("number"==typeof i)return-1;if(i===t)return e;e++}return-1}(t,n)}function vb(n,t,e=!1){for(let i=0;i<t.length;i++)if(_R(n,t[i],e))return!0;return!1}function ER(n,t){e:for(let e=0;e<t.length;e++){const i=t[e];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function bb(n,t){return n?":not("+t.trim()+")":t}function CR(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if("string"==typeof s)if(2&i){const a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Ji(s)&&(t+=bb(o,r),r=""),i=s,o=o||!Ji(i);e++}return""!==r&&(t+=bb(o,r)),t}const nt={};function Le(n){wb(bt(),me(),Xn()+n,!1)}function wb(n,t,e,i){if(!i)if(3==(3&t[2])){const o=n.preOrderCheckHooks;null!==o&&Ic(t,o,e)}else{const o=n.preOrderHooks;null!==o&&Ac(t,o,0,e)}ro(e)}function Sb(n,t=null,e=null,i){const r=xb(n,t,e,i);return r.resolveInjectorInitializers(),r}function xb(n,t=null,e=null,i,r=new Set){const o=[e||Tt,sA(n)];return i=i||("object"==typeof n?void 0:Ut(n)),new Lv(o,t||Yc(),i||null,r)}let Zn=(()=>{class n{static create(e,i){if(Array.isArray(e))return Sb({name:""},i,e,"");{const r=e.name??"";return Sb({name:r},e.parent,e.providers,r)}}}return n.THROW_IF_NOT_FOUND=ja,n.NULL=new Rv,n.\u0275prov=xe({token:n,providedIn:"any",factory:()=>se(Iv)}),n.__NG_ELEMENT_ID__=-1,n})();function V(n,t=je.Default){const e=me();return null===e?se(n,t):Jy(bn(),e,Ye(n),t)}function Ja(){throw new Error("invalid")}function Jc(n,t){return n<<17|t<<2}function er(n){return n>>17&32767}function Gf(n){return 2|n}function Br(n){return(131068&n)>>2}function qf(n,t){return-131069&n|t<<2}function Wf(n){return 1|n}function zb(n,t){const e=n.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],o=e[i+1];if(-1!==o){const s=n.data[o];Hh(r),s.contentQueries(2,t[o],o)}}}function nu(n,t,e,i,r,o,s,a,c,d,p){const g=t.blueprint.slice();return g[0]=r,g[2]=76|i,(null!==p||n&&1024&n[2])&&(g[2]|=1024),Ay(g),g[3]=g[15]=n,g[8]=e,g[10]=s||n&&n[10],g[11]=a||n&&n[11],g[12]=c||n&&n[12]||null,g[9]=d||n&&n[9]||null,g[6]=o,g[20]=function NA(){return FA++}(),g[21]=p,g[16]=2==t.type?n[16]:g,g}function js(n,t,e,i,r){let o=n.data[t];if(null===o)o=function tp(n,t,e,i,r){const o=Py(),s=Lh(),c=n.data[t]=function oO(n,t,e,i,r,o){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c)),c}(n,t,e,i,r),function Fk(){return Je.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=e,o.value=i,o.attrs=r;const s=function Pa(){const n=Je.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return pr(o,!0),o}function zs(n,t,e,i){if(0===e)return-1;const r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function np(n,t,e){jh(t);try{const i=n.viewQuery;null!==i&&up(1,i,e);const r=n.template;null!==r&&$b(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zb(n,t),n.staticViewQueries&&up(2,n.viewQuery,e);const o=n.components;null!==o&&function nO(n,t){for(let e=0;e<t.length;e++)wO(n,t[e])}(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[2]&=-5,zh()}}function iu(n,t,e,i){const r=t[2];if(128!=(128&r)){jh(t);try{Ay(t),function Ny(n){return Je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&$b(n,t,e,2,i);const s=3==(3&r);if(s){const d=n.preOrderCheckHooks;null!==d&&Ic(t,d,null)}else{const d=n.preOrderHooks;null!==d&&Ac(t,d,0,null),Gh(t,0)}if(function vO(n){for(let t=Af(n);null!==t;t=Rf(t)){if(!t[2])continue;const e=t[9];for(let i=0;i<e.length;i++){const r=e[i],o=r[3];0==(512&r[2])&&Nh(o,1),r[2]|=512}}}(t),function yO(n){for(let t=Af(n);null!==t;t=Rf(t))for(let e=10;e<t.length;e++){const i=t[e],r=i[1];Tc(i)&&iu(r,i,r.template,i[8])}}(t),null!==n.contentQueries&&zb(n,t),s){const d=n.contentCheckHooks;null!==d&&Ic(t,d)}else{const d=n.contentHooks;null!==d&&Ac(t,d,1),Gh(t,1)}!function eO(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)ro(~r);else{const o=r,s=e[++i],a=e[++i];Nk(s,o),a(2,t[o])}}}finally{ro(-1)}}(n,t);const a=n.components;null!==a&&function tO(n,t){for(let e=0;e<t.length;e++)bO(n,t[e])}(t,a);const c=n.viewQuery;if(null!==c&&up(2,c,i),s){const d=n.viewCheckHooks;null!==d&&Ic(t,d)}else{const d=n.viewHooks;null!==d&&Ac(t,d,2),Gh(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Nh(t[3],-1))}finally{zh()}}}function $b(n,t,e,i,r){const o=Xn(),s=2&i;try{ro(-1),s&&t.length>22&&wb(n,t,22,!1),e(i,r)}finally{ro(o)}}function ip(n,t,e){!Oy()||(function uO(n,t,e,i){const r=e.directiveStart,o=e.directiveEnd;n.firstCreatePass||La(e,t),Ln(i,t);const s=e.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],d=Qi(c);d&&mO(t,e,c);const p=Ba(t,n,a,e);Ln(p,t),null!==s&&gO(0,a-r,p,c,0,s),d&&(fi(e.index,t)[8]=p)}}(n,t,e,Ai(e,t)),128==(128&e.flags)&&function dO(n,t,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function Lk(){return Je.lFrame.currentDirectiveIndex}();try{ro(o);for(let a=i;a<r;a++){const c=n.data[a],d=t[a];Uh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Qb(c,d)}}finally{ro(-1),Uh(s)}}(n,t,e))}function rp(n,t,e=Ai){const i=t.localNames;if(null!==i){let r=t.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?e(t,n):n[s];n[r++]=a}}}function qb(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=op(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function op(n,t,e,i,r,o,s,a,c,d){const p=22+i,g=p+r,E=function iO(n,t){const e=[];for(let i=0;i<t;i++)e.push(i<n?null:nt);return e}(p,g),S="function"==typeof d?d():d;return E[1]={type:n,blueprint:E,template:e,queries:null,viewQuery:a,declTNode:t,data:E.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1}}function Wb(n,t,e,i){const r=r0(t);null===e?r.push(i):(r.push(e),n.firstCreatePass&&o0(n).push(i,r.length-1))}function Yb(n,t,e){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(t,r):e[i]=[t,r]}return e}function Xb(n,t){const i=t.directiveEnd,r=n.data,o=t.attrs,s=[];let a=null,c=null;for(let d=t.directiveStart;d<i;d++){const p=r[d],g=p.inputs,E=null===o||yb(t)?null:_O(g,o);s.push(E),a=Yb(g,d,a),c=Yb(p.outputs,d,c)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=c}function _i(n,t,e,i,r,o,s,a){const c=Ai(t,e);let p,d=t.inputs;!a&&null!=d&&(p=d[i])?(dp(n,e,p,i,r),Sc(t)&&Kb(e,t.index)):3&t.type&&(i=function sO(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,t.value||"",i):r,o.setProperty(c,i,r))}function Kb(n,t){const e=fi(t,n);16&e[2]||(e[2]|=32)}function sp(n,t,e,i){let r=!1;if(Oy()){const o=function hO(n,t,e){const i=n.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];vb(e,s.selectors,!1)&&(r||(r=[]),Nc(La(e,t),n,s.type),Qi(s)?(Jb(n,e),r.unshift(s)):r.push(s))}return r}(n,t,e),s=null===i?null:{"":-1};if(null!==o){r=!0,e0(e,n.data.length,o.length);for(let p=0;p<o.length;p++){const g=o[p];g.providersResolver&&g.providersResolver(g)}let a=!1,c=!1,d=zs(n,t,o.length,null);for(let p=0;p<o.length;p++){const g=o[p];e.mergedAttrs=Oc(e.mergedAttrs,g.hostAttrs),t0(n,e,t,d,g),pO(d,g,s),null!==g.contentQueries&&(e.flags|=8),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(e.flags|=128);const E=g.type.prototype;!a&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),a=!0),!c&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),c=!0),d++}Xb(n,e)}s&&function fO(n,t,e){if(t){const i=n.localNames=[];for(let r=0;r<t.length;r+=2){const o=e[t[r+1]];if(null==o)throw new de(-301,!1);i.push(t[r],o)}}}(e,i,s)}return e.mergedAttrs=Oc(e.mergedAttrs,e.attrs),r}function Zb(n,t,e,i,r,o){const s=o.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~t.index;(function cO(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=c&&a.push(c),a.push(i,r,s)}}function Qb(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Jb(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function pO(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Qi(t)&&(e[""]=n)}}function e0(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function t0(n,t,e,i,r){n.data[i]=r;const o=r.factory||(r.factory=Po(r.type)),s=new Fa(o,Qi(r),V);n.blueprint[i]=s,e[i]=s,Zb(n,t,0,i,zs(n,e,r.hostVars,nt),r)}function mO(n,t,e){const i=Ai(t,n),r=qb(e),o=n[10],s=ru(n,nu(n,r,null,e.onPush?32:16,i,t,o,o.createRenderer(i,e),null,null,null));n[t.index]=s}function yr(n,t,e,i,r,o){const s=Ai(n,t);!function ap(n,t,e,i,r,o,s){if(null==o)n.removeAttribute(t,r,e);else{const a=null==s?tt(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}(t[11],s,o,n.value,e,i,r)}function gO(n,t,e,i,r,o){const s=o[t];if(null!==s){const a=i.setInput;for(let c=0;c<s.length;){const d=s[c++],p=s[c++],g=s[c++];null!==a?i.setInput(e,g,d,p):e[p]=g}}}function _O(n,t){let e=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,n[r],t[i+1])),i+=2}else i+=2;else i+=4}return e}function n0(n,t,e,i){return new Array(n,!0,!1,t,null,0,i,e,null,null)}function bO(n,t){const e=fi(t,n);if(Tc(e)){const i=e[1];48&e[2]?iu(i,e,i.template,e[8]):e[5]>0&&lp(e)}}function lp(n){for(let i=Af(n);null!==i;i=Rf(i))for(let r=10;r<i.length;r++){const o=i[r];if(Tc(o))if(512&o[2]){const s=o[1];iu(s,o,s.template,o[8])}else o[5]>0&&lp(o)}const e=n[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=fi(e[i],n);Tc(r)&&r[5]>0&&lp(r)}}function wO(n,t){const e=fi(t,n),i=e[1];(function EO(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(i,e),np(i,e,e[8])}function ru(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function cp(n){for(;n;){n[2]|=32;const t=Za(n);if(mk(n)&&!t)return n;n=t}return null}function ou(n,t,e,i=!0){const r=t[10];r.begin&&r.begin();try{iu(n,t,n.template,e)}catch(s){throw i&&a0(t,s),s}finally{r.end&&r.end()}}function up(n,t,e){Hh(0),t(n,e)}function r0(n){return n[7]||(n[7]=[])}function o0(n){return n.cleanup||(n.cleanup=[])}function a0(n,t){const e=n[9],i=e?e.get(Nr,null):null;i&&i.handleError(t)}function dp(n,t,e,i,r){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],c=t[s],d=n.data[s];null!==d.setInput?d.setInput(c,r,i,a):c[a]=r}}function su(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=Eh(r,a):2==o&&(i=Eh(i,a+": "+t[++s]+";"))}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function au(n,t,e,i,r=!1){for(;null!==e;){const o=t[e.index];if(null!==o&&i.push(fn(o)),Zi(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1].firstChild;null!==d&&au(c[1],c,d,i)}const s=e.type;if(8&s)au(n,t,e.child,i);else if(32&s){const a=If(e,t);let c;for(;c=a();)i.push(c)}else if(16&s){const a=hb(t,e);if(Array.isArray(a))i.push(...a);else{const c=Za(t[16]);au(c[1],c,a,i,!0)}}e=r?e.projectionNext:e.next}return i}class el{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return au(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Zi(t)){const e=t[8],i=e?e.indexOf(this):-1;i>-1&&(Ff(t,i),Bc(e,i))}this._attachedToViewContainer=!1}ib(this._lView[1],this._lView)}onDestroy(t){Wb(this._lView[1],this._lView,null,t)}markForCheck(){cp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ou(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rR(n,t){Qa(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=t}}class CO extends el{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;ou(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class hp extends Bo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Rt(t);return new tl(e,this.ngModule)}}function l0(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}class SO{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){const r=this.injector.get(t,bf,i);return r!==bf||e===bf?r:this.parentInjector.get(t,e,i)}}class tl extends Uv{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function DR(n){return n.map(CR).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return l0(this.componentDef.inputs)}get outputs(){return l0(this.componentDef.outputs)}create(t,e,i,r){let o=(r=r||this.ngModule)instanceof ao?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new SO(t,o):t,a=s.get(Xa,null);if(null===a)throw new de(407,!1);const c=s.get(EA,null),d=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?function rO(n,t,e){return n.selectRootElement(t,e===Xi.ShadowDom)}(d,i,this.componentDef.encapsulation):Pf(a.createRenderer(null,this.componentDef),p,function DO(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(p)),E=this.componentDef.onPush?288:272,S=op(0,null,null,1,0,null,null,null,null,null),R=nu(null,S,null,E,null,null,a,d,c,s,null);let G,te;jh(R);try{const le=function TO(n,t,e,i,r,o){const s=e[1];e[22]=n;const c=js(s,22,2,"#host",null),d=c.mergedAttrs=t.hostAttrs;null!==d&&(su(c,d,!0),null!==n&&(Rc(r,n,d),null!==c.classes&&Vf(r,n,c.classes),null!==c.styles&&mb(r,n,c.styles)));const p=i.createRenderer(n,t),g=nu(e,qb(t),null,t.onPush?32:16,e[22],c,i,p,o||null,null,null);return s.firstCreatePass&&(Nc(La(c,e),s,t.type),Jb(s,c),e0(c,e.length,1)),ru(e,g),e[22]=g}(g,this.componentDef,R,a,d);if(g)if(i)Rc(d,g,["ng-version",CA.full]);else{const{attrs:_e,classes:oe}=function SR(n){const t=[],e=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&t.push(o,n[++i]):8===r&&e.push(o);else{if(!Ji(r))break;r=o}i++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);_e&&Rc(d,g,_e),oe&&oe.length>0&&Vf(d,g,oe.join(" "))}if(te=Fh(S,22),void 0!==e){const _e=te.projection=[];for(let oe=0;oe<this.ngContentSelectors.length;oe++){const Se=e[oe];_e.push(null!=Se?Array.from(Se):null)}}G=function kO(n,t,e,i){const r=e[1],o=function lO(n,t,e){const i=bn();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),t0(n,i,t,zs(n,t,1,null),e),Xb(n,i));const r=Ba(t,n,i.directiveStart,i);Ln(r,t);const o=Ai(i,t);return o&&Ln(o,t),r}(r,e,t);if(n[8]=e[8]=o,null!==i)for(const a of i)a(o,t);if(t.contentQueries){const a=bn();t.contentQueries(1,o,a.directiveStart)}const s=bn();return!r.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ro(s.index),Zb(e[1],s,0,s.directiveStart,s.directiveEnd,t),Qb(t,o)),o}(le,this.componentDef,R,[IO]),np(S,R,null)}finally{zh()}return new MO(this.componentType,G,Bs(te,R),R,te)}}class MO extends class gA{}{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=e,this.hostView=this.changeDetectorRef=new CO(r),this.componentType=t}setInput(t,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const o=this._rootLView;dp(o[1],o,r,t,e),Kb(o,this._tNode.index)}}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function IO(){const n=bn();kc(me()[1],n)}function ze(n){let t=function c0(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const i=[n];for(;t;){let r;if(Qi(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new de(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);const s=n;s.inputs=fp(n.inputs),s.declaredInputs=fp(n.declaredInputs),s.outputs=fp(n.outputs);const a=r.hostBindings;a&&PO(n,a);const c=r.viewQuery,d=r.contentQueries;if(c&&RO(n,c),d&&OO(n,d),wh(n.inputs,r.inputs),wh(n.declaredInputs,r.declaredInputs),wh(n.outputs,r.outputs),Qi(r)&&r.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===ze&&(e=!1)}}t=Object.getPrototypeOf(t)}!function AO(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Oc(r.hostAttrs,e=Oc(e,r.hostAttrs))}}(i)}function fp(n){return n===gs?{}:n===Tt?[]:n}function RO(n,t){const e=n.viewQuery;n.viewQuery=e?(i,r)=>{t(i,r),e(i,r)}:t}function OO(n,t){const e=n.contentQueries;n.contentQueries=e?(i,r,o)=>{t(i,r,o),e(i,r,o)}:t}function PO(n,t){const e=n.hostBindings;n.hostBindings=e?(i,r)=>{t(i,r),e(i,r)}:t}let lu=null;function Ho(){if(!lu){const n=jt.Symbol;if(n&&n.iterator)lu=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const i=t[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(lu=i)}}}return lu}function nl(n){return!!pp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ho()in n)}function pp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Bn(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Ct(n,t,e,i){const r=me();return Bn(r,Ds(),t)&&(bt(),yr(sn(),r,n,t,e,i)),Ct}function xn(n,t,e,i,r,o,s,a){const c=me(),d=bt(),p=n+22,g=d.firstCreatePass?function jO(n,t,e,i,r,o,s,a,c){const d=t.consts,p=js(t,n,4,s||null,io(d,a));sp(t,e,p,io(d,c)),kc(t,p);const g=p.tViews=op(2,p,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d);return null!==t.queries&&(t.queries.template(t,p),g.queries=t.queries.embeddedTView(p)),p}(p,d,c,t,e,i,r,o,s):d.data[p];pr(g,!1);const E=c[11].createComment("");Kc(d,c,E,g),Ln(E,c),ru(c,c[p]=n0(E,c,E,g)),xc(g)&&ip(d,c,g),null!=s&&rp(c,g,a)}function Vr(n){return function ws(n,t){return n[t]}(function Pk(){return Je.lFrame.contextLView}(),22+n)}function Xe(n,t,e){const i=me();return Bn(i,Ds(),t)&&_i(bt(),sn(),i,n,t,i[11],e,!1),Xe}function mp(n,t,e,i,r){const s=r?"class":"style";dp(n,e,t.inputs[s],s,i)}function Ie(n,t,e,i){const r=me(),o=bt(),s=22+n,a=r[11],c=r[s]=Pf(a,t,function zk(){return Je.lFrame.currentNamespace}()),d=o.firstCreatePass?function $O(n,t,e,i,r,o,s){const a=t.consts,d=js(t,n,2,r,io(a,o));return sp(t,e,d,io(a,s)),null!==d.attrs&&su(d,d.attrs,!1),null!==d.mergedAttrs&&su(d,d.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,d),d}(s,o,r,0,t,e,i):o.data[s];pr(d,!0);const p=d.mergedAttrs;null!==p&&Rc(a,c,p);const g=d.classes;null!==g&&Vf(a,c,g);const E=d.styles;return null!==E&&mb(a,c,E),64!=(64&d.flags)&&Kc(o,r,c,d),0===function kk(){return Je.lFrame.elementDepthCount}()&&Ln(c,r),function Ik(){Je.lFrame.elementDepthCount++}(),xc(d)&&(ip(o,r,d),function Gb(n,t,e){if(Ih(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,e[o],o)}}}(o,d,r)),null!==i&&rp(r,d),Ie}function Oe(){let n=bn();Lh()?Bh():(n=n.parent,pr(n,!1));const t=n;!function Ak(){Je.lFrame.elementDepthCount--}();const e=bt();return e.firstCreatePass&&(kc(e,n),Ih(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function Yk(n){return 0!=(16&n.flags)}(t)&&mp(e,t,me(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Xk(n){return 0!=(32&n.flags)}(t)&&mp(e,t,me(),t.stylesWithoutHost,!1),Oe}function ct(n,t,e,i){return Ie(n,t,e,i),Oe(),ct}function yp(){return me()}function rl(n){return!!n&&"function"==typeof n.then}const vp=function b0(n){return!!n&&"function"==typeof n.subscribe};function Dt(n,t,e,i){const r=me(),o=bt(),s=bn();return function E0(n,t,e,i,r,o,s,a){const c=xc(i),p=n.firstCreatePass&&o0(n),g=t[8],E=r0(t);let S=!0;if(3&i.type||a){const te=Ai(i,t),le=a?a(te):te,_e=E.length,oe=a?ot=>a(fn(ot[i.index])):i.index;let Se=null;if(!a&&c&&(Se=function qO(n,t,e,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===e&&r[o+1]===i){const a=t[7],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,t,r,i.index)),null!==Se)(Se.__ngLastListenerFn__||Se).__ngNextListenerFn__=o,Se.__ngLastListenerFn__=o,S=!1;else{o=D0(i,t,g,o,!1);const ot=e.listen(le,r,o);E.push(o,ot),p&&p.push(r,oe,_e,_e+1)}}else o=D0(i,t,g,o,!1);const R=i.outputs;let G;if(S&&null!==R&&(G=R[r])){const te=G.length;if(te)for(let le=0;le<te;le+=2){const yt=t[G[le]][G[le+1]].subscribe(o),tn=E.length;E.push(o,yt),p&&p.push(r,i.index,tn,-(tn+1))}}}(o,r,r[11],s,n,t,0,i),Dt}function C0(n,t,e,i){try{return!1!==e(i)}catch(r){return a0(n,r),!1}}function D0(n,t,e,i,r){return function o(s){if(s===Function)return i;cp(2&n.flags?fi(n.index,t):t);let c=C0(t,0,i,s),d=o.__ngNextListenerFn__;for(;d;)c=C0(t,0,d,s)&&c,d=d.__ngNextListenerFn__;return r&&!1===c&&(s.preventDefault(),s.returnValue=!1),c}}function Un(n=1){return function Uk(n){return(Je.lFrame.contextLView=function Vk(n,t){for(;n>0;)t=t[15],n--;return t}(n,Je.lFrame.contextLView))[8]}(n)}function WO(n,t){let e=null;const i=function vR(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===i?vb(n,o,!0):ER(i,o))return r}else e=r}return e}function tr(n){const t=me()[16][6];if(!t.projection){const i=t.projection=Ha(n?n.length:1,null),r=i.slice();let o=t.child;for(;null!==o;){const s=n?WO(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Vn(n,t=0,e){const i=me(),r=bt(),o=js(r,22+n,16,null,e||null);null===o.projection&&(o.projection=t),Bh(),64!=(64&o.flags)&&function hR(n,t,e){pb(t[11],0,t,e,rb(n,e,t),lb(e.parent||t[6],e,t))}(r,i,o)}function P0(n,t,e,i,r){const o=n[e+1],s=null===t;let a=i?er(o):Br(o),c=!1;for(;0!==a&&(!1===c||s);){const p=n[a+1];KO(n[a],t)&&(c=!0,n[a+1]=i?Wf(p):Gf(p)),a=i?er(p):Br(p)}c&&(n[e+1]=i?Gf(o):Wf(o))}function KO(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Rs(n,t)>=0}function Hr(n,t,e){return nr(n,t,e,!1),Hr}function Yt(n,t){return nr(n,t,null,!0),Yt}function nr(n,t,e,i){const r=me(),o=bt(),s=function Rr(n){const t=Je.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}(2);o.firstUpdatePass&&function j0(n,t,e,i){const r=n.data;if(null===r[e+1]){const o=r[Xn()],s=function H0(n,t){return t>=n.expandoStartIndex}(n,e);(function q0(n,t){return 0!=(n.flags&(t?16:32))})(o,i)&&null===t&&!s&&(t=!1),t=function oP(n,t,e,i){const r=function Vh(n){const t=Je.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let o=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(e=ol(e=wp(null,n,t,e,i),t.attrs,i),o=null);else{const s=t.directiveStylingLast;if(-1===s||n[s]!==r)if(e=wp(r,n,t,e,i),null===o){let c=function sP(n,t,e){const i=e?t.classBindings:t.styleBindings;if(0!==Br(i))return n[er(i)]}(n,t,i);void 0!==c&&Array.isArray(c)&&(c=wp(null,n,t,c[1],i),c=ol(c,t.attrs,i),function aP(n,t,e,i){n[er(e?t.classBindings:t.styleBindings)]=i}(n,t,i,c))}else o=function lP(n,t,e){let i;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)i=ol(i,n[o].hostAttrs,e);return ol(i,t.attrs,e)}(n,t,i)}return void 0!==o&&(i?t.residualClasses=o:t.residualStyles=o),e}(r,o,t,i),function YO(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=er(s),c=Br(s);n[i]=e;let p,d=!1;if(Array.isArray(e)){const g=e;p=g[1],(null===p||Rs(g,p)>0)&&(d=!0)}else p=e;if(r)if(0!==c){const E=er(n[a+1]);n[i+1]=Jc(E,a),0!==E&&(n[E+1]=qf(n[E+1],i)),n[a+1]=function $R(n,t){return 131071&n|t<<17}(n[a+1],i)}else n[i+1]=Jc(a,0),0!==a&&(n[a+1]=qf(n[a+1],i)),a=i;else n[i+1]=Jc(c,0),0===a?a=i:n[c+1]=qf(n[c+1],i),c=i;d&&(n[i+1]=Gf(n[i+1])),P0(n,p,i,!0),P0(n,p,i,!1),function XO(n,t,e,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof t&&Rs(o,t)>=0&&(e[i+1]=Wf(e[i+1]))}(t,p,n,i,o),s=Jc(a,c),o?t.classBindings=s:t.styleBindings=s}(r,o,t,e,s,i)}}(o,n,s,i),t!==nt&&Bn(r,s,t)&&function $0(n,t,e,i,r,o,s,a){if(!(3&t.type))return;const c=n.data,d=c[a+1];uu(function Fb(n){return 1==(1&n)}(d)?G0(c,t,e,r,Br(d),s):void 0)||(uu(o)||function Pb(n){return 2==(2&n)}(d)&&(o=G0(c,null,e,r,a,s)),function pR(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=-1===i.indexOf("-")?void 0:oi.DashCase;null==r?n.removeStyle(e,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=oi.Important),n.setStyle(e,i,r,o))}}(i,s,Mc(Xn(),e),r,o))}(o,o.data[Xn()],r,r[11],n,r[s+1]=function dP(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=Ut(gi(n)))),n}(t,e),i,s)}function wp(n,t,e,i,r){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],i=ol(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(e.directiveStylingLast=a),i}function ol(n,t,e){const i=e?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),mi(n,s,!!e||t[++o]))}return void 0===n?null:n}function G0(n,t,e,i,r,o){const s=null===t;let a;for(;r>0;){const c=n[r],d=Array.isArray(c),p=d?c[1]:c,g=null===p;let E=e[r+1];E===nt&&(E=g?Tt:void 0);let S=g?Jh(E,i):p===i?E:void 0;if(d&&!uu(S)&&(S=Jh(c,i)),uu(S)&&(a=S,s))return a;const R=n[r+1];r=s?er(R):Br(R)}if(null!==t){let c=o?t.residualClasses:t.residualStyles;null!=c&&(a=Jh(c,i))}return a}function uu(n){return void 0!==n}function Ot(n,t=""){const e=me(),i=bt(),r=n+22,o=i.firstCreatePass?js(i,r,1,t,null):i.data[r],s=e[r]=function Of(n,t){return n.createText(t)}(e[11],t);Kc(i,e,s,o),pr(o,!1)}function uo(n){return Er("",n,""),uo}function Er(n,t,e){const i=me(),r=function Gs(n,t,e,i){return Bn(n,Ds(),e)?t+tt(e)+i:nt}(i,n,t,e);return r!==nt&&function Ur(n,t,e){const i=Mc(t,n);!function tb(n,t,e){n.setValue(t,e)}(n[11],i,e)}(i,Xn(),r),Er}function sl(n,t,e){const i=me();return Bn(i,Ds(),t)&&_i(bt(),sn(),i,n,t,i[11],e,!0),sl}const ta="en-US";let fw=ta;function Dp(n,t,e,i,r){if(n=Ye(n),Array.isArray(n))for(let o=0;o<n.length;o++)Dp(n[o],t,e,i,r);else{const o=bt(),s=me();let a=Lo(n)?n:Ye(n.provide),c=Bv(n);const d=bn(),p=1048575&d.providerIndexes,g=d.directiveStart,E=d.providerIndexes>>20;if(Lo(n)||!n.multi){const S=new Fa(c,r,V),R=xp(a,t,r?p:p+E,g);-1===R?(Nc(La(d,s),o,a),Sp(o,n,t.length),t.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),e.push(S),s.push(S)):(e[R]=S,s[R]=S)}else{const S=xp(a,t,p+E,g),R=xp(a,t,p,p+E),G=S>=0&&e[S],te=R>=0&&e[R];if(r&&!te||!r&&!G){Nc(La(d,s),o,a);const le=function kF(n,t,e,i,r){const o=new Fa(n,e,V);return o.multi=[],o.index=t,o.componentProviders=0,Bw(o,r,i&&!e),o}(r?TF:MF,e.length,r,i,c);!r&&te&&(e[R].providerFactory=le),Sp(o,n,t.length,0),t.push(a),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),e.push(le),s.push(le)}else Sp(o,n,S>-1?S:R,Bw(e[r?R:S],c,!r&&i));!r&&i&&te&&e[R].componentProviders++}}}function Sp(n,t,e,i){const r=Lo(t),o=function lA(n){return!!n.useClass}(t);if(r||o){const c=(o?Ye(t.useClass):t).prototype.ngOnDestroy;if(c){const d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){const p=d.indexOf(e);-1===p?d.push(e,[i,c]):d[p+1].push(i,c)}else d.push(e,c)}}}function Bw(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function xp(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function MF(n,t,e,i){return Mp(this.multi,[])}function TF(n,t,e,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ba(e,e[1],this.providerFactory.index,i);o=a.slice(0,s),Mp(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Mp(r,o);return o}function Mp(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function ht(n,t=[]){return e=>{e.providersResolver=(i,r)=>function xF(n,t,e){const i=bt();if(i.firstCreatePass){const r=Qi(n);Dp(e,i.data,i.blueprint,r,!0),Dp(t,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,t)}}class $o{}class Uw{}class Vw extends $o{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hp(this);const i=di(t);this._bootstrapComponents=Lr(i.bootstrap),this._r3Injector=xb(t,e,[{provide:$o,useValue:this},{provide:Bo,useValue:this.componentFactoryResolver}],Ut(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Tp extends Uw{constructor(t){super(),this.moduleType=t}create(t){return new Vw(this.moduleType,t)}}class AF extends $o{constructor(t,e,i){super(),this.componentFactoryResolver=new hp(this),this.instance=null;const r=new Lv([...t,{provide:$o,useValue:this},{provide:Bo,useValue:this.componentFactoryResolver}],e||Yc(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function mu(n,t,e=null){return new AF(n,t,e).injector}let RF=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const i=Ov(0,e.type),r=i.length>0?mu([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=xe({token:n,providedIn:"environment",factory:()=>new n(se(ao))}),n})();function Hw(n){n.getStandaloneInjector=t=>t.get(RF).getOrCreateStandaloneInjector(n)}function Ip(n,t,e,i){return function Yw(n,t,e,i,r,o){const s=t+e;return Bn(n,s,r)?function vr(n,t,e){return n[t]=e}(n,s+1,o?i.call(o,r):i(r)):function hl(n,t){const e=n[t];return e===nt?void 0:e}(n,s+1)}(me(),function Yn(){const n=Je.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}(),n,t,e,i)}function Ap(n){return t=>{setTimeout(n,void 0,t)}}const Ke=class iN extends I{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&"object"==typeof t){const c=t;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Ap(o),r&&(r=Ap(r)),s&&(s=Ap(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof k&&t.add(a),a}};function rN(){return this._results[Ho()]()}class Go{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ho(),i=Go.prototype;i[e]||(i[e]=rN)}get changes(){return this._changes||(this._changes=new Ke)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const i=this;i.dirty=!1;const r=pi(t);(this._changesDetected=!function oI(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Oi=(()=>{class n{}return n.__NG_ELEMENT_ID__=aN,n})();const oN=Oi,sN=class extends oN{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(t,e){const i=this._declarationTContainer.tViews,r=nu(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(i)),np(i,r,t),new el(r)}};function aN(){return gu(bn(),me())}function gu(n,t){return 4&n.type?new sN(t,n,Bs(n,t)):null}let In=(()=>{class n{}return n.__NG_ELEMENT_ID__=lN,n})();function lN(){return tE(bn(),me())}const cN=In,Jw=class extends cN{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Bs(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fc(this._hostTNode,this._hostLView);if(Yy(t)){const e=xs(t,this._hostLView),i=Ss(t);return new Ms(e[1].data[i+8],e)}return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=eE(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=t.createEmbeddedView(e||{},o);return this.insert(s,r),s}createComponent(t,e,i,r,o){const s=t&&!function Va(n){return"function"==typeof n}(t);let a;if(s)a=e;else{const g=e||{};a=g.index,i=g.injector,r=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}const c=s?t:new tl(Rt(t)),d=i||this.parentInjector;if(!o&&null==c.ngModule){const E=(s?d:this.parentInjector).get(ao,null);E&&(o=E)}const p=c.create(d,r,void 0,o);return this.insert(p.hostView,a),p}insert(t,e){const i=t._lView,r=i[1];if(function Tk(n){return Zi(n[3])}(i)){const p=this.indexOf(t);if(-1!==p)this.detach(p);else{const g=i[3],E=new Jw(g,g[6],g[3]);E.detach(E.indexOf(t))}}const o=this._adjustIndex(e),s=this._lContainer;!function sR(n,t,e,i){const r=10+i,o=e.length;i>0&&(e[r-1][4]=t),i<o-10?(t[4]=e[r],ov(e,10+i,t)):(e.push(t),t[4]=null),t[3]=e;const s=t[17];null!==s&&e!==s&&function aR(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(n),t[2]|=64}(r,i,s,o);const a=Bf(o,s),c=i[11],d=Xc(c,s[7]);return null!==d&&function iR(n,t,e,i,r,o){i[0]=r,i[6]=t,Qa(n,i,e,1,r,o)}(r,s[6],c,i,d,a),t.attachToViewContainerRef(),ov(Rp(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=eE(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),i=Ff(this._lContainer,e);i&&(Bc(Rp(this._lContainer),e),ib(i[1],i))}detach(t){const e=this._adjustIndex(t,-1),i=Ff(this._lContainer,e);return i&&null!=Bc(Rp(this._lContainer),e)?new el(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function eE(n){return n[8]}function Rp(n){return n[8]||(n[8]=[])}function tE(n,t){let e;const i=t[n.index];if(Zi(i))e=i;else{let r;if(8&n.type)r=fn(i);else{const o=t[11];r=o.createComment("");const s=Ai(n,t);Vo(o,Xc(o,s),r,function dR(n,t){return n.nextSibling(t)}(o,s),!1)}t[n.index]=e=n0(i,t,r,n),ru(t,e)}return new Jw(e,n,t)}class Op{constructor(t){this.queryList=t,this.matches=null}clone(){return new Op(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pp{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const i=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){const s=e.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new Pp(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==sE(t,e).matches&&this.queries[e].setDirty()}}class nE{constructor(t,e,i=null){this.predicate=t,this.flags=e,this.read=i}}class Fp{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,null!==e?e.push(o):e=[o])}return null!==e?new Fp(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Np{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Np(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(t,e,hN(e,o)),this.matchTNodeWithReadOption(t,e,Lc(e,t,o,!1,!1))}else i===Oi?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Lc(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===lt||r===In||r===Oi&&4&e.type)this.addMatch(e.index,-2);else{const o=Lc(e,t,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function hN(n,t){const e=n.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1];return null}function pN(n,t,e,i){return-1===e?function fN(n,t){return 11&n.type?Bs(n,t):4&n.type?gu(n,t):null}(t,n):-2===e?function mN(n,t,e){return e===lt?Bs(t,n):e===Oi?gu(t,n):e===In?tE(t,n):void 0}(n,t,i):Ba(n,n[1],e,t)}function iE(n,t,e,i){const r=t[19].queries[i];if(null===r.matches){const o=n.data,s=e.matches,a=[];for(let c=0;c<s.length;c+=2){const d=s[c];a.push(d<0?null:pN(t,o[d],s[c+1],e.metadata.read))}r.matches=a}return r.matches}function Lp(n,t,e,i){const r=n.queries.getByIndex(e),o=r.matches;if(null!==o){const s=iE(n,t,r,e);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const d=o[a+1],p=t[-c];for(let g=10;g<p.length;g++){const E=p[g];E[17]===E[3]&&Lp(E[1],E,d,i)}if(null!==p[9]){const g=p[9];for(let E=0;E<g.length;E++){const S=g[E];Lp(S[1],S,d,i)}}}}}return i}function Pt(n){const t=me(),e=bt(),i=By();Hh(i+1);const r=sE(e,i);if(n.dirty&&function Mk(n){return 4==(4&n[2])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?Lp(e,t,i,[]):iE(e,t,r,i);n.reset(o,bA),n.notifyOnChanges()}return!0}return!1}function An(n,t,e){const i=bt();i.firstCreatePass&&(oE(i,new nE(n,t,e),-1),2==(2&t)&&(i.staticViewQueries=!0)),rE(i,me(),t)}function Pi(n,t,e,i){const r=bt();if(r.firstCreatePass){const o=bn();oE(r,new nE(t,e,i),o.index),function _N(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(r,n),2==(2&e)&&(r.staticContentQueries=!0)}rE(r,me(),e)}function Ft(){return function gN(n,t){return n[19].queries[t].queryList}(me(),By())}function rE(n,t,e){const i=new Go(4==(4&e));Wb(n,t,i,i.destroy),null===t[19]&&(t[19]=new Pp),t[19].queries.push(new Op(i))}function oE(n,t,e){null===n.queries&&(n.queries=new Fp),n.queries.track(new Np(t,e))}function sE(n,t){return n.queries.getByIndex(t)}function yu(...n){}const vu=new ve("Application Initializer");let bu=(()=>{class n{constructor(e){this.appInits=e,this.resolve=yu,this.reject=yu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(rl(o))e.push(o);else if(vp(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(se(vu,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ml=new ve("AppId",{providedIn:"root",factory:function SE(){return`${jp()}${jp()}${jp()}`}});function jp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xE=new ve("Platform Initializer"),zp=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ME=new ve("appBootstrapListener"),Fi=new ve("AnimationModuleType");let BN=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Cr=new ve("LocaleId",{providedIn:"root",factory:()=>Vt(Cr,je.Optional|je.SkipSelf)||function UN(){return typeof $localize<"u"&&$localize.locale||ta}()});class HN{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let $p=(()=>{class n{compileModuleSync(e){return new Tp(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),o=Lr(di(e).declarations).reduce((s,a)=>{const c=Rt(a);return c&&s.push(new tl(c)),s},[]);return new HN(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $N=(()=>Promise.resolve(0))();function Gp(n){typeof Zone>"u"?$N.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ze{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ke(!1),this.onMicrotaskEmpty=new Ke(!1),this.onStable=new Ke(!1),this.onError=new Ke(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function GN(){let n=jt.requestAnimationFrame,t=jt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function YN(n){const t=()=>{!function WN(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Wp(n),n.isCheckStableRunning=!0,qp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Wp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,s,a)=>{try{return IE(n),e.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),AE(n)}},onInvoke:(e,i,r,o,s,a,c)=>{try{return IE(n),e.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&t(),AE(n)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Wp(n),qp(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ze.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Ze.isInAngularZone())throw new de(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,qN,yu,yu);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}}const qN={};function qp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Wp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function IE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function AE(n){n._nesting--,qp(n)}class XN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ke,this.onMicrotaskEmpty=new Ke,this.onStable=new Ke,this.onError=new Ke}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}}const RE=new ve(""),wu=new ve("");let Kp,Yp=(()=>{class n{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Kp||(function KN(n){Kp=n}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ze.assertNotInAngularZone(),Gp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gp(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}}return n.\u0275fac=function(e){return new(e||n)(se(Ze),se(Xp),se(wu))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),Xp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Kp?.findTestabilityInTree(this,e,i)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ho=null;const OE=new ve("AllowMultipleToken"),Zp=new ve("PlatformDestroyListeners");class PE{constructor(t,e){this.name=t,this.token=e}}function NE(n,t,e=[]){const i=`Platform: ${t}`,r=new ve(i);return(o=[])=>{let s=Qp();if(!s||s.injector.get(OE,!1)){const a=[...e,...o,{provide:r,useValue:!0}];n?n(a):function JN(n){if(ho&&!ho.get(OE,!1))throw new de(400,!1);ho=n;const t=n.get(BE);(function FE(n){const t=n.get(xE,null);t&&t.forEach(e=>e())})(n)}(function LE(n=[],t){return Zn.create({name:t,providers:[{provide:gf,useValue:"platform"},{provide:Zp,useValue:new Set([()=>ho=null])},...n]})}(a,i))}return function t2(n){const t=Qp();if(!t)throw new de(401,!1);return t}()}}function Qp(){return ho?.get(BE)??null}let BE=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function VE(n,t){let e;return e="noop"===n?new XN:("zone.js"===n?void 0:n)||new Ze(t),e}(i?.ngZone,function UE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:Ze,useValue:r}];return r.run(()=>{const s=Zn.create({providers:o,parent:this.injector,name:e.moduleType.name}),a=e.create(s),c=a.injector.get(Nr,null);if(!c)throw new de(402,!1);return r.runOutsideAngular(()=>{const d=r.onError.subscribe({next:p=>{c.handleError(p)}});a.onDestroy(()=>{Eu(this._modules,a),d.unsubscribe()})}),function HE(n,t,e){try{const i=e();return rl(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const d=a.injector.get(bu);return d.runInitializers(),d.donePromise.then(()=>(function pw(n){ui(n,"Expected localeId to be defined"),"string"==typeof n&&(fw=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Cr,ta)||ta),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,i=[]){const r=jE({},i);return function ZN(n,t,e){const i=new Tp(e);return Promise.resolve(i)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const i=e.injector.get(ra);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new de(403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(Zp,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(se(Zn))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function jE(n,t){return Array.isArray(t)?t.reduce(jE,n):{...n,...t}}let ra=(()=>{class n{constructor(e,i,r){this._zone=e,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Qe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Qe(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Ze.assertNotInAngularZone(),Gp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Ze.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),d.unsubscribe()}});this.isStable=to(o,s.pipe(vh()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof Uv;if(!this._injector.get(bu).done)throw!r&&function _s(n){const t=Rt(n)||qn(n)||Wn(n);return null!==t&&t.standalone}(e),new de(405,false);let s;s=r?e:this._injector.get(Bo).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function QN(n){return n.isBoundToModule}(s)?void 0:this._injector.get($o),d=s.create(Zn.NULL,[],i||s.selector,a),p=d.location.nativeElement,g=d.injector.get(RE,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Eu(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Eu(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ME,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Eu(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new de(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(se(Ze),se(ao),se(Nr))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Eu(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let $E=!0,Rn=(()=>{class n{}return n.__NG_ELEMENT_ID__=o2,n})();function o2(n){return function s2(n,t,e){if(Sc(n)&&!e){const i=fi(n.index,t);return new el(i,i)}return 47&n.type?new el(t[16],t):null}(bn(),me(),16==(16&n))}class XE{constructor(){}supports(t){return nl(t)}create(t){return new h2(t)}}const d2=(n,t)=>t;class h2{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||d2}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){const s=!i||e&&e.currentIndex<ZE(i,r,o)?e:i,a=ZE(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{o||(o=[]);const d=a-r,p=c-r;if(d!=p){for(let E=0;E<d;E++){const S=E<o.length?o[E]:o[E]=0,R=S+E;p<=R&&R<d&&(o[E]=S+1)}o[s.previousIndex]=p-d}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!nl(t))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,e=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),i=!0),e=e._next}else r=0,function UO(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Ho()]();let i;for(;!(i=e.next()).done;)t(i.value)}}(t,a=>{s=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new f2(e,i),o,r),t}_verifyReinsertion(t,e,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new KE),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,i=t._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KE),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class f2{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class p2{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const e=t._prevDup,i=t._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class KE{constructor(){this.map=new Map}put(t){const e=t.trackById;let i=this.map.get(e);i||(i=new p2,this.map.set(e,i)),i.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZE(n,t,e){const i=n.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}class QE{constructor(){}supports(t){return t instanceof Map||pp(t)}create(){return new m2}}class m2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||pp(t)))throw new de(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new g2(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}}class g2{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JE(){return new gl([new XE])}let gl=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||JE()),deps:[[n,new Ps,new so]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new de(901,!1)}}return n.\u0275prov=xe({token:n,providedIn:"root",factory:JE}),n})();function eC(){return new _l([new QE])}let _l=(()=>{class n{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||eC()),deps:[[n,new Ps,new so]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new de(901,!1)}}return n.\u0275prov=xe({token:n,providedIn:"root",factory:eC}),n})();const v2=NE(null,"core",[]);let b2=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(se(ra))},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})();let Su=null;function Dr(){return Su}const et=new ve("DocumentToken");let yl=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return function D2(){return se(tC)}()},providedIn:"platform"}),n})();const S2=new ve("Location Initialized");let tC=(()=>{class n extends yl{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dr().getBaseHref(this._doc)}onPopState(e){const i=Dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){nC()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){nC()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:function(){return function x2(){return new tC(se(et))}()},providedIn:"platform"}),n})();function nC(){return!!window.history.pushState}function im(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function iC(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function $r(n){return n&&"?"!==n[0]?"?"+n:n}let fo=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return Vt(oC)},providedIn:"root"}),n})();const rC=new ve("appBaseHref");let oC=(()=>{class n extends fo{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Vt(et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return im(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+$r(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const s=this.prepareExternalUrl(r+$r(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){const s=this.prepareExternalUrl(r+$r(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(se(yl),se(rC,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sC=(()=>{class n extends fo{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=im(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+$r(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+$r(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(se(yl),se(rC,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),xu=(()=>{class n{constructor(e){this._subject=new Ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=iC(aC(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+$r(i))}normalize(e){return n.stripTrailingSlash(function T2(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,aC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$r(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$r(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=$r,n.joinWithSlash=im,n.stripTrailingSlash=iC,n.\u0275fac=function(e){return new(e||n)(se(fo))},n.\u0275prov=xe({token:n,factory:function(){return function M2(){return new xu(se(fo))}()},providedIn:"root"}),n})();function aC(n){return n.replace(/\/index.html$/,"")}let gC=(()=>{class n{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(nl(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ut(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(V(gl),V(_l),V(lt),V(Fr))},n.\u0275dir=ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class fL{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vC=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new fL(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),bC(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{bC(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(V(In),V(Oi),V(gl))},n.\u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function bC(n,t){n.context.$implicit=t.item}let Wo=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new mL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){wC("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){wC("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(V(In),V(Oi))},n.\u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class mL{constructor(){this.$implicit=null,this.ngIf=null}}function wC(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ut(t)}'.`)}class fm{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Nu=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ke({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),EC=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new fm(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(V(In),V(Oi),V(Nu,9))},n.\u0275dir=ke({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),pm=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,o]=e.split("."),s=-1===r.indexOf("-")?void 0:oi.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(_l),V(Fr))},n.\u0275dir=ke({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),po=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})();const SC="browser";let $L=(()=>{class n{}return n.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new GL(se(et),window)}),n})();class GL{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function qL(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=xC(this.window.history)||xC(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xC(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vm extends class dB extends class C2{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function E2(n){Su||(Su=n)}(new vm)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function hB(){return El=El||document.querySelector("base"),El?El.getAttribute("href"):null}();return null==e?null:function fB(n){Bu=Bu||document.createElement("a"),Bu.setAttribute("href",n);const t=Bu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){El=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function dL(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Bu,El=null;const IC=new ve("TRANSITION_ID"),mB=[{provide:vu,useFactory:function pB(n,t,e){return()=>{e.get(bu).donePromise.then(()=>{const i=Dr(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[IC,et,Zn],multi:!0}];let _B=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const Uu=new ve("EventManagerPlugins");let Vu=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(se(Uu),se(Ze))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class AC{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=Dr().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let RC=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),Cl=(()=>{class n extends RC{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(OC),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(OC))}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();function OC(n){Dr().remove(n)}const bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wm=/%COMP%/g;function Hu(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Hu(n,r,e):(r=r.replace(wm,n),e.push(r))}return e}function NC(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ju=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Em(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case Xi.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new CB(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case Xi.ShadowDom:return new DB(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Hu(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(se(Vu),se(Cl),se(ml))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class Em{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(bm[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(BC(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(BC(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const o=bm[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=bm[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(oi.DashCase|oi.Important)?t.style.setProperty(e,i,r&oi.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&oi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,NC(i)):this.eventManager.addEventListener(t,e,NC(i))}}function BC(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class CB extends Em{constructor(t,e,i,r){super(t),this.component=i;const o=Hu(r+"-"+i.id,i.styles,[]);e.addStyles(o),this.contentAttr=function bB(n){return"_ngcontent-%COMP%".replace(wm,n)}(r+"-"+i.id),this.hostAttr=function wB(n){return"_nghost-%COMP%".replace(wm,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class DB extends Em{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Hu(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let SB=(()=>{class n extends AC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const UC=["alt","control","meta","shift"],xB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let TB=(()=>{class n extends AC{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),UC.forEach(d=>{const p=i.indexOf(d);p>-1&&(i.splice(p,1),s+=d+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(e,i){let r=xB[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),UC.forEach(s=>{s!==r&&(0,MB[s])(e)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const RB=NE(v2,"browser",[{provide:zp,useValue:SC},{provide:xE,useValue:function kB(){vm.makeCurrent()},multi:!0},{provide:et,useFactory:function AB(){return function II(n){sf=n}(document),document},deps:[]}]),jC=new ve(""),zC=[{provide:wu,useClass:class gB{addToWindow(t){jt.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},jt.getAllAngularTestabilities=()=>t.getAllTestabilities(),jt.getAllAngularRootElements=()=>t.getAllRootElements(),jt.frameworkStabilizers||(jt.frameworkStabilizers=[]),jt.frameworkStabilizers.push(i=>{const r=jt.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?Dr().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:RE,useClass:Yp,deps:[Ze,Xp,wu]},{provide:Yp,useClass:Yp,deps:[Ze,Xp,wu]}],$C=[{provide:gf,useValue:"root"},{provide:Nr,useFactory:function IB(){return new Nr},deps:[]},{provide:Uu,useClass:SB,multi:!0,deps:[et,Ze,zp]},{provide:Uu,useClass:TB,multi:!0,deps:[et]},{provide:ju,useClass:ju,deps:[Vu,Cl,ml]},{provide:Xa,useExisting:ju},{provide:RC,useExisting:Cl},{provide:Cl,useClass:Cl,deps:[et]},{provide:Vu,useClass:Vu,deps:[Uu,Ze]},{provide:class WL{},useClass:_B,deps:[]},[]];let GC=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:ml,useValue:e.appId},{provide:IC,useExisting:ml},mB]}}}return n.\u0275fac=function(e){return new(e||n)(se(jC,12))},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[...$C,...zC],imports:[po,b2]}),n})(),qC=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:function(e){let i=null;return i=e?new e:function PB(){return new qC(se(et))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Sm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(e){let i=null;return i=e?new(e||n):se(XC),i},providedIn:"root"}),n})(),XC=(()=>{class n extends Sm{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case kt.NONE:return i;case kt.HTML:return _r(i,"HTML")?gi(i):Tv(this._doc,String(i)).toString();case kt.STYLE:return _r(i,"Style")?gi(i):i;case kt.SCRIPT:if(_r(i,"Script"))return gi(i);throw new Error("unsafe value used in a script context");case kt.URL:return _r(i,"URL")?gi(i):Gc(String(i));case kt.RESOURCE_URL:if(_r(i,"ResourceURL"))return gi(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function UI(n){return new OI(n)}(e)}bypassSecurityTrustStyle(e){return function VI(n){return new PI(n)}(e)}bypassSecurityTrustScript(e){return function HI(n){return new FI(n)}(e)}bypassSecurityTrustUrl(e){return function jI(n){return new NI(n)}(e)}bypassSecurityTrustResourceUrl(e){return function zI(n){return new LI(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:function(e){let i=null;return i=e?new e:function HB(n){return new XC(n.get(et))}(se(Zn)),i},providedIn:"root"}),n})();function KC(n,t,e,i,r,o,s){try{var a=n[o](s),c=a.value}catch(d){return void e(d)}a.done?t(c):Promise.resolve(c).then(i,r)}function Fe(n){return function(){var t=this,e=arguments;return new Promise(function(i,r){var o=n.apply(t,e);function s(c){KC(o,i,r,s,a,"next",c)}function a(c){KC(o,i,r,s,a,"throw",c)}s(void 0)})}}class Yo{constructor(t=!1){this.multiShot=t,this._disposables=[]}addFunction(t){if(!this._disposables)throw new Error("Adding new disposabled to already disposed one-shot disposer");this._disposables.push(t)}addListener(t,e,i,r){this.addFunction(()=>t.removeEventListener(e,i,r)),t.addEventListener(e,i,r)}addDisposable(t){this.addFunction(t.dispose.bind(t))}dispose(){if(!this._disposables)throw new Error("dispose() an already disposed one-shot disposer.");const t=this._disposables;this._disposables=this.multiShot?[]:void 0;for(const e of t)e()}}function Dl(n){return new Promise(t=>setTimeout(t,n))}class Sl extends Promise{constructor(){let t,e;super((i,r)=>{t=i,e=r}),this.resolve=t,this.reject=e}}function ZC(n,t){const e=new Error(t);return e.name=n,e}function QC(n,t){if(n.byteLength!=t.byteLength)return!1;for(let e=0;e<n.byteLength;e++)if(n.at(e)!=t.at(e))return!1;return!0}function zB(n){const t=new DataView(new Uint8Array(n.toBytesBE()).buffer);return n.unsigned?t.getBigUint64(0):t.getBigInt64(0)}function $B(n){return console.assert(n>0),t=>t<n-1}function JC(n){return()=>Dl(n)}function GB(n,t){return xm.apply(this,arguments)}function xm(){return(xm=Fe(function*(n,t){const e=t?.shouldRerty||$B(3),i=t?.delay||JC(100),r=t?.attemptFailed||(()=>Promise.resolve());for(let o=0;;o++)try{return yield n()}catch(s){if(s instanceof eD)throw s;if(yield r(o,s),!e(o,s))throw s;yield i(o,s)}})).apply(this,arguments)}class eD extends Error{constructor(t){super(t)}}function Xo(n,t){if(!n)throw new Error(`Invalid argument [detail: ${t}]`)}function Nt(n,t){if(null==n)throw new Error(`null reference exception [detail: ${t}]`);return n}function Ko(n,t){if(!n)throw new Error(`Invalid state [detail: ${t}]`)}var It=J(884);const Ne=It.Reader,ei=It.Writer,mt=It.util,ae=It.roots.default||(It.roots.default={}),tD=ae.com=(()=>{const n={};return n.android=function(){const t={};return t.app=function(){const e={};return e.motiontool=function(){const i={};return i.MotionToolsRequest=function(){function r(s){if(s)for(let a=Object.keys(s),c=0;c<a.length;++c)null!=s[a[c]]&&(this[a[c]]=s[a[c]])}let o;return r.prototype.handshake=null,r.prototype.beginTrace=null,r.prototype.endTrace=null,r.prototype.pollTrace=null,Object.defineProperty(r.prototype,"type",{get:mt.oneOfGetter(o=["handshake","beginTrace","endTrace","pollTrace"]),set:mt.oneOfSetter(o)}),r.create=function(a){return new r(a)},r.encode=function(a,c){return c||(c=ei.create()),null!=a.handshake&&Object.hasOwnProperty.call(a,"handshake")&&ae.com.android.app.motiontool.HandshakeRequest.encode(a.handshake,c.uint32(10).fork()).ldelim(),null!=a.beginTrace&&Object.hasOwnProperty.call(a,"beginTrace")&&ae.com.android.app.motiontool.BeginTraceRequest.encode(a.beginTrace,c.uint32(18).fork()).ldelim(),null!=a.endTrace&&Object.hasOwnProperty.call(a,"endTrace")&&ae.com.android.app.motiontool.EndTraceRequest.encode(a.endTrace,c.uint32(26).fork()).ldelim(),null!=a.pollTrace&&Object.hasOwnProperty.call(a,"pollTrace")&&ae.com.android.app.motiontool.PollTraceRequest.encode(a.pollTrace,c.uint32(34).fork()).ldelim(),c},r.encodeDelimited=function(a,c){return this.encode(a,c).ldelim()},r.decode=function(a,c){a instanceof Ne||(a=Ne.create(a));let d=void 0===c?a.len:a.pos+c,p=new ae.com.android.app.motiontool.MotionToolsRequest;for(;a.pos<d;){let g=a.uint32();switch(g>>>3){case 1:p.handshake=ae.com.android.app.motiontool.HandshakeRequest.decode(a,a.uint32());break;case 2:p.beginTrace=ae.com.android.app.motiontool.BeginTraceRequest.decode(a,a.uint32());break;case 3:p.endTrace=ae.com.android.app.motiontool.EndTraceRequest.decode(a,a.uint32());break;case 4:p.pollTrace=ae.com.android.app.motiontool.PollTraceRequest.decode(a,a.uint32());break;default:a.skipType(7&g)}}return p},r.decodeDelimited=function(a){return a instanceof Ne||(a=new Ne(a)),this.decode(a,a.uint32())},r.verify=function(a){if("object"!=typeof a||null===a)return"object expected";let c={};if(null!=a.handshake&&a.hasOwnProperty("handshake")){c.type=1;{let d=ae.com.android.app.motiontool.HandshakeRequest.verify(a.handshake);if(d)return"handshake."+d}}if(null!=a.beginTrace&&a.hasOwnProperty("beginTrace")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.BeginTraceRequest.verify(a.beginTrace);if(d)return"beginTrace."+d}}if(null!=a.endTrace&&a.hasOwnProperty("endTrace")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.EndTraceRequest.verify(a.endTrace);if(d)return"endTrace."+d}}if(null!=a.pollTrace&&a.hasOwnProperty("pollTrace")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.PollTraceRequest.verify(a.pollTrace);if(d)return"pollTrace."+d}}return null},r.fromObject=function(a){if(a instanceof ae.com.android.app.motiontool.MotionToolsRequest)return a;let c=new ae.com.android.app.motiontool.MotionToolsRequest;if(null!=a.handshake){if("object"!=typeof a.handshake)throw TypeError(".com.android.app.motiontool.MotionToolsRequest.handshake: object expected");c.handshake=ae.com.android.app.motiontool.HandshakeRequest.fromObject(a.handshake)}if(null!=a.beginTrace){if("object"!=typeof a.beginTrace)throw TypeError(".com.android.app.motiontool.MotionToolsRequest.beginTrace: object expected");c.beginTrace=ae.com.android.app.motiontool.BeginTraceRequest.fromObject(a.beginTrace)}if(null!=a.endTrace){if("object"!=typeof a.endTrace)throw TypeError(".com.android.app.motiontool.MotionToolsRequest.endTrace: object expected");c.endTrace=ae.com.android.app.motiontool.EndTraceRequest.fromObject(a.endTrace)}if(null!=a.pollTrace){if("object"!=typeof a.pollTrace)throw TypeError(".com.android.app.motiontool.MotionToolsRequest.pollTrace: object expected");c.pollTrace=ae.com.android.app.motiontool.PollTraceRequest.fromObject(a.pollTrace)}return c},r.toObject=function(a,c){c||(c={});let d={};return null!=a.handshake&&a.hasOwnProperty("handshake")&&(d.handshake=ae.com.android.app.motiontool.HandshakeRequest.toObject(a.handshake,c),c.oneofs&&(d.type="handshake")),null!=a.beginTrace&&a.hasOwnProperty("beginTrace")&&(d.beginTrace=ae.com.android.app.motiontool.BeginTraceRequest.toObject(a.beginTrace,c),c.oneofs&&(d.type="beginTrace")),null!=a.endTrace&&a.hasOwnProperty("endTrace")&&(d.endTrace=ae.com.android.app.motiontool.EndTraceRequest.toObject(a.endTrace,c),c.oneofs&&(d.type="endTrace")),null!=a.pollTrace&&a.hasOwnProperty("pollTrace")&&(d.pollTrace=ae.com.android.app.motiontool.PollTraceRequest.toObject(a.pollTrace,c),c.oneofs&&(d.type="pollTrace")),d},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(a){return void 0===a&&(a="type.googleapis.com"),a+"/com.android.app.motiontool.MotionToolsRequest"},r}(),i.MotionToolsResponse=function(){function r(s){if(s)for(let a=Object.keys(s),c=0;c<a.length;++c)null!=s[a[c]]&&(this[a[c]]=s[a[c]])}let o;return r.prototype.error=null,r.prototype.handshake=null,r.prototype.beginTrace=null,r.prototype.endTrace=null,r.prototype.pollTrace=null,Object.defineProperty(r.prototype,"type",{get:mt.oneOfGetter(o=["error","handshake","beginTrace","endTrace","pollTrace"]),set:mt.oneOfSetter(o)}),r.create=function(a){return new r(a)},r.encode=function(a,c){return c||(c=ei.create()),null!=a.error&&Object.hasOwnProperty.call(a,"error")&&ae.com.android.app.motiontool.ErrorResponse.encode(a.error,c.uint32(10).fork()).ldelim(),null!=a.handshake&&Object.hasOwnProperty.call(a,"handshake")&&ae.com.android.app.motiontool.HandshakeResponse.encode(a.handshake,c.uint32(18).fork()).ldelim(),null!=a.beginTrace&&Object.hasOwnProperty.call(a,"beginTrace")&&ae.com.android.app.motiontool.BeginTraceResponse.encode(a.beginTrace,c.uint32(26).fork()).ldelim(),null!=a.endTrace&&Object.hasOwnProperty.call(a,"endTrace")&&ae.com.android.app.motiontool.EndTraceResponse.encode(a.endTrace,c.uint32(34).fork()).ldelim(),null!=a.pollTrace&&Object.hasOwnProperty.call(a,"pollTrace")&&ae.com.android.app.motiontool.PollTraceResponse.encode(a.pollTrace,c.uint32(42).fork()).ldelim(),c},r.encodeDelimited=function(a,c){return this.encode(a,c).ldelim()},r.decode=function(a,c){a instanceof Ne||(a=Ne.create(a));let d=void 0===c?a.len:a.pos+c,p=new ae.com.android.app.motiontool.MotionToolsResponse;for(;a.pos<d;){let g=a.uint32();switch(g>>>3){case 1:p.error=ae.com.android.app.motiontool.ErrorResponse.decode(a,a.uint32());break;case 2:p.handshake=ae.com.android.app.motiontool.HandshakeResponse.decode(a,a.uint32());break;case 3:p.beginTrace=ae.com.android.app.motiontool.BeginTraceResponse.decode(a,a.uint32());break;case 4:p.endTrace=ae.com.android.app.motiontool.EndTraceResponse.decode(a,a.uint32());break;case 5:p.pollTrace=ae.com.android.app.motiontool.PollTraceResponse.decode(a,a.uint32());break;default:a.skipType(7&g)}}return p},r.decodeDelimited=function(a){return a instanceof Ne||(a=new Ne(a)),this.decode(a,a.uint32())},r.verify=function(a){if("object"!=typeof a||null===a)return"object expected";let c={};if(null!=a.error&&a.hasOwnProperty("error")){c.type=1;{let d=ae.com.android.app.motiontool.ErrorResponse.verify(a.error);if(d)return"error."+d}}if(null!=a.handshake&&a.hasOwnProperty("handshake")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.HandshakeResponse.verify(a.handshake);if(d)return"handshake."+d}}if(null!=a.beginTrace&&a.hasOwnProperty("beginTrace")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.BeginTraceResponse.verify(a.beginTrace);if(d)return"beginTrace."+d}}if(null!=a.endTrace&&a.hasOwnProperty("endTrace")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.EndTraceResponse.verify(a.endTrace);if(d)return"endTrace."+d}}if(null!=a.pollTrace&&a.hasOwnProperty("pollTrace")){if(1===c.type)return"type: multiple values";c.type=1;{let d=ae.com.android.app.motiontool.PollTraceResponse.verify(a.pollTrace);if(d)return"pollTrace."+d}}return null},r.fromObject=function(a){if(a instanceof ae.com.android.app.motiontool.MotionToolsResponse)return a;let c=new ae.com.android.app.motiontool.MotionToolsResponse;if(null!=a.error){if("object"!=typeof a.error)throw TypeError(".com.android.app.motiontool.MotionToolsResponse.error: object expected");c.error=ae.com.android.app.motiontool.ErrorResponse.fromObject(a.error)}if(null!=a.handshake){if("object"!=typeof a.handshake)throw TypeError(".com.android.app.motiontool.MotionToolsResponse.handshake: object expected");c.handshake=ae.com.android.app.motiontool.HandshakeResponse.fromObject(a.handshake)}if(null!=a.beginTrace){if("object"!=typeof a.beginTrace)throw TypeError(".com.android.app.motiontool.MotionToolsResponse.beginTrace: object expected");c.beginTrace=ae.com.android.app.motiontool.BeginTraceResponse.fromObject(a.beginTrace)}if(null!=a.endTrace){if("object"!=typeof a.endTrace)throw TypeError(".com.android.app.motiontool.MotionToolsResponse.endTrace: object expected");c.endTrace=ae.com.android.app.motiontool.EndTraceResponse.fromObject(a.endTrace)}if(null!=a.pollTrace){if("object"!=typeof a.pollTrace)throw TypeError(".com.android.app.motiontool.MotionToolsResponse.pollTrace: object expected");c.pollTrace=ae.com.android.app.motiontool.PollTraceResponse.fromObject(a.pollTrace)}return c},r.toObject=function(a,c){c||(c={});let d={};return null!=a.error&&a.hasOwnProperty("error")&&(d.error=ae.com.android.app.motiontool.ErrorResponse.toObject(a.error,c),c.oneofs&&(d.type="error")),null!=a.handshake&&a.hasOwnProperty("handshake")&&(d.handshake=ae.com.android.app.motiontool.HandshakeResponse.toObject(a.handshake,c),c.oneofs&&(d.type="handshake")),null!=a.beginTrace&&a.hasOwnProperty("beginTrace")&&(d.beginTrace=ae.com.android.app.motiontool.BeginTraceResponse.toObject(a.beginTrace,c),c.oneofs&&(d.type="beginTrace")),null!=a.endTrace&&a.hasOwnProperty("endTrace")&&(d.endTrace=ae.com.android.app.motiontool.EndTraceResponse.toObject(a.endTrace,c),c.oneofs&&(d.type="endTrace")),null!=a.pollTrace&&a.hasOwnProperty("pollTrace")&&(d.pollTrace=ae.com.android.app.motiontool.PollTraceResponse.toObject(a.pollTrace,c),c.oneofs&&(d.type="pollTrace")),d},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(a){return void 0===a&&(a="type.googleapis.com"),a+"/com.android.app.motiontool.MotionToolsResponse"},r}(),i.ErrorResponse=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.code=0,r.prototype.message="",r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.code&&Object.hasOwnProperty.call(s,"code")&&a.uint32(8).int32(s.code),null!=s.message&&Object.hasOwnProperty.call(s,"message")&&a.uint32(18).string(s.message),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.ErrorResponse;for(;s.pos<c;){let p=s.uint32();switch(p>>>3){case 1:d.code=s.int32();break;case 2:d.message=s.string();break;default:s.skipType(7&p)}}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.code&&s.hasOwnProperty("code"))switch(s.code){default:return"code: enum value expected";case 0:case 1:case 2:case 3:}return null!=s.message&&s.hasOwnProperty("message")&&!mt.isString(s.message)?"message: string expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.ErrorResponse)return s;let a=new ae.com.android.app.motiontool.ErrorResponse;switch(s.code){default:if("number"==typeof s.code){a.code=s.code;break}break;case"UNKNOWN":case 0:a.code=0;break;case"INVALID_REQUEST":case 1:a.code=1;break;case"UNKNOWN_TRACE_ID":case 2:a.code=2;break;case"WINDOW_NOT_FOUND":case 3:a.code=3}return null!=s.message&&(a.message=String(s.message)),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.code=a.enums===String?"UNKNOWN":0,c.message=""),null!=s.code&&s.hasOwnProperty("code")&&(c.code=a.enums===String?void 0===ae.com.android.app.motiontool.ErrorResponse.Code[s.code]?s.code:ae.com.android.app.motiontool.ErrorResponse.Code[s.code]:s.code),null!=s.message&&s.hasOwnProperty("message")&&(c.message=s.message),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.ErrorResponse"},r.Code=function(){const o={},s=Object.create(o);return s[o[0]="UNKNOWN"]=0,s[o[1]="INVALID_REQUEST"]=1,s[o[2]="UNKNOWN_TRACE_ID"]=2,s[o[3]="WINDOW_NOT_FOUND"]=3,s}(),r}(),i.WindowIdentifier=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.rootWindow="",r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.rootWindow&&Object.hasOwnProperty.call(s,"rootWindow")&&a.uint32(10).string(s.rootWindow),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.WindowIdentifier;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.rootWindow=s.string():s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){return"object"!=typeof s||null===s?"object expected":null!=s.rootWindow&&s.hasOwnProperty("rootWindow")&&!mt.isString(s.rootWindow)?"rootWindow: string expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.WindowIdentifier)return s;let a=new ae.com.android.app.motiontool.WindowIdentifier;return null!=s.rootWindow&&(a.rootWindow=String(s.rootWindow)),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.rootWindow=""),null!=s.rootWindow&&s.hasOwnProperty("rootWindow")&&(c.rootWindow=s.rootWindow),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.WindowIdentifier"},r}(),i.HandshakeRequest=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.window=null,r.prototype.clientVersion=0,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.window&&Object.hasOwnProperty.call(s,"window")&&ae.com.android.app.motiontool.WindowIdentifier.encode(s.window,a.uint32(10).fork()).ldelim(),null!=s.clientVersion&&Object.hasOwnProperty.call(s,"clientVersion")&&a.uint32(16).int32(s.clientVersion),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.HandshakeRequest;for(;s.pos<c;){let p=s.uint32();switch(p>>>3){case 1:d.window=ae.com.android.app.motiontool.WindowIdentifier.decode(s,s.uint32());break;case 2:d.clientVersion=s.int32();break;default:s.skipType(7&p)}}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.window&&s.hasOwnProperty("window")){let a=ae.com.android.app.motiontool.WindowIdentifier.verify(s.window);if(a)return"window."+a}return null!=s.clientVersion&&s.hasOwnProperty("clientVersion")&&!mt.isInteger(s.clientVersion)?"clientVersion: integer expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.HandshakeRequest)return s;let a=new ae.com.android.app.motiontool.HandshakeRequest;if(null!=s.window){if("object"!=typeof s.window)throw TypeError(".com.android.app.motiontool.HandshakeRequest.window: object expected");a.window=ae.com.android.app.motiontool.WindowIdentifier.fromObject(s.window)}return null!=s.clientVersion&&(a.clientVersion=0|s.clientVersion),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.window=null,c.clientVersion=0),null!=s.window&&s.hasOwnProperty("window")&&(c.window=ae.com.android.app.motiontool.WindowIdentifier.toObject(s.window,a)),null!=s.clientVersion&&s.hasOwnProperty("clientVersion")&&(c.clientVersion=s.clientVersion),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.HandshakeRequest"},r}(),i.HandshakeResponse=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.status=1,r.prototype.serverVersion=0,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.status&&Object.hasOwnProperty.call(s,"status")&&a.uint32(8).int32(s.status),null!=s.serverVersion&&Object.hasOwnProperty.call(s,"serverVersion")&&a.uint32(16).int32(s.serverVersion),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.HandshakeResponse;for(;s.pos<c;){let p=s.uint32();switch(p>>>3){case 1:d.status=s.int32();break;case 2:d.serverVersion=s.int32();break;default:s.skipType(7&p)}}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.status&&s.hasOwnProperty("status"))switch(s.status){default:return"status: enum value expected";case 1:case 2:}return null!=s.serverVersion&&s.hasOwnProperty("serverVersion")&&!mt.isInteger(s.serverVersion)?"serverVersion: integer expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.HandshakeResponse)return s;let a=new ae.com.android.app.motiontool.HandshakeResponse;switch(s.status){default:if("number"==typeof s.status){a.status=s.status;break}break;case"OK":case 1:a.status=1;break;case"WINDOW_NOT_FOUND":case 2:a.status=2}return null!=s.serverVersion&&(a.serverVersion=0|s.serverVersion),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.status=a.enums===String?"OK":1,c.serverVersion=0),null!=s.status&&s.hasOwnProperty("status")&&(c.status=a.enums===String?void 0===ae.com.android.app.motiontool.HandshakeResponse.Status[s.status]?s.status:ae.com.android.app.motiontool.HandshakeResponse.Status[s.status]:s.status),null!=s.serverVersion&&s.hasOwnProperty("serverVersion")&&(c.serverVersion=s.serverVersion),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.HandshakeResponse"},r.Status=function(){const o={},s=Object.create(o);return s[o[1]="OK"]=1,s[o[2]="WINDOW_NOT_FOUND"]=2,s}(),r}(),i.BeginTraceRequest=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.window=null,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.window&&Object.hasOwnProperty.call(s,"window")&&ae.com.android.app.motiontool.WindowIdentifier.encode(s.window,a.uint32(10).fork()).ldelim(),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.BeginTraceRequest;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.window=ae.com.android.app.motiontool.WindowIdentifier.decode(s,s.uint32()):s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.window&&s.hasOwnProperty("window")){let a=ae.com.android.app.motiontool.WindowIdentifier.verify(s.window);if(a)return"window."+a}return null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.BeginTraceRequest)return s;let a=new ae.com.android.app.motiontool.BeginTraceRequest;if(null!=s.window){if("object"!=typeof s.window)throw TypeError(".com.android.app.motiontool.BeginTraceRequest.window: object expected");a.window=ae.com.android.app.motiontool.WindowIdentifier.fromObject(s.window)}return a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.window=null),null!=s.window&&s.hasOwnProperty("window")&&(c.window=ae.com.android.app.motiontool.WindowIdentifier.toObject(s.window,a)),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.BeginTraceRequest"},r}(),i.BeginTraceResponse=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.traceId=0,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.traceId&&Object.hasOwnProperty.call(s,"traceId")&&a.uint32(8).int32(s.traceId),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.BeginTraceResponse;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.traceId=s.int32():s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){return"object"!=typeof s||null===s?"object expected":null!=s.traceId&&s.hasOwnProperty("traceId")&&!mt.isInteger(s.traceId)?"traceId: integer expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.BeginTraceResponse)return s;let a=new ae.com.android.app.motiontool.BeginTraceResponse;return null!=s.traceId&&(a.traceId=0|s.traceId),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.traceId=0),null!=s.traceId&&s.hasOwnProperty("traceId")&&(c.traceId=s.traceId),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.BeginTraceResponse"},r}(),i.EndTraceRequest=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.traceId=0,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.traceId&&Object.hasOwnProperty.call(s,"traceId")&&a.uint32(8).int32(s.traceId),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.EndTraceRequest;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.traceId=s.int32():s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){return"object"!=typeof s||null===s?"object expected":null!=s.traceId&&s.hasOwnProperty("traceId")&&!mt.isInteger(s.traceId)?"traceId: integer expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.EndTraceRequest)return s;let a=new ae.com.android.app.motiontool.EndTraceRequest;return null!=s.traceId&&(a.traceId=0|s.traceId),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.traceId=0),null!=s.traceId&&s.hasOwnProperty("traceId")&&(c.traceId=s.traceId),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.EndTraceRequest"},r}(),i.EndTraceResponse=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.exportedData=null,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.exportedData&&Object.hasOwnProperty.call(s,"exportedData")&&ae.com.android.app.viewcapture.data.ExportedData.encode(s.exportedData,a.uint32(10).fork()).ldelim(),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.EndTraceResponse;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.exportedData=ae.com.android.app.viewcapture.data.ExportedData.decode(s,s.uint32()):s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.exportedData&&s.hasOwnProperty("exportedData")){let a=ae.com.android.app.viewcapture.data.ExportedData.verify(s.exportedData);if(a)return"exportedData."+a}return null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.EndTraceResponse)return s;let a=new ae.com.android.app.motiontool.EndTraceResponse;if(null!=s.exportedData){if("object"!=typeof s.exportedData)throw TypeError(".com.android.app.motiontool.EndTraceResponse.exportedData: object expected");a.exportedData=ae.com.android.app.viewcapture.data.ExportedData.fromObject(s.exportedData)}return a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.exportedData=null),null!=s.exportedData&&s.hasOwnProperty("exportedData")&&(c.exportedData=ae.com.android.app.viewcapture.data.ExportedData.toObject(s.exportedData,a)),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.EndTraceResponse"},r}(),i.PollTraceRequest=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.traceId=0,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.traceId&&Object.hasOwnProperty.call(s,"traceId")&&a.uint32(8).int32(s.traceId),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.PollTraceRequest;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.traceId=s.int32():s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){return"object"!=typeof s||null===s?"object expected":null!=s.traceId&&s.hasOwnProperty("traceId")&&!mt.isInteger(s.traceId)?"traceId: integer expected":null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.PollTraceRequest)return s;let a=new ae.com.android.app.motiontool.PollTraceRequest;return null!=s.traceId&&(a.traceId=0|s.traceId),a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.traceId=0),null!=s.traceId&&s.hasOwnProperty("traceId")&&(c.traceId=s.traceId),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.PollTraceRequest"},r}(),i.PollTraceResponse=function(){function r(o){if(o)for(let s=Object.keys(o),a=0;a<s.length;++a)null!=o[s[a]]&&(this[s[a]]=o[s[a]])}return r.prototype.exportedData=null,r.create=function(s){return new r(s)},r.encode=function(s,a){return a||(a=ei.create()),null!=s.exportedData&&Object.hasOwnProperty.call(s,"exportedData")&&ae.com.android.app.viewcapture.data.ExportedData.encode(s.exportedData,a.uint32(10).fork()).ldelim(),a},r.encodeDelimited=function(s,a){return this.encode(s,a).ldelim()},r.decode=function(s,a){s instanceof Ne||(s=Ne.create(s));let c=void 0===a?s.len:s.pos+a,d=new ae.com.android.app.motiontool.PollTraceResponse;for(;s.pos<c;){let p=s.uint32();p>>>3==1?d.exportedData=ae.com.android.app.viewcapture.data.ExportedData.decode(s,s.uint32()):s.skipType(7&p)}return d},r.decodeDelimited=function(s){return s instanceof Ne||(s=new Ne(s)),this.decode(s,s.uint32())},r.verify=function(s){if("object"!=typeof s||null===s)return"object expected";if(null!=s.exportedData&&s.hasOwnProperty("exportedData")){let a=ae.com.android.app.viewcapture.data.ExportedData.verify(s.exportedData);if(a)return"exportedData."+a}return null},r.fromObject=function(s){if(s instanceof ae.com.android.app.motiontool.PollTraceResponse)return s;let a=new ae.com.android.app.motiontool.PollTraceResponse;if(null!=s.exportedData){if("object"!=typeof s.exportedData)throw TypeError(".com.android.app.motiontool.PollTraceResponse.exportedData: object expected");a.exportedData=ae.com.android.app.viewcapture.data.ExportedData.fromObject(s.exportedData)}return a},r.toObject=function(s,a){a||(a={});let c={};return a.defaults&&(c.exportedData=null),null!=s.exportedData&&s.hasOwnProperty("exportedData")&&(c.exportedData=ae.com.android.app.viewcapture.data.ExportedData.toObject(s.exportedData,a)),c},r.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},r.getTypeUrl=function(s){return void 0===s&&(s="type.googleapis.com"),s+"/com.android.app.motiontool.PollTraceResponse"},r}(),i}(),e.viewcapture=function(){const i={};return i.data=function(){const r={};return r.ExportedData=function(){function o(s){if(this.frameData=[],this.classname=[],s)for(let a=Object.keys(s),c=0;c<a.length;++c)null!=s[a[c]]&&(this[a[c]]=s[a[c]])}return o.prototype.frameData=mt.emptyArray,o.prototype.classname=mt.emptyArray,o.create=function(a){return new o(a)},o.encode=function(a,c){if(c||(c=ei.create()),null!=a.frameData&&a.frameData.length)for(let d=0;d<a.frameData.length;++d)ae.com.android.app.viewcapture.data.FrameData.encode(a.frameData[d],c.uint32(10).fork()).ldelim();if(null!=a.classname&&a.classname.length)for(let d=0;d<a.classname.length;++d)c.uint32(18).string(a.classname[d]);return c},o.encodeDelimited=function(a,c){return this.encode(a,c).ldelim()},o.decode=function(a,c){a instanceof Ne||(a=Ne.create(a));let d=void 0===c?a.len:a.pos+c,p=new ae.com.android.app.viewcapture.data.ExportedData;for(;a.pos<d;){let g=a.uint32();switch(g>>>3){case 1:p.frameData&&p.frameData.length||(p.frameData=[]),p.frameData.push(ae.com.android.app.viewcapture.data.FrameData.decode(a,a.uint32()));break;case 2:p.classname&&p.classname.length||(p.classname=[]),p.classname.push(a.string());break;default:a.skipType(7&g)}}return p},o.decodeDelimited=function(a){return a instanceof Ne||(a=new Ne(a)),this.decode(a,a.uint32())},o.verify=function(a){if("object"!=typeof a||null===a)return"object expected";if(null!=a.frameData&&a.hasOwnProperty("frameData")){if(!Array.isArray(a.frameData))return"frameData: array expected";for(let c=0;c<a.frameData.length;++c){let d=ae.com.android.app.viewcapture.data.FrameData.verify(a.frameData[c]);if(d)return"frameData."+d}}if(null!=a.classname&&a.hasOwnProperty("classname")){if(!Array.isArray(a.classname))return"classname: array expected";for(let c=0;c<a.classname.length;++c)if(!mt.isString(a.classname[c]))return"classname: string[] expected"}return null},o.fromObject=function(a){if(a instanceof ae.com.android.app.viewcapture.data.ExportedData)return a;let c=new ae.com.android.app.viewcapture.data.ExportedData;if(a.frameData){if(!Array.isArray(a.frameData))throw TypeError(".com.android.app.viewcapture.data.ExportedData.frameData: array expected");c.frameData=[];for(let d=0;d<a.frameData.length;++d){if("object"!=typeof a.frameData[d])throw TypeError(".com.android.app.viewcapture.data.ExportedData.frameData: object expected");c.frameData[d]=ae.com.android.app.viewcapture.data.FrameData.fromObject(a.frameData[d])}}if(a.classname){if(!Array.isArray(a.classname))throw TypeError(".com.android.app.viewcapture.data.ExportedData.classname: array expected");c.classname=[];for(let d=0;d<a.classname.length;++d)c.classname[d]=String(a.classname[d])}return c},o.toObject=function(a,c){c||(c={});let d={};if((c.arrays||c.defaults)&&(d.frameData=[],d.classname=[]),a.frameData&&a.frameData.length){d.frameData=[];for(let p=0;p<a.frameData.length;++p)d.frameData[p]=ae.com.android.app.viewcapture.data.FrameData.toObject(a.frameData[p],c)}if(a.classname&&a.classname.length){d.classname=[];for(let p=0;p<a.classname.length;++p)d.classname[p]=a.classname[p]}return d},o.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},o.getTypeUrl=function(a){return void 0===a&&(a="type.googleapis.com"),a+"/com.android.app.viewcapture.data.ExportedData"},o}(),r.FrameData=function(){function o(s){if(s)for(let a=Object.keys(s),c=0;c<a.length;++c)null!=s[a[c]]&&(this[a[c]]=s[a[c]])}return o.prototype.timestamp=mt.Long?mt.Long.fromBits(0,0,!1):0,o.prototype.node=null,o.create=function(a){return new o(a)},o.encode=function(a,c){return c||(c=ei.create()),null!=a.timestamp&&Object.hasOwnProperty.call(a,"timestamp")&&c.uint32(8).int64(a.timestamp),null!=a.node&&Object.hasOwnProperty.call(a,"node")&&ae.com.android.app.viewcapture.data.ViewNode.encode(a.node,c.uint32(18).fork()).ldelim(),c},o.encodeDelimited=function(a,c){return this.encode(a,c).ldelim()},o.decode=function(a,c){a instanceof Ne||(a=Ne.create(a));let d=void 0===c?a.len:a.pos+c,p=new ae.com.android.app.viewcapture.data.FrameData;for(;a.pos<d;){let g=a.uint32();switch(g>>>3){case 1:p.timestamp=a.int64();break;case 2:p.node=ae.com.android.app.viewcapture.data.ViewNode.decode(a,a.uint32());break;default:a.skipType(7&g)}}return p},o.decodeDelimited=function(a){return a instanceof Ne||(a=new Ne(a)),this.decode(a,a.uint32())},o.verify=function(a){if("object"!=typeof a||null===a)return"object expected";if(null!=a.timestamp&&a.hasOwnProperty("timestamp")&&!mt.isInteger(a.timestamp)&&!(a.timestamp&&mt.isInteger(a.timestamp.low)&&mt.isInteger(a.timestamp.high)))return"timestamp: integer|Long expected";if(null!=a.node&&a.hasOwnProperty("node")){let c=ae.com.android.app.viewcapture.data.ViewNode.verify(a.node);if(c)return"node."+c}return null},o.fromObject=function(a){if(a instanceof ae.com.android.app.viewcapture.data.FrameData)return a;let c=new ae.com.android.app.viewcapture.data.FrameData;if(null!=a.timestamp&&(mt.Long?(c.timestamp=mt.Long.fromValue(a.timestamp)).unsigned=!1:"string"==typeof a.timestamp?c.timestamp=parseInt(a.timestamp,10):"number"==typeof a.timestamp?c.timestamp=a.timestamp:"object"==typeof a.timestamp&&(c.timestamp=new mt.LongBits(a.timestamp.low>>>0,a.timestamp.high>>>0).toNumber())),null!=a.node){if("object"!=typeof a.node)throw TypeError(".com.android.app.viewcapture.data.FrameData.node: object expected");c.node=ae.com.android.app.viewcapture.data.ViewNode.fromObject(a.node)}return c},o.toObject=function(a,c){c||(c={});let d={};if(c.defaults){if(mt.Long){let p=new mt.Long(0,0,!1);d.timestamp=c.longs===String?p.toString():c.longs===Number?p.toNumber():p}else d.timestamp=c.longs===String?"0":0;d.node=null}return null!=a.timestamp&&a.hasOwnProperty("timestamp")&&(d.timestamp="number"==typeof a.timestamp?c.longs===String?String(a.timestamp):a.timestamp:c.longs===String?mt.Long.prototype.toString.call(a.timestamp):c.longs===Number?new mt.LongBits(a.timestamp.low>>>0,a.timestamp.high>>>0).toNumber():a.timestamp),null!=a.node&&a.hasOwnProperty("node")&&(d.node=ae.com.android.app.viewcapture.data.ViewNode.toObject(a.node,c)),d},o.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},o.getTypeUrl=function(a){return void 0===a&&(a="type.googleapis.com"),a+"/com.android.app.viewcapture.data.FrameData"},o}(),r.ViewNode=function(){function o(s){if(this.children=[],s)for(let a=Object.keys(s),c=0;c<a.length;++c)null!=s[a[c]]&&(this[a[c]]=s[a[c]])}return o.prototype.classnameIndex=0,o.prototype.hashcode=0,o.prototype.children=mt.emptyArray,o.prototype.id="",o.prototype.left=0,o.prototype.top=0,o.prototype.width=0,o.prototype.height=0,o.prototype.scrollX=0,o.prototype.scrollY=0,o.prototype.translationX=0,o.prototype.translationY=0,o.prototype.scaleX=1,o.prototype.scaleY=1,o.prototype.alpha=1,o.prototype.willNotDraw=!1,o.prototype.clipChildren=!1,o.prototype.visibility=0,o.prototype.elevation=0,o.create=function(a){return new o(a)},o.encode=function(a,c){if(c||(c=ei.create()),null!=a.classnameIndex&&Object.hasOwnProperty.call(a,"classnameIndex")&&c.uint32(8).int32(a.classnameIndex),null!=a.hashcode&&Object.hasOwnProperty.call(a,"hashcode")&&c.uint32(16).int32(a.hashcode),null!=a.children&&a.children.length)for(let d=0;d<a.children.length;++d)ae.com.android.app.viewcapture.data.ViewNode.encode(a.children[d],c.uint32(26).fork()).ldelim();return null!=a.id&&Object.hasOwnProperty.call(a,"id")&&c.uint32(34).string(a.id),null!=a.left&&Object.hasOwnProperty.call(a,"left")&&c.uint32(40).int32(a.left),null!=a.top&&Object.hasOwnProperty.call(a,"top")&&c.uint32(48).int32(a.top),null!=a.width&&Object.hasOwnProperty.call(a,"width")&&c.uint32(56).int32(a.width),null!=a.height&&Object.hasOwnProperty.call(a,"height")&&c.uint32(64).int32(a.height),null!=a.scrollX&&Object.hasOwnProperty.call(a,"scrollX")&&c.uint32(72).int32(a.scrollX),null!=a.scrollY&&Object.hasOwnProperty.call(a,"scrollY")&&c.uint32(80).int32(a.scrollY),null!=a.translationX&&Object.hasOwnProperty.call(a,"translationX")&&c.uint32(93).float(a.translationX),null!=a.translationY&&Object.hasOwnProperty.call(a,"translationY")&&c.uint32(101).float(a.translationY),null!=a.scaleX&&Object.hasOwnProperty.call(a,"scaleX")&&c.uint32(109).float(a.scaleX),null!=a.scaleY&&Object.hasOwnProperty.call(a,"scaleY")&&c.uint32(117).float(a.scaleY),null!=a.alpha&&Object.hasOwnProperty.call(a,"alpha")&&c.uint32(125).float(a.alpha),null!=a.willNotDraw&&Object.hasOwnProperty.call(a,"willNotDraw")&&c.uint32(128).bool(a.willNotDraw),null!=a.clipChildren&&Object.hasOwnProperty.call(a,"clipChildren")&&c.uint32(136).bool(a.clipChildren),null!=a.visibility&&Object.hasOwnProperty.call(a,"visibility")&&c.uint32(144).int32(a.visibility),null!=a.elevation&&Object.hasOwnProperty.call(a,"elevation")&&c.uint32(157).float(a.elevation),c},o.encodeDelimited=function(a,c){return this.encode(a,c).ldelim()},o.decode=function(a,c){a instanceof Ne||(a=Ne.create(a));let d=void 0===c?a.len:a.pos+c,p=new ae.com.android.app.viewcapture.data.ViewNode;for(;a.pos<d;){let g=a.uint32();switch(g>>>3){case 1:p.classnameIndex=a.int32();break;case 2:p.hashcode=a.int32();break;case 3:p.children&&p.children.length||(p.children=[]),p.children.push(ae.com.android.app.viewcapture.data.ViewNode.decode(a,a.uint32()));break;case 4:p.id=a.string();break;case 5:p.left=a.int32();break;case 6:p.top=a.int32();break;case 7:p.width=a.int32();break;case 8:p.height=a.int32();break;case 9:p.scrollX=a.int32();break;case 10:p.scrollY=a.int32();break;case 11:p.translationX=a.float();break;case 12:p.translationY=a.float();break;case 13:p.scaleX=a.float();break;case 14:p.scaleY=a.float();break;case 15:p.alpha=a.float();break;case 16:p.willNotDraw=a.bool();break;case 17:p.clipChildren=a.bool();break;case 18:p.visibility=a.int32();break;case 19:p.elevation=a.float();break;default:a.skipType(7&g)}}return p},o.decodeDelimited=function(a){return a instanceof Ne||(a=new Ne(a)),this.decode(a,a.uint32())},o.verify=function(a){if("object"!=typeof a||null===a)return"object expected";if(null!=a.classnameIndex&&a.hasOwnProperty("classnameIndex")&&!mt.isInteger(a.classnameIndex))return"classnameIndex: integer expected";if(null!=a.hashcode&&a.hasOwnProperty("hashcode")&&!mt.isInteger(a.hashcode))return"hashcode: integer expected";if(null!=a.children&&a.hasOwnProperty("children")){if(!Array.isArray(a.children))return"children: array expected";for(let c=0;c<a.children.length;++c){let d=ae.com.android.app.viewcapture.data.ViewNode.verify(a.children[c]);if(d)return"children."+d}}return null!=a.id&&a.hasOwnProperty("id")&&!mt.isString(a.id)?"id: string expected":null!=a.left&&a.hasOwnProperty("left")&&!mt.isInteger(a.left)?"left: integer expected":null!=a.top&&a.hasOwnProperty("top")&&!mt.isInteger(a.top)?"top: integer expected":null!=a.width&&a.hasOwnProperty("width")&&!mt.isInteger(a.width)?"width: integer expected":null!=a.height&&a.hasOwnProperty("height")&&!mt.isInteger(a.height)?"height: integer expected":null!=a.scrollX&&a.hasOwnProperty("scrollX")&&!mt.isInteger(a.scrollX)?"scrollX: integer expected":null!=a.scrollY&&a.hasOwnProperty("scrollY")&&!mt.isInteger(a.scrollY)?"scrollY: integer expected":null!=a.translationX&&a.hasOwnProperty("translationX")&&"number"!=typeof a.translationX?"translationX: number expected":null!=a.translationY&&a.hasOwnProperty("translationY")&&"number"!=typeof a.translationY?"translationY: number expected":null!=a.scaleX&&a.hasOwnProperty("scaleX")&&"number"!=typeof a.scaleX?"scaleX: number expected":null!=a.scaleY&&a.hasOwnProperty("scaleY")&&"number"!=typeof a.scaleY?"scaleY: number expected":null!=a.alpha&&a.hasOwnProperty("alpha")&&"number"!=typeof a.alpha?"alpha: number expected":null!=a.willNotDraw&&a.hasOwnProperty("willNotDraw")&&"boolean"!=typeof a.willNotDraw?"willNotDraw: boolean expected":null!=a.clipChildren&&a.hasOwnProperty("clipChildren")&&"boolean"!=typeof a.clipChildren?"clipChildren: boolean expected":null!=a.visibility&&a.hasOwnProperty("visibility")&&!mt.isInteger(a.visibility)?"visibility: integer expected":null!=a.elevation&&a.hasOwnProperty("elevation")&&"number"!=typeof a.elevation?"elevation: number expected":null},o.fromObject=function(a){if(a instanceof ae.com.android.app.viewcapture.data.ViewNode)return a;let c=new ae.com.android.app.viewcapture.data.ViewNode;if(null!=a.classnameIndex&&(c.classnameIndex=0|a.classnameIndex),null!=a.hashcode&&(c.hashcode=0|a.hashcode),a.children){if(!Array.isArray(a.children))throw TypeError(".com.android.app.viewcapture.data.ViewNode.children: array expected");c.children=[];for(let d=0;d<a.children.length;++d){if("object"!=typeof a.children[d])throw TypeError(".com.android.app.viewcapture.data.ViewNode.children: object expected");c.children[d]=ae.com.android.app.viewcapture.data.ViewNode.fromObject(a.children[d])}}return null!=a.id&&(c.id=String(a.id)),null!=a.left&&(c.left=0|a.left),null!=a.top&&(c.top=0|a.top),null!=a.width&&(c.width=0|a.width),null!=a.height&&(c.height=0|a.height),null!=a.scrollX&&(c.scrollX=0|a.scrollX),null!=a.scrollY&&(c.scrollY=0|a.scrollY),null!=a.translationX&&(c.translationX=Number(a.translationX)),null!=a.translationY&&(c.translationY=Number(a.translationY)),null!=a.scaleX&&(c.scaleX=Number(a.scaleX)),null!=a.scaleY&&(c.scaleY=Number(a.scaleY)),null!=a.alpha&&(c.alpha=Number(a.alpha)),null!=a.willNotDraw&&(c.willNotDraw=Boolean(a.willNotDraw)),null!=a.clipChildren&&(c.clipChildren=Boolean(a.clipChildren)),null!=a.visibility&&(c.visibility=0|a.visibility),null!=a.elevation&&(c.elevation=Number(a.elevation)),c},o.toObject=function(a,c){c||(c={});let d={};if((c.arrays||c.defaults)&&(d.children=[]),c.defaults&&(d.classnameIndex=0,d.hashcode=0,d.id="",d.left=0,d.top=0,d.width=0,d.height=0,d.scrollX=0,d.scrollY=0,d.translationX=0,d.translationY=0,d.scaleX=1,d.scaleY=1,d.alpha=1,d.willNotDraw=!1,d.clipChildren=!1,d.visibility=0,d.elevation=0),null!=a.classnameIndex&&a.hasOwnProperty("classnameIndex")&&(d.classnameIndex=a.classnameIndex),null!=a.hashcode&&a.hasOwnProperty("hashcode")&&(d.hashcode=a.hashcode),a.children&&a.children.length){d.children=[];for(let p=0;p<a.children.length;++p)d.children[p]=ae.com.android.app.viewcapture.data.ViewNode.toObject(a.children[p],c)}return null!=a.id&&a.hasOwnProperty("id")&&(d.id=a.id),null!=a.left&&a.hasOwnProperty("left")&&(d.left=a.left),null!=a.top&&a.hasOwnProperty("top")&&(d.top=a.top),null!=a.width&&a.hasOwnProperty("width")&&(d.width=a.width),null!=a.height&&a.hasOwnProperty("height")&&(d.height=a.height),null!=a.scrollX&&a.hasOwnProperty("scrollX")&&(d.scrollX=a.scrollX),null!=a.scrollY&&a.hasOwnProperty("scrollY")&&(d.scrollY=a.scrollY),null!=a.translationX&&a.hasOwnProperty("translationX")&&(d.translationX=c.json&&!isFinite(a.translationX)?String(a.translationX):a.translationX),null!=a.translationY&&a.hasOwnProperty("translationY")&&(d.translationY=c.json&&!isFinite(a.translationY)?String(a.translationY):a.translationY),null!=a.scaleX&&a.hasOwnProperty("scaleX")&&(d.scaleX=c.json&&!isFinite(a.scaleX)?String(a.scaleX):a.scaleX),null!=a.scaleY&&a.hasOwnProperty("scaleY")&&(d.scaleY=c.json&&!isFinite(a.scaleY)?String(a.scaleY):a.scaleY),null!=a.alpha&&a.hasOwnProperty("alpha")&&(d.alpha=c.json&&!isFinite(a.alpha)?String(a.alpha):a.alpha),null!=a.willNotDraw&&a.hasOwnProperty("willNotDraw")&&(d.willNotDraw=a.willNotDraw),null!=a.clipChildren&&a.hasOwnProperty("clipChildren")&&(d.clipChildren=a.clipChildren),null!=a.visibility&&a.hasOwnProperty("visibility")&&(d.visibility=a.visibility),null!=a.elevation&&a.hasOwnProperty("elevation")&&(d.elevation=c.json&&!isFinite(a.elevation)?String(a.elevation):a.elevation),d},o.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},o.getTypeUrl=function(a){return void 0===a&&(a="type.googleapis.com"),a+"/com.android.app.viewcapture.data.ViewNode"},o}(),r}(),i}(),e}(),t}(),n})();var qB=J(40);class WB extends EventTarget{constructor(t){super(),this.device=t,this.scale=.5,this._playState=null}get currentFrame(){return this._playState?.currentFrame??0}get width(){return this._width??0}get height(){return this._height??0}get state(){return this._playState?"play":"stop"}drawCurrentFrame(t){!this._playState||t.drawImage(this._playState?.videoElement,0,0,t.canvas.width,t.canvas.height)}play(){var t=this;return Fe(function*(){if(null!==t._playState)return;const e=document.createElement("video");e.muted=!0;const i=new qB({node:e,mode:"video",flushingTime:0,fps:120,clearBuffer:!0}),o=(yield t.device.shellCommand("wm size")).match(/\b(?<width>\d+)x(?<height>\d+)\b/);if(!o)throw new Error("Unable to determine screen size");t._width=parseInt(o.groups.width)*t.scale,t._height=parseInt(o.groups.height)*t.scale;const s=t.device.openStream(`shell:screenrecord --size=${t._width}x${t._height} --output-format=h264 - `);return t._playState=new YB(s,i,e),e.addEventListener("loadedmetadata",()=>{console.log("metadata changed"),t._width=e.videoWidth,t._height=e.videoHeight,t.dispatchEvent(new CustomEvent("metadata-changed",{}))}),e.play()})()}stop(){var t=this;return Fe(function*(){t._playState?.dispose(),t._playState=null})()}dispose(){this._playState?.dispose(),this._playState=null}}class YB{constructor(t,e,i){this.stream=t,this.remuxer=e,this.videoElement=i,this.currentFrame=0,t.onReceiveWrite=r=>{t.sendReady(),e.feed({video:r})}}dispose(){this.stream.close(),this.videoElement.pause(),this.remuxer.destroy()}}class XB{constructor(t){this._stream=t.openStream("sync:"),this._stream.keepOpen=!0}getFileSize(t){var e=this;return Fe(function*(){const i=Nt(e._stream,"Sync client already disposed");yield nD("STAT",t,i);const r=yield rD(16,i),o=oD(r);if("STAT"!=o)throw new Error(`Server answered with unexpected command '${o}'`);return r.getUint32(8,!0)})()}pull(t){var e=this;return Fe(function*(){Ko(null!=e._stream,"Sync client already disposed");const i=e._stream.device.openStream("sync:");return i.keepOpen=!0,new ReadableStream({start:r=>Fe(function*(){try{for(nD("RECV",t,i);;){const o=yield rD(8,i),s=oD(o);if("DONE"==s)return;if("DATA"!=s)throw new Error(`SYNC failed. Received '${s}', expected 'DATA'`);const a=o.getUint32(4,!0),c=yield iD(a,i);r.enqueue(c)}}catch(o){r.error(o)}finally{r.close(),i.close()}})()})})()}dispose(){this._stream?.close(),this._stream=null}}function nD(n,t,e){return Mm.apply(this,arguments)}function Mm(){return(Mm=Fe(function*(n,t,e){Xo(4==n.length),Xo(t.length<=1024);let i=new DataOutputStream;i.highFirst=!1,i.writeBytes(stringToByteArray(n));const r=stringToByteArray(t);i.writeInt(r.length),i.writeBytes(r),yield e.write(new Uint8Array(i.data))})).apply(this,arguments)}function iD(n,t){return Tm.apply(this,arguments)}function Tm(){return(Tm=Fe(function*(n,t){const e=new Sl;return t.read(n,function(i){e.resolve(i)}),e})).apply(this,arguments)}function rD(n,t){return km.apply(this,arguments)}function km(){return(km=Fe(function*(n,t){const e=yield iD(n,t);return new DataView(e.buffer,e.byteOffset,e.byteLength)})).apply(this,arguments)}function oD(n){return String.fromCharCode(n.getInt8(0),n.getInt8(1),n.getInt8(2),n.getInt8(3))}class KB{constructor(t){this._device=t,this._captureState=null}record(){var t=this;return Fe(function*(){if(null!==t._captureState)return;const e=`/data/local/tmp/motion-${Date.now()}.mp4`,i=t._device.openStream(`shell:screenrecord --output-format=mp4 ${e}`);t._captureState=new ZB(i,e),yield Dl(200)})()}stop(){var t=this;return Fe(function*(){if(null===t._captureState)throw new Error("Illegal State: no video capture in progress");const{filename:e,shellStream:i}=t._captureState;return t._captureState=null,yield i.write("\x03"),i.close(),{video:t._pullVideo(e)}})()}_pullVideo(t){var e=this;return Fe(function*(){const i=e._device,r=new XB(i);try{yield Promise.race([QB(t,r),Dl(1e4)]);const o=new TransformStream({flush:()=>Fe(function*(){yield i.shellCommand(`rm ${t}`)})()});return(yield r.pull(t)).pipeTo(o.writable),o.readable}finally{r.dispose()}})()}}class ZB{constructor(t,e){this.shellStream=t,this.filename=e}}function QB(n,t){return Im.apply(this,arguments)}function Im(){return(Im=Fe(function*(n,t){let e=yield t.getFileSize(n);for(;;){yield Dl(1e3);const i=yield t.getFileSize(n);if(e>5e3&&e==i)return;e=i}})).apply(this,arguments)}class JB extends k{constructor(t,e){super()}schedule(t,e=0){return this}}const zu={setInterval(n,t,...e){const{delegate:i}=zu;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=zu;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class Am extends JB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return zu.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&zu.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,i=!1;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,B(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Rm={now:()=>(Rm.delegate||Date).now(),delegate:void 0};class xl{constructor(t,e=xl.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}xl.now=Rm.now;class Om extends xl{constructor(t,e=xl.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const Ml=new Om(Am),eU=Ml;function Tl(...n){return function tU(){return ms(1)}()(hn(n,Ta(n)))}function jn(n){return n<=0?()=>fr:ce((t,e)=>{let i=0;t.subscribe(ee(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function sD(n){return $(()=>n)}function aD(n,t){return t?e=>Tl(t.pipe(jn(1),function nU(){return ce((n,t)=>{n.subscribe(ee(t,W))})}()),e.pipe(aD(n))):vn((e,i)=>n(e,i).pipe(jn(1),sD(e)))}function Pm(n=0,t,e=eU){let i=-1;return null!=t&&(fy(t)?e=t:i=t),new Qe(r=>{let o=function iU(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function $u(n,t=Ml){const e=Pm(n,t);return aD(()=>e)}var kl=tD.android.app.motiontool;const lD=1297044559;class go extends EventTarget{constructor(t,e,i,r){super(),this.deviceId=t,this.processId=e,this.processName=i,this.windowId=r,this._state={type:"disconnected"},this._deviceConnected=!1,this._deviceConnectedPromise=new Sl,this._deviceStateChangeRequestToken=0}static createFromUrlParams(t){function e(a,c){const d=t.get(a);if(!d?.match(c))throw ZC("InvalidUrlParams",`Invalid param ${a} (${d})`);return d}const i=e("serial",/[a-zA-Z0-9]{14}/),r=Number.parseInt(e("pid",/\d+/)),o=e("pname",/.+/),s=e("wid",/.+/);return new go(i,r,o,s)}get state(){return this._state}set state(t){this._state=t,this.dispatchEvent(new CustomEvent("state-changed",{detail:t}))}connect(){var t=this;return Fe(function*(){if("disconnected"!==t._state.type)throw new Error(`Unable to connect. Unexpected state ${t._state}`);Ko(!t._adbDevice);try{t.state={type:"connecting"};try{t._adbDevice=yield function oU(n){return Fm.apply(this,arguments)}(t.deviceId)}catch(i){if(function jB(n,t){return n instanceof Error&&n.name===t}(i,"DeviceNotFound"))return void(t.state={type:"error",detail:"deviceNotFound",message:`No device with serial ${t.deviceId} found`});throw i}let e;t._adbDevice.stateCallback=t._deviceStateChanges.bind(t),yield t._adbDevice.connect(),yield t._deviceConnectedPromise,Ko(!t._jdwp),t._jdwp=new jdwp(t.processId,t._adbDevice);try{e=yield t._readProcessName()}catch(i){if(i instanceof Error&&"StreamDisconnectedError"===i.name)return void(t.state={type:"error",detail:"processNotFound",message:`Process with ID ${t.processId} not found`});throw i}if(e!==t.processName)return void(t.state={type:"error",detail:"processNotFound",message:`Process ID ${t.processId} reported unexpected name (${e}).`});yield t.sendHandshake(),t.state={type:"connected"}}catch(e){throw t.state={type:"error",detail:"unknown",exception:e},e}})()}sendRequest(t){var e=this;return Fe(function*(){const i=Nt(e._jdwp);console.log(t);const r=kl.MotionToolsRequest.encode(t).finish(),o=yield i.writeChunk(lD,r);if(o.chunkType!==lD)throw new Error(`Unexpected chunk type 0x${o.chunkType.toString(16)}`);const s=o.data.slice(o.pos),a=kl.MotionToolsResponse.decode(s);return console.log(a),a})()}createLiveViewSource(){return new WB(Nt(this._adbDevice))}createVideoCapture(){var t=this;return Fe(function*(){return new KB(Nt(t._adbDevice))})()}shellCommand(t){return Nt(this._adbDevice).shellCommand(t)}disconnect(){return Fe(function*(){})()}_deviceStateChanges(t){var e=this;return Fe(function*(){const i=++e._deviceStateChangeRequestToken;let r=!1;switch(t){case STATE_DISCONNECTED:e._adbDevice?.closeAll(),e._adbDevice?.disconnect(),e._adbDevice=void 0,e.state={type:"disconnected"};break;case STATE_CONNECTING:e.state={type:"connecting"};break;case STATE_ERROR:e.state={type:"error",detail:"unknown",exception:new Error("adbDevice reported error state")};break;case STATE_UNAUTHORIZED:if(yield $u(200),i!=e._deviceStateChangeRequestToken)return;e.state={type:"unauthorized"};break;case STATE_CONNECTED_DEVICE:e.state={type:"connecting"},r=!0}r&&!e._deviceConnected?(e._deviceConnected=!0,e._deviceConnectedPromise.resolve()):!r&&e._deviceConnected&&(e._deviceConnected=!1,e._deviceConnectedPromise=new Sl)})()}_readProcessName(){var t=this;return Fe(function*(){const i=yield Nt(t._jdwp).writeChunk("HELO",[0,0,0,1]),o=(i.readInt(),i.readInt()),s=i.readInt(),a=i.readInt(),d=(i.readStr(s),i.readStr(a));return console.log(`Connected to process ${o} (${d})`),d})()}sendHandshake(){var t=this;return Fe(function*(){const e=new kl.MotionToolsRequest({handshake:new kl.HandshakeRequest({window:new kl.WindowIdentifier({rootWindow:t.windowId}),clientVersion:1})}),i=(yield t.sendRequest(e)).handshake;console.log("handshake response: "+i)})()}}function Fm(){return Fm=Fe(function*(n){const e=(yield navigator.usb.getDevices()).find(o=>o.serialNumber===n);if(!e)throw ZC("DeviceNotFound",`No device with serial ${n} found`);const i=yield GB(()=>sU(e),{delay:JC(500),attemptFailed:(o=Fe(function*(s,a){console.log("Device is use, trying reset",a),yield e.reset()}),function(a,c){return o.apply(this,arguments)})});var o;return new AdbDevice(e,i)}),Fm.apply(this,arguments)}function sU(n){return Nm.apply(this,arguments)}function Nm(){return(Nm=Fe(function*(n){yield n.open(),n.configuration||(yield n.selectConfiguration(1));const t=n.configuration?.interfaces?.find(e=>e.alternate.interfaceClass===ADB_INTERFACE_CLASS&&e.alternate.interfaceSubclass===ADB_INTERFACE_SUB_CLASS&&e.alternate.interfaceProtocol===ADB_INTERFACE_PROTOCOL);if(null==t)throw new eD("Device does not support ADB interface");return yield n.claimInterface(t.interfaceNumber),t})).apply(this,arguments)}const Lm="screenrecord.mp4",cD="trace.pb.bin";var aU=J(153);const lU=(new TextEncoder).encode("#VV1NSC0PET1ME!#"),cU=(new TextEncoder).encode("#VV1NSC0PET1ME2#");function uD(n,t){return Um.apply(this,arguments)}function Um(){return(Um=Fe(function*(n,t){const e=t?.readFrameData??!1;let i,r,o;const s=(0,aU.cn)();s.onError=S=>{console.error(`mp4box parser error: ${S}`),i=S},s.onReady=S=>{if(r=S,1!=r.videoTracks.length)throw new Error(`Recording must contain exactly 1 video track (found ${r.videoTracks.length})`);o=r.videoTracks[0],s.setExtractionOptions(o.id,"video"),r.metadataTracks.forEach(({id:R})=>s.setExtractionOptions(R,"metadata")),e&&s.start()};const a=[];let c;function d(S){a.push({index:S.number,time:S.cts/S.timescale})}function p(S){if(S.data.length<16)return;const R=S.data.subarray(0,16),G=new DataView(S.data.buffer,S.data.byteOffset+16);if(QC(R,lU)){const te=G.getUint32(0,!0);c=[];for(let le=0;le<te;le++)c.push(G.getBigUint64(4+8*le,!0))}else QC(R,cU)&&console.log()}s.onSamples=(S,R,G)=>{"video"===R?G.forEach(d):"metadata"==R&&G.forEach(p),s.releaseUsedSamples(S,G[G.length-1].number)};const g=(yield n.readable(Lm)).getReader();let E=0;for(;!i;){const{done:S,value:R}=yield g.read();if(S){s.flush();break}const G=R.buffer;G.fileStart=E,s.appendBuffer(G),E+=G.byteLength}if(i)throw yield g.cancel(i),new Error(i);if(!o)throw new Error("Video track not found");if(c){Ko(c.length===a.length);for(let S=0;S<c.length;S++)a[S].winscope1PtsMicros=c[S]}return s.stop(),{width:o.video.width,height:o.video.height,duration_nanos:1000000000n*BigInt(r.duration)/BigInt(r.timescale),videoFrames:a}})).apply(this,arguments)}class Vm extends EventTarget{constructor(t,e,i,r){super(),this.width=e,this.height=i,this.duration=r,this.seekable=!0,this._videoElement=null,this._currentSeekPromise=null;const o=document.createElement("video");o.muted=!0,o.src=t,this._videoElement=o}static createVideoSource(t){return Fe(function*(){const{width:e,height:i,duration_nanos:r}=yield uD(t,{readFrameData:!0});return new Vm(yield t.objectUrl(Lm),e,i,Number(r)/1e9)})()}drawCurrentFrame(t){!this._videoElement||t.drawImage(this._videoElement,0,0,t.canvas.width,t.canvas.height)}get loop(){return this._videoElement?.loop??!1}set loop(t){Nt(this._videoElement).loop=t}get playbackRate(){return this._videoElement?.playbackRate??1}set playbackRate(t){Nt(this._videoElement).playbackRate=t}get state(){return this._videoElement?this._currentSeekPromise?"seek":this._videoElement.paused||this._videoElement.ended?"stop":"play":"stop"}play(){var t=this;return Fe(function*(){t._videoElement?.play()})()}stop(){var t=this;return Fe(function*(){t._videoElement?.pause(),t._cancelSeek()})()}dispose(){this._cancelSeek(),this._videoElement&&(this._videoElement.pause(),URL.revokeObjectURL(this._videoElement.src),this._videoElement.src="")}get currentTime(){return this._videoElement?.currentTime??0}seek(t){var e=this;return Fe(function*(){if(!e._videoElement)return!1;if(e._cancelSeek(),e._videoElement.currentTime==t)return!0;const i=new Sl;e._currentSeekPromise=i;const r=new Yo;r.addListener(e._videoElement,"seeked",()=>i.resolve(!0)),e._videoElement.currentTime=t;try{return yield i}finally{r.dispose(),e._currentSeekPromise==i&&(e._currentSeekPromise=null)}})()}_cancelSeek(){this._currentSeekPromise?.resolve(!1),this._currentSeekPromise=null}}const Qt=It.Reader,oa=It.Writer,Be=It.util,$e=It.roots.default||(It.roots.default={}),Il=$e.motion=(()=>{const n={};return n.Trace=function(){function t(e){if(this.frames=[],e)for(let i=Object.keys(e),r=0;r<i.length;++r)null!=e[i[r]]&&(this[i[r]]=e[i[r]])}return t.prototype.id="",t.prototype.version=0,t.prototype.name="",t.prototype.captureTime=null,t.prototype.processName="",t.prototype.windowName="",t.prototype.duration=null,t.prototype.videoMetadata=null,t.prototype.frames=Be.emptyArray,t.create=function(i){return new t(i)},t.encode=function(i,r){if(r||(r=oa.create()),null!=i.id&&Object.hasOwnProperty.call(i,"id")&&r.uint32(10).string(i.id),null!=i.version&&Object.hasOwnProperty.call(i,"version")&&r.uint32(16).int32(i.version),null!=i.name&&Object.hasOwnProperty.call(i,"name")&&r.uint32(26).string(i.name),null!=i.captureTime&&Object.hasOwnProperty.call(i,"captureTime")&&$e.google.protobuf.Timestamp.encode(i.captureTime,r.uint32(34).fork()).ldelim(),null!=i.processName&&Object.hasOwnProperty.call(i,"processName")&&r.uint32(42).string(i.processName),null!=i.windowName&&Object.hasOwnProperty.call(i,"windowName")&&r.uint32(50).string(i.windowName),null!=i.duration&&Object.hasOwnProperty.call(i,"duration")&&$e.google.protobuf.Duration.encode(i.duration,r.uint32(58).fork()).ldelim(),null!=i.videoMetadata&&Object.hasOwnProperty.call(i,"videoMetadata")&&$e.motion.VideoMetadata.encode(i.videoMetadata,r.uint32(66).fork()).ldelim(),null!=i.frames&&i.frames.length)for(let o=0;o<i.frames.length;++o)$e.motion.Frame.encode(i.frames[o],r.uint32(74).fork()).ldelim();return r},t.encodeDelimited=function(i,r){return this.encode(i,r).ldelim()},t.decode=function(i,r){i instanceof Qt||(i=Qt.create(i));let o=void 0===r?i.len:i.pos+r,s=new $e.motion.Trace;for(;i.pos<o;){let a=i.uint32();switch(a>>>3){case 1:s.id=i.string();break;case 2:s.version=i.int32();break;case 3:s.name=i.string();break;case 4:s.captureTime=$e.google.protobuf.Timestamp.decode(i,i.uint32());break;case 5:s.processName=i.string();break;case 6:s.windowName=i.string();break;case 7:s.duration=$e.google.protobuf.Duration.decode(i,i.uint32());break;case 8:s.videoMetadata=$e.motion.VideoMetadata.decode(i,i.uint32());break;case 9:s.frames&&s.frames.length||(s.frames=[]),s.frames.push($e.motion.Frame.decode(i,i.uint32()));break;default:i.skipType(7&a)}}return s},t.decodeDelimited=function(i){return i instanceof Qt||(i=new Qt(i)),this.decode(i,i.uint32())},t.verify=function(i){if("object"!=typeof i||null===i)return"object expected";if(null!=i.id&&i.hasOwnProperty("id")&&!Be.isString(i.id))return"id: string expected";if(null!=i.version&&i.hasOwnProperty("version")&&!Be.isInteger(i.version))return"version: integer expected";if(null!=i.name&&i.hasOwnProperty("name")&&!Be.isString(i.name))return"name: string expected";if(null!=i.captureTime&&i.hasOwnProperty("captureTime")){let r=$e.google.protobuf.Timestamp.verify(i.captureTime);if(r)return"captureTime."+r}if(null!=i.processName&&i.hasOwnProperty("processName")&&!Be.isString(i.processName))return"processName: string expected";if(null!=i.windowName&&i.hasOwnProperty("windowName")&&!Be.isString(i.windowName))return"windowName: string expected";if(null!=i.duration&&i.hasOwnProperty("duration")){let r=$e.google.protobuf.Duration.verify(i.duration);if(r)return"duration."+r}if(null!=i.videoMetadata&&i.hasOwnProperty("videoMetadata")){let r=$e.motion.VideoMetadata.verify(i.videoMetadata);if(r)return"videoMetadata."+r}if(null!=i.frames&&i.hasOwnProperty("frames")){if(!Array.isArray(i.frames))return"frames: array expected";for(let r=0;r<i.frames.length;++r){let o=$e.motion.Frame.verify(i.frames[r]);if(o)return"frames."+o}}return null},t.fromObject=function(i){if(i instanceof $e.motion.Trace)return i;let r=new $e.motion.Trace;if(null!=i.id&&(r.id=String(i.id)),null!=i.version&&(r.version=0|i.version),null!=i.name&&(r.name=String(i.name)),null!=i.captureTime){if("object"!=typeof i.captureTime)throw TypeError(".motion.Trace.captureTime: object expected");r.captureTime=$e.google.protobuf.Timestamp.fromObject(i.captureTime)}if(null!=i.processName&&(r.processName=String(i.processName)),null!=i.windowName&&(r.windowName=String(i.windowName)),null!=i.duration){if("object"!=typeof i.duration)throw TypeError(".motion.Trace.duration: object expected");r.duration=$e.google.protobuf.Duration.fromObject(i.duration)}if(null!=i.videoMetadata){if("object"!=typeof i.videoMetadata)throw TypeError(".motion.Trace.videoMetadata: object expected");r.videoMetadata=$e.motion.VideoMetadata.fromObject(i.videoMetadata)}if(i.frames){if(!Array.isArray(i.frames))throw TypeError(".motion.Trace.frames: array expected");r.frames=[];for(let o=0;o<i.frames.length;++o){if("object"!=typeof i.frames[o])throw TypeError(".motion.Trace.frames: object expected");r.frames[o]=$e.motion.Frame.fromObject(i.frames[o])}}return r},t.toObject=function(i,r){r||(r={});let o={};if((r.arrays||r.defaults)&&(o.frames=[]),r.defaults&&(o.id="",o.version=0,o.name="",o.captureTime=null,o.processName="",o.windowName="",o.duration=null,o.videoMetadata=null),null!=i.id&&i.hasOwnProperty("id")&&(o.id=i.id),null!=i.version&&i.hasOwnProperty("version")&&(o.version=i.version),null!=i.name&&i.hasOwnProperty("name")&&(o.name=i.name),null!=i.captureTime&&i.hasOwnProperty("captureTime")&&(o.captureTime=$e.google.protobuf.Timestamp.toObject(i.captureTime,r)),null!=i.processName&&i.hasOwnProperty("processName")&&(o.processName=i.processName),null!=i.windowName&&i.hasOwnProperty("windowName")&&(o.windowName=i.windowName),null!=i.duration&&i.hasOwnProperty("duration")&&(o.duration=$e.google.protobuf.Duration.toObject(i.duration,r)),null!=i.videoMetadata&&i.hasOwnProperty("videoMetadata")&&(o.videoMetadata=$e.motion.VideoMetadata.toObject(i.videoMetadata,r)),i.frames&&i.frames.length){o.frames=[];for(let s=0;s<i.frames.length;++s)o.frames[s]=$e.motion.Frame.toObject(i.frames[s],r)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},t.getTypeUrl=function(i){return void 0===i&&(i="type.googleapis.com"),i+"/motion.Trace"},t}(),n.VideoMetadata=function(){function t(e){if(e)for(let i=Object.keys(e),r=0;r<i.length;++r)null!=e[i[r]]&&(this[i[r]]=e[i[r]])}return t.prototype.widthPx=0,t.prototype.heightPx=0,t.prototype.density=0,t.create=function(i){return new t(i)},t.encode=function(i,r){return r||(r=oa.create()),null!=i.widthPx&&Object.hasOwnProperty.call(i,"widthPx")&&r.uint32(8).int32(i.widthPx),null!=i.heightPx&&Object.hasOwnProperty.call(i,"heightPx")&&r.uint32(16).int32(i.heightPx),null!=i.density&&Object.hasOwnProperty.call(i,"density")&&r.uint32(24).int32(i.density),r},t.encodeDelimited=function(i,r){return this.encode(i,r).ldelim()},t.decode=function(i,r){i instanceof Qt||(i=Qt.create(i));let o=void 0===r?i.len:i.pos+r,s=new $e.motion.VideoMetadata;for(;i.pos<o;){let a=i.uint32();switch(a>>>3){case 1:s.widthPx=i.int32();break;case 2:s.heightPx=i.int32();break;case 3:s.density=i.int32();break;default:i.skipType(7&a)}}return s},t.decodeDelimited=function(i){return i instanceof Qt||(i=new Qt(i)),this.decode(i,i.uint32())},t.verify=function(i){return"object"!=typeof i||null===i?"object expected":null!=i.widthPx&&i.hasOwnProperty("widthPx")&&!Be.isInteger(i.widthPx)?"widthPx: integer expected":null!=i.heightPx&&i.hasOwnProperty("heightPx")&&!Be.isInteger(i.heightPx)?"heightPx: integer expected":null!=i.density&&i.hasOwnProperty("density")&&!Be.isInteger(i.density)?"density: integer expected":null},t.fromObject=function(i){if(i instanceof $e.motion.VideoMetadata)return i;let r=new $e.motion.VideoMetadata;return null!=i.widthPx&&(r.widthPx=0|i.widthPx),null!=i.heightPx&&(r.heightPx=0|i.heightPx),null!=i.density&&(r.density=0|i.density),r},t.toObject=function(i,r){r||(r={});let o={};return r.defaults&&(o.widthPx=0,o.heightPx=0,o.density=0),null!=i.widthPx&&i.hasOwnProperty("widthPx")&&(o.widthPx=i.widthPx),null!=i.heightPx&&i.hasOwnProperty("heightPx")&&(o.heightPx=i.heightPx),null!=i.density&&i.hasOwnProperty("density")&&(o.density=i.density),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},t.getTypeUrl=function(i){return void 0===i&&(i="type.googleapis.com"),i+"/motion.VideoMetadata"},t}(),n.Frame=function(){function t(e){if(e)for(let i=Object.keys(e),r=0;r<i.length;++r)null!=e[i[r]]&&(this[i[r]]=e[i[r]])}return t.prototype.frameNumber=0,t.prototype.frameNanos=Be.Long?Be.Long.fromBits(0,0,!1):0,t.prototype.videoTimeSeconds=0,t.prototype.viewHierarchy=null,t.create=function(i){return new t(i)},t.encode=function(i,r){return r||(r=oa.create()),null!=i.frameNumber&&Object.hasOwnProperty.call(i,"frameNumber")&&r.uint32(8).int32(i.frameNumber),null!=i.frameNanos&&Object.hasOwnProperty.call(i,"frameNanos")&&r.uint32(16).int64(i.frameNanos),null!=i.videoTimeSeconds&&Object.hasOwnProperty.call(i,"videoTimeSeconds")&&r.uint32(25).double(i.videoTimeSeconds),null!=i.viewHierarchy&&Object.hasOwnProperty.call(i,"viewHierarchy")&&$e.motion.ViewNode.encode(i.viewHierarchy,r.uint32(34).fork()).ldelim(),r},t.encodeDelimited=function(i,r){return this.encode(i,r).ldelim()},t.decode=function(i,r){i instanceof Qt||(i=Qt.create(i));let o=void 0===r?i.len:i.pos+r,s=new $e.motion.Frame;for(;i.pos<o;){let a=i.uint32();switch(a>>>3){case 1:s.frameNumber=i.int32();break;case 2:s.frameNanos=i.int64();break;case 3:s.videoTimeSeconds=i.double();break;case 4:s.viewHierarchy=$e.motion.ViewNode.decode(i,i.uint32());break;default:i.skipType(7&a)}}return s},t.decodeDelimited=function(i){return i instanceof Qt||(i=new Qt(i)),this.decode(i,i.uint32())},t.verify=function(i){if("object"!=typeof i||null===i)return"object expected";if(null!=i.frameNumber&&i.hasOwnProperty("frameNumber")&&!Be.isInteger(i.frameNumber))return"frameNumber: integer expected";if(null!=i.frameNanos&&i.hasOwnProperty("frameNanos")&&!Be.isInteger(i.frameNanos)&&!(i.frameNanos&&Be.isInteger(i.frameNanos.low)&&Be.isInteger(i.frameNanos.high)))return"frameNanos: integer|Long expected";if(null!=i.videoTimeSeconds&&i.hasOwnProperty("videoTimeSeconds")&&"number"!=typeof i.videoTimeSeconds)return"videoTimeSeconds: number expected";if(null!=i.viewHierarchy&&i.hasOwnProperty("viewHierarchy")){let r=$e.motion.ViewNode.verify(i.viewHierarchy);if(r)return"viewHierarchy."+r}return null},t.fromObject=function(i){if(i instanceof $e.motion.Frame)return i;let r=new $e.motion.Frame;if(null!=i.frameNumber&&(r.frameNumber=0|i.frameNumber),null!=i.frameNanos&&(Be.Long?(r.frameNanos=Be.Long.fromValue(i.frameNanos)).unsigned=!1:"string"==typeof i.frameNanos?r.frameNanos=parseInt(i.frameNanos,10):"number"==typeof i.frameNanos?r.frameNanos=i.frameNanos:"object"==typeof i.frameNanos&&(r.frameNanos=new Be.LongBits(i.frameNanos.low>>>0,i.frameNanos.high>>>0).toNumber())),null!=i.videoTimeSeconds&&(r.videoTimeSeconds=Number(i.videoTimeSeconds)),null!=i.viewHierarchy){if("object"!=typeof i.viewHierarchy)throw TypeError(".motion.Frame.viewHierarchy: object expected");r.viewHierarchy=$e.motion.ViewNode.fromObject(i.viewHierarchy)}return r},t.toObject=function(i,r){r||(r={});let o={};if(r.defaults){if(o.frameNumber=0,Be.Long){let s=new Be.Long(0,0,!1);o.frameNanos=r.longs===String?s.toString():r.longs===Number?s.toNumber():s}else o.frameNanos=r.longs===String?"0":0;o.videoTimeSeconds=0,o.viewHierarchy=null}return null!=i.frameNumber&&i.hasOwnProperty("frameNumber")&&(o.frameNumber=i.frameNumber),null!=i.frameNanos&&i.hasOwnProperty("frameNanos")&&(o.frameNanos="number"==typeof i.frameNanos?r.longs===String?String(i.frameNanos):i.frameNanos:r.longs===String?Be.Long.prototype.toString.call(i.frameNanos):r.longs===Number?new Be.LongBits(i.frameNanos.low>>>0,i.frameNanos.high>>>0).toNumber():i.frameNanos),null!=i.videoTimeSeconds&&i.hasOwnProperty("videoTimeSeconds")&&(o.videoTimeSeconds=r.json&&!isFinite(i.videoTimeSeconds)?String(i.videoTimeSeconds):i.videoTimeSeconds),null!=i.viewHierarchy&&i.hasOwnProperty("viewHierarchy")&&(o.viewHierarchy=$e.motion.ViewNode.toObject(i.viewHierarchy,r)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},t.getTypeUrl=function(i){return void 0===i&&(i="type.googleapis.com"),i+"/motion.Frame"},t}(),n.ViewNode=function(){function t(e){if(this.children=[],e)for(let i=Object.keys(e),r=0;r<i.length;++r)null!=e[i[r]]&&(this[i[r]]=e[i[r]])}return t.prototype.classname="",t.prototype.hashcode=0,t.prototype.children=Be.emptyArray,t.prototype.id="",t.prototype.left=0,t.prototype.top=0,t.prototype.width=0,t.prototype.height=0,t.prototype.scrollX=0,t.prototype.scrollY=0,t.prototype.translationX=0,t.prototype.translationY=0,t.prototype.scaleX=0,t.prototype.scaleY=0,t.prototype.alpha=0,t.prototype.willNotDraw=!1,t.prototype.clipChildren=!1,t.prototype.visibility=0,t.prototype.elevation=0,t.create=function(i){return new t(i)},t.encode=function(i,r){if(r||(r=oa.create()),null!=i.classname&&Object.hasOwnProperty.call(i,"classname")&&r.uint32(10).string(i.classname),null!=i.hashcode&&Object.hasOwnProperty.call(i,"hashcode")&&r.uint32(16).int32(i.hashcode),null!=i.children&&i.children.length)for(let o=0;o<i.children.length;++o)$e.motion.ViewNode.encode(i.children[o],r.uint32(26).fork()).ldelim();return null!=i.id&&Object.hasOwnProperty.call(i,"id")&&r.uint32(34).string(i.id),null!=i.left&&Object.hasOwnProperty.call(i,"left")&&r.uint32(40).int32(i.left),null!=i.top&&Object.hasOwnProperty.call(i,"top")&&r.uint32(48).int32(i.top),null!=i.width&&Object.hasOwnProperty.call(i,"width")&&r.uint32(56).int32(i.width),null!=i.height&&Object.hasOwnProperty.call(i,"height")&&r.uint32(64).int32(i.height),null!=i.scrollX&&Object.hasOwnProperty.call(i,"scrollX")&&r.uint32(72).int32(i.scrollX),null!=i.scrollY&&Object.hasOwnProperty.call(i,"scrollY")&&r.uint32(80).int32(i.scrollY),null!=i.translationX&&Object.hasOwnProperty.call(i,"translationX")&&r.uint32(93).float(i.translationX),null!=i.translationY&&Object.hasOwnProperty.call(i,"translationY")&&r.uint32(101).float(i.translationY),null!=i.scaleX&&Object.hasOwnProperty.call(i,"scaleX")&&r.uint32(109).float(i.scaleX),null!=i.scaleY&&Object.hasOwnProperty.call(i,"scaleY")&&r.uint32(117).float(i.scaleY),null!=i.alpha&&Object.hasOwnProperty.call(i,"alpha")&&r.uint32(125).float(i.alpha),null!=i.willNotDraw&&Object.hasOwnProperty.call(i,"willNotDraw")&&r.uint32(128).bool(i.willNotDraw),null!=i.clipChildren&&Object.hasOwnProperty.call(i,"clipChildren")&&r.uint32(136).bool(i.clipChildren),null!=i.visibility&&Object.hasOwnProperty.call(i,"visibility")&&r.uint32(144).int32(i.visibility),null!=i.elevation&&Object.hasOwnProperty.call(i,"elevation")&&r.uint32(157).float(i.elevation),r},t.encodeDelimited=function(i,r){return this.encode(i,r).ldelim()},t.decode=function(i,r){i instanceof Qt||(i=Qt.create(i));let o=void 0===r?i.len:i.pos+r,s=new $e.motion.ViewNode;for(;i.pos<o;){let a=i.uint32();switch(a>>>3){case 1:s.classname=i.string();break;case 2:s.hashcode=i.int32();break;case 3:s.children&&s.children.length||(s.children=[]),s.children.push($e.motion.ViewNode.decode(i,i.uint32()));break;case 4:s.id=i.string();break;case 5:s.left=i.int32();break;case 6:s.top=i.int32();break;case 7:s.width=i.int32();break;case 8:s.height=i.int32();break;case 9:s.scrollX=i.int32();break;case 10:s.scrollY=i.int32();break;case 11:s.translationX=i.float();break;case 12:s.translationY=i.float();break;case 13:s.scaleX=i.float();break;case 14:s.scaleY=i.float();break;case 15:s.alpha=i.float();break;case 16:s.willNotDraw=i.bool();break;case 17:s.clipChildren=i.bool();break;case 18:s.visibility=i.int32();break;case 19:s.elevation=i.float();break;default:i.skipType(7&a)}}return s},t.decodeDelimited=function(i){return i instanceof Qt||(i=new Qt(i)),this.decode(i,i.uint32())},t.verify=function(i){if("object"!=typeof i||null===i)return"object expected";if(null!=i.classname&&i.hasOwnProperty("classname")&&!Be.isString(i.classname))return"classname: string expected";if(null!=i.hashcode&&i.hasOwnProperty("hashcode")&&!Be.isInteger(i.hashcode))return"hashcode: integer expected";if(null!=i.children&&i.hasOwnProperty("children")){if(!Array.isArray(i.children))return"children: array expected";for(let r=0;r<i.children.length;++r){let o=$e.motion.ViewNode.verify(i.children[r]);if(o)return"children."+o}}return null!=i.id&&i.hasOwnProperty("id")&&!Be.isString(i.id)?"id: string expected":null!=i.left&&i.hasOwnProperty("left")&&!Be.isInteger(i.left)?"left: integer expected":null!=i.top&&i.hasOwnProperty("top")&&!Be.isInteger(i.top)?"top: integer expected":null!=i.width&&i.hasOwnProperty("width")&&!Be.isInteger(i.width)?"width: integer expected":null!=i.height&&i.hasOwnProperty("height")&&!Be.isInteger(i.height)?"height: integer expected":null!=i.scrollX&&i.hasOwnProperty("scrollX")&&!Be.isInteger(i.scrollX)?"scrollX: integer expected":null!=i.scrollY&&i.hasOwnProperty("scrollY")&&!Be.isInteger(i.scrollY)?"scrollY: integer expected":null!=i.translationX&&i.hasOwnProperty("translationX")&&"number"!=typeof i.translationX?"translationX: number expected":null!=i.translationY&&i.hasOwnProperty("translationY")&&"number"!=typeof i.translationY?"translationY: number expected":null!=i.scaleX&&i.hasOwnProperty("scaleX")&&"number"!=typeof i.scaleX?"scaleX: number expected":null!=i.scaleY&&i.hasOwnProperty("scaleY")&&"number"!=typeof i.scaleY?"scaleY: number expected":null!=i.alpha&&i.hasOwnProperty("alpha")&&"number"!=typeof i.alpha?"alpha: number expected":null!=i.willNotDraw&&i.hasOwnProperty("willNotDraw")&&"boolean"!=typeof i.willNotDraw?"willNotDraw: boolean expected":null!=i.clipChildren&&i.hasOwnProperty("clipChildren")&&"boolean"!=typeof i.clipChildren?"clipChildren: boolean expected":null!=i.visibility&&i.hasOwnProperty("visibility")&&!Be.isInteger(i.visibility)?"visibility: integer expected":null!=i.elevation&&i.hasOwnProperty("elevation")&&"number"!=typeof i.elevation?"elevation: number expected":null},t.fromObject=function(i){if(i instanceof $e.motion.ViewNode)return i;let r=new $e.motion.ViewNode;if(null!=i.classname&&(r.classname=String(i.classname)),null!=i.hashcode&&(r.hashcode=0|i.hashcode),i.children){if(!Array.isArray(i.children))throw TypeError(".motion.ViewNode.children: array expected");r.children=[];for(let o=0;o<i.children.length;++o){if("object"!=typeof i.children[o])throw TypeError(".motion.ViewNode.children: object expected");r.children[o]=$e.motion.ViewNode.fromObject(i.children[o])}}return null!=i.id&&(r.id=String(i.id)),null!=i.left&&(r.left=0|i.left),null!=i.top&&(r.top=0|i.top),null!=i.width&&(r.width=0|i.width),null!=i.height&&(r.height=0|i.height),null!=i.scrollX&&(r.scrollX=0|i.scrollX),null!=i.scrollY&&(r.scrollY=0|i.scrollY),null!=i.translationX&&(r.translationX=Number(i.translationX)),null!=i.translationY&&(r.translationY=Number(i.translationY)),null!=i.scaleX&&(r.scaleX=Number(i.scaleX)),null!=i.scaleY&&(r.scaleY=Number(i.scaleY)),null!=i.alpha&&(r.alpha=Number(i.alpha)),null!=i.willNotDraw&&(r.willNotDraw=Boolean(i.willNotDraw)),null!=i.clipChildren&&(r.clipChildren=Boolean(i.clipChildren)),null!=i.visibility&&(r.visibility=0|i.visibility),null!=i.elevation&&(r.elevation=Number(i.elevation)),r},t.toObject=function(i,r){r||(r={});let o={};if((r.arrays||r.defaults)&&(o.children=[]),r.defaults&&(o.classname="",o.hashcode=0,o.id="",o.left=0,o.top=0,o.width=0,o.height=0,o.scrollX=0,o.scrollY=0,o.translationX=0,o.translationY=0,o.scaleX=0,o.scaleY=0,o.alpha=0,o.willNotDraw=!1,o.clipChildren=!1,o.visibility=0,o.elevation=0),null!=i.classname&&i.hasOwnProperty("classname")&&(o.classname=i.classname),null!=i.hashcode&&i.hasOwnProperty("hashcode")&&(o.hashcode=i.hashcode),i.children&&i.children.length){o.children=[];for(let s=0;s<i.children.length;++s)o.children[s]=$e.motion.ViewNode.toObject(i.children[s],r)}return null!=i.id&&i.hasOwnProperty("id")&&(o.id=i.id),null!=i.left&&i.hasOwnProperty("left")&&(o.left=i.left),null!=i.top&&i.hasOwnProperty("top")&&(o.top=i.top),null!=i.width&&i.hasOwnProperty("width")&&(o.width=i.width),null!=i.height&&i.hasOwnProperty("height")&&(o.height=i.height),null!=i.scrollX&&i.hasOwnProperty("scrollX")&&(o.scrollX=i.scrollX),null!=i.scrollY&&i.hasOwnProperty("scrollY")&&(o.scrollY=i.scrollY),null!=i.translationX&&i.hasOwnProperty("translationX")&&(o.translationX=r.json&&!isFinite(i.translationX)?String(i.translationX):i.translationX),null!=i.translationY&&i.hasOwnProperty("translationY")&&(o.translationY=r.json&&!isFinite(i.translationY)?String(i.translationY):i.translationY),null!=i.scaleX&&i.hasOwnProperty("scaleX")&&(o.scaleX=r.json&&!isFinite(i.scaleX)?String(i.scaleX):i.scaleX),null!=i.scaleY&&i.hasOwnProperty("scaleY")&&(o.scaleY=r.json&&!isFinite(i.scaleY)?String(i.scaleY):i.scaleY),null!=i.alpha&&i.hasOwnProperty("alpha")&&(o.alpha=r.json&&!isFinite(i.alpha)?String(i.alpha):i.alpha),null!=i.willNotDraw&&i.hasOwnProperty("willNotDraw")&&(o.willNotDraw=i.willNotDraw),null!=i.clipChildren&&i.hasOwnProperty("clipChildren")&&(o.clipChildren=i.clipChildren),null!=i.visibility&&i.hasOwnProperty("visibility")&&(o.visibility=i.visibility),null!=i.elevation&&i.hasOwnProperty("elevation")&&(o.elevation=r.json&&!isFinite(i.elevation)?String(i.elevation):i.elevation),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},t.getTypeUrl=function(i){return void 0===i&&(i="type.googleapis.com"),i+"/motion.ViewNode"},t}(),n})(),uU=$e.google=(()=>{const n={};return n.protobuf=function(){const t={};return t.Timestamp=function(){function e(i){if(i)for(let r=Object.keys(i),o=0;o<r.length;++o)null!=i[r[o]]&&(this[r[o]]=i[r[o]])}return e.prototype.seconds=Be.Long?Be.Long.fromBits(0,0,!1):0,e.prototype.nanos=0,e.create=function(r){return new e(r)},e.encode=function(r,o){return o||(o=oa.create()),null!=r.seconds&&Object.hasOwnProperty.call(r,"seconds")&&o.uint32(8).int64(r.seconds),null!=r.nanos&&Object.hasOwnProperty.call(r,"nanos")&&o.uint32(16).int32(r.nanos),o},e.encodeDelimited=function(r,o){return this.encode(r,o).ldelim()},e.decode=function(r,o){r instanceof Qt||(r=Qt.create(r));let s=void 0===o?r.len:r.pos+o,a=new $e.google.protobuf.Timestamp;for(;r.pos<s;){let c=r.uint32();switch(c>>>3){case 1:a.seconds=r.int64();break;case 2:a.nanos=r.int32();break;default:r.skipType(7&c)}}return a},e.decodeDelimited=function(r){return r instanceof Qt||(r=new Qt(r)),this.decode(r,r.uint32())},e.verify=function(r){return"object"!=typeof r||null===r?"object expected":null==r.seconds||!r.hasOwnProperty("seconds")||Be.isInteger(r.seconds)||r.seconds&&Be.isInteger(r.seconds.low)&&Be.isInteger(r.seconds.high)?null!=r.nanos&&r.hasOwnProperty("nanos")&&!Be.isInteger(r.nanos)?"nanos: integer expected":null:"seconds: integer|Long expected"},e.fromObject=function(r){if(r instanceof $e.google.protobuf.Timestamp)return r;let o=new $e.google.protobuf.Timestamp;return null!=r.seconds&&(Be.Long?(o.seconds=Be.Long.fromValue(r.seconds)).unsigned=!1:"string"==typeof r.seconds?o.seconds=parseInt(r.seconds,10):"number"==typeof r.seconds?o.seconds=r.seconds:"object"==typeof r.seconds&&(o.seconds=new Be.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber())),null!=r.nanos&&(o.nanos=0|r.nanos),o},e.toObject=function(r,o){o||(o={});let s={};if(o.defaults){if(Be.Long){let a=new Be.Long(0,0,!1);s.seconds=o.longs===String?a.toString():o.longs===Number?a.toNumber():a}else s.seconds=o.longs===String?"0":0;s.nanos=0}return null!=r.seconds&&r.hasOwnProperty("seconds")&&(s.seconds="number"==typeof r.seconds?o.longs===String?String(r.seconds):r.seconds:o.longs===String?Be.Long.prototype.toString.call(r.seconds):o.longs===Number?new Be.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber():r.seconds),null!=r.nanos&&r.hasOwnProperty("nanos")&&(s.nanos=r.nanos),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},e.getTypeUrl=function(r){return void 0===r&&(r="type.googleapis.com"),r+"/google.protobuf.Timestamp"},e}(),t.Duration=function(){function e(i){if(i)for(let r=Object.keys(i),o=0;o<r.length;++o)null!=i[r[o]]&&(this[r[o]]=i[r[o]])}return e.prototype.seconds=Be.Long?Be.Long.fromBits(0,0,!1):0,e.prototype.nanos=0,e.create=function(r){return new e(r)},e.encode=function(r,o){return o||(o=oa.create()),null!=r.seconds&&Object.hasOwnProperty.call(r,"seconds")&&o.uint32(8).int64(r.seconds),null!=r.nanos&&Object.hasOwnProperty.call(r,"nanos")&&o.uint32(16).int32(r.nanos),o},e.encodeDelimited=function(r,o){return this.encode(r,o).ldelim()},e.decode=function(r,o){r instanceof Qt||(r=Qt.create(r));let s=void 0===o?r.len:r.pos+o,a=new $e.google.protobuf.Duration;for(;r.pos<s;){let c=r.uint32();switch(c>>>3){case 1:a.seconds=r.int64();break;case 2:a.nanos=r.int32();break;default:r.skipType(7&c)}}return a},e.decodeDelimited=function(r){return r instanceof Qt||(r=new Qt(r)),this.decode(r,r.uint32())},e.verify=function(r){return"object"!=typeof r||null===r?"object expected":null==r.seconds||!r.hasOwnProperty("seconds")||Be.isInteger(r.seconds)||r.seconds&&Be.isInteger(r.seconds.low)&&Be.isInteger(r.seconds.high)?null!=r.nanos&&r.hasOwnProperty("nanos")&&!Be.isInteger(r.nanos)?"nanos: integer expected":null:"seconds: integer|Long expected"},e.fromObject=function(r){if(r instanceof $e.google.protobuf.Duration)return r;let o=new $e.google.protobuf.Duration;return null!=r.seconds&&(Be.Long?(o.seconds=Be.Long.fromValue(r.seconds)).unsigned=!1:"string"==typeof r.seconds?o.seconds=parseInt(r.seconds,10):"number"==typeof r.seconds?o.seconds=r.seconds:"object"==typeof r.seconds&&(o.seconds=new Be.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber())),null!=r.nanos&&(o.nanos=0|r.nanos),o},e.toObject=function(r,o){o||(o={});let s={};if(o.defaults){if(Be.Long){let a=new Be.Long(0,0,!1);s.seconds=o.longs===String?a.toString():o.longs===Number?a.toNumber():a}else s.seconds=o.longs===String?"0":0;s.nanos=0}return null!=r.seconds&&r.hasOwnProperty("seconds")&&(s.seconds="number"==typeof r.seconds?o.longs===String?String(r.seconds):r.seconds:o.longs===String?Be.Long.prototype.toString.call(r.seconds):o.longs===Number?new Be.LongBits(r.seconds.low>>>0,r.seconds.high>>>0).toNumber():r.seconds),null!=r.nanos&&r.hasOwnProperty("nanos")&&(s.nanos=r.nanos),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,It.util.toJSONOptions)},e.getTypeUrl=function(r){return void 0===r&&(r="type.googleapis.com"),r+"/google.protobuf.Duration"},e}(),t}(),n})();class Hm{constructor(t,e,i){this._length=t,this._min=e,this._max=i,this._data=[],this._lastSetIndex=-1,this._bitset=new DataView(new ArrayBuffer(Math.ceil(t/8)))}static createNumber(t,e,i){return new Hm(t,e??hU,i??fU)}setValue(t,e){Xo(t>this._lastSetIndex),this._lastSetIndex=t,Xo(t<this._length);const i=t>0?fD(t-1,this._bitset):-1;if(i<0||this._data[i]!==e){this._data.push(e);const r=t/8;this._bitset.setUint8(r,this._bitset.getUint8(r)|1<<t%8)}return this}build(){const t=this._min(this._data),e=this._max(this._data);return this._data.length<=1?new dD(this._length,this._data[0],t,e):new hD(this._length,t,e,this._bitset,this._data)}}function hU(n){let t;for(let e=0;e<n.length;e++){const i=n[e];void 0!==i&&(void 0===t||t>i)&&(t=i)}return t}function fU(n){let t;for(let e=0;e<n.length;e++){const i=n[e];void 0!==i&&(void 0===t||t<i)&&(t=i)}return t}class dD{constructor(t,e,i,r){this.length=t,this.value=e,this.min=i,this.max=r,this.activeRanges=[]}at(t){return this.value}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.value}hasChangesInRange(t,e){return!1}}class hD{constructor(t,e,i,r,o){this.length=t,this.min=e,this.max=i,this._bitset=r,this._data=o}at(t){const e=fD(t,this._bitset);return this._data[e]}*[Symbol.iterator](){let t=-1;for(let e=0;e<this.length;e++)this._bitset.getUint8(e/8)&1<<e%8&&t++,Ko(t>=0),Ko(t<this._data.length),yield this._data[t]}get testOnlyActualValueCount(){return this._data.length}hasChangesInRange(t,e){return!0}get activeRanges(){if(!this._activeRanges){let t=1;for(;t<this.length&&!(this._bitset.getUint8(t/8)&1<<t%8);)t++;1==t&&(t=0);let e=this.length-1;for(;e>t&&!(this._bitset.getUint8(e/8)&1<<e%8);)e--;this._activeRanges=[{start:t,end:e}]}return this._activeRanges}}function fD(n,t){let e=0,i=0;const r=Math.floor(n/32);for(let a=0;a<r;a++)e+=jm(t.getUint32(i)),i+=4;const o=Math.floor(n/8);for(let a=i;a<o;a++)e+=jm(t.getUint8(i)),i++;const s=255>>7-n%8;return e+=jm(t.getUint8(i)&s),e-1}function jm(n){return 16843009*((n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135)>>24}class pU{constructor(t){this.properties=t}query(){return[]}}class gU{constructor(){this._cache=new Map}viewId(t,e,i){const r=Nt(this._cache,"ViewIdFactory was already disposed"),o=t+"@"+e.toString(16);let s=r.get(o);return s||(s=new zm(o,t,e,i),r.set(o,s)),s}viewIdOfNode(t){const e=Nt(t.classname),i=Nt(t.hashcode);return this.viewId(e,i,null!==t.id?t.id:void 0)}dispose(){this._cache=void 0}}class zm{constructor(t,e,i,r){this.instanceKey=t,this.classname=e,this.hash=i,this.resourceId=r}matches(t){return t instanceof zm&&this.classname==t.classname&&this.resourceId==t.resourceId}get label(){if(!this._cachedLabel){const t=this.classname.substring(this.classname.lastIndexOf(".")+1);this._cachedLabel=this.resourceId?`${t}@${this.resourceId}`:t}return this._cachedLabel}}class _U{constructor(t,e){this.frameTimes=t,this.duration=e;let i=t.length>0?t[0]:0;Xo(0===i);for(let r=1;r<t.length;r++){const o=t[r];Xo(o>i),Xo(o<=this.duration),i=o}}get frameCount(){return this.frameTimes.length}frameToTime(t){if(t<0)return Number.NEGATIVE_INFINITY;if(t>=this.duration)return Number.POSITIVE_INFINITY;const e=this.frameTimes;let i=0,r=e.length-1;for(;i<=r;){let o=i+r>>1;if(e[o]===t)return o;t<e[o]?r=o-1:i=o+1}return r}timeToFrame(t){if((t=Math.floor(t))<0)return Number.NEGATIVE_INFINITY;const e=this.frameTimes;return t>=e.length?Number.POSITIVE_INFINITY:e[t]}}var Bi=null;try{Bi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Gt(n,t,e){this.low=0|n,this.high=0|t,this.unsigned=!!e}function zn(n){return!0===(n&&n.__isLong__)}function pD(n){var t=Math.clz32(n&-n);return n?31-t:t}Object.defineProperty(Gt.prototype,"__isLong__",{value:!0}),Gt.isLong=zn;var mD={},gD={};function Zo(n,t){var e,i,r;return t?(r=0<=(n>>>=0)&&n<256)&&(i=gD[n])?i:(e=St(n,0,!0),r&&(gD[n]=e),e):(r=-128<=(n|=0)&&n<128)&&(i=mD[n])?i:(e=St(n,n<0?-1:0,!1),r&&(mD[n]=e),e)}function Ui(n,t){if(isNaN(n))return t?qr:lr;if(t){if(n<0)return qr;if(n>=yD)return CD}else{if(n<=-vD)return ai;if(n+1>=vD)return ED}return n<0?Ui(-n,t).neg():St(n%sa|0,n/sa|0,t)}function St(n,t,e){return new Gt(n,t,e)}Gt.fromInt=Zo,Gt.fromNumber=Ui,Gt.fromBits=St;var Gu=Math.pow;function $m(n,t,e){if(0===n.length)throw Error("empty string");if("number"==typeof t?(e=t,t=!1):t=!!t,"NaN"===n||"Infinity"===n||"+Infinity"===n||"-Infinity"===n)return t?qr:lr;if((e=e||10)<2||36<e)throw RangeError("radix");var i;if((i=n.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return $m(n.substring(1),t,e).neg();for(var r=Ui(Gu(e,8)),o=lr,s=0;s<n.length;s+=8){var a=Math.min(8,n.length-s),c=parseInt(n.substring(s,s+a),e);if(a<8){var d=Ui(Gu(e,a));o=o.mul(d).add(Ui(c))}else o=(o=o.mul(r)).add(Ui(c))}return o.unsigned=t,o}function ar(n,t){return"number"==typeof n?Ui(n,t):"string"==typeof n?$m(n,t):St(n.low,n.high,"boolean"==typeof t?t:n.unsigned)}Gt.fromString=$m,Gt.fromValue=ar;var sa=4294967296,yD=sa*sa,vD=yD/2,bD=Zo(1<<24),lr=Zo(0);Gt.ZERO=lr;var qr=Zo(0,!0);Gt.UZERO=qr;var aa=Zo(1);Gt.ONE=aa;var wD=Zo(1,!0);Gt.UONE=wD;var Gm=Zo(-1);Gt.NEG_ONE=Gm;var ED=St(-1,2147483647,!1);Gt.MAX_VALUE=ED;var CD=St(-1,-1,!0);Gt.MAX_UNSIGNED_VALUE=CD;var ai=St(0,-2147483648,!1);Gt.MIN_VALUE=ai;var we=Gt.prototype;we.toInt=function(){return this.unsigned?this.low>>>0:this.low},we.toNumber=function(){return this.unsigned?(this.high>>>0)*sa+(this.low>>>0):this.high*sa+(this.low>>>0)},we.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ai)){var e=Ui(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=Ui(Gu(t,6),this.unsigned),s=this,a="";;){var c=s.div(o),p=(s.sub(c.mul(o)).toInt()>>>0).toString(t);if((s=c).isZero())return p+a;for(;p.length<6;)p="0"+p;a=""+p+a}},we.getHighBits=function(){return this.high},we.getHighBitsUnsigned=function(){return this.high>>>0},we.getLowBits=function(){return this.low},we.getLowBitsUnsigned=function(){return this.low>>>0},we.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ai)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},we.isZero=function(){return 0===this.high&&0===this.low},we.eqz=we.isZero,we.isNegative=function(){return!this.unsigned&&this.high<0},we.isPositive=function(){return this.unsigned||this.high>=0},we.isOdd=function(){return 1==(1&this.low)},we.isEven=function(){return 0==(1&this.low)},we.equals=function(t){return zn(t)||(t=ar(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},we.eq=we.equals,we.notEquals=function(t){return!this.eq(t)},we.neq=we.notEquals,we.ne=we.notEquals,we.lessThan=function(t){return this.comp(t)<0},we.lt=we.lessThan,we.lessThanOrEqual=function(t){return this.comp(t)<=0},we.lte=we.lessThanOrEqual,we.le=we.lessThanOrEqual,we.greaterThan=function(t){return this.comp(t)>0},we.gt=we.greaterThan,we.greaterThanOrEqual=function(t){return this.comp(t)>=0},we.gte=we.greaterThanOrEqual,we.ge=we.greaterThanOrEqual,we.compare=function(t){if(zn(t)||(t=ar(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},we.comp=we.compare,we.negate=function(){return!this.unsigned&&this.eq(ai)?ai:this.not().add(aa)},we.neg=we.negate,we.add=function(t){zn(t)||(t=ar(t));var p=0,g=0,E=0,S=0;return E+=(S+=(65535&this.low)+(65535&t.low))>>>16,g+=(E+=(this.low>>>16)+(t.low>>>16))>>>16,p+=(g+=(65535&this.high)+(65535&t.high))>>>16,p+=(this.high>>>16)+(t.high>>>16),St((E&=65535)<<16|(S&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},we.subtract=function(t){return zn(t)||(t=ar(t)),this.add(t.neg())},we.sub=we.subtract,we.multiply=function(t){if(this.isZero())return this;if(zn(t)||(t=ar(t)),Bi)return St(Bi.mul(this.low,this.high,t.low,t.high),Bi.get_high(),this.unsigned);if(t.isZero())return this.unsigned?qr:lr;if(this.eq(ai))return t.isOdd()?ai:lr;if(t.eq(ai))return this.isOdd()?ai:lr;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(bD)&&t.lt(bD))return Ui(this.toNumber()*t.toNumber(),this.unsigned);var r=65535&this.high,o=this.low>>>16,s=65535&this.low,c=65535&t.high,d=t.low>>>16,p=65535&t.low,g=0,E=0,S=0,R=0;return S+=(R+=s*p)>>>16,E+=(S+=o*p)>>>16,S&=65535,E+=(S+=s*d)>>>16,g+=(E+=r*p)>>>16,E&=65535,g+=(E+=o*d)>>>16,E&=65535,g+=(E+=s*c)>>>16,g+=(this.high>>>16)*p+r*d+o*c+s*(t.high>>>16),St((S&=65535)<<16|(R&=65535),(g&=65535)<<16|(E&=65535),this.unsigned)},we.mul=we.multiply,we.divide=function(t){if(zn(t)||(t=ar(t)),t.isZero())throw Error("division by zero");var i,r,o;if(Bi)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?St((this.unsigned?Bi.div_u:Bi.div_s)(this.low,this.high,t.low,t.high),Bi.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?qr:lr;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return qr;if(t.gt(this.shru(1)))return wD;o=qr}else{if(this.eq(ai))return t.eq(aa)||t.eq(Gm)?ai:t.eq(ai)?aa:(i=this.shr(1).div(t).shl(1)).eq(lr)?t.isNegative()?aa:Gm:(r=this.sub(t.mul(i)),o=i.add(r.div(t)));if(t.eq(ai))return this.unsigned?qr:lr;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=lr}for(r=this;r.gte(t);){i=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),c=a<=48?1:Gu(2,a-48),d=Ui(i),p=d.mul(t);p.isNegative()||p.gt(r);)p=(d=Ui(i-=c,this.unsigned)).mul(t);d.isZero()&&(d=aa),o=o.add(d),r=r.sub(p)}return o},we.div=we.divide,we.modulo=function(t){return zn(t)||(t=ar(t)),Bi?St((this.unsigned?Bi.rem_u:Bi.rem_s)(this.low,this.high,t.low,t.high),Bi.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},we.mod=we.modulo,we.rem=we.modulo,we.not=function(){return St(~this.low,~this.high,this.unsigned)},we.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},we.clz=we.countLeadingZeros,we.countTrailingZeros=function(){return this.low?pD(this.low):pD(this.high)+32},we.ctz=we.countTrailingZeros,we.and=function(t){return zn(t)||(t=ar(t)),St(this.low&t.low,this.high&t.high,this.unsigned)},we.or=function(t){return zn(t)||(t=ar(t)),St(this.low|t.low,this.high|t.high,this.unsigned)},we.xor=function(t){return zn(t)||(t=ar(t)),St(this.low^t.low,this.high^t.high,this.unsigned)},we.shiftLeft=function(t){return zn(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?St(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):St(0,this.low<<t-32,this.unsigned)},we.shl=we.shiftLeft,we.shiftRight=function(t){return zn(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?St(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):St(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},we.shr=we.shiftRight,we.shiftRightUnsigned=function(t){return zn(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?St(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):St(32===t?this.high:this.high>>>t-32,0,this.unsigned)},we.shru=we.shiftRightUnsigned,we.shr_u=we.shiftRightUnsigned,we.rotateLeft=function(t){var e;return zn(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?St(this.high,this.low,this.unsigned):t<32?St(this.low<<t|this.high>>>(e=32-t),this.high<<t|this.low>>>e,this.unsigned):St(this.high<<(t-=32)|this.low>>>(e=32-t),this.low<<t|this.high>>>e,this.unsigned)},we.rotl=we.rotateLeft,we.rotateRight=function(t){var e;return zn(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?St(this.high,this.low,this.unsigned):t<32?St(this.high<<(e=32-t)|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned):St(this.low<<(e=32-(t-=32))|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)},we.rotr=we.rotateRight,we.toSigned=function(){return this.unsigned?St(this.low,this.high,!1):this},we.toUnsigned=function(){return this.unsigned?this:St(this.low,this.high,!0)},we.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},we.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},we.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},Gt.fromBytes=function(t,e,i){return i?Gt.fromBytesLE(t,e):Gt.fromBytesBE(t,e)},Gt.fromBytesLE=function(t,e){return new Gt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Gt.fromBytesBE=function(t,e){return new Gt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};const Al=Gt;class qm{constructor(t,e,i,r){this.viewIdFactory=t,this.properties=e,this.timeline=i,this.videoSource=r}static load(t){return Fe(function*(){const e=Il.Trace.decode(yield t.read(cD)),i=new gU,r=Al.fromValue(Nt(e.duration?.seconds)).toNumber()+(e.duration?.nanos??0)/1e9,o=new _U(e.frames?.map(c=>Nt(c.videoTimeSeconds))??[],r),s=function mU(n,t){const e=new Map,i=n.frames.length;for(let o=0;o<i;o++){let a=function(d,p,g){if(null==g)return;const E=d.instanceKey+"#"+p;let S=e.get(E);S||(S={builder:Hm.createNumber(i),viewId:d,propertyName:p},e.set(E,S)),S.builder.setValue(o,g)},c=function(d,p){if(!d)return;const g=t.viewIdOfNode(d);if(a(g,"left",d.left),a(g,"top",d.top),a(g,"width",d.width),a(g,"height",d.height),a(g,"scrollX",d.scrollX),a(g,"scrollY",d.scrollY),a(g,"translationX",d.translationX),a(g,"translationY",d.translationY),a(g,"scaleX",d.scaleX),a(g,"scaleY",d.scaleY),a(g,"alpha",d.alpha),a(g,"willNotDraw",d.willNotDraw?1:0),a(g,"clipChildren",d.clipChildren?1:0),a(g,"visibility",d.visibility),a(g,"elevation",d.elevation),d.children?.length){const E=[...p,d];for(const S of d.children)c(S,E)}};c(n.frames[o].viewHierarchy,[])}const r=[];for(const o of e.values()){const{viewId:s,propertyName:a}=o,p={type:"view-property",label:`${s.label} ${a}`,viewId:s,propertyName:a,selector:"sdfghjkl",series:o.builder.build()};r.push(p)}return new pU(r)}(e,i),a=yield Vm.createVideoSource(t);return new qm(i,s,o,a)})()}dispose(){this.videoSource.dispose(),this.viewIdFactory.dispose()}}const DD=new ve("BlobStorageFactory");class Wm{constructor(t){this.rootDirectory=t}static createStorage(t){return Fe(function*(){return new Wm(yield function vU(n){return Ym.apply(this,arguments)}(t))})()}writeable(t){var e=this;return Fe(function*(){return(yield e.rootDirectory.getFileHandle(t,{create:!0})).createWritable()})()}readable(t){var e=this;return Fe(function*(){return(yield(yield e.rootDirectory.getFileHandle(t)).getFile()).stream()})()}objectUrl(t){var e=this;return Fe(function*(){const i=yield e.rootDirectory.getFileHandle(t);return URL.createObjectURL(yield i.getFile())})()}read(t){var e=this;return Fe(function*(){const i=yield e.rootDirectory.getFileHandle(t);return new Uint8Array(yield(yield i.getFile()).arrayBuffer())})()}}function Ym(){return(Ym=Fe(function*(n){const t=yield navigator.storage.getDirectory();try{return yield t.getDirectoryHandle(n)}catch{return yield t.getDirectoryHandle(n,{create:!0})}})).apply(this,arguments)}class SD{parse(t){const e=t.split("\n").map(r=>{const o=r.indexOf("#");return r.substring(0,-1!=o?o:r.length).replace(/\s+/," ").trim()}).filter(r=>r.length>0),i=[];for(const r of e){const o=r.split(" "),s=o[0],a=o.slice(1);try{i.push(bU(s,a))}catch(c){return{status:"error",message:c.message}}}return 0==i.length?{status:"empty"}:{status:"success",script:i}}}function bU(n,t){function e(i){const r=t[i];if(!r.match(/\d+/))throw new Error(`[${n}] Expected int argument but got '${r}'`);return parseInt(r)}switch(n){case"begin":return{type:"begin"};case"end":return{type:"end"};case"sleep":if(1!=t.length)throw new Error(`[${n}] wrong number of arguments - expected 1 but got ${t.length}`);return{type:"sleep",durationMillis:e(0)};case"swipe":if(t.length<4)throw new Error(`[${n}] too few arguments - expected 4 but got ${t.length}`);if(t.length>5)throw new Error(`[${n}] too many arguments`);const i=t.length>4?e(4):300;return{type:"swipe",start:{x:e(0),y:e(1)},end:{x:e(2),y:e(3)},durationMillis:i};case"tap":if(2!=t.length)throw new Error(`[${n}] wrong number of arguments - expected 2 but got ${t.length}`);return{type:"tap",at:{x:e(0),y:e(1)}};default:throw new Error(`unknown command "${n}"`)}throw new Error("Function not implemented.")}class xD{constructor(t,e){this._motionConnection=t,this._callbacks=e,this._parser=new SD}run(t){var e=this;return Fe(function*(){const i=e.parseAndValidate(t),r={begin:e._callbacks.beginRecording,end:e._callbacks.endRecording,sleep:o=>e._handleSleep(o),swipe:o=>e._handleSwipe(o),tap:o=>e._handleTap(o)};for(const o of i)yield r[o.type](o)})()}parseAndValidate(t){{const e=this._parser.parse(t);if("error"==e.status)throw new Error(e.message);const i=[];return"success"==e.status&&i.push(...e.script),this.validate(i)}}validate(t){let e=-1,i=-1;for(let o=0;o<t.length;o++)if("begin"==t[o].type){if(-1!=e)throw new Error("Validation error: duplicate 'begin'");if(-1!=i)throw new Error("Validation error: 'begin' after 'end'");e=o}else if("end"==t[o].type){if(-1!=i)throw new Error("Validation error: duplicate 'end'");i=o}const r=[...t];return-1==e&&r.unshift({type:"begin"}),-1==i&&r.push({type:"end"}),r}_handleSwipe(t){var e=this;return Fe(function*(){yield e._motionConnection.shellCommand(`input swipe ${t.start.x} ${t.start.y} ${t.end.x} ${t.end.y} ${t.durationMillis}`)})()}_handleTap(t){var e=this;return Fe(function*(){yield e._motionConnection.shellCommand(`input tap ${t.at.x} ${t.at.y}`)})()}_handleSleep(t){return Fe(function*(){yield Dl(t.durationMillis)})()}}var Qo=tD.android.app.motiontool,MD=uU.protobuf.Timestamp,wU=Il.Frame,EU=Il.VideoMetadata,TD=Il.Trace;const Xm="recorder.service.ts.lifecycle";let Km=(()=>{class n{constructor(e,i){this._motionConnection=e,this._blobStorageFactory=i,this._inProgressRecording=null,this._isRecording=!1,this._runningTraceDataPoll=Promise.resolve()}get isRecording(){return this._isRecording}loadRecoring(e){var i=this;return Fe(function*(){return qm.load(yield i._blobStorageFactory(e))})()}recordScript(e){var i=this;return Fe(function*(){return yield navigator.locks.request(Xm,Fe(function*(){i._isRecording=!0;const r=new Sl;try{return yield new xD(i._motionConnection,{beginRecording:()=>i._doStartRecording(),endRecording:(s=Fe(function*(){const a=yield i._doStopRecording();yield a.traceEnded,a.recordingAvailable.then(c=>r.resolve(c))}),function(){return s.apply(this,arguments)})}).run(e),yield r}finally{i._isRecording=!1}var s}))})()}startRecording(e){var i=this;return Fe(function*(){yield navigator.locks.request(Xm,Fe(function*(){i._isRecording=!0,yield i._doStartRecording()}))})()}stopRecording(){var e=this;return Fe(function*(){return yield navigator.locks.request(Xm,Fe(function*(){try{return(yield e._doStopRecording()).recordingAvailable}finally{e._isRecording=!1}}))})()}_doStartRecording(){var e=this;return Fe(function*(){Ko(!e._inProgressRecording);const i=yield e._motionConnection.createVideoCapture(),r=yield e._beginTrace();yield i.record(),e._inProgressRecording=new DU(i,r),e._scheduleTraceDataPoll()})()}_doStopRecording(){var e=this;return Fe(function*(){const i=Nt(e._inProgressRecording);e._inProgressRecording=null,yield e._cancelTraceDataPoll();const r=crypto.randomUUID(),o=yield e._blobStorageFactory(r),{video:s}=yield i.videoCapture.stop(),a=e._endTrace(i),c=a.then(Fe(function*(){yield(yield s).pipeTo(yield o.writeable(Lm));const{processName:p,windowId:g}=e._motionConnection,E=g.substring(0,g.indexOf("/"));return yield function SU(n,t){return Zm.apply(this,arguments)}(o,{recordingId:r,startTime:i.startTime,capturedMotion:i.pollData,processName:p,windowName:E}),r}));return{traceEnded:a,recordingAvailable:c}})()}_beginTrace(){var e=this;return Fe(function*(){const i=new Qo.MotionToolsRequest({beginTrace:new Qo.BeginTraceRequest({window:new Qo.WindowIdentifier({rootWindow:e._motionConnection.windowId})})}),r=yield e._motionConnection.sendRequest(i);if(r.error)throw new Error(r.error.message??"Unknown error");return Nt(r.beginTrace?.traceId)})()}_endTrace(e){var i=this;return Fe(function*(){const r=new Qo.MotionToolsRequest({endTrace:new Qo.EndTraceRequest({traceId:e.traceId})}),o=yield i._motionConnection.sendRequest(r);if(o.error)throw new Error(o.error.message??"Unknown error");const s=Nt(o.endTrace?.exportedData);e.pollData.push(s)})()}_scheduleTraceDataPoll(){var e=this;return Fe(function*(){!e._inProgressRecording||(e._scheduledTraceDataPoll=window.setTimeout(Fe(function*(){e._scheduledTraceDataPoll=void 0,e._runningTraceDataPoll=e._collectTraceData(),e._runningTraceDataPoll.then(()=>e._scheduleTraceDataPoll())}),5e3))})()}_cancelTraceDataPoll(){var e=this;return Fe(function*(){yield e._runningTraceDataPoll,clearInterval(e._scheduledTraceDataPoll)})()}_collectTraceData(){var e=this;return Fe(function*(){const i=Nt(e._inProgressRecording),r=new Qo.MotionToolsRequest({pollTrace:new Qo.PollTraceRequest({traceId:i.traceId})}),o=yield e._motionConnection.sendRequest(r);if(o.error)throw new Error(o.error.message??"Unknown error");const s=Nt(o.pollTrace?.exportedData);i.pollData.push(s)})()}}return n.\u0275fac=function(e){return new(e||n)(se(go),se(DD))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class DU{constructor(t,e){this.videoCapture=t,this.traceId=e,this.pollData=[],this.startTime=new Date}}function Zm(){return(Zm=Fe(function*(n,t){const e=yield uD(n,{readFrameData:!0}),i=new Map(t.capturedMotion.flatMap(p=>[...xU(p).entries()]));let r=[...i.keys()].sort();const o=e.videoFrames.at(0)?.winscope1PtsMicros??0n,s=e.videoFrames.map((p,g)=>{let E=Al.UZERO;return E=Al.fromValue(p.winscope1PtsMicros?Number(1000n*(p.winscope1PtsMicros-o)):1e9*p.time),new wU({frameNumber:p.index,frameNanos:E,videoTimeSeconds:p.time,viewHierarchy:i.get(r[Math.min(g,r.length-1)])})}),a=new TD({id:t.recordingId,version:1,name:`Recording on ${t.startTime}`,captureTime:new MD({seconds:t.startTime.getTime()/1e3,nanos:t.startTime.getTime()%1e3*1e6}),processName:t.processName,windowName:t.windowName,duration:new MD({seconds:Number(e.duration_nanos/1000000000n),nanos:Number(e.duration_nanos%1000000000n)}),videoMetadata:new EU({widthPx:e.width,heightPx:e.height}),frames:s}),c=TD.encode(a).finish(),d=(yield n.writeable(cD)).getWriter();try{yield d.write(c),console.log("wrote trace")}finally{yield d.close(),d.releaseLock()}})).apply(this,arguments)}function xU({frameData:n,classname:t}){function e(i){return t?.at(i)??"UNKNOWN"}return new Map(n.map(({timestamp:i,node:r})=>[zB(Al.fromValue(Nt(i))),kD(Nt(r),e)]))}function kD(n,t){return new Il.ViewNode({classname:n.classnameIndex?t(n.classnameIndex):null,hashcode:n.hashcode,id:n.id,left:n.left,top:n.top,width:n.width,height:n.height,scrollX:n.scrollX,scrollY:n.scrollY,translationX:n.translationX,translationY:n.translationY,scaleX:n.scaleX,scaleY:n.scaleY,alpha:n.alpha,willNotDraw:n.willNotDraw,clipChildren:n.clipChildren,visibility:n.visibility,elevation:n.elevation,children:n.children?.map(e=>kD(e,t))})}let Qm=(()=>{class n extends EventTarget{constructor(){super(...arguments),this.progressCount=0}get isActive(){return this.progressCount>0}trackPromise(e){return queueMicrotask(()=>{this.beginProgress(),e.finally(()=>this.endProgress())}),e}beginProgress(){this.progressCount++,1==this.progressCount&&this.dispatchEvent(new Event("progress-started"))}endProgress(){console.assert(this.progressCount>0),this.progressCount--,0==this.progressCount&&this.dispatchEvent(new Event("progress-ended"))}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=ln(n)))(i||n)}}(),n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const MU=JSON.stringify({loopVideo:!1,playbackRate:1,gestureScript:"",useGestureScript:!1});let qu=(()=>{class n{constructor(){this._preferences=function TU(){const n=JSON.parse(MU);try{return{...n,...JSON.parse(localStorage.getItem("preferences")??"{}")}}catch(t){return console.error("Unable to restore preferences",t),n}}()}get loopVideo(){return this._preferences.loopVideo}set loopVideo(e){this.loopVideo!=e&&(this._preferences.loopVideo=e,Wu(this._preferences))}get playbackRate(){return this._preferences.playbackRate}set playbackRate(e){this.playbackRate!=e&&(this._preferences.playbackRate=e,Wu(this._preferences))}get gestureScript(){return this._preferences.gestureScript}set gestureScript(e){this.gestureScript!=e&&(this._preferences.gestureScript=e,Wu(this._preferences))}get useGestureScript(){return this._preferences.useGestureScript}set useGestureScript(e){this.useGestureScript!=e&&(this._preferences.useGestureScript=e,Wu(this._preferences))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();function Wu(n){localStorage.setItem("preferences",JSON.stringify(n))}function Pe(...n){return hn(n,Ta(n))}class Vi extends I{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const Yu=Y(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:kU}=Array,{getPrototypeOf:IU,prototype:AU,keys:RU}=Object;function ID(n){if(1===n.length){const t=n[0];if(kU(t))return{args:t,keys:null};if(function OU(n){return n&&"object"==typeof n&&IU(n)===AU}(t)){const e=RU(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:PU}=Array;function Jm(n){return $(t=>function FU(n,t){return PU(t)?n(...t):n(t)}(n,t))}function AD(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function eg(...n){const t=Ta(n),e=py(n),{args:i,keys:r}=ID(n);if(0===i.length)return hn([],t);const o=new Qe(function NU(n,t,e=Kt){return i=>{RD(t,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)RD(t,()=>{const d=hn(n[c],t);let p=!1;d.subscribe(ee(i,g=>{o[c]=g,p||(p=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,t,r?s=>AD(r,s):Kt));return e?o.pipe(Jm(e)):o}function RD(n,t,e){n?Tr(e,n,t):t()}function OD(n){return new Qe(t=>{ni(n()).subscribe(t)})}function la(n,t){const e=D(n)?n:()=>n,i=r=>r.error(e());return new Qe(t?r=>t.schedule(i,0,r):i)}function tg(){return ce((n,t)=>{let e=null;n._refCount++;const i=ee(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class ng extends Qe{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,re(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new k;const e=this.getSubject();t.add(this.source.subscribe(ee(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=k.EMPTY)}return t}refCount(){return tg()(this)}}function li(n,t){return ce((e,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();e.subscribe(ee(i,c=>{r?.unsubscribe();let d=0;const p=o++;ni(n(c,p)).subscribe(r=ee(i,g=>i.next(t?t(c,g,p,d++):g),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function cr(...n){const t=Ta(n);return ce((e,i)=>{(t?Tl(n,e,t):Tl(n,e)).subscribe(i)})}function un(n,t){return ce((e,i)=>{let r=0;e.subscribe(ee(i,o=>n.call(t,o,r++)&&i.next(o)))})}function Xu(n){return ce((t,e)=>{let i=!1;t.subscribe(ee(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function PD(n=LU){return ce((t,e)=>{let i=!1;t.subscribe(ee(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function LU(){return new Yu}function _o(n,t){const e=arguments.length>=2;return i=>i.pipe(n?un((r,o)=>n(r,o,i)):Kt,jn(1),e?Xu(t):PD(()=>new Yu))}function yo(n,t){return D(t)?vn(n,t,1):vn(n,1)}function dn(n,t,e){const i=D(n)||t||e?{next:n,error:t,complete:e}:n;return i?ce((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(ee(o,c=>{var d;null===(d=i.next)||void 0===d||d.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var d;a=!1,null===(d=i.error)||void 0===d||d.call(i,c),o.error(c)},()=>{var c,d;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(d=i.finalize)||void 0===d||d.call(i)}))}):Kt}function Wr(n){return ce((t,e)=>{let o,i=null,r=!1;i=t.subscribe(ee(e,void 0,void 0,s=>{o=ni(n(s,Wr(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function BU(n,t,e,i,r){return(o,s)=>{let a=e,c=t,d=0;o.subscribe(ee(s,p=>{const g=d++;c=a?n(c,p,g):(a=!0,p),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function FD(n,t){return ce(BU(n,t,arguments.length>=2,!0))}function ig(n){return n<=0?()=>fr:ce((t,e)=>{let i=[];t.subscribe(ee(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function ND(n,t){const e=arguments.length>=2;return i=>i.pipe(n?un((r,o)=>n(r,o,i)):Kt,ig(1),e?Xu(t):PD(()=>new Yu))}function Ku(n){return ce((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const ut="primary",Rl=Symbol("RouteTitle");class VU{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ca(n){return new VU(n)}function HU(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Sr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!LD(n[r],t[r]))return!1;return!0}function LD(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}return n===t}function BD(n){return Array.prototype.concat.apply([],n)}function UD(n){return n.length>0?n[n.length-1]:null}function On(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function vo(n){return vp(n)?n:rl(n)?hn(Promise.resolve(n)):Pe(n)}const $U={exact:function jD(n,t,e){if(!es(n.segments,t.segments)||!Zu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!jD(n.children[i],t.children[i],e))return!1;return!0},subset:zD},VD={exact:function GU(n,t){return Sr(n,t)},subset:function qU(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>LD(n[e],t[e]))},ignored:()=>!0};function HD(n,t,e){return $U[e.paths](n.root,t.root,e.matrixParams)&&VD[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function zD(n,t,e){return $D(n,t,t.segments,e)}function $D(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!es(r,e)||t.hasChildren()||!Zu(r,e,i))}if(n.segments.length===e.length){if(!es(n.segments,e)||!Zu(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!zD(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(es(n.segments,r)&&Zu(n.segments,r,i)&&n.children[ut])&&$D(n.children[ut],t,o,i)}}function Zu(n,t,e){return t.every((i,r)=>VD[e](n[r].parameters,i.parameters))}class Jo{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return XU.serialize(this)}}class ft{constructor(t,e){this.segments=t,this.children=e,this.parent=null,On(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qu(this)}}class Ol{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ca(this.parameters)),this._parameterMap}toString(){return YD(this)}}function es(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let GD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return new og},providedIn:"root"}),n})();class og{parse(t){const e=new o3(t);return new Jo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Pl(t.root,!0)}`,i=function QU(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${Ju(e)}=${Ju(r)}`).join("&"):`${Ju(e)}=${Ju(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function KU(n){return encodeURI(n)}(t.fragment)}`:""}`}}const XU=new og;function Qu(n){return n.segments.map(t=>YD(t)).join("/")}function Pl(n,t){if(!n.hasChildren())return Qu(n);if(t){const e=n.children[ut]?Pl(n.children[ut],!1):"",i=[];return On(n.children,(r,o)=>{o!==ut&&i.push(`${o}:${Pl(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function YU(n,t){let e=[];return On(n.children,(i,r)=>{r===ut&&(e=e.concat(t(i,r)))}),On(n.children,(i,r)=>{r!==ut&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===ut?[Pl(n.children[ut],!1)]:[`${r}:${Pl(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ut]?`${Qu(n)}/${e[0]}`:`${Qu(n)}/(${e.join("//")})`}}function qD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ju(n){return qD(n).replace(/%3B/gi,";")}function sg(n){return qD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ed(n){return decodeURIComponent(n)}function WD(n){return ed(n.replace(/\+/g,"%20"))}function YD(n){return`${sg(n.path)}${function ZU(n){return Object.keys(n).map(t=>`;${sg(t)}=${sg(n[t])}`).join("")}(n.parameters)}`}const JU=/^[^\/()?;=#]+/;function td(n){const t=n.match(JU);return t?t[0]:""}const e3=/^[^=?&#]+/,n3=/^[^&#]+/;class o3{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[ut]=new ft(t,e)),i}parseSegment(){const t=td(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(t),new Ol(ed(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=td(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=td(this.remaining);r&&(i=r,this.capture(i))}t[ed(e)]=ed(i)}parseQueryParam(t){const e=function t3(n){const t=n.match(e3);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=function r3(n){const t=n.match(n3);return t?t[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=WD(e),o=WD(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=td(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new de(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ut);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[ut]:new ft([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new de(4011,!1)}}function ag(n){return n.segments.length>0?new ft([],{[ut]:n}):n}function nd(n){const t={};for(const i of Object.keys(n.children)){const o=nd(n.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function s3(n){if(1===n.numberOfChildren&&n.children[ut]){const t=n.children[ut];return new ft(n.segments.concat(t.segments),t.children)}return n}(new ft(n.segments,t))}function ts(n){return n instanceof Jo}function c3(n,t,e,i,r){if(0===e.length)return ua(t.root,t.root,t.root,i,r);const o=function ZD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new KD(!0,0,n);let t=0,e=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return On(o.outlets,(c,d)=>{a[d]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new KD(e,t,i)}(e);return o.toRoot()?ua(t.root,t.root,new ft([],{}),i,r):function s(c){const d=function d3(n,t,e,i){if(n.isAbsolute)return new da(t.root,!0,0);if(-1===i)return new da(e,e===t.root,0);return function QD(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new de(4005,!1);r=i.segments.length}return new da(i,!1,r-o)}(e,i+(Fl(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,t,n.snapshot?._urlSegment,c),p=d.processChildren?Ll(d.segmentGroup,d.index,o.commands):cg(d.segmentGroup,d.index,o.commands);return ua(t.root,d.segmentGroup,p,i,r)}(n.snapshot?._lastPathIndex)}function Fl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nl(n){return"object"==typeof n&&null!=n&&n.outlets}function ua(n,t,e,i,r){let s,o={};i&&On(i,(c,d)=>{o[d]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`}),s=n===t?e:XD(n,t,e);const a=ag(nd(s));return new Jo(a,o,r)}function XD(n,t,e){const i={};return On(n.children,(r,o)=>{i[o]=r===t?e:XD(r,t,e)}),new ft(n.segments,i)}class KD{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Fl(i[0]))throw new de(4003,!1);const r=i.find(Nl);if(r&&r!==UD(i))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class da{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function cg(n,t,e){if(n||(n=new ft([],{})),0===n.segments.length&&n.hasChildren())return Ll(n,t,e);const i=function f3(n,t,e){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;const s=n.segments[r],a=e[i];if(Nl(a))break;const c=`${a}`,d=i<e.length-1?e[i+1]:null;if(r>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!eS(c,d,s))return o;i+=2}else{if(!eS(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new ft(n.segments.slice(0,i.pathIndex),{});return o.children[ut]=new ft(n.segments.slice(i.pathIndex),n.children),Ll(o,0,r)}return i.match&&0===r.length?new ft(n.segments,{}):i.match&&!n.hasChildren()?ug(n,t,e):i.match?Ll(n,0,r):ug(n,t,e)}function Ll(n,t,e){if(0===e.length)return new ft(n.segments,{});{const i=function h3(n){return Nl(n[0])?n[0].outlets:{[ut]:n}}(e),r={};return On(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=cg(n.children[s],t,o))}),On(n.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new ft(n.segments,r)}}function ug(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const o=e[r];if(Nl(o)){const c=p3(o.outlets);return new ft(i,c)}if(0===r&&Fl(e[0])){i.push(new Ol(n.segments[t].path,JD(e[0]))),r++;continue}const s=Nl(o)?o.outlets[ut]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&Fl(a)?(i.push(new Ol(s,JD(a))),r+=2):(i.push(new Ol(s,{})),r++)}return new ft(i,{})}function p3(n){const t={};return On(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=ug(new ft([],{}),0,e))}),t}function JD(n){const t={};return On(n,(e,i)=>t[i]=`${e}`),t}function eS(n,t,e){return n==e.path&&Sr(t,e.parameters)}class Yr{constructor(t,e){this.id=t,this.url=e}}class dg extends Yr{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ns extends Yr{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class id extends Yr{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tS extends Yr{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class m3 extends Yr{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g3 extends Yr{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _3 extends Yr{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class y3 extends Yr{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v3 extends Yr{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b3{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class w3{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E3{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C3{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D3{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S3{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nS{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class iS{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=hg(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=hg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return fg(t,this._root).map(e=>e.value)}}function hg(n,t){if(n===t.value)return t;for(const e of t.children){const i=hg(n,e);if(i)return i}return null}function fg(n,t){if(n===t.value)return[t];for(const e of t.children){const i=fg(n,e);if(i.length)return i.unshift(t),i}return[]}class Xr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ha(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class rS extends iS{constructor(t,e){super(t),this.snapshot=e,pg(this,t)}toString(){return this.snapshot.toString()}}function oS(n,t){const e=function M3(n,t){const s=new rd([],{},{},"",{},ut,t,null,n.root,-1,{});return new aS("",new Xr(s,[]))}(n,t),i=new Vi([new Ol("",{})]),r=new Vi({}),o=new Vi({}),s=new Vi({}),a=new Vi(""),c=new bo(i,r,s,a,o,ut,t,e.root);return c.snapshot=e.root,new rS(new Xr(c,[]),e)}class bo{constructor(t,e,i,r,o,s,a,c){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe($(d=>d[Rl]))??Pe(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($(t=>ca(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($(t=>ca(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sS(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function T3(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class rd{constructor(t,e,i,r,o,s,a,c,d,p,g,E){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.[Rl],this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=p,this._correctedLastPathIndex=E??p,this._resolve=g}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ca(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class aS extends iS{constructor(t,e){super(e),this.url=t,pg(this,e)}toString(){return lS(this._root)}}function pg(n,t){t.value._routerState=n,t.children.forEach(e=>pg(n,e))}function lS(n){const t=n.children.length>0?` { ${n.children.map(lS).join(", ")} } `:"";return`${n.value}${t}`}function mg(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Sr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Sr(t.params,e.params)||n.params.next(e.params),function jU(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Sr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Sr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gg(n,t){const e=Sr(n.params,t.params)&&function WU(n,t){return es(n,t)&&n.every((e,i)=>Sr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||gg(n.parent,t.parent))}function Bl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function I3(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Bl(n,i,r);return Bl(n,i)})}(n,t,e);return new Xr(i,r)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Bl(n,a)),s}}const i=function A3(n){return new bo(new Vi(n.url),new Vi(n.params),new Vi(n.queryParams),new Vi(n.fragment),new Vi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(o=>Bl(n,o));return new Xr(i,r)}}const _g="ngNavigationCancelingError";function cS(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=ts(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=uS(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function uS(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[_g]=!0,i.cancellationCode=t,e&&(i.url=e),i}function dS(n){return hS(n)&&ts(n.url)}function hS(n){return n&&n[_g]}class R3{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ul,this.attachRef=null}}let Ul=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new R3,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const od=!1;let yg=(()=>{class n{constructor(e,i,r,o,s){this.parentContexts=e,this.location=i,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.name=r||ut,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,od);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,od);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,od);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new de(4013,od);this._activatedRoute=e;const r=this.location,s=e._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new O3(e,a,r.injector);if(i&&function P3(n){return!!n.resolveComponentFactory}(i)){const d=i.resolveComponentFactory(s);this.activated=r.createComponent(d,r.length,c)}else this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(V(Ul),V(In),gr("name"),V(Rn),V(ao))},n.\u0275dir=ke({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class O3{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===bo?this.route:t===Ul?this.childContexts:this.parent.get(t,e)}}let vg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Wt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Hw],decls:1,vars:0,template:function(e,i){1&e&&ct(0,"router-outlet")},dependencies:[yg],encapsulation:2}),n})();function fS(n,t){return n.providers&&!n._injector&&(n._injector=mu(n.providers,t,`Route: ${n.path}`)),n._injector??t}function wg(n){const t=n.children&&n.children.map(wg),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ut&&(e.component=vg),e}function Hi(n){return n.outlet||ut}function pS(n,t){const e=n.filter(i=>Hi(i)===t);return e.push(...n.filter(i=>Hi(i)!==t)),e}function Vl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class U3{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),mg(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=ha(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),On(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=ha(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=ha(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=ha(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new S3(o.value.snapshot))}),t.children.length&&this.forwardEvent(new C3(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(mg(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),mg(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=Vl(r.snapshot),c=a?.get(Bo)??null;s.attachRef=null,s.route=r,s.resolver=c,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}}class mS{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class sd{constructor(t,e){this.component=t,this.route=e}}function V3(n,t,e){const i=n._root;return Hl(i,t?t._root:null,e,[i.value])}function fa(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||function rk(n){return null!==vc(n)}(n)?t.get(n):n:i}function Hl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=ha(t);return n.children.forEach(s=>{(function j3(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function z3(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!es(n.url,t.url);case"pathParamsOrQueryParamsChange":return!es(n.url,t.url)||!Sr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gg(n,t)||!Sr(n.queryParams,t.queryParams);default:return!gg(n,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new mS(i)):(o.data=s.data,o._resolvedData=s._resolvedData),Hl(n,t,o.component?a?a.children:null:e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new sd(a.outlet.component,s))}else s&&jl(t,a,r),r.canActivateChecks.push(new mS(i)),Hl(n,null,o.component?a?a.children:null:e,i,r)})(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),On(o,(s,a)=>jl(s,e.getContext(a),r)),r}function jl(n,t,e){const i=ha(n),r=n.value;On(i,(o,s)=>{jl(o,r.component?t?t.children.getContext(s):null:t,e)}),e.canDeactivateChecks.push(new sd(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function zl(n){return"function"==typeof n}function Eg(n){return n instanceof Yu||"EmptyError"===n?.name}const ad=Symbol("INITIAL_VALUE");function pa(){return li(n=>eg(n.map(t=>t.pipe(jn(1),cr(ad)))).pipe($(t=>{for(const e of t)if(!0!==e){if(e===ad)return ad;if(!1===e||e instanceof Jo)return e}return!0}),un(t=>t!==ad),jn(1)))}function gS(n){return function yn(...n){return Jt(n)}(dn(t=>{if(ts(t))throw cS(0,t)}),$(t=>!0===t))}const Cg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _S(n,t,e,i,r){const o=Dg(n,t,e);return o.matched?function sV(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?Pe(r.map(s=>{const a=fa(s,n);return vo(function X3(n){return n&&zl(n.canMatch)}(a)?a.canMatch(t,e):n.runInContext(()=>a(t,e)))})).pipe(pa(),gS()):Pe(!0)}(i=fS(t,i),t,e).pipe($(s=>!0===s?o:{...Cg})):Pe(o)}function Dg(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...Cg}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||HU)(e,n,t);if(!r)return{...Cg};const o={};On(r.posParams,(a,c)=>{o[c]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function ld(n,t,e,i,r="corrected"){if(e.length>0&&function cV(n,t,e){return e.some(i=>cd(n,t,i)&&Hi(i)!==ut)}(n,e,i)){const s=new ft(t,function lV(n,t,e,i){const r={};r[ut]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Hi(o)!==ut){const s=new ft([],{});s._sourceSegment=n,s._segmentIndexShift=t.length,r[Hi(o)]=s}return r}(n,t,i,new ft(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function uV(n,t,e){return e.some(i=>cd(n,t,i))}(n,e,i)){const s=new ft(n.segments,function aV(n,t,e,i,r,o){const s={};for(const a of i)if(cd(n,e,a)&&!r[Hi(a)]){const c=new ft([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===o?n.segments.length:t.length,s[Hi(a)]=c}return{...r,...s}}(n,t,e,i,n.children,r));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const o=new ft(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function cd(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function yS(n,t,e,i){return!!(Hi(n)===i||i!==ut&&cd(t,e,n))&&("**"===n.path||Dg(t,n,e).matched)}function vS(n,t,e){return 0===t.length&&!n.children[e]}const ud=!1;class dd{constructor(t){this.segmentGroup=t||null}}class bS{constructor(t){this.urlTree=t}}function $l(n){return la(new dd(n))}function wS(n){return la(new bS(n))}class pV{constructor(t,e,i,r,o){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const t=ld(this.urlTree.root,[],[],this.config).segmentGroup,e=new ft(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,ut).pipe($(o=>this.createUrlTree(nd(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wr(o=>{if(o instanceof bS)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof dd?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ut).pipe($(r=>this.createUrlTree(nd(r),t.queryParams,t.fragment))).pipe(Wr(r=>{throw r instanceof dd?this.noMatchError(r):r}))}noMatchError(t){return new de(4002,ud)}createUrlTree(t,e,i){const r=ag(t);return new Jo(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe($(o=>new ft([],o))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return hn(r).pipe(yo(o=>{const s=i.children[o],a=pS(e,o);return this.expandSegmentGroup(t,a,s,o).pipe($(c=>({segment:c,outlet:o})))}),FD((o,s)=>(o[s.outlet]=s.segment,o),{}),ND())}expandSegment(t,e,i,r,o,s){return hn(i).pipe(yo(a=>this.expandSegmentAgainstRoute(t,e,i,a,r,o,s).pipe(Wr(d=>{if(d instanceof dd)return Pe(null);throw d}))),_o(a=>!!a),Wr((a,c)=>{if(Eg(a))return vS(e,r,o)?Pe(new ft([],{})):$l(e);throw a}))}expandSegmentAgainstRoute(t,e,i,r,o,s,a){return yS(r,e,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s):$l(e):$l(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?wS(o):this.lineralizeSegments(i,o).pipe(vn(s=>{const a=new ft(s,{});return this.expandSegment(t,a,e,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){const{matched:a,consumedSegments:c,remainingSegments:d,positionalParamSegments:p}=Dg(e,r,o);if(!a)return $l(e);const g=this.applyRedirectCommands(c,r.redirectTo,p);return r.redirectTo.startsWith("/")?wS(g):this.lineralizeSegments(r,g).pipe(vn(E=>this.expandSegment(t,e,i,E.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,i,r,o){return"**"===i.path?(t=fS(i,t),i.loadChildren?(i._loadedRoutes?Pe({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe($(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new ft(r,{})))):Pe(new ft(r,{}))):_S(e,i,r,t).pipe(li(({matched:s,consumedSegments:a,remainingSegments:c})=>s?this.getChildConfig(t=i._injector??t,i,r).pipe(vn(p=>{const g=p.injector??t,E=p.routes,{segmentGroup:S,slicedSegments:R}=ld(e,a,c,E),G=new ft(S.segments,S.children);if(0===R.length&&G.hasChildren())return this.expandChildren(g,E,G).pipe($(oe=>new ft(a,oe)));if(0===E.length&&0===R.length)return Pe(new ft(a,{}));const te=Hi(i)===o;return this.expandSegment(g,G,E,R,te?ut:o,!0).pipe($(_e=>new ft(a.concat(_e.segments),_e.children)))})):$l(e)))}getChildConfig(t,e,i){return e.children?Pe({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Pe({routes:e._loadedRoutes,injector:e._loadedInjector}):function oV(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?Pe(!0):Pe(r.map(s=>{const a=fa(s,n);return vo(function G3(n){return n&&zl(n.canLoad)}(a)?a.canLoad(t,e):n.runInContext(()=>a(t,e)))})).pipe(pa(),gS())}(t,e,i).pipe(vn(r=>r?this.configLoader.loadChildren(t,e).pipe(dn(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function hV(n){return la(uS(ud,3))}())):Pe({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Pe(i);if(r.numberOfChildren>1||!r.children[ut])return la(new de(4e3,ud));r=r.children[ut]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const o=this.createSegmentGroup(t,e.root,i,r);return new Jo(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return On(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=e[a]}else i[o]=r}),i}createSegmentGroup(t,e,i,r){const o=this.createSegments(t,e.segments,i,r);let s={};return On(e.children,(a,c)=>{s[c]=this.createSegmentGroup(t,a,i,r)}),new ft(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new de(4001,ud);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class gV{}class vV{constructor(t,e,i,r,o,s,a,c){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const t=ld(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ut).pipe($(e=>{if(null===e)return null;const i=new rd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ut,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Xr(i,e),o=new aS(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,i=sS(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return hn(Object.keys(i.children)).pipe(yo(r=>{const o=i.children[r],s=pS(e,r);return this.processSegmentGroup(t,s,o,r)}),FD((r,o)=>r&&o?(r.push(...o),r):null),function UU(n,t=!1){return ce((e,i)=>{let r=0;e.subscribe(ee(i,o=>{const s=n(o,r++);(s||t)&&i.next(o),!s&&i.complete()}))})}(r=>null!==r),Xu(null),ND(),$(r=>{if(null===r)return null;const o=ES(r);return function bV(n){n.sort((t,e)=>t.value.outlet===ut?-1:e.value.outlet===ut?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,i,r,o){return hn(e).pipe(yo(s=>this.processSegmentAgainstRoute(s._injector??t,s,i,r,o)),_o(s=>!!s),Wr(s=>{if(Eg(s))return vS(i,r,o)?Pe([]):Pe(null);throw s}))}processSegmentAgainstRoute(t,e,i,r,o){if(e.redirectTo||!yS(e,i,r,o))return Pe(null);let s;if("**"===e.path){const a=r.length>0?UD(r).parameters:{},c=DS(i)+r.length;s=Pe({snapshot:new rd(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xS(e),Hi(e),e.component??e._loadedComponent??null,e,CS(i),c,MS(e),c),consumedSegments:[],remainingSegments:[]})}else s=_S(i,e,r,t).pipe($(({matched:a,consumedSegments:c,remainingSegments:d,parameters:p})=>{if(!a)return null;const g=DS(i)+c.length;return{snapshot:new rd(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xS(e),Hi(e),e.component??e._loadedComponent??null,e,CS(i),g,MS(e),g),consumedSegments:c,remainingSegments:d}}));return s.pipe(li(a=>{if(null===a)return Pe(null);const{snapshot:c,consumedSegments:d,remainingSegments:p}=a;t=e._injector??t;const g=e._loadedInjector??t,E=function wV(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:S,slicedSegments:R}=ld(i,d,p,E.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===R.length&&S.hasChildren())return this.processChildren(g,E,S).pipe($(te=>null===te?null:[new Xr(c,te)]));if(0===E.length&&0===R.length)return Pe([new Xr(c,[])]);const G=Hi(e)===o;return this.processSegment(g,E,S,R,G?ut:o).pipe($(te=>null===te?null:[new Xr(c,te)]))}))}}function EV(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function ES(n){const t=[],e=new Set;for(const i of n){if(!EV(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=ES(i.children);t.push(new Xr(i.value,r))}return t.filter(i=>!e.has(i))}function CS(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function DS(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function xS(n){return n.data||{}}function MS(n){return n.resolve||{}}function TS(n){return"string"==typeof n.title||null===n.title}function Sg(n){return li(t=>{const e=n(t);return e?hn(e).pipe($(()=>t)):Pe(t)})}let kS=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ut);return i}getResolvedTitleForRoute(e){return e.data[Rl]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:function(){return Vt(IS)},providedIn:"root"}),n})(),IS=(()=>{class n extends kS{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(se(qC))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class IV{}class RV extends class AV{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const fd=new ve("",{providedIn:"root",factory:()=>({})}),xg=new ve("ROUTES");let Mg=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Pe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=vo(e.loadComponent()).pipe(dn(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Ku(()=>{this.componentLoaders.delete(e)})),r=new ng(i,()=>new I).pipe(tg());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Pe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe($(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,d,p=!1;Array.isArray(a)?d=a:(c=a.create(e).injector,d=BD(c.get(xg,[],je.Self|je.Optional)));return{routes:d.map(wg),injector:c}}),Ku(()=>{this.childrenLoaders.delete(i)})),s=new ng(o,()=>new I).pipe(tg());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(e){return vo(e()).pipe(vn(i=>i instanceof Uw||Array.isArray(i)?Pe(i):hn(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(se(Zn),se($p))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class RS{}class PV{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function FV(n){throw n}function NV(n,t,e){return t.parse("/")}const LV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function OS(){const n=Vt(GD),t=Vt(Ul),e=Vt(xu),i=Vt(Zn),r=Vt($p),o=Vt(xg,{optional:!0})??[],s=Vt(fd,{optional:!0})??{},a=Vt(IS),c=Vt(kS,{optional:!0}),d=Vt(RS,{optional:!0}),p=Vt(IV,{optional:!0}),g=new Dn(null,n,t,e,i,r,BD(o));return d&&(g.urlHandlingStrategy=d),p&&(g.routeReuseStrategy=p),g.titleStrategy=c??a,function UV(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(s,g),g}let Dn=(()=>{class n{constructor(e,i,r,o,s,a,c){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=FV,this.malformedUriErrorHandler=NV,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Pe(void 0),this.urlHandlingStrategy=new PV,this.routeReuseStrategy=new RV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(Mg),this.configLoader.onLoadEndListener=E=>this.triggerEvent(new w3(E)),this.configLoader.onLoadStartListener=E=>this.triggerEvent(new b3(E)),this.ngModule=s.get($o),this.console=s.get(BN);const g=s.get(Ze);this.isNgZoneEnabled=g instanceof Ze&&Ze.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function zU(){return new Jo(new ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oS(this.currentUrlTree,this.rootComponentType),this.transitions=new Vi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(un(r=>0!==r.id),$(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),li(r=>{let o=!1,s=!1;return Pe(r).pipe(dn(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),li(a=>{const c=this.browserUrlTree.toString(),d=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return PS(a.source)&&(this.browserUrlTree=a.extractedUrl),Pe(a).pipe(li(g=>{const E=this.transitions.getValue();return i.next(new dg(g.id,this.serializeUrl(g.extractedUrl),g.source,g.restoredState)),E!==this.transitions.getValue()?fr:Promise.resolve(g)}),function mV(n,t,e,i){return li(r=>function fV(n,t,e,i,r){return new pV(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe($(o=>({...r,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),dn(g=>{this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects},r.urlAfterRedirects=g.urlAfterRedirects}),function DV(n,t,e,i,r,o){return vn(s=>function yV(n,t,e,i,r,o,s="emptyOnly",a="legacy"){return new vV(n,t,e,i,r,s,a,o).recognize().pipe(li(c=>null===c?function _V(n){return new Qe(t=>t.error(n))}(new gV):Pe(c)))}(n,t,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r,o).pipe($(a=>({...s,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),dn(g=>{if(r.targetSnapshot=g.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!g.extras.skipLocationChange){const S=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl);this.setBrowserUrl(S,g)}this.browserUrlTree=g.urlAfterRedirects}const E=new m3(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);i.next(E)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:E,extractedUrl:S,source:R,restoredState:G,extras:te}=a,le=new dg(E,this.serializeUrl(S),R,G);i.next(le);const _e=oS(S,this.rootComponentType).snapshot;return Pe(r={...a,targetSnapshot:_e,urlAfterRedirects:S,extras:{...te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),fr}),dn(a=>{const c=new g3(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),$(a=>r={...a,guards:V3(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function Z3(n,t){return vn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?Pe({...e,guardsResult:!0}):function Q3(n,t,e,i){return hn(n).pipe(vn(r=>function rV(n,t,e,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Pe(o.map(a=>{const c=Vl(t)??r,d=fa(a,c);return vo(function Y3(n){return n&&zl(n.canDeactivate)}(d)?d.canDeactivate(n,t,e,i):c.runInContext(()=>d(n,t,e,i))).pipe(_o())})).pipe(pa()):Pe(!0)}(r.component,r.route,e,t,i)),_o(r=>!0!==r,!0))}(s,i,r,n).pipe(vn(a=>a&&function $3(n){return"boolean"==typeof n}(a)?function J3(n,t,e,i){return hn(t).pipe(yo(r=>Tl(function tV(n,t){return null!==n&&t&&t(new E3(n)),Pe(!0)}(r.route.parent,i),function eV(n,t){return null!==n&&t&&t(new D3(n)),Pe(!0)}(r.route,i),function iV(n,t,e){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function H3(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(s)).filter(s=>null!==s).map(s=>OD(()=>Pe(s.guards.map(c=>{const d=Vl(s.node)??e,p=fa(c,d);return vo(function W3(n){return n&&zl(n.canActivateChild)}(p)?p.canActivateChild(i,n):d.runInContext(()=>p(i,n))).pipe(_o())})).pipe(pa())));return Pe(o).pipe(pa())}(n,r.path,e),function nV(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Pe(!0);const r=i.map(o=>OD(()=>{const s=Vl(t)??e,a=fa(o,s);return vo(function q3(n){return n&&zl(n.canActivate)}(a)?a.canActivate(t,n):s.runInContext(()=>a(t,n))).pipe(_o())}));return Pe(r).pipe(pa())}(n,r.route,e))),_o(r=>!0!==r,!0))}(i,o,n,t):Pe(a)),$(a=>({...e,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),dn(a=>{if(r.guardsResult=a.guardsResult,ts(a.guardsResult))throw cS(0,a.guardsResult);const c=new _3(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),un(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),Sg(a=>{if(a.guards.canActivateChecks.length)return Pe(a).pipe(dn(c=>{const d=new y3(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),li(c=>{let d=!1;return Pe(c).pipe(function SV(n,t){return vn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Pe(e);let o=0;return hn(r).pipe(yo(s=>function xV(n,t,e,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!TS(r)&&(o[Rl]=r.title),function MV(n,t,e,i){const r=function TV(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Pe({});const o={};return hn(r).pipe(vn(s=>function kV(n,t,e,i){const r=Vl(t)??i,o=fa(n,r);return vo(o.resolve?o.resolve(t,e):r.runInContext(()=>o(t,e)))}(n[s],t,e,i).pipe(_o(),dn(a=>{o[s]=a}))),ig(1),sD(o),Wr(s=>Eg(s)?fr:la(s)))}(o,n,t,i).pipe($(s=>(n._resolvedData=s,n.data=sS(n,e).resolve,r&&TS(r)&&(n.data[Rl]=r.title),null)))}(s.route,i,n,t)),dn(()=>o++),ig(1),vn(s=>o===r.length?Pe(e):fr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),dn({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),dn(c=>{const d=new v3(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}))}),Sg(a=>{const c=d=>{const p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(dn(g=>{d.component=g}),$(()=>{})));for(const g of d.children)p.push(...c(g));return p};return eg(c(a.targetSnapshot.root)).pipe(Xu(),jn(1))}),Sg(()=>this.afterPreactivation()),$(a=>{const c=function k3(n,t,e){const i=Bl(n,t._root,e?e._root:void 0);return new rS(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),dn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,t,e)=>$(i=>(new U3(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),dn({next(){o=!0},complete(){o=!0}}),Ku(()=>{o||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Wr(a=>{if(s=!0,hS(a)){dS(a)||(this.navigated=!0,this.restoreHistory(r,!0));const c=new id(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(c),dS(a)){const d=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),p={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PS(r.source)};this.scheduleNavigation(d,"imperative",null,p,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new tS(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(c);try{r.resolve(this.errorHandler(a))}catch(d){r.reject(d)}}return fr}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},o=e.state?.navigationId?e.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(wg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,d=r||this.routerState.root,p=c?this.currentUrlTree.fragment:s;let g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...o};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}return null!==g&&(g=this.removeEmptyProps(g)),c3(d,this.currentUrlTree,e,g,p??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=ts(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function VV(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new de(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...LV}:!1===i?{...BV}:i,ts(e))return HD(this.currentUrlTree,e,r);const o=this.parseUrl(e);return HD(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ns(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((E,S)=>{a=E,c=S});const p=++this.navigationId;let g;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),g=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):g=0,this.setTransition({id:p,targetPageId:g,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(E=>Promise.reject(E))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const o=new id(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(o),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){Ja()},n.\u0275prov=xe({token:n,factory:function(){return OS()},providedIn:"root"}),n})();function PS(n){return"imperative"!==n}class FS{}let zV=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(un(e=>e instanceof ns),yo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=mu(o.providers,e,`Route: ${o.path}`));const s=o._injector??e,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return hn(r).pipe(ms())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Pe(null);const o=r.pipe(vn(s=>null===s?Pe(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return i.loadComponent&&!i._loadedComponent?hn([o,this.loader.loadComponent(i)]).pipe(ms()):o})}}return n.\u0275fac=function(e){return new(e||n)(se(Dn),se($p),se(ao),se(FS),se(Mg))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ig=new ve("");let NS=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof dg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ns&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof nS&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new nS(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){Ja()},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();function ma(n,t){return{\u0275kind:n,\u0275providers:t}}function Ag(n){return[{provide:xg,multi:!0,useValue:n}]}function BS(){const n=Vt(Zn);return t=>{const e=n.get(ra);if(t!==e.components[0])return;const i=n.get(Dn),r=n.get(US);1===n.get(Rg)&&i.initialNavigation(),n.get(VS,null,je.Optional)?.setUpPreloading(),n.get(Ig,null,je.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const US=new ve("",{factory:()=>new I}),Rg=new ve("",{providedIn:"root",factory:()=>1});const VS=new ve("");function WV(n){return ma(0,[{provide:VS,useExisting:zV},{provide:FS,useExisting:n}])}const HS=new ve("ROUTER_FORROOT_GUARD"),YV=[xu,{provide:GD,useClass:og},{provide:Dn,useFactory:OS},Ul,{provide:bo,useFactory:function LS(n){return n.routerState.root},deps:[Dn]},Mg];function XV(){return new PE("Router",Dn)}let jS=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[YV,[],Ag(e),{provide:HS,useFactory:JV,deps:[[Dn,new so,new Ps]]},{provide:fd,useValue:i||{}},i?.useHash?{provide:fo,useClass:sC}:{provide:fo,useClass:oC},{provide:Ig,useFactory:()=>{const n=Vt(Dn),t=Vt($L),e=Vt(fd);return e.scrollOffset&&t.setOffset(e.scrollOffset),new NS(n,t,e)}},i?.preloadingStrategy?WV(i.preloadingStrategy).\u0275providers:[],{provide:PE,multi:!0,useFactory:XV},i?.initialNavigation?e8(i):[],[{provide:zS,useFactory:BS},{provide:ME,multi:!0,useExisting:zS}]]}}static forChild(e){return{ngModule:n,providers:[Ag(e)]}}}return n.\u0275fac=function(e){return new(e||n)(se(HS,8))},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[vg]}),n})();function JV(n){return"guarded"}function e8(n){return["disabled"===n.initialNavigation?ma(3,[{provide:vu,multi:!0,useFactory:()=>{const t=Vt(Dn);return()=>{t.setUpLocationChangeListener()}}},{provide:Rg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ma(2,[{provide:Rg,useValue:0},{provide:vu,multi:!0,deps:[Zn],useFactory:t=>{const e=t.get(S2,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(o=>{const s=t.get(Dn),a=t.get(US);(function r(o){t.get(Dn).events.pipe(un(a=>a instanceof ns||a instanceof id||a instanceof tS),$(a=>a instanceof ns||a instanceof id&&(0===a.code||1===a.code)&&null),un(a=>null!==a),jn(1)).subscribe(()=>{o()})})(()=>{o(!0),i=!0}),s.afterPreactivation=()=>(o(!0),i||a.closed?Pe(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const zS=new ve("");let Og;try{Og=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Og=!1}let Gl,_d,is,Pg,yi=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function zL(n){return n===SC}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Og)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(se(zp))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Kr(n){return function n8(){if(null==Gl&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gl=!0}))}finally{Gl=Gl||!1}return Gl}()?n:!!n.capture}function GS(){if(null==is){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return is=!1,is;if("scrollBehavior"in document.documentElement.style)is=!0;else{const n=Element.prototype.scrollTo;is=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return is}function ql(){if("object"!=typeof document||!document)return 0;if(null==_d){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),_d=0,0===n.scrollLeft&&(n.scrollLeft=1,_d=0===n.scrollLeft?1:2),n.remove()}return _d}function yd(n){if(function i8(){if(null==Pg){const n=typeof document<"u"?document.head:null;Pg=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Pg}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function ur(n){return n.composedPath?n.composedPath()[0]:n.target}function Fg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function wd(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Bg(n,t=Ml){return ce((e,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const d=o;o=null,i.next(d)}};function c(){const d=s+n,p=t.now();if(p<d)return r=this.schedule(void 0,d-p),void i.add(r);a()}e.subscribe(ee(i,d=>{o=d,s=t.now(),r||(r=t.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function KS(n){return un((t,e)=>n<=e)}function Ug(n,t=Kt){return n=n??_8,ce((e,i)=>{let r,o=!0;e.subscribe(ee(i,s=>{const a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function _8(n,t){return n===t}function ji(n){return ce((t,e)=>{ni(n).subscribe(ee(e,()=>e.complete(),W)),!e.closed&&t.subscribe(e)})}function Xt(n){return null!=n&&"false"!=`${n}`}function $n(n,t=0){return function y8(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Ed(n){return Array.isArray(n)?n:[n]}function gn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function _n(n){return n instanceof lt?n.nativeElement:n}const ZS=new Set;let _a,v8=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):w8}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function b8(n){if(!ZS.has(n))try{_a||(_a=document.createElement("style"),_a.setAttribute("type","text/css"),document.head.appendChild(_a)),_a.sheet&&(_a.sheet.insertRule(`@media ${n} {body{ }}`,0),ZS.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(se(yi))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function w8(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let E8=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new I}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return QS(Ed(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=eg(QS(Ed(e)).map(s=>this._registerQuery(s).observable));return o=Tl(o.pipe(jn(1)),o.pipe(KS(1),Bg(0))),o.pipe($(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:d})=>{a.matches=a.matches||c,a.breakpoints[d]=c}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),o={observable:new Qe(s=>{const a=c=>this._zone.run(()=>s.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(cr(i),$(({matches:s})=>({query:e,matches:s})),ji(this._destroySubject)),mql:i};return this._queries.set(e,o),o}}return n.\u0275fac=function(e){return new(e||n)(se(v8),se(Ze))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QS(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class tx extends class S8{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new I,this._typeaheadSubscription=k.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new I,this.change=new I,t instanceof Go&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(dn(e=>this._pressedLetters.push(e)),Bg(t),un(()=>this._pressedLetters.length>0),$(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const o=(this._activeItemIndex+r)%i.length,s=i[o];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||wd(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t);this._activeItem=e[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Go?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function Cd(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Dd(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const A8=new ve("cdk-input-modality-detector-options"),R8={ignoreKeys:[18,17,224,91,16]},ya=Kr({passive:!0,capture:!0});let O8=(()=>{class n{constructor(e,i,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new Vi(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ur(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Cd(s)?"keyboard":"mouse"),this._mostRecentTarget=ur(s))},this._onTouchstart=s=>{Dd(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ur(s))},this._options={...R8,...o},this.modalityDetected=this._modality.pipe(KS(1)),this.modalityChanged=this.modalityDetected.pipe(Ug()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,ya),r.addEventListener("mousedown",this._onMousedown,ya),r.addEventListener("touchstart",this._onTouchstart,ya)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ya),document.removeEventListener("mousedown",this._onMousedown,ya),document.removeEventListener("touchstart",this._onTouchstart,ya))}}return n.\u0275fac=function(e){return new(e||n)(se(yi),se(Ze),se(et),se(A8,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const F8=new ve("cdk-focus-monitor-default-options"),Sd=Kr({passive:!0,capture:!0});let rs=(()=>{class n{constructor(e,i,r,o,s){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new I,this._rootNodeFocusAndBlurListener=a=>{for(let d=ur(a);d;d=d.parentElement)"focus"===a.type?this._onFocus(a,d):this._onBlur(a,d)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(e,i=!1){const r=_n(e);if(!this._platform.isBrowser||1!==r.nodeType)return Pe(null);const o=yd(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new I,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=_n(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const o=_n(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),o=ur(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Sd),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Sd)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ji(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Sd),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Sd),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(se(Ze),se(yi),se(O8),se(et,8),se(F8,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rx="cdk-high-contrast-black-on-white",ox="cdk-high-contrast-white-on-black",Vg="cdk-high-contrast-active";let N8=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=Vt(E8).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Vg,rx,ox),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(Vg,rx):2===i&&e.add(Vg,ox)}}}return n.\u0275fac=function(e){return new(e||n)(se(yi),se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L8=new ve("cdk-dir-doc",{providedIn:"root",factory:function B8(){return Vt(et)}}),U8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let os=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Ke,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function V8(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?U8.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(se(L8,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})();const j8=new ve("mat-sanity-checks",{providedIn:"root",factory:function H8(){return!0}});let qt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Fg()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(se(N8),se(j8,8),se(et))},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[Wl,Wl]}),n})();function Yl(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Xt(t)}}}function wo(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function xd(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Xt(t)}}}function Md(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?$n(e):this.defaultTabIndex}}}let $8=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class G8{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const lx={enterDuration:225,exitDuration:150},Hg=Kr({passive:!0}),cx=["mousedown","touchstart"],ux=["mouseup","mouseleave","touchend","touchcancel"];class W8{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=_n(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...lx,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=i.radius||function Y8(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),a=t-r.left,c=e-r.top,d=o.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=a-s+"px",p.style.top=c-s+"px",p.style.height=2*s+"px",p.style.width=2*s+"px",null!=i.color&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);const g=window.getComputedStyle(p),S=g.transitionDuration,R="none"===g.transitionProperty||"0s"===S||"0s, 0s"===S,G=new G8(this,p,i,R);p.style.transform="scale3d(1, 1, 1)",G.state=0,i.persistent||(this._mostRecentTransientRipple=G);let te=null;return!R&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const le=()=>this._finishRippleTransition(G),_e=()=>this._destroyRipple(G);p.addEventListener("transitionend",le),p.addEventListener("transitioncancel",_e),te={onTransitionEnd:le,onTransitionCancel:_e}}),this._activeRipples.set(G,te),(R||!d)&&this._finishRippleTransition(G),G}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...lx,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=_n(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(cx))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ux),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Cd(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Dd(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Hg)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(cx.forEach(t=>{this._triggerElement.removeEventListener(t,this,Hg)}),this._pointerUpEventsRegistered&&ux.forEach(t=>{this._triggerElement.removeEventListener(t,this,Hg)}))}}const X8=new ve("mat-ripple-global-options");let va=(()=>{class n{constructor(e,i,r,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new W8(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Ze),V(yi),V(X8,8),V(Fi,8))},n.\u0275dir=ke({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&Yt("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Td=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[qt,qt]}),n})();const K8=["*",[["mat-toolbar-row"]]],Z8=["*","mat-toolbar-row"],Q8=wo(class{constructor(n){this._elementRef=n}});let J8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ke({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),eH=(()=>{class n extends Q8{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(yi),V(et))},n.\u0275cmp=Wt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&Pi(r,J8,5),2&e){let o;Pt(o=Ft())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&Yt("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ze],ngContentSelectors:Z8,decls:2,vars:0,template:function(e,i){1&e&&(tr(K8),Vn(0),Vn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),tH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[qt,qt]}),n})();function dx(...n){const t=py(n),{args:e,keys:i}=ID(n),r=new Qe(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let c=s,d=s;for(let p=0;p<s;p++){let g=!1;ni(e[p]).subscribe(ee(o,E=>{g||(g=!0,d--),a[p]=E},()=>c--,void 0,()=>{(!c||!g)&&(d||o.next(i?AD(i,a):a),o.complete())}))}});return t?r.pipe(Jm(t)):r}class nH{}class Eo{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Eo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Eo;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Eo?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class iH{encodeKey(t){return hx(t)}encodeValue(t){return hx(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const oH=/%(\d[a-f0-9])/gi,sH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hx(n){return encodeURIComponent(n).replace(oH,(t,e)=>sH[e]??t)}function kd(n){return`${n}`}class Co{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new iH,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rH(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(kd):[kd(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Co({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(kd(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(kd(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class aH{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function fx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function px(n){return typeof Blob<"u"&&n instanceof Blob}function mx(n){return typeof FormData<"u"&&n instanceof FormData}class Kl{constructor(t,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function lH(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Eo),this.context||(this.context=new aH),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Co,this.urlWithParams=e}serializeBody(){return null===this.body?null:fx(this.body)||px(this.body)||mx(this.body)||function cH(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Co?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mx(this.body)?null:px(this.body)?this.body.type||null:fx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Co?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,d=t.params||this.params;const p=t.context??this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((g,E)=>g.set(E,t.setHeaders[E]),c)),t.setParams&&(d=Object.keys(t.setParams).reduce((g,E)=>g.set(E,t.setParams[E]),d)),new Kl(e,i,o,{params:d,headers:c,context:p,reportProgress:a,responseType:r,withCredentials:s})}}var Pn=(()=>((Pn=Pn||{})[Pn.Sent=0]="Sent",Pn[Pn.UploadProgress=1]="UploadProgress",Pn[Pn.ResponseHeader=2]="ResponseHeader",Pn[Pn.DownloadProgress=3]="DownloadProgress",Pn[Pn.Response=4]="Response",Pn[Pn.User=5]="User",Pn))();class jg extends class uH{constructor(t,e=200,i="OK"){this.headers=t.headers||new Eo,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=Pn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new jg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function zg(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let _x=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Kl)o=e;else{let c,d;c=r.headers instanceof Eo?r.headers:new Eo(r.headers),r.params&&(d=r.params instanceof Co?r.params:new Co({fromObject:r.params})),o=new Kl(e,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Pe(o).pipe(yo(c=>this.handler.handle(c)));if(e instanceof Kl||"events"===r.observe)return s;const a=s.pipe(un(c=>c instanceof jg));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe($(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Co).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,zg(r,i))}post(e,i,r={}){return this.request("POST",e,zg(r,i))}put(e,i,r={}){return this.request("PUT",e,zg(r,i))}}return n.\u0275fac=function(e){return new(e||n)(se(nH))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const hH=["*"];let Id;function Zl(n){return function fH(){if(void 0===Id&&(Id=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Id=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Id}()?.createHTML(n)||n}function yx(n){return Error(`Unable to find icon with the name "${n}"`)}function vx(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function bx(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class ss{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let Ad=(()=>{class n{constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new ss(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){const s=this._sanitizer.sanitize(kt.HTML,r);if(!s)throw bx(r);const a=Zl(s);return this._addSvgIconConfig(e,i,new ss("",a,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new ss(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const o=this._sanitizer.sanitize(kt.HTML,i);if(!o)throw bx(i);const s=Zl(o);return this._addSvgIconSetConfig(e,new ss("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(kt.RESOURCE_URL,e);if(!i)throw vx(e);const r=this._cachedIconsByUrl.get(i);return r?Pe(Rd(r)):this._loadSvgIconFromConfig(new ss(e,null)).pipe(dn(o=>this._cachedIconsByUrl.set(i,o)),$(o=>Rd(o)))}getNamedSvgIcon(e,i=""){const r=wx(i,e);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(e,s):la(yx(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Pe(Rd(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe($(i=>Rd(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?Pe(r):dx(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Wr(a=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(kt.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),Pe(null)})))).pipe($(()=>{const s=this._extractIconWithNameFromAnySet(e,i);if(!s)throw yx(e);return s}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(dn(i=>e.svgText=i),$(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Pe(null):this._fetchIcon(e).pipe(dn(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const o=e.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(Zl("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(Zl("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw function pH(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(kt.RESOURCE_URL,i);if(!s)throw vx(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe($(d=>Zl(d)),Ku(()=>this._inProgressUrlFetches.delete(s)),vh());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(wx(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,e);if(o)return gH(o)?new ss(o.url,null,o.options):new ss(o,null)}}}return n.\u0275fac=function(e){return new(e||n)(se(_x,8),se(Sm),se(et,8),se(Nr))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rd(n){return n.cloneNode(!0)}function wx(n,t){return n+":"+t}function gH(n){return!(!n.url||!n.options)}const _H=wo(class{constructor(n){this._elementRef=n}}),yH=new ve("MAT_ICON_DEFAULT_OPTIONS"),vH=new ve("mat-icon-location",{providedIn:"root",factory:function bH(){const n=Vt(et),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),Ex=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],wH=Ex.map(n=>`[${n}]`).join(", "),EH=/^url\(['"]?#(.*?)['"]?\)$/;let Od=(()=>{class n extends _H{constructor(e,i,r,o,s,a){super(e),this._iconRegistry=i,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=k.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Xt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(wH),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)Ex.forEach(s=>{const a=i[o],c=a.getAttribute(s),d=c?c.match(EH):null;if(d){let p=r.get(a);p||(p=[],r.set(a,p)),p.push({name:s,value:d[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(jn(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Ad),gr("aria-hidden"),V(vH),V(Nr),V(yH,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(Ct("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Yt("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ze],ngContentSelectors:hH,decls:1,vars:0,template:function(e,i){1&e&&(tr(),Vn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),Cx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[qt,qt]}),n})();const CH=["addListener","removeListener"],DH=["addEventListener","removeEventListener"],SH=["on","off"];function Ql(n,t,e,i){if(D(e)&&(i=e,e=void 0),i)return Ql(n,t,e).pipe(Jm(i));const[r,o]=function TH(n){return D(n.addEventListener)&&D(n.removeEventListener)}(n)?DH.map(s=>a=>n[s](t,a,e)):function xH(n){return D(n.addListener)&&D(n.removeListener)}(n)?CH.map(Dx(n,t)):function MH(n){return D(n.on)&&D(n.off)}(n)?SH.map(Dx(n,t)):[];if(!r&&_h(n))return vn(s=>Ql(s,t,e))(ni(n));if(!r)throw new TypeError("Invalid event target");return new Qe(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function Dx(n,t){return e=>i=>n[e](t,i)}const kH=["primaryValueBar"],IH=wo(class{constructor(n){this._elementRef=n}},"primary"),AH=new ve("mat-progress-bar-location",{providedIn:"root",factory:function RH(){const n=Vt(et),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),OH=new ve("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let PH=0,FH=(()=>{class n extends IH{constructor(e,i,r,o,s,a){super(e),this._ngZone=i,this._animationMode=r,this._changeDetectorRef=a,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new Ke,this._animationEndSubscription=k.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+PH++;const c=o?o.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${c}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===r,s&&(s.color&&(this.color=this.defaultColor=s.color),this.mode=s.mode||this.mode)}get value(){return this._value}set value(e){this._value=Sx($n(e)||0),this._changeDetectorRef?.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(e){this._bufferValue=Sx(e||0),this._changeDetectorRef?.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=Ql(e,"transitionend").pipe(un(i=>i.target===e)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Ze),V(Fi,8),V(AH,8),V(OH,8),V(Rn))},n.\u0275cmp=Wt({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(e,i){if(1&e&&An(kH,5),2&e){let r;Pt(r=Ft())&&(i._primaryValueBar=r.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,i){2&e&&(Ct("aria-valuenow","indeterminate"===i.mode||"query"===i.mode?null:i.value)("mode",i.mode),Yt("_mat-animation-noopable",i._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[ze],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,i){1&e&&(Ie(0,"div",0),Fo(),Ie(1,"svg",1)(2,"defs")(3,"pattern",2),ct(4,"circle",3),Oe()(),ct(5,"rect",4),Oe(),function $h(){!function jk(){Je.lFrame.currentNamespace=null}()}(),ct(6,"div",5)(7,"div",6,7)(9,"div",8),Oe()),2&e&&(Le(3),Xe("id",i.progressbarId),Le(2),Ct("fill",i._rectangleFillValue),Le(1),Xe("ngStyle",i._bufferTransform()),Le(1),Xe("ngStyle",i._primaryTransform()))},dependencies:[pm],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}.mat-progress-bar._mat-animation-noopable{transition:none !important;animation:none !important}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}'],encapsulation:2,changeDetection:0}),n})();function Sx(n,t=0,e=100){return Math.max(t,Math.min(e,n))}let NH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[po,qt,qt]}),n})();const LH=["mat-button",""],BH=["*"],VH=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],HH=wo(Yl(xd(class{constructor(n){this._elementRef=n}})));let Gg,$g=(()=>{class n extends HH{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of VH)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(rs),V(Fi,8))},n.\u0275cmp=Wt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&An(va,5),2&e){let r;Pt(r=Ft())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(Ct("disabled",i.disabled||null),Yt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ze],attrs:LH,ngContentSelectors:BH,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(tr(),Ie(0,"span",0),Vn(1),Oe(),ct(2,"span",1)(3,"span",2)),2&e&&(Le(2),Yt("mat-button-ripple-round",i.isRoundButton||i.isIconButton),Xe("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[va],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),xx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[Td,qt,qt]}),n})(),jH=1;const Pd={};function Mx(n){return n in Pd&&(delete Pd[n],!0)}const zH={setImmediate(n){const t=jH++;return Pd[t]=!0,Gg||(Gg=Promise.resolve()),Gg.then(()=>Mx(t)&&n()),t},clearImmediate(n){Mx(n)}},{setImmediate:$H,clearImmediate:GH}=zH,Fd={setImmediate(...n){const{delegate:t}=Fd;return(t?.setImmediate||$H)(...n)},clearImmediate(n){const{delegate:t}=Fd;return(t?.clearImmediate||GH)(n)},delegate:void 0},qg=new class WH extends Om{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class qH extends Am{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Fd.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(Fd.clearImmediate(e),t._scheduled=void 0)}});class Tx{}const Zr="*";function Jl(n,t){return{type:7,name:n,definitions:t,options:{}}}function ba(n,t=null){return{type:4,styles:t,timings:n}}function kx(n,t=null){return{type:2,steps:n,options:t}}function vi(n){return{type:6,styles:n,offset:null}}function as(n,t,e){return{type:0,name:n,styles:t,options:e}}function wa(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Ix(n){Promise.resolve().then(n)}class ec{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ix(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Ax{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const o=this.players.length;0==o?Ix(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Yg{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class XH extends Yg{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class Xg extends Yg{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class KH extends Yg{constructor(t){super(),this.element=t instanceof lt?t.nativeElement:t}}class Rx{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof XH?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Xg?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof KH?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ZH extends Rx{constructor(t,e,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Zn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let QH=(()=>{class n extends Rx{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ke,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s=i.createComponent(o,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(V(Bo),V(In),V(et))},n.\u0275dir=ke({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ze]}),n})(),Ox=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})();const tc={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=tc;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(o=>{e=void 0,n(o)});return new k(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=tc;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=tc;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Px=new class e4 extends Om{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class JH extends Am{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=tc.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(tc.cancelAnimationFrame(e),t._scheduled=void 0)}});function Fx(n){return!!n&&(n instanceof Qe||D(n.lift)&&D(n.subscribe))}function Kg(n,t=Ml){return function t4(n){return ce((t,e)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const d=r;r=null,e.next(d)}s&&e.complete()},c=()=>{o=null,s&&e.complete()};t.subscribe(ee(e,d=>{i=!0,r=d,o||ni(n(d)).subscribe(o=ee(e,a,c))},()=>{s=!0,(!i||!o||o.closed)&&e.complete()}))})}(()=>Pm(n,t))}class r4 extends I{constructor(t=1/0,e=1/0,i=Rm){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const s=e.now();let a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}}class l4 extends class s4{}{constructor(t){super(),this._data=t}connect(){return Fx(this._data)?this._data:Pe(this._data)}disconnect(){}}class c4{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,i,r,o){t.forEachOperation((s,a,c)=>{let d,p;null==s.previousIndex?(d=this._insertView(()=>i(s,a,c),c,e,r(s)),p=d?1:0):null==c?(this._detachAndCacheView(a,e),p=3):(d=this._moveView(a,c,e,r(s)),p=2),o&&o({context:d?.context,operation:p,record:s})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,i,r){const o=this._insertViewFromCache(e,i);if(o)return void(o.context.$implicit=r);const s=t();return i.createEmbeddedView(s.templateRef,s.context,s.index)}_detachAndCacheView(t,e){const i=e.detach(t);this._maybeCacheView(i,e)}_moveView(t,e,i,r){const o=i.get(t);return i.move(o,e),o.context.$implicit=r,o}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const i=e.indexOf(t);-1===i?t.destroy():e.remove(i)}}_insertViewFromCache(t,e){const i=this._viewCache.pop();return i&&e.insert(i,t),i||null}}let Nx=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lx=new ve("_ViewRepeater"),u4=["contentWrapper"],d4=["*"],Bx=new ve("VIRTUAL_SCROLL_STRATEGY");class h4{constructor(t,e,i){this._scrolledIndexChange=new I,this.scrolledIndexChange=this._scrolledIndexChange.pipe(Ug()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,i){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},i=this._viewport.getViewportSize(),r=this._viewport.getDataLength();let o=this._viewport.measureScrollOffset(),s=this._itemSize>0?o/this._itemSize:0;if(e.end>r){const c=Math.ceil(i/this._itemSize),d=Math.max(0,Math.min(s,r-c));s!=d&&(s=d,o=d*this._itemSize,e.start=Math.floor(s)),e.end=Math.max(0,Math.min(r,e.start+c))}const a=o-e.start*this._itemSize;if(a<this._minBufferPx&&0!=e.start){const c=Math.ceil((this._maxBufferPx-a)/this._itemSize);e.start=Math.max(0,e.start-c),e.end=Math.min(r,Math.ceil(s+(i+this._minBufferPx)/this._itemSize))}else{const c=e.end*this._itemSize-(o+i);if(c<this._minBufferPx&&e.end!=r){const d=Math.ceil((this._maxBufferPx-c)/this._itemSize);d>0&&(e.end=Math.min(r,e.end+d),e.start=Math.max(0,Math.floor(s-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(s))}}function f4(n){return n._scrollStrategy}let p4=(()=>{class n{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new h4(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=$n(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=$n(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=$n(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ke({type:n,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[ht([{provide:Bx,useFactory:f4,deps:[Et(()=>n)]}]),kn]}),n})(),Nd=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new I,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Qe(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Kg(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Pe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(un(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=_n(i),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ql(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(se(Ze),se(yi),se(et,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ux=(()=>{class n{constructor(e,i,r,o){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=o,this._destroyed=new I,this._elementScrolled=new Qe(s=>this.ngZone.runOutsideAngular(()=>Ql(this.elementRef.nativeElement,"scroll").pipe(ji(this._destroyed)).subscribe(s)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=ql()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==ql()?e.left=e.right:1==ql()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;GS()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",r="right",o=this.elementRef.nativeElement;if("top"==e)return o.scrollTop;if("bottom"==e)return o.scrollHeight-o.clientHeight-o.scrollTop;const s=this.dir&&"rtl"==this.dir.value;return"start"==e?e=s?r:i:"end"==e&&(e=s?i:r),s&&2==ql()?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&1==ql()?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Nd),V(Ze),V(os,8))},n.\u0275dir=ke({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),nc=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new I,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Kg(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(se(yi),se(Ze),se(et,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _4=new ve("VIRTUAL_SCROLLABLE");let Vx=(()=>{class n extends Ux{constructor(e,i,r,o){super(e,i,r,o)}measureViewportSize(e){const i=this.elementRef.nativeElement;return"horizontal"===e?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Nd),V(Ze),V(os,8))},n.\u0275dir=ke({type:n,features:[ze]}),n})();const v4=typeof requestAnimationFrame<"u"?Px:qg;let Hx=(()=>{class n extends Vx{constructor(e,i,r,o,s,a,c,d){super(e,a,r,s),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=o,this.scrollable=d,this._platform=Vt(yi),this._detachedSubject=new I,this._renderedRangeSubject=new I,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Qe(p=>this._scrollStrategy.scrolledIndexChange.subscribe(g=>Promise.resolve().then(()=>this.ngZone.run(()=>p.next(g))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=k.EMPTY,this._viewportChanges=c.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=Xt(e)}ngOnInit(){!this._platform.isBrowser||(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(cr(null),Kg(0,v4)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(ji(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function y4(n,t){return n.start==t.start&&n.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&"to-start"===i?0:e;const o="horizontal"==this.orientation,s=o?"X":"Y";let c=`translate${s}(${Number((o&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===i&&(c+=` translate${s}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=c&&(this._renderedContentTransform=c,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i;const r="left",o="right",s="rtl"==this.dir?.value;i="start"==e?s?o:r:"end"==e?s?r:o:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Rn),V(Ze),V(Bx,8),V(os,8),V(Nd),V(nc),V(_4,8))},n.\u0275cmp=Wt({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,i){if(1&e&&An(u4,7),2&e){let r;Pt(r=Ft())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,i){2&e&&Yt("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[ht([{provide:Ux,useFactory:(t,e)=>t||e,deps:[Vx,n]}]),ze],ngContentSelectors:d4,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,i){1&e&&(tr(),Ie(0,"div",0,1),Vn(2),Oe(),ct(3,"div",2)),2&e&&(Le(3),Hr("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})();function jx(n,t,e){if(!e.getBoundingClientRect)return 0;const r=e.getBoundingClientRect();return"horizontal"===n?"start"===t?r.left:r.right:"start"===t?r.top:r.bottom}let b4=(()=>{class n{constructor(e,i,r,o,s,a){this._viewContainerRef=e,this._template=i,this._differs=r,this._viewRepeater=o,this._viewport=s,this.viewChange=new I,this._dataSourceChanges=new I,this.dataStream=this._dataSourceChanges.pipe(cr(null),function n4(){return ce((n,t)=>{let e,i=!1;n.subscribe(ee(t,r=>{const o=e;e=r,i&&t.next([o,r]),i=!0}))})}(),li(([c,d])=>this._changeDataSource(c,d)),function o4(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,vh({connector:()=>new r4(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new I,this.dataStream.subscribe(c=>{this._data=c,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(ji(this._destroyed)).subscribe(c=>{this._renderedRange=c,this.viewChange.observers.length&&a.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,function a4(n){return n&&"function"==typeof n.connect&&!(n instanceof ng)}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new l4(Fx(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(i,r)=>e(i+(this._renderedRange?this._renderedRange.start:0),r):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=$n(e)}measureRangeSize(e,i){if(e.start>=e.end)return 0;const r=e.start-this._renderedRange.start,o=e.end-e.start;let s,a;for(let c=0;c<o;c++){const d=this._viewContainerRef.get(c+r);if(d&&d.rootNodes.length){s=a=d.rootNodes[0];break}}for(let c=o-1;c>-1;c--){const d=this._viewContainerRef.get(c+r);if(d&&d.rootNodes.length){a=d.rootNodes[d.rootNodes.length-1];break}}return s&&a?jx(i,"end",a)-jx(i,"start",s):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,i):i)),this._needsUpdate=!0)}_changeDataSource(e,i){return e&&e.disconnect(this),this._needsUpdate=!0,i?i.connect(this):Pe()}_updateContext(){const e=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const r=this._viewContainerRef.get(i);r.context.index=this._renderedRange.start+i,r.context.count=e,this._updateComputedContextProperties(r.context),r.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(o,s,a)=>this._getEmbeddedViewArgs(o,a),o=>o.item),e.forEachIdentityChange(o=>{this._viewContainerRef.get(o.currentIndex).context.$implicit=o.item});const i=this._data.length;let r=this._viewContainerRef.length;for(;r--;){const o=this._viewContainerRef.get(r);o.context.index=this._renderedRange.start+r,o.context.count=i,this._updateComputedContextProperties(o.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,i){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}}return n.\u0275fac=function(e){return new(e||n)(V(In),V(Oi),V(gl),V(Lx),V(Hx,4),V(Ze))},n.\u0275dir=ke({type:n,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[ht([{provide:Lx,useClass:c4}])]}),n})(),Ld=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})(),Zg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[Wl,Ld,Wl,Ld]}),n})();const zx=GS();class w4{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=gn(-this._previousScrollPosition.left),t.style.top=gn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),zx&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zx&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class E4{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $x{enable(){}disable(){}attach(){}}function Qg(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function Gx(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class C4{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Qg(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let D4=(()=>{class n{constructor(e,i,r,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new $x,this.close=s=>new E4(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new w4(this._viewportRuler,this._document),this.reposition=s=>new C4(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(se(Nd),se(nc),se(Ze),se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qx{constructor(t){if(this.scrollStrategy=new $x,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class S4{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Wx=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x4=(()=>{class n extends Wx{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(se(et),se(Ze,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),M4=(()=>{class n extends Wx{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ur(o)},this._clickListener=o=>{const s=ur(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){const p=c[d];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(s)||p.overlayElement.contains(a))break;const g=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>g.next(o)):g.next(o)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(se(et),se(yi),se(Ze,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yx=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Fg()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(e),Fg()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(se(et),se(yi))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class T4{constructor(t,e,i,r,o,s,a,c,d,p=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=p,this._backdropElement=null,this._backdropClick=new I,this._attachments=new I,this._detachments=new I,this._locationChanges=k.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new I,this._outsidePointerEvents=new I,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(jn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=gn(this._config.width),t.height=gn(this._config.height),t.minWidth=gn(this._config.minWidth),t.minHeight=gn(this._config.minHeight),t.maxWidth=gn(this._config.maxWidth),t.maxHeight=gn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=Ed(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(ji(to(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Xx="cdk-overlay-connected-position-bounding-box",k4=/([A-Za-z%]+)$/;class I4{constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new I,this._resizeSubscription=k.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Xx),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),d=this._getOverlayPoint(c,e,a),p=this._getOverlayFit(d,e,i,a);if(p.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(p,d,i)?o.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!s||s.overlayFit.visibleArea<p.visibleArea)&&(s={overlayFit:p,overlayPoint:d,originPoint:c,position:a,overlayRect:e})}if(o.length){let a=null,c=-1;for(const d of o){const p=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);p>c&&(c=p,a=d)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ls(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Xx),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,o;if("center"==i.originX)r=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==i.originX?s:a}return e.left<0&&(r-=e.left),o="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r,o;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){const o=Zx(e);let{x:s,y:a}=t,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(s+=c),d&&(a+=d);let E=0-a,S=a+o.height-i.height,R=this._subtractOverflows(o.width,0-s,s+o.width-i.width),G=this._subtractOverflows(o.height,E,S),te=R*G;return{visibleArea:te,isCompletelyWithinViewport:o.width*o.height===te,fitsInViewportVertically:G===o.height,fitsInViewportHorizontally:R==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,o=i.right-e.x,s=Kx(this._overlayRef.getConfig().minHeight),a=Kx(this._overlayRef.getConfig().minWidth),d=t.fitsInViewportHorizontally||null!=a&&a<=o;return(t.fitsInViewportVertically||null!=s&&s<=r)&&d}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Zx(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),c=Math.max(o.top-i.top-t.y,0),d=Math.max(o.left-i.left-t.x,0);let p=0,g=0;return p=r.width<=o.width?d||-s:t.x<this._viewportMargin?o.left-i.left-t.x:0,g=r.height<=o.height?c||-a:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:p,y:g},{x:t.x+p,y:t.y+g}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new S4(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let o,s,a,p,g,E;if("top"===e.overlayY)s=t.y,o=i.height-s+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const S=Math.min(i.bottom-t.y+i.top,t.y),R=this._lastBoundingBoxSize.height;o=2*S,s=t.y-S,o>R&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-R/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)E=i.width-t.x+this._viewportMargin,p=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)g=t.x,p=i.right-t.x;else{const S=Math.min(i.right-t.x+i.left,t.x),R=this._lastBoundingBoxSize.width;p=2*S,g=t.x-S,p>R&&!this._isInitialRender&&!this._growAfterOpen&&(g=t.x-R/2)}return{top:s,left:g,bottom:a,right:E,width:p,height:o}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=gn(i.height),r.top=gn(i.top),r.bottom=gn(i.bottom),r.width=gn(i.width),r.left=gn(i.left),r.right=gn(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=gn(o)),s&&(r.maxWidth=gn(s))}this._lastBoundingBoxSize=i,ls(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ls(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ls(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const p=this._viewportRuler.getViewportScrollPosition();ls(i,this._getExactOverlayY(e,t,p)),ls(i,this._getExactOverlayX(e,t,p))}else i.position="static";let a="",c=this._getOffset(e,"x"),d=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=gn(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=gn(s.maxWidth):o&&(i.maxWidth="")),ls(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=gn(o.y),r}_getExactOverlayX(t,e,i){let s,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=gn(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Gx(t,i),isOriginOutsideView:Qg(t,i),isOverlayClipped:Gx(e,i),isOverlayOutsideView:Qg(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ed(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof lt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function ls(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Kx(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(k4);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Zx(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Qx="cdk-global-overlay-wrapper";class A4{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Qx),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),d=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),p=this._xPosition,g=this._xOffset,E="rtl"===this._overlayRef.getConfig().direction;let S="",R="",G="";c?G="flex-start":"center"===p?(G="center",E?R=g:S=g):E?"left"===p||"end"===p?(G="flex-end",S=g):("right"===p||"start"===p)&&(G="flex-start",R=g):"left"===p||"start"===p?(G="flex-start",S=g):("right"===p||"end"===p)&&(G="flex-end",R=g),t.position=this._cssPosition,t.marginLeft=c?"0":S,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":R,e.justifyContent=G,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Qx),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let R4=(()=>{class n{constructor(e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new A4}flexibleConnectedTo(e){return new I4(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(se(nc),se(et),se(yi),se(Yx))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O4=0,Bd=(()=>{class n{constructor(e,i,r,o,s,a,c,d,p,g,E,S){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=d,this._directionality=p,this._location=g,this._outsideClickDispatcher=E,this._animationsModuleType=S}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new qx(e);return s.direction=s.direction||this._directionality.value,new T4(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+O4++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ra)),new ZH(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(se(D4),se(Yx),se(Bo),se(R4),se(x4),se(Zn),se(Ze),se(et),se(os),se(xu),se(M4),se(Fi,8))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();const N4={provide:new ve("cdk-connected-overlay-scroll-strategy"),deps:[Bd],useFactory:function F4(n){return()=>n.scrollStrategies.reposition()}};let L4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[Bd,N4],imports:[Wl,Ox,Zg,Zg]}),n})();const B4=["mat-menu-item",""];function U4(n,t){1&n&&(Fo(),Ie(0,"svg",2),ct(1,"polygon",3),Oe())}const Jx=["*"];function V4(n,t){if(1&n){const e=yp();Ie(0,"div",0),Dt("keydown",function(r){return Es(e),Cs(Un()._handleKeydown(r))})("click",function(){return Es(e),Cs(Un().closed.emit("click"))})("@transformMenu.start",function(r){return Es(e),Cs(Un()._onAnimationStart(r))})("@transformMenu.done",function(r){return Es(e),Cs(Un()._onAnimationDone(r))}),Ie(1,"div",1),Vn(2),Oe()()}if(2&n){const e=Un();Xe("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),Ct("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Ud={transformMenu:Jl("transformMenu",[as("void",vi({opacity:0,transform:"scale(0.8)"})),wa("void => enter",ba("120ms cubic-bezier(0, 0, 0.2, 1)",vi({opacity:1,transform:"scale(1)"}))),wa("* => void",ba("100ms 25ms linear",vi({opacity:0})))]),fadeInItems:Jl("fadeInItems",[as("showing",vi({opacity:1})),wa("void => *",[vi({opacity:0}),ba("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},H4=new ve("MatMenuContent"),Jg=new ve("MAT_MENU_PANEL"),j4=xd(Yl(class{}));let ic=(()=>{class n extends j4{constructor(e,i,r,o,s){super(),this._elementRef=e,this._document=i,this._focusMonitor=r,this._parentMenu=o,this._changeDetectorRef=s,this.role="menuitem",this._hovered=new I,this._focused=new I,this._highlighted=!1,this._triggersSubmenu=!1,o?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(et),V(rs),V(Jg,8),V(Rn))},n.\u0275cmp=Wt({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,i){1&e&&Dt("click",function(o){return i._checkDisabled(o)})("mouseenter",function(){return i._handleMouseEnter()}),2&e&&(Ct("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),Yt("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ze],attrs:B4,ngContentSelectors:Jx,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,i){1&e&&(tr(),Vn(0),ct(1,"div",0),xn(2,U4,2,0,"svg",1)),2&e&&(Le(1),Xe("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),Le(1),Xe("ngIf",i._triggersSubmenu))},dependencies:[Wo,va],encapsulation:2,changeDetection:0}),n})();const eM=new ve("mat-menu-default-options",{providedIn:"root",factory:function z4(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let $4=0,rc=(()=>{class n{constructor(e,i,r,o){this._elementRef=e,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=o,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Go,this._tabSubscription=k.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new I,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Ke,this.close=this.closed,this.panelId="mat-menu-panel-"+$4++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Xt(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Xt(e)}set panelClass(e){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new tx(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(cr(this._directDescendantItems),li(e=>to(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=e.toArray(),o=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[o]&&!r[o].disabled?i.setActiveItem(o):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(cr(this._directDescendantItems),li(i=>to(...i.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,r=this._keyManager;switch(i){case 27:wd(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._ngZone.onStable.pipe(jn(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const i=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${i}`,o=Object.keys(this._classList).find(s=>s.startsWith(this._elevationPrefix));(!o||o===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===e,r["mat-menu-after"]="after"===e,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(cr(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Ze),V(eM),V(Rn))},n.\u0275dir=ke({type:n,contentQueries:function(e,i,r){if(1&e&&(Pi(r,H4,5),Pi(r,ic,5),Pi(r,ic,4)),2&e){let o;Pt(o=Ft())&&(i.lazyContent=o.first),Pt(o=Ft())&&(i._allItems=o),Pt(o=Ft())&&(i.items=o)}},viewQuery:function(e,i){if(1&e&&An(Oi,5),2&e){let r;Pt(r=Ft())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),tM=(()=>{class n extends rc{constructor(e,i,r,o){super(e,i,r,o),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(Ze),V(eM),V(Rn))},n.\u0275cmp=Wt({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,i){2&e&&Ct("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[ht([{provide:Jg,useExisting:n}]),ze],ngContentSelectors:Jx,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,i){1&e&&(tr(),xn(0,V4,3,6,"ng-template"))},dependencies:[gC],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Ud.transformMenu,Ud.fadeInItems]},changeDetection:0}),n})();const nM=new ve("mat-menu-scroll-strategy"),q4={provide:nM,deps:[Bd],useFactory:function G4(n){return()=>n.scrollStrategies.reposition()}},iM=Kr({passive:!0});let W4=(()=>{class n{constructor(e,i,r,o,s,a,c,d,p){this._overlay=e,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=c,this._focusMonitor=d,this._ngZone=p,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=k.EMPTY,this._hoverSubscription=k.EMPTY,this._menuCloseSubscription=k.EMPTY,this._handleTouchStart=g=>{Dd(g)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Ke,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ke,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=s instanceof rc?s:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,iM),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,iM),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const i=this._createOverlay(e),r=i.getConfig(),o=r.positionStrategy;this._setPosition(e,o),r.hasBackdrop=e.hasBackdrop??!this.triggersSubmenu(),i.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof rc&&(e._startAnimation(),e._directDescendantItems.changes.pipe(ji(e.close)).subscribe(()=>{o.withLockedPosition(!1).reapplyLastPosition(),o.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof rc?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(un(r=>"void"===r.toState),jn(1),ji(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let i=0,r=e.parentMenu;for(;r;)i++,r=r.parentMenu;e.setElevation(i)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_createOverlay(e){if(!this._overlayRef){const i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new qx({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(r=>{const o="start"===r.connectionPair.overlayX?"after":"before",s="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(o,s)):e.setPositionClasses(o,s)})}_setPosition(e,i){let[r,o]="before"===e.xPosition?["end","start"]:["start","end"],[s,a]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[c,d]=[s,a],[p,g]=[r,o],E=0;if(this.triggersSubmenu()){if(g=r="before"===e.xPosition?"start":"end",o=p="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const S=this._parentMaterialMenu.items.first;this._parentInnerPadding=S?S._getHostElement().offsetTop:0}E="bottom"===s?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(c="top"===s?"bottom":"top",d="top"===a?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:p,overlayY:s,offsetY:E},{originX:o,originY:c,overlayX:g,overlayY:s,offsetY:E},{originX:r,originY:d,overlayX:p,overlayY:a,offsetY:-E},{originX:o,originY:d,overlayX:g,overlayY:a,offsetY:-E}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return to(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:Pe(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(un(s=>s!==this._menuItemInstance),un(()=>this._menuOpen)):Pe(),i)}_handleMousedown(e){Cd(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(un(e=>e===this._menuItemInstance&&!e.disabled),$u(0,qg)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof rc&&this.menu._isAnimating?this.menu._animationDone.pipe(jn(1),$u(0,qg),ji(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Xg(e.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(V(Bd),V(lt),V(In),V(nM),V(Jg,8),V(ic,10),V(os,8),V(rs),V(Ze))},n.\u0275dir=ke({type:n,hostVars:3,hostBindings:function(e,i){1&e&&Dt("click",function(o){return i._handleClick(o)})("mousedown",function(o){return i._handleMousedown(o)})("keydown",function(o){return i._handleKeydown(o)}),2&e&&Ct("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),rM=(()=>{class n extends W4{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=ln(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[ze]}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[q4],imports:[po,qt,Td,L4,Ld,qt]}),n})(),Y4=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Xt(e)}get inset(){return this._inset}set inset(e){this._inset=Xt(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Wt({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,i){2&e&&(Ct("aria-orientation",i.vertical?"vertical":"horizontal"),Yt("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),X4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[qt,qt]}),n})();function K4(n,t){1&n&&ct(0,"mat-progress-bar",9)}let Z4=(()=>{class n{constructor(e,i,r,o,s){this._motionConnection=e,this._recordingService=i,this._progressTracker=r,this._preferences=o,this._router=s,this._disposer=new Yo}ngOnInit(){this._motionConnection.connect()}ngOnDestroy(){this._motionConnection.disconnect()}get connectionStateIcon(){return e_[this._motionConnection.state.type].icon}get connectionStateLabel(){return e_[this._motionConnection.state.type].label}get connectionMenuHeader(){return"error"==this._motionConnection.state.type?this.errorMessage:e_[this._motionConnection.state.type].label}get errorMessage(){return"error"!==this._motionConnection.state.type?"":"deviceNotFound"===this._motionConnection.state.detail?"Device not found":this._motionConnection.state.message??"Unknwon error"}selectDevice(){const e=window.location.toString(),i=e.indexOf("/motion.");window.location.replace(e.substring(0,i)+"/index.html")}get showProgress(){return this._progressTracker.isActive}get isConnected(){return"connected"==this._motionConnection.state.type}get isRecording(){return this._recordingService.isRecording}toggleRecording(){var e=this;return Fe(function*(){if(e._recordingService.isRecording){const i=e._recordingService.stopRecording(),r=yield e._progressTracker.trackPromise(i);e._router.navigate(["recording",{id:r}])}else if(e._preferences.useGestureScript){const i=e._recordingService.recordScript(e._preferences.gestureScript),r=yield e._progressTracker.trackPromise(i);e._router.navigate(["recording",{id:r}])}else e._recordingService.startRecording()})()}}return n.\u0275fac=function(e){return new(e||n)(V(go),V(Km),V(Qm),V(qu),V(Dn))},n.\u0275cmp=Wt({type:n,selectors:[["app-root"]],decls:19,vars:6,consts:[["color","primary"],[1,"header-spacer"],["mat-flat-button","",3,"disabled","click"],["mat-icon-button","",3,"matMenuTriggerFor"],["connectionMenu","matMenu"],[1,"status"],["mat-menu-item","",3,"click"],[1,"content","mat-app-background"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,i){if(1&e&&(Ie(0,"mat-toolbar",0)(1,"span"),Ot(2,"Motion"),Oe(),ct(3,"span",1),Ie(4,"button",2),Dt("click",function(){return i.toggleRecording()}),Ot(5),Oe(),Ie(6,"button",3)(7,"mat-icon"),Ot(8),Oe()(),Ie(9,"mat-menu",null,4)(11,"div",5),Ot(12),Oe(),ct(13,"mat-divider"),Ie(14,"button",6),Dt("click",function(){return i.selectDevice()}),Ot(15," Select device & process "),Oe()()(),Ie(16,"div",7),xn(17,K4,1,0,"mat-progress-bar",8),ct(18,"router-outlet"),Oe()),2&e){const r=Vr(10);Le(4),Xe("disabled",!i.isConnected),Le(1),Er(" ",i.isRecording?"Stop":"Run"," "),Le(1),Xe("matMenuTriggerFor",r),Le(2),uo(i.connectionStateIcon),Le(4),Er(" ",i.connectionMenuHeader," "),Le(5),Xe("ngIf",i.showProgress)}},dependencies:[Wo,eH,Od,FH,$g,tM,ic,rM,yg,Y4],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;align-content:stretch;align-items:stretch}.header-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{flex:0 0 64px}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.content[_ngcontent-%COMP%]{position:relative;display:flex;flex-grow:1;overflow:scroll;align-content:stretch}mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0}.status[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;outline:none;border:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}"]}),n})();const e_={disconnected:{label:"Disconnected",icon:"usb_off"},connecting:{label:"Connecting...",icon:"usb"},connected:{label:"Connected",icon:"usb"},error:{label:"Error",icon:"error_outline"},unauthorized:{label:"Unauthorized",icon:"warning_amber"}};function sM(n){return new de(3e3,!1)}function Rj(){return typeof window<"u"&&typeof window.document<"u"}function t_(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Do(n){switch(n.length){case 0:return new ec;case 1:return n[0];default:return new Ax(n)}}function aM(n,t,e,i,r=new Map,o=new Map){const s=[],a=[];let c=-1,d=null;if(i.forEach(p=>{const g=p.get("offset"),E=g==c,S=E&&d||new Map;p.forEach((R,G)=>{let te=G,le=R;if("offset"!==G)switch(te=t.normalizePropertyName(te,s),le){case"!":le=r.get(G);break;case Zr:le=o.get(G);break;default:le=t.normalizeStyleValue(G,te,le,s)}S.set(te,le)}),E||a.push(S),d=S,c=g}),s.length)throw function bj(n){return new de(3502,!1)}();return a}function n_(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&i_(e,"start",n)));break;case"done":n.onDone(()=>i(e&&i_(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&i_(e,"destroy",n)))}}function i_(n,t,e){const o=r_(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),s=n._data;return null!=s&&(o._data=s),o}function r_(n,t,e,i,r="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function bi(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function lM(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let o_=(n,t)=>!1,cM=(n,t,e)=>[],uM=null;function s_(n){const t=n.parentNode||n.host;return t===uM?null:t}(t_()||typeof Element<"u")&&(Rj()?(uM=(()=>document.documentElement)(),o_=(n,t)=>{for(;t;){if(t===n)return!0;t=s_(t)}return!1}):o_=(n,t)=>n.contains(t),cM=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let cs=null,dM=!1;const hM=o_,fM=cM;let pM=(()=>{class n{validateStyleProperty(e){return function Pj(n){cs||(cs=function Fj(){return typeof document<"u"?document.body:null}()||{},dM=!!cs.style&&"WebkitAppearance"in cs.style);let t=!0;return cs.style&&!function Oj(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in cs.style,!t&&dM&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in cs.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return hM(e,i)}getParentElement(e){return s_(e)}query(e,i,r){return fM(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,a=[],c){return new ec(r,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})(),a_=(()=>{class n{}return n.NOOP=new pM,n})();const l_="ng-enter",Vd="ng-leave",Hd="ng-trigger",jd=".ng-trigger",gM="ng-animating",c_=".ng-animating";function Qr(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:u_(parseFloat(t[1]),t[2])}function u_(n,t){return"s"===t?1e3*n:n}function zd(n,t,e){return n.hasOwnProperty("duration")?n:function Bj(n,t,e){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(sM()),{duration:0,delay:0,easing:""};r=u_(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(o=u_(parseFloat(c),a[4]));const d=a[5];d&&(s=d)}else r=n;if(!e){let a=!1,c=t.length;r<0&&(t.push(function Q4(){return new de(3100,!1)}()),a=!0),o<0&&(t.push(function J4(){return new de(3101,!1)}()),a=!0),a&&t.splice(c,0,sM())}return{duration:r,delay:o,easing:s}}(n,t,e)}function oc(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function _M(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function So(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function vM(n,t,e){return e?t+":"+e+";":""}function bM(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=vM(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=vM(0,jj(e),n.style[e]));n.setAttribute("style",t)}function xr(n,t,e){n.style&&(t.forEach((i,r)=>{const o=h_(r);e&&!e.has(r)&&e.set(r,n.style[o]),n.style[o]=i}),t_()&&bM(n))}function us(n,t){n.style&&(t.forEach((e,i)=>{const r=h_(i);n.style[r]=""}),t_()&&bM(n))}function sc(n){return Array.isArray(n)?1==n.length?n[0]:kx(n):n}const d_=new RegExp("{{\\s*(.+?)\\s*}}","g");function wM(n){let t=[];if("string"==typeof n){let e;for(;e=d_.exec(n);)t.push(e[1]);d_.lastIndex=0}return t}function ac(n,t,e){const i=n.toString(),r=i.replace(d_,(o,s)=>{let a=t[s];return null==a&&(e.push(function tj(n){return new de(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function $d(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Hj=/-+([a-z0-9])/g;function h_(n){return n.replace(Hj,(...t)=>t[1].toUpperCase())}function jj(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wi(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function nj(n){return new de(3004,!1)}()}}function EM(n,t){return window.getComputedStyle(n)[t]}function Yj(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Xj(n,t,e){if(":"==n[0]){const c=function Kj(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function gj(n){return new de(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof c)return void t.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function mj(n){return new de(3015,!1)}()),t;const r=i[1],o=i[2],s=i[3];t.push(CM(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&t.push(CM(s,r))}(i,e,t)):e.push(n),e}const Yd=new Set(["true","1"]),Xd=new Set(["false","0"]);function CM(n,t){const e=Yd.has(n)||Xd.has(n),i=Yd.has(t)||Xd.has(t);return(r,o)=>{let s="*"==n||n==r,a="*"==t||t==o;return!s&&e&&"boolean"==typeof r&&(s=r?Yd.has(n):Xd.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?Yd.has(t):Xd.has(t)),s&&a}}const Zj=new RegExp("s*:selfs*,?","g");function f_(n,t,e,i){return new Qj(n).build(t,e,i)}class Qj{constructor(t){this._driver=t}build(t,e,i){const r=new tz(e);return this._resetContextStyleTimingState(r),wi(this,sc(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function rj(){return new de(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(p=>{c.name=p,o.push(this.visitState(c,e))}),c.name=d}else if(1==a.type){const c=this.visitTransition(a,e);i+=c.queryCount,r+=c.depCount,s.push(c)}else e.errors.push(function oj(){return new de(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{wM(c).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&($d(o.values()),e.errors.push(function sj(n,t){return new de(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=wi(this,sc(t.animation),e);return{type:1,matchers:Yj(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:ds(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>wi(this,i,e)),options:ds(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const o=t.steps.map(s=>{e.currentTime=i;const a=wi(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:o,options:ds(t.options)}}visitAnimate(t,e){const i=function iz(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return p_(zd(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=p_(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=zd(e,t);return p_(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:vi({});if(5==o.type)r=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const d={};i.easing&&(d.easing=i.easing),s=vi(d)}e.currentTime+=i.duration+i.delay;const c=this.visitStyle(s,e);c.isEmptyStep=a,r=c}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Zr?i.push(a):e.errors.push(new de(3002,!1)):i.push(_M(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let c of a.values())if(c.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{const d=e.collectedStyles.get(e.currentQuerySelector),p=d.get(c);let g=!0;p&&(o!=r&&o>=p.startTime&&r<=p.endTime&&(e.errors.push(function lj(n,t,e,i,r){return new de(3010,!1)}()),g=!1),o=p.startTime),g&&d.set(c,{startTime:o,endTime:r}),e.options&&function Vj(n,t,e){const i=t.params||{},r=wM(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(function ej(n){return new de(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function cj(){return new de(3011,!1)}()),i;let o=0;const s=[];let a=!1,c=!1,d=0;const p=t.steps.map(le=>{const _e=this._makeStyleAst(le,e);let oe=null!=_e.offset?_e.offset:function nz(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(_e.styles),Se=0;return null!=oe&&(o++,Se=_e.offset=oe),c=c||Se<0||Se>1,a=a||Se<d,d=Se,s.push(Se),_e});c&&e.errors.push(function uj(){return new de(3012,!1)}()),a&&e.errors.push(function dj(){return new de(3200,!1)}());const g=t.steps.length;let E=0;o>0&&o<g?e.errors.push(function hj(){return new de(3202,!1)}()):0==o&&(E=1/(g-1));const S=g-1,R=e.currentTime,G=e.currentAnimateTimings,te=G.duration;return p.forEach((le,_e)=>{const oe=E>0?_e==S?1:E*_e:s[_e],Se=oe*te;e.currentTime=R+G.delay+Se,G.duration=Se,this._validateStyleAst(le,e),le.offset=oe,i.styles.push(le)}),i}visitReference(t,e){return{type:8,animation:wi(this,sc(t.animation),e),options:ds(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ds(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ds(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function Jj(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Zj,"")),n=n.replace(/@\*/g,jd).replace(/@\w+/g,e=>jd+"-"+e.slice(1)).replace(/:animating/g,c_),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,bi(e.collectedStyles,e.currentQuerySelector,new Map);const a=wi(this,sc(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:ds(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function fj(){return new de(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:zd(t.timings,e.errors,!0);return{type:12,animation:wi(this,sc(t.animation),e),timings:i,options:null}}}class tz{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ds(n){return n?(n=oc(n)).params&&(n.params=function ez(n){return n?oc(n):null}(n.params)):n={},n}function p_(n,t,e){return{duration:n,delay:t,easing:e}}function m_(n,t,e,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class Kd{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const sz=new RegExp(":enter","g"),lz=new RegExp(":leave","g");function g_(n,t,e,i,r,o=new Map,s=new Map,a,c,d=[]){return(new cz).buildKeyframes(n,t,e,i,r,o,s,a,c,d)}class cz{buildKeyframes(t,e,i,r,o,s,a,c,d,p=[]){d=d||new Kd;const g=new __(t,e,d,r,o,p,[]);g.options=c;const E=c.delay?Qr(c.delay):0;g.currentTimeline.delayNextStep(E),g.currentTimeline.setStyles([s],null,g.errors,c),wi(this,i,g);const S=g.timelines.filter(R=>R.containsAnimation());if(S.length&&a.size){let R;for(let G=S.length-1;G>=0;G--){const te=S[G];if(te.element===e){R=te;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([a],null,g.errors,c)}return S.length?S.map(R=>R.buildKeyframes()):[m_(e,[],[],[],0,E,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:Qr(ac(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime;const s=null!=i.duration?Qr(i.duration):null,a=null!=i.delay?Qr(i.delay):null;return 0!==s&&t.forEach(c=>{const d=e.appendInstructionToTimeline(c,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),wi(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Zd);const s=Qr(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>wi(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?Qr(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),wi(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return zd(e.params?ac(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,t.styles.forEach(c=>{a.forwardTime((c.offset||0)*o),a.setStyles(c.styles,c.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Qr(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Zd);let s=i;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let c=null;a.forEach((d,p)=>{e.currentQueryIndex=p;const g=e.createSubContext(t.options,d);o&&g.delayNextStep(o),d===e.element&&(c=g.currentTimeline),wi(this,t.animation,g),g.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,g.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let c=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const p=e.currentTimeline;c&&p.delayNextStep(c);const g=p.currentTime;wi(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-g+(r.startTime-i.currentTimeline.startTime)}}const Zd={};class __{constructor(t,e,i,r,o,s,a,c){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Qd(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Qr(i.duration)),null!=i.delay&&(r.delay=Qr(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=ac(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,o=new __(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Zd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new uz(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(sz,"."+this._enterClassName)).replace(lz,"."+this._leaveClassName);let d=this._driver.query(this.element,t,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!o&&0==a.length&&s.push(function pj(n){return new de(3014,!1)}()),a}}class Qd{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Qd(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Zr),this._currentKeyframe.set(e,Zr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},s=function dz(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)e.set(o,Zr)}else So(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,c]of s){const d=ac(c,o,i);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Zr),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const d=So(a,new Map,this._backFill);d.forEach((p,g)=>{"!"===p?t.add(g):p===Zr&&e.add(g)}),i||d.set("offset",c/this.duration),r.push(d)});const o=t.size?$d(t.values()):[],s=e.size?$d(e.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return m_(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class uz extends Qd{constructor(t,e,i,r,o,s,a=!1){super(t,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=i+e,a=e/s,c=So(t[0]);c.set("offset",0),o.push(c);const d=So(t[0]);d.set("offset",xM(a)),o.push(d);const p=t.length-1;for(let g=1;g<=p;g++){let E=So(t[g]);const S=E.get("offset");E.set("offset",xM((e+S*i)/s)),o.push(E)}i=s,e=0,r="",t=o}return m_(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function xM(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class y_{}const hz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class fz extends y_{normalizePropertyName(t,e){return h_(t)}normalizeStyleValue(t,e,i,r){let o="";const s=i.toString().trim();if(hz.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function ij(n,t){return new de(3005,!1)}())}return s+o}}function MM(n,t,e,i,r,o,s,a,c,d,p,g,E){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:p,totalTime:g,errors:E}}const v_={};class TM{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function pz(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,o,s,a,c,d,p){const g=[],E=this.ast.options&&this.ast.options.params||v_,R=this.buildStyles(i,a&&a.params||v_,g),G=c&&c.params||v_,te=this.buildStyles(r,G,g),le=new Set,_e=new Map,oe=new Map,Se="void"===r,ot={params:mz(G,E),delay:this.ast.options?.delay},yt=p?[]:g_(t,e,this.ast.animation,o,s,R,te,ot,d,g);let tn=0;if(yt.forEach(Di=>{tn=Math.max(Di.duration+Di.delay,tn)}),g.length)return MM(e,this._triggerName,i,r,Se,R,te,[],[],_e,oe,tn,g);yt.forEach(Di=>{const Si=Di.element,Sa=bi(_e,Si,new Set);Di.preStyleProps.forEach(dr=>Sa.add(dr));const eo=bi(oe,Si,new Set);Di.postStyleProps.forEach(dr=>eo.add(dr)),Si!==e&&le.add(Si)});const Ci=$d(le.values());return MM(e,this._triggerName,i,r,Se,R,te,yt,Ci,_e,oe,tn)}}function mz(n,t){const e=oc(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class gz{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=oc(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=ac(s,r,e));const c=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,c,s,e),i.set(c,s)})}),i}}class yz{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new gz(r.style,r.options&&r.options.params||{},i))}),kM(this.states,"true","1"),kM(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new TM(t,r,this.states))}),this.fallbackTransition=function vz(n,t,e){return new TM(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(s=>s.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function kM(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const bz=new Kd;class wz{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],o=f_(this._driver,e,i,[]);if(i.length)throw function wj(n){return new de(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,i){const r=t.element,o=aM(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=g_(this._driver,e,o,l_,Vd,new Map,new Map,i,bz,r),s.forEach(p=>{const g=bi(a,p.element,new Map);p.postStyleProps.forEach(E=>g.set(E,null))})):(r.push(function Ej(){return new de(3300,!1)}()),s=[]),r.length)throw function Cj(n){return new de(3504,!1)}();a.forEach((p,g)=>{p.forEach((E,S)=>{p.set(S,this._driver.computeStyle(g,S,Zr))})});const d=Do(s.map(p=>{const g=a.get(p.element);return this._buildPlayer(p,new Map,g)}));return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Dj(n){return new de(3301,!1)}();return e}listen(t,e,i,r){const o=r_(e,"","","");return n_(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const IM="ng-animate-queued",b_="ng-animate-disabled",xz=[],AM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Mz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zi="__ng_removed";class w_{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function Az(n){return n??null}(i?t.value:t),i){const o=oc(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const lc="void",E_=new w_(lc);class Tz{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,$i(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function Sj(n,t){return new de(3302,!1)}();if(null==i||0==i.length)throw function xj(n){return new de(3303,!1)}();if(!function Rz(n){return"start"==n||"done"==n}(i))throw function Mj(n,t){return new de(3400,!1)}();const o=bi(this._elementListeners,t,[]),s={name:e,phase:i,callback:r};o.push(s);const a=bi(this._engine.statesByElement,t,new Map);return a.has(e)||($i(t,Hd),$i(t,Hd+"-"+e),a.set(e,E_)),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Tj(n){return new de(3401,!1)}();return e}trigger(t,e,i,r=!0){const o=this._getTrigger(e),s=new C_(this.id,e,t);let a=this._engine.statesByElement.get(t);a||($i(t,Hd),$i(t,Hd+"-"+e),this._engine.statesByElement.set(t,a=new Map));let c=a.get(e);const d=new w_(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(e,d),c||(c=E_),d.value!==lc&&c.value===d.value){if(!function Fz(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(c.params,d.params)){const G=[],te=o.matchStyles(c.value,c.params,G),le=o.matchStyles(d.value,d.params,G);G.length?this._engine.reportError(G):this._engine.afterFlush(()=>{us(t,te),xr(t,le)})}return}const E=bi(this._engine.playersByElement,t,[]);E.forEach(G=>{G.namespaceId==this.id&&G.triggerName==e&&G.queued&&G.destroy()});let S=o.matchTransition(c.value,d.value,t,d.params),R=!1;if(!S){if(!r)return;S=o.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:S,fromState:c,toState:d,player:s,isFallbackTransition:R}),R||($i(t,IM),s.onStart(()=>{Ea(t,IM)})),s.onDone(()=>{let G=this.players.indexOf(s);G>=0&&this.players.splice(G,1);const te=this._engine.playersByElement.get(t);if(te){let le=te.indexOf(s);le>=0&&te.splice(le,1)}}),this.players.push(s),E.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,jd,!0);i.forEach(r=>{if(r[zi])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((c,d)=>{if(s.set(d,c.value),this._triggers.has(d)){const p=this.trigger(t,d,lc,r);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),i&&Do(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const c=this._triggers.get(s).fallbackTransition,d=i.get(s)||E_,p=new w_(lc),g=new C_(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:c,fromState:d,toState:p,player:g,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const o=t[zi];(!o||o===AM)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){$i(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const c=r_(o,i.triggerName,i.fromState.value,i.toState.value);c._data=t,n_(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class kz{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Tz(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const c=r.get(a);if(c){const d=i.indexOf(c);i.splice(d+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(t,e,i,r){if(Jd(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!Jd(e))return;const o=e[zi];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),$i(t,b_)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ea(t,b_))}removeNode(t,e,i,r){if(Jd(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[zi]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return Jd(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,jd,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,c_,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Do(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[zi];if(e&&e.setForRemoval){if(t[zi]=AM,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(b_)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)$i(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Do(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function kj(n){return new de(3402,!1)}()}_flushAnimations(t,e){const i=new Kd,r=[],o=new Map,s=[],a=new Map,c=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(Re=>{p.add(Re);const Ve=this.driver.query(Re,".ng-animate-queued",!0);for(let qe=0;qe<Ve.length;qe++)p.add(Ve[qe])});const g=this.bodyNode,E=Array.from(this.statesByElement.keys()),S=PM(E,this.collectedEnterElements),R=new Map;let G=0;S.forEach((Re,Ve)=>{const qe=l_+G++;R.set(Ve,qe),Re.forEach(wt=>$i(wt,qe))});const te=[],le=new Set,_e=new Set;for(let Re=0;Re<this.collectedLeaveElements.length;Re++){const Ve=this.collectedLeaveElements[Re],qe=Ve[zi];qe&&qe.setForRemoval&&(te.push(Ve),le.add(Ve),qe.hasAnimation?this.driver.query(Ve,".ng-star-inserted",!0).forEach(wt=>le.add(wt)):_e.add(Ve))}const oe=new Map,Se=PM(E,Array.from(le));Se.forEach((Re,Ve)=>{const qe=Vd+G++;oe.set(Ve,qe),Re.forEach(wt=>$i(wt,qe))}),t.push(()=>{S.forEach((Re,Ve)=>{const qe=R.get(Ve);Re.forEach(wt=>Ea(wt,qe))}),Se.forEach((Re,Ve)=>{const qe=oe.get(Ve);Re.forEach(wt=>Ea(wt,qe))}),te.forEach(Re=>{this.processLeaveNode(Re)})});const ot=[],yt=[];for(let Re=this._namespaceList.length-1;Re>=0;Re--)this._namespaceList[Re].drainQueuedTransitions(e).forEach(qe=>{const wt=qe.player,Tn=qe.element;if(ot.push(wt),this.collectedEnterElements.length){const Gn=Tn[zi];if(Gn&&Gn.setForMove){if(Gn.previousTriggersValues&&Gn.previousTriggersValues.has(qe.triggerName)){const ps=Gn.previousTriggersValues.get(qe.triggerName),qi=this.statesByElement.get(qe.element);if(qi&&qi.has(qe.triggerName)){const gh=qi.get(qe.triggerName);gh.value=ps,qi.set(qe.triggerName,gh)}}return void wt.destroy()}}const Mr=!g||!this.driver.containsElement(g,Tn),xi=oe.get(Tn),ko=R.get(Tn),nn=this._buildInstruction(qe,i,ko,xi,Mr);if(nn.errors&&nn.errors.length)return void yt.push(nn);if(Mr)return wt.onStart(()=>us(Tn,nn.fromStyles)),wt.onDestroy(()=>xr(Tn,nn.toStyles)),void r.push(wt);if(qe.isFallbackTransition)return wt.onStart(()=>us(Tn,nn.fromStyles)),wt.onDestroy(()=>xr(Tn,nn.toStyles)),void r.push(wt);const F1=[];nn.timelines.forEach(Gn=>{Gn.stretchStartingKeyframe=!0,this.disabledNodes.has(Gn.element)||F1.push(Gn)}),nn.timelines=F1,i.append(Tn,nn.timelines),s.push({instruction:nn,player:wt,element:Tn}),nn.queriedElements.forEach(Gn=>bi(a,Gn,[]).push(wt)),nn.preStyleProps.forEach((Gn,ps)=>{if(Gn.size){let qi=c.get(ps);qi||c.set(ps,qi=new Set),Gn.forEach((gh,iy)=>qi.add(iy))}}),nn.postStyleProps.forEach((Gn,ps)=>{let qi=d.get(ps);qi||d.set(ps,qi=new Set),Gn.forEach((gh,iy)=>qi.add(iy))})});if(yt.length){const Re=[];yt.forEach(Ve=>{Re.push(function Ij(n,t){return new de(3505,!1)}())}),ot.forEach(Ve=>Ve.destroy()),this.reportError(Re)}const tn=new Map,Ci=new Map;s.forEach(Re=>{const Ve=Re.element;i.has(Ve)&&(Ci.set(Ve,Ve),this._beforeAnimationBuild(Re.player.namespaceId,Re.instruction,tn))}),r.forEach(Re=>{const Ve=Re.element;this._getPreviousPlayers(Ve,!1,Re.namespaceId,Re.triggerName,null).forEach(wt=>{bi(tn,Ve,[]).push(wt),wt.destroy()})});const Di=te.filter(Re=>NM(Re,c,d)),Si=new Map;OM(Si,this.driver,_e,d,Zr).forEach(Re=>{NM(Re,c,d)&&Di.push(Re)});const eo=new Map;S.forEach((Re,Ve)=>{OM(eo,this.driver,new Set(Re),c,"!")}),Di.forEach(Re=>{const Ve=Si.get(Re),qe=eo.get(Re);Si.set(Re,new Map([...Array.from(Ve?.entries()??[]),...Array.from(qe?.entries()??[])]))});const dr=[],xa=[],Ma={};s.forEach(Re=>{const{element:Ve,player:qe,instruction:wt}=Re;if(i.has(Ve)){if(p.has(Ve))return qe.onDestroy(()=>xr(Ve,wt.toStyles)),qe.disabled=!0,qe.overrideTotalTime(wt.totalTime),void r.push(qe);let Tn=Ma;if(Ci.size>1){let xi=Ve;const ko=[];for(;xi=xi.parentNode;){const nn=Ci.get(xi);if(nn){Tn=nn;break}ko.push(xi)}ko.forEach(nn=>Ci.set(nn,Tn))}const Mr=this._buildAnimation(qe.namespaceId,wt,tn,o,eo,Si);if(qe.setRealPlayer(Mr),Tn===Ma)dr.push(qe);else{const xi=this.playersByElement.get(Tn);xi&&xi.length&&(qe.parentPlayer=Do(xi)),r.push(qe)}}else us(Ve,wt.fromStyles),qe.onDestroy(()=>xr(Ve,wt.toStyles)),xa.push(qe),p.has(Ve)&&r.push(qe)}),xa.forEach(Re=>{const Ve=o.get(Re.element);if(Ve&&Ve.length){const qe=Do(Ve);Re.setRealPlayer(qe)}}),r.forEach(Re=>{Re.parentPlayer?Re.syncPlayerEvents(Re.parentPlayer):Re.destroy()});for(let Re=0;Re<te.length;Re++){const Ve=te[Re],qe=Ve[zi];if(Ea(Ve,Vd),qe&&qe.hasAnimation)continue;let wt=[];if(a.size){let Mr=a.get(Ve);Mr&&Mr.length&&wt.push(...Mr);let xi=this.driver.query(Ve,c_,!0);for(let ko=0;ko<xi.length;ko++){let nn=a.get(xi[ko]);nn&&nn.length&&wt.push(...nn)}}const Tn=wt.filter(Mr=>!Mr.destroyed);Tn.length?Oz(this,Ve,Tn):this.processLeaveNode(Ve)}return te.length=0,dr.forEach(Re=>{this.players.push(Re),Re.onDone(()=>{Re.destroy();const Ve=this.players.indexOf(Re);this.players.splice(Ve,1)}),Re.play()}),dr}elementContainsData(t,e){let i=!1;const r=e[zi];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const c=!o||o==lc;a.forEach(d=>{d.queued||!c&&d.triggerName!=r||s.push(d)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,e,i){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const c of e.timelines){const d=c.element,p=d!==o,g=bi(i,d,[]);this._getPreviousPlayers(d,p,s,a,e.toState).forEach(S=>{const R=S.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),S.destroy(),g.push(S)})}us(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,s){const a=e.triggerName,c=e.element,d=[],p=new Set,g=new Set,E=e.timelines.map(R=>{const G=R.element;p.add(G);const te=G[zi];if(te&&te.removedBeforeQueried)return new ec(R.duration,R.delay);const le=G!==c,_e=function Pz(n){const t=[];return FM(n,t),t}((i.get(G)||xz).map(tn=>tn.getRealPlayer())).filter(tn=>!!tn.element&&tn.element===G),oe=o.get(G),Se=s.get(G),ot=aM(0,this._normalizer,0,R.keyframes,oe,Se),yt=this._buildPlayer(R,ot,_e);if(R.subTimeline&&r&&g.add(G),le){const tn=new C_(t,a,G);tn.setRealPlayer(yt),d.push(tn)}return yt});d.forEach(R=>{bi(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>function Iz(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,R.element,R))}),p.forEach(R=>$i(R,gM));const S=Do(E);return S.onDestroy(()=>{p.forEach(R=>Ea(R,gM)),xr(c,e.toStyles)}),g.forEach(R=>{bi(r,R,[]).push(S)}),S}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new ec(t.duration,t.delay)}}class C_{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new ec,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>n_(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){bi(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Jd(n){return n&&1===n.nodeType}function RM(n,t){const e=n.style.display;return n.style.display=t??"none",e}function OM(n,t,e,i,r){const o=[];e.forEach(c=>o.push(RM(c)));const s=[];i.forEach((c,d)=>{const p=new Map;c.forEach(g=>{const E=t.computeStyle(d,g,r);p.set(g,E),(!E||0==E.length)&&(d[zi]=Mz,s.push(d))}),n.set(d,p)});let a=0;return e.forEach(c=>RM(c,o[a++])),s}function PM(n,t){const e=new Map;if(n.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let c=o.get(a);if(c)return c;const d=a.parentNode;return c=e.has(d)?d:r.has(d)?1:s(d),o.set(a,c),c}return t.forEach(a=>{const c=s(a);1!==c&&e.get(c).push(a)}),e}function $i(n,t){n.classList?.add(t)}function Ea(n,t){n.classList?.remove(t)}function Oz(n,t,e){Do(e).onDone(()=>n.processLeaveNode(t))}function FM(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof Ax?FM(i.players,t):t.push(i)}}function NM(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}class eh{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new kz(t,e,i),this._timelineEngine=new wz(t,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,i,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const c=[],p=f_(this._driver,o,c,[]);if(c.length)throw function vj(n,t){return new de(3404,!1)}();a=function _z(n,t,e){return new yz(n,t,e)}(r,p,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[o,s]=lM(i);this._timelineEngine.command(o,e,s,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if("@"==i.charAt(0)){const[s,a]=lM(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Lz=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&xr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xr(this._element,this._initialStyles),this._endStyles&&(xr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(us(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(us(this._element,this._endStyles),this._endStyles=null),xr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function D_(n){let t=null;return n.forEach((e,i)=>{(function Bz(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class LM{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:EM(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Uz{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return hM(t,e)}getParentElement(t){return s_(t)}query(t,e,i){return fM(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,o,s=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(c.easing=o);const d=new Map,p=s.filter(S=>S instanceof LM);(function zj(n,t){return 0===n||0===t})(i,r)&&p.forEach(S=>{S.currentSnapshot.forEach((R,G)=>d.set(G,R))});let g=function Uj(n){return n.length?n[0]instanceof Map?n:n.map(t=>_M(t)):[]}(e).map(S=>So(S));g=function $j(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,EM(n,a)))}}return t}(t,g,d);const E=function Nz(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=D_(t[0]),t.length>1&&(i=D_(t[t.length-1]))):t instanceof Map&&(e=D_(t)),e||i?new Lz(n,e,i):null}(t,g);return new LM(t,g,c,E)}}let Vz=(()=>{class n extends Tx{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Xi.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?kx(e):e;return BM(this._renderer,null,i,"register",[r]),new Hz(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(se(Xa),se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class Hz extends class YH{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new jz(this._id,t,e||{},this._renderer)}}class jz{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return BM(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function BM(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const UM="@.disabled";let zz=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,i){const o=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let p=this._rendererCache.get(o);return p||(p=new VM("",o,this.engine),this._rendererCache.set(o,p)),p}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const c=p=>{Array.isArray(p)?p.forEach(c):this.engine.registerTrigger(s,a,e,p.name,p)};return i.data.animation.forEach(c),new $z(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(se(Xa),se(eh),se(Ze))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})();class VM{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==UM?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class $z extends VM{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==UM?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Gz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function qz(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(t,e,i)}}const HM=[{provide:Tx,useClass:Vz},{provide:y_,useFactory:function Yz(){return new fz}},{provide:eh,useClass:(()=>{class n extends eh{constructor(e,i,r,o){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(se(et),se(a_),se(y_),se(ra))},n.\u0275prov=xe({token:n,factory:n.\u0275fac}),n})()},{provide:Xa,useFactory:function Xz(n,t,e){return new zz(n,t,e)},deps:[ju,eh,Ze]}],S_=[{provide:a_,useFactory:()=>new Uz},{provide:Fi,useValue:"BrowserAnimations"},...HM],jM=[{provide:a_,useClass:pM},{provide:Fi,useValue:"NoopAnimations"},...HM];let Kz=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?jM:S_}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:S_,imports:[GC]}),n})(),Zz=0;const x_=new ve("CdkAccordion");let Qz=(()=>{class n{constructor(){this._stateChanges=new I,this._openCloseAllActions=new I,this.id="cdk-accordion-"+Zz++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Xt(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ke({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[ht([{provide:x_,useExisting:n}]),kn]}),n})(),Jz=0,e6=(()=>{class n{constructor(e,i,r){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=k.EMPTY,this.closed=new Ke,this.opened=new Ke,this.destroyed=new Ke,this.expandedChange=new Ke,this.id="cdk-accordion-child-"+Jz++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Xt(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Xt(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(V(x_,12),V(Rn),V(Nx))},n.\u0275dir=ke({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[ht([{provide:x_,useValue:void 0}])]}),n})(),t6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})();const n6=["body"];function i6(n,t){}const r6=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],o6=["mat-expansion-panel-header","*","mat-action-row"];function s6(n,t){1&n&&ct(0,"span",2),2&n&&Xe("@indicatorRotate",Un()._getExpandedState())}const a6=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],l6=["mat-panel-title","mat-panel-description","*"],M_=new ve("MAT_ACCORDION"),zM="225ms cubic-bezier(0.4,0.0,0.2,1)",$M={indicatorRotate:Jl("indicatorRotate",[as("collapsed, void",vi({transform:"rotate(0deg)"})),as("expanded",vi({transform:"rotate(180deg)"})),wa("expanded <=> collapsed, void => collapsed",ba(zM))]),bodyExpansion:Jl("bodyExpansion",[as("collapsed, void",vi({height:"0px",visibility:"hidden"})),as("expanded",vi({height:"*",visibility:"visible"})),wa("expanded <=> collapsed, void => collapsed",ba(zM))])},GM=new ve("MAT_EXPANSION_PANEL");let c6=(()=>{class n{constructor(e,i){this._template=e,this._expansionPanel=i}}return n.\u0275fac=function(e){return new(e||n)(V(Oi),V(GM,8))},n.\u0275dir=ke({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),u6=0;const qM=new ve("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let WM=(()=>{class n extends e6{constructor(e,i,r,o,s,a,c){super(e,i,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Ke,this.afterCollapse=new Ke,this._inputChanges=new I,this._headerId="mat-expansion-panel-header-"+u6++,this._bodyAnimationDone=new I,this.accordion=e,this._document=s,this._bodyAnimationDone.pipe(Ug((d,p)=>d.fromState===p.fromState&&d.toState===p.toState)).subscribe(d=>{"void"!==d.fromState&&("expanded"===d.toState?this.afterExpand.emit():"collapsed"===d.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Xt(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(cr(null),un(()=>this.expanded&&!this._portal),jn(1)).subscribe(()=>{this._portal=new Xg(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(V(M_,12),V(Rn),V(Nx),V(In),V(et),V(Fi,8),V(qM,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,r){if(1&e&&Pi(r,c6,5),2&e){let o;Pt(o=Ft())&&(i._lazyContent=o.first)}},viewQuery:function(e,i){if(1&e&&An(n6,5),2&e){let r;Pt(r=Ft())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&Yt("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[ht([{provide:M_,useValue:void 0},{provide:GM,useExisting:n}]),ze,kn],ngContentSelectors:o6,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(tr(r6),Vn(0),Ie(1,"div",0,1),Dt("@bodyExpansion.done",function(o){return i._bodyAnimationDone.next(o)}),Ie(3,"div",2),Vn(4,1),xn(5,i6,0,0,"ng-template",3),Oe(),Vn(6,2),Oe()),2&e&&(Le(1),Xe("@bodyExpansion",i._getExpandedState())("id",i.id),Ct("aria-labelledby",i._headerId),Le(4),Xe("cdkPortalOutlet",i._portal))},dependencies:[QH],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[$M.bodyExpansion]},changeDetection:0}),n})();class d6{}const h6=Md(d6);let YM=(()=>{class n extends h6{constructor(e,i,r,o,s,a,c){super(),this.panel=e,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=k.EMPTY;const d=e.accordion?e.accordion._stateChanges.pipe(un(p=>!(!p.hideToggle&&!p.togglePosition))):fr;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=to(e.opened,e.closed,d,e._inputChanges.pipe(un(p=>!!(p.hideToggle||p.disabled||p.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(un(()=>e._containsFocus())).subscribe(()=>r.focusVia(i,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:wd(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(V(WM,1),V(lt),V(rs),V(Rn),V(qM,8),V(Fi,8),gr("tabindex"))},n.\u0275cmp=Wt({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&Dt("click",function(){return i._toggle()})("keydown",function(o){return i._keydown(o)}),2&e&&(Ct("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Hr("height",i._getHeaderHeight()),Yt("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ze],ngContentSelectors:l6,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(tr(a6),Ie(0,"span",0),Vn(1),Vn(2,1),Vn(3,2),Oe(),xn(4,s6,1,1,"span",1)),2&e&&(Yt("mat-content-hide-toggle",!i._showToggle()),Le(4),Xe("ngIf",i._showToggle()))},dependencies:[Wo],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[$M.indicatorRotate]},changeDetection:0}),n})(),f6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ke({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),p6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=ke({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),m6=(()=>{class n extends Qz{constructor(){super(...arguments),this._ownHeaders=new Go,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Xt(e)}ngAfterContentInit(){this._headers.changes.pipe(cr(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new tx(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=ln(n)))(i||n)}}(),n.\u0275dir=ke({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,i,r){if(1&e&&Pi(r,YM,5),2&e){let o;Pt(o=Ft())&&(i._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,i){2&e&&Yt("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[ht([{provide:M_,useExisting:n}]),ze]}),n})(),g6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[po,qt,t6,Ox]}),n})();function T_(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Ca(n,t){const e=t?"":"none";T_(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function XM(n,t,e){T_(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function nh(n,t){return t&&"none"!=t?n+" "+t:n}function KM(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function k_(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function I_(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function A_(n,t,e){const{top:i,bottom:r,left:o,right:s}=n;return e>=i&&e<=r&&t>=o&&t<=s}function cc(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function ZM(n,t,e,i){const{top:r,right:o,bottom:s,left:a,width:c,height:d}=n,p=c*t,g=d*t;return i>r-g&&i<s+g&&e>a-p&&e<o+p}class QM{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:I_(e)})})}handleScroll(t){const e=ur(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let o,s;if(e===this._document){const d=this.getViewportScrollPosition();o=d.top,s=d.left}else o=e.scrollTop,s=e.scrollLeft;const a=r.top-o,c=r.left-s;return this.positions.forEach((d,p)=>{d.clientRect&&e!==p&&e.contains(p)&&cc(d.clientRect,a,c)}),r.top=o,r.left=s,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function JM(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?nT(n,t):("input"===i||"select"===i||"textarea"===i)&&tT(n,t),eT("canvas",n,t,nT),eT("input, textarea, select",n,t,tT),t}function eT(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}let v6=0;function tT(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${v6++}`)}function nT(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const iT=Kr({passive:!0}),ih=Kr({passive:!1}),R_=new Set(["position"]);class w6{constructor(t,e,i,r,o,s){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new I,this._pointerMoveSubscription=k.EMPTY,this._pointerUpSubscription=k.EMPTY,this._scrollSubscription=k.EMPTY,this._resizeSubscription=k.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new I,this.started=new I,this.released=new I,this.ended=new I,this.entered=new I,this.exited=new I,this.dropped=new I,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const S=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),R=this._dropContainer;if(!S)return void this._endDragSequence(a);(!R||!R.isDragging()&&!R.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{const p=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,g=this._activeTransform;g.x=d.x-p.x+this._passiveTransform.x,g.y=d.y-p.y+this._passiveTransform.y,this._applyRootElementTransform(g.x,g.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:a,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new QM(i),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Xt(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Ca(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>_n(i)),this._handles.forEach(i=>Ca(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=_n(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ih),e.addEventListener("touchstart",this._pointerDown,iT),e.addEventListener("dragstart",this._nativeDragStart,ih)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?_n(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Ca(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Ca(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){uc(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(s,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),XM(i,!1,R_),this._document.body.appendChild(r.replaceChild(o,i)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=uc(e),o=!r&&0!==e.button,s=this._rootElement,a=ur(e),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=r?Dd(e):Cd(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),i||o||c||d)return;if(this._handles.length){const E=s.style;this._rootElementTapHighlight=E.webkitTapHighlightColor||"",E.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(E=>this._updateOnScroll(E)),this._boundaryElement&&(this._boundaryRect=I_(this._boundaryElement));const p=this._previewTemplate;this._pickupPositionInElement=p&&p.template&&!p.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const g=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:g.x,y:g.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){XM(this._rootElement,!0,R_),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,s,o,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const o=t.matchSize?this._initialClientRect:null,s=t.viewContainer.createEmbeddedView(i,t.context);s.detectChanges(),r=oT(s,this._document),this._previewRef=s,t.matchSize?sT(r,o):r.style.transform=rh(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=JM(this._rootElement),sT(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return T_(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},R_),Ca(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function y6(n){const t=getComputedStyle(n),e=k_(t,"transition-property"),i=e.find(a=>"transform"===a||"all"===a);if(!i)return 0;const r=e.indexOf(i),o=k_(t,"transition-duration"),s=k_(t,"transition-delay");return KM(o[r])+KM(s[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=s=>{(!s||ur(s)===this._preview&&"transform"===s.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(o))},o=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=oT(this._placeholderRef,this._document)):i=JM(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():t,s=uc(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition();return{x:o.left-t.left+(s.pageX-o.left-a.left),y:o.top-t.top+(s.pageY-o.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=uc(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){const s=this._ownerSVGElement.getScreenCTM();if(s){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:s}=this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),p=a.top+s,g=a.bottom-(d-s);i=rT(i,a.left+o,a.right-(c-o)),r=rT(r,p,g)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),a=Math.abs(i-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Ca(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,ih),t.removeEventListener("touchstart",this._pointerDown,iT),t.removeEventListener("dragstart",this._nativeDragStart,ih)}_applyRootElementTransform(t,e){const i=rh(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=nh(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=rh(t,e);this._preview.style.transform=nh(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const o=r.left-i.left,s=i.right-r.right,a=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,r.height>i.height?(a>0&&(e+=a),c>0&&(e-=c)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:uc(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=ur(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&cc(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=yd(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return _n(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function rh(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function rT(n,t,e){return Math.max(t,Math.min(e,n))}function uc(n){return"t"===n.type[0]}function oT(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function sT(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=rh(t.left,t.top)}function dc(n,t){return Math.max(0,Math.min(t,n))}class C6{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===s&&o.length>0)return null;const a="horizontal"===this.orientation,c=o.findIndex(te=>te.drag===t),d=o[s],g=d.clientRect,E=c>s?1:-1,S=this._getItemOffsetPx(o[c].clientRect,g,E),R=this._getSiblingOffsetPx(c,o,E),G=o.slice();return function E6(n,t,e){const i=dc(t,n.length-1),r=dc(e,n.length-1);if(i===r)return;const o=n[i],s=r<i?-1:1;for(let a=i;a!==r;a+=s)n[a]=n[a+s];n[r]=o}(o,c,s),o.forEach((te,le)=>{if(G[le]===te)return;const _e=te.drag===t,oe=_e?S:R,Se=_e?t.getPlaceholderElement():te.drag.getRootElement();te.offset+=oe,a?(Se.style.transform=nh(`translate3d(${Math.round(te.offset)}px, 0, 0)`,te.initialTransform),cc(te.clientRect,0,oe)):(Se.style.transform=nh(`translate3d(0, ${Math.round(te.offset)}px, 0)`,te.initialTransform),cc(te.clientRect,oe,0))}),this._previousSwap.overlaps=A_(g,e,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:c,currentIndex:s}}enter(t,e,i,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,s=this._activeDraggables,a=s.indexOf(t),c=t.getPlaceholderElement();let d=s[o];if(d===t&&(d=s[o+1]),!d&&(null==o||-1===o||o<s.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(d=s[0]),a>-1&&s.splice(a,1),d&&!this._dragDropRegistry.isDragging(d)){const p=d.getRootElement();p.parentElement.insertBefore(c,p),s.splice(o,0,t)}else _n(this._element).appendChild(c),s.push(t);c.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{cc(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:I_(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let o=r?e.left-t.left:e.top-t.top;return-1===i&&(o+=r?e.width-t.width:e.height-t.height),o}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,o=e[t].clientRect,s=e[t+-1*i];let a=o[r?"width":"height"]*i;if(s){const c=r?"left":"top",d=r?"right":"bottom";-1===i?a-=s.clientRect[c]-o[d]:a+=o[c]-s.clientRect[d]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const s=i[i.length-1].clientRect;return r?t>=s.right:e>=s.bottom}{const s=i[0].clientRect;return r?t<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(t,e,i,r){const o="horizontal"===this.orientation,s=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===t)return!1;if(r){const d=o?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return o?e>=Math.floor(c.left)&&e<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return-1!==s&&this._sortPredicate(s,t)?s:-1}}class D6{constructor(t,e,i,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new I,this.entered=new I,this.exited=new I,this.dropped=new I,this.sorted=new I,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=k.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new I,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function _6(n=0,t=Ml){return n<0&&(n=0),Pm(n,n,t)}(0,Px).pipe(ji(this._stopScrollTimers)).subscribe(()=>{const s=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?s.scrollBy(0,-a):2===this._verticalScrollDirection&&s.scrollBy(0,a),1===this._horizontalScrollDirection?s.scrollBy(-a,0):2===this._horizontalScrollDirection&&s.scrollBy(a,0)})},this.element=_n(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new QM(i),this._sortStrategy=new C6(this.element,e),this._sortStrategy.withSortPredicate((s,a)=>this.sortPredicate(s,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,o,s,a,c={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:a,event:c})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=_n(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!ZM(this._clientRect,.05,e,i))return;const o=this._sortStrategy.sort(t,e,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,o=0;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||ZM(s.clientRect,.05,t,e)&&([r,o]=function S6(n,t,e,i){const r=cT(t,i),o=uT(t,e);let s=0,a=0;if(r){const c=n.scrollTop;1===r?c>0&&(s=1):n.scrollHeight-c>n.clientHeight&&(s=2)}if(o){const c=n.scrollLeft;1===o?c>0&&(a=1):n.scrollWidth-c>n.clientWidth&&(a=2)}return[s,a]}(a,s.clientRect,t,e),(r||o)&&(i=a))}),!r&&!o){const{width:s,height:a}=this._viewportRuler.getViewportSize(),c={width:s,height:a,top:0,right:s,bottom:a,left:0};r=cT(c,e),o=uT(c,t),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=_n(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=_n(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=_n(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&A_(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!A_(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const o=_n(this.element);return r===o||o.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=yd(_n(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function cT(n,t){const{top:e,bottom:i,height:r}=n,o=.05*r;return t>=e-o&&t<=e+o?1:t>=i-o&&t<=i+o?2:0}function uT(n,t){const{left:e,right:i,width:r}=n,o=.05*r;return t>=e-o&&t<=e+o?1:t>=i-o&&t<=i+o?2:0}const oh=Kr({passive:!1,capture:!0});let x6=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new I,this.pointerUp=new I,this.scroll=new I,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,oh)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,oh)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:oh}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:oh}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,s)=>{this._document.addEventListener(s,o.handler,o.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new Qe(r=>this._ngZone.runOutsideAngular(()=>{const s=a=>{this._activeDragInstances.length&&r.next(a)};return e.addEventListener("scroll",s,!0),()=>{e.removeEventListener("scroll",s,!0)}}))),to(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(se(Ze),se(et))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M6={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let dT=(()=>{class n{constructor(e,i,r,o){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(e,i=M6){return new w6(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new D6(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(se(et),se(Ze),se(nc),se(x6))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hT=new ve("CDK_DRAG_PARENT"),T6=new ve("CDK_DRAG_CONFIG"),k6=new ve("CdkDropList"),fT=new ve("CdkDragHandle"),I6=new ve("CdkDragPlaceholder"),A6=new ve("CdkDragPreview");let O6=(()=>{class n{constructor(e,i,r,o,s,a,c,d,p,g,E){this.element=e,this.dropContainer=i,this._ngZone=o,this._viewContainerRef=s,this._dir=c,this._changeDetectorRef=p,this._selfHandle=g,this._parentDrag=E,this._destroyed=new I,this.started=new Ke,this.released=new Ke,this.ended=new Ke,this.entered=new Ke,this.exited=new Ke,this.dropped=new Ke,this.moved=new Qe(S=>{const R=this._dragRef.moved.pipe($(G=>({source:this,pointerPosition:G.pointerPosition,event:G.event,delta:G.delta,distance:G.distance}))).subscribe(S);return()=>{R.unsubscribe()}}),this._dragRef=d.createDrag(e,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Xt(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(jn(1),ji(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let i=e;this.rootElementSelector&&(i=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):_n(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const i=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof r&&r?r:$n(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(jn(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){e.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){const{lockAxis:i,dragStartDelay:r,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:c,rootElementSelector:d,previewContainer:p}=e;this.disabled=c??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),d&&(this.rootElementSelector=d),p&&(this.previewContainer=p)}_setupHandlesListener(){this._handles.changes.pipe(cr(this._handles),dn(e=>{const i=e.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),li(e=>to(...e.map(i=>i._stateChanges.pipe(cr(i))))),ji(this._destroyed)).subscribe(e=>{const i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}}return n._dragInstances=[],n.\u0275fac=function(e){return new(e||n)(V(lt),V(k6,12),V(et),V(Ze),V(In),V(T6,8),V(os,8),V(dT),V(Rn),V(fT,10),V(hT,12))},n.\u0275dir=ke({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(e,i,r){if(1&e&&(Pi(r,A6,5),Pi(r,I6,5),Pi(r,fT,5)),2&e){let o;Pt(o=Ft())&&(i._previewTemplate=o.first),Pt(o=Ft())&&(i._placeholderTemplate=o.first),Pt(o=Ft())&&(i._handles=o)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,i){2&e&&Yt("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[ht([{provide:hT,useExisting:n}]),kn]}),n})(),P6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[dT],imports:[Ld]}),n})(),pT=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(V(Fr),V(lt))},n.\u0275dir=ke({type:n}),n})(),hs=(()=>{class n extends pT{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=ln(n)))(i||n)}}(),n.\u0275dir=ke({type:n,features:[ze]}),n})();const Ei=new ve("NgValueAccessor"),N6={provide:Ei,useExisting:Et(()=>O_),multi:!0},B6=new ve("CompositionEventMode");let O_=(()=>{class n extends pT{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function L6(){const n=Dr()?Dr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(V(Fr),V(lt),V(B6,8))},n.\u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&Dt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ht([N6]),ze]}),n})();const Mn=new ve("NgValidators"),Mo=new ve("NgAsyncValidators");function ST(n){return null!=n}function xT(n){return rl(n)?hn(n):n}function MT(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function TT(n,t){return t.map(e=>e(n))}function kT(n){return n.map(t=>function H6(n){return!n.validate}(t)?t:e=>t.validate(e))}function P_(n){return null!=n?function IT(n){if(!n)return null;const t=n.filter(ST);return 0==t.length?null:function(e){return MT(TT(e,t))}}(kT(n)):null}function F_(n){return null!=n?function AT(n){if(!n)return null;const t=n.filter(ST);return 0==t.length?null:function(e){return dx(TT(e,t).map(xT)).pipe($(MT))}}(kT(n)):null}function RT(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function N_(n){return n?Array.isArray(n)?n:[n]:[]}function ah(n,t){return Array.isArray(n)?n.includes(t):n===t}function FT(n,t){const e=N_(t);return N_(n).forEach(r=>{ah(e,r)||e.push(r)}),e}function NT(n,t){return N_(t).filter(e=>!ah(n,e))}class LT{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=P_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=F_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ti extends LT{get formDirective(){return null}get path(){return null}}class To extends LT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let UT=(()=>{class n extends class BT{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(V(To,2))},n.\u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Yt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ze]}),n})();const hc="VALID",ch="INVALID",Da="PENDING",fc="DISABLED";function HT(n){return Array.isArray(n)?P_(n):n||null}function jT(n){return Array.isArray(n)?F_(n):n||null}function uh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function pc(n,t){(function z_(n,t){const e=function OT(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(RT(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function PT(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(RT(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();fh(t._rawValidators,r),fh(t._rawAsyncValidators,r)})(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function Z6(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qT(n,t)})}(n,t),function J6(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Q6(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qT(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function K6(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function fh(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function qT(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function KT(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function ZT(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const l5={provide:To,useExisting:Et(()=>W_)},t1=(()=>Promise.resolve())();let W_=(()=>{class n extends To{constructor(e,i,r,o,s){super(),this._changeDetectorRef=s,this.control=new class extends class GT{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=HT(this._rawValidators),this._composedAsyncValidatorFn=jT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===hc}get invalid(){return this.status===ch}get pending(){return this.status==Da}get disabled(){return this.status===fc}get enabled(){return this.status!==fc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=HT(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=jT(t)}addValidators(t){this.setValidators(FT(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(FT(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(NT(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(NT(t,this._rawAsyncValidators))}hasValidator(t){return ah(this._rawValidators,t)}hasAsyncValidator(t){return ah(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Da,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=fc,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=hc,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hc||this.status===Da)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fc:hc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator=!0;const e=xT(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?fc:this.errors?ch:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(ch)?ch:hc}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){uh(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,i){super(function V_(n){return(uh(n)?n.validators:n)||null}(e),function H_(n,t){return(uh(t)?t.asyncValidators:n)||null}(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uh(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=ZT(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){KT(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){KT(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){ZT(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new Ke,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function G_(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===O_?e=o:function n5(n){return Object.getPrototypeOf(n.constructor)===hs}(o)?i=o:r=o}),r||i||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function $_(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){t1.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&function zr(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);t1.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function dh(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(V(ti,9),V(Mn,10),V(Mo,10),V(Ei,10),V(Rn,8))},n.\u0275dir=ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ht([l5]),ze,kn]}),n})(),r1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})(),O5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[r1]}),n})(),P5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[O5]}),n})(),q5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[po,qt,qt]}),n})(),C1=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W5=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=_n(e);return new Qe(r=>{const s=this._observeElement(i).subscribe(r);return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new I,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(se(C1))},n.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D1=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new Ke,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Xt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=$n(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Bg(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(V(W5),V(lt),V(Ze))},n.\u0275dir=ke({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),ty=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[C1]}),n})();const Y5=["input"],X5=function(n){return{enterDuration:n}},K5=["*"],Z5=new ve("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Q5=0;const J5={provide:Ei,useExisting:Et(()=>S1),multi:!0};class e${constructor(t,e){this.source=t,this.checked=e}}const t$=Md(wo(xd(Yl(class{constructor(n){this._elementRef=n}}))));let n$=(()=>{class n extends t${constructor(e,i,r,o,s,a,c){super(e),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=s,this._onChange=d=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Ke,this.toggleChange=new Ke,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=s.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++Q5}`}get required(){return this._required}set required(e){this._required=Xt(e)}get checked(){return this._checked}set checked(e){this._checked=Xt(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._focused=!0:e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(e){Ja()},n.\u0275dir=ke({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[ze]}),n})(),S1=(()=>{class n extends n${constructor(e,i,r,o,s,a){super(e,i,r,o,s,a,"mat-slide-toggle-")}_createChangeEvent(e){return new e$(this,e)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(V(lt),V(rs),V(Rn),gr("tabindex"),V(Z5),V(Fi,8))},n.\u0275cmp=Wt({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&An(Y5,5),2&e){let r;Pt(r=Ft())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,i){2&e&&(sl("id",i.id),Ct("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),Yt("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[ht([J5]),ze],ngContentSelectors:K5,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,i){if(1&e&&(tr(),Ie(0,"label",0,1)(2,"span",2)(3,"input",3,4),Dt("change",function(o){return i._onChangeEvent(o)})("click",function(o){return i._onInputClick(o)}),Oe(),Ie(5,"span",5),ct(6,"span",6),Ie(7,"span",7),ct(8,"span",8),Oe()()(),Ie(9,"span",9,10),Dt("cdkObserveContent",function(){return i._onLabelTextChange()}),Ie(11,"span",11),Ot(12,"\xa0"),Oe(),Vn(13),Oe()()),2&e){const r=Vr(1),o=Vr(10);Ct("for",i.inputId),Le(2),Yt("mat-slide-toggle-bar-no-side-margin",!o.textContent||!o.textContent.trim()),Le(1),Xe("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),Ct("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),Le(4),Xe("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Ip(18,X5,i._noopAnimations?0:150))}},dependencies:[va,D1],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),x1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})(),o$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[x1,Td,qt,ty,x1,qt]}),n})(),k1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})(),v$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[Td,qt,ty,k1,qt,k1]}),n})(),I1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({}),n})(),A1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[po,qt,ty,qt]}),n})(),D$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[$8],imports:[I1,A1,qt,I1,A1]}),n})(),S$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[g6,po,P6,xx,Cx,q5,o$,oM,Zg,v$,D$,P5]}),n})();const x$=["container"],M$=["canvas"];function T$(n,t){1&n&&(Ie(0,"div",2),Ot(1,"\u{1f4fa}"),Oe())}function k$(n,t){1&n&&(Ie(0,"div",3,4),ct(2,"canvas",null,5),Oe())}let R1=(()=>{class n{constructor(e){this.zone=e,this._sourceDisposer=new Yo(!0),this._observerDisposer=new Yo(!0),this._observer=new ResizeObserver(()=>{this.zone.run(()=>{this.updateVideoSize()})})}set container(e){if(this._observerDisposer.dispose(),this._container=e,this._container){const i=this._container.nativeElement;this._observer.observe(i),this._observerDisposer.addFunction(()=>{this._observer.unobserve(i)}),this.updateVideoSize()}}set source(e){this._source!==e&&(this._sourceDisposer.dispose(),this._source=e,this.updateVideoSize(),e&&(e.play(),this._sourceDisposer.addListener(e,"metadata-changed",()=>{this.updateVideoSize()}),requestAnimationFrame(()=>this._onFrameAvailable())))}get source(){return this._source}ngAfterViewInit(){}ngOnDestroy(){this._observerDisposer.dispose()}updateVideoSize(){if(!this.canvas)return;const e=this.canvas.nativeElement;if(!this._container||!this._source)return void(e.width=e.height=0);const o=Math.min(this._container.nativeElement.clientWidth/this._source.width,this._container.nativeElement.clientHeight/this._source.height,1);e.width=this._source.width*o,e.height=this._source.height*o,this._source.drawCurrentFrame(Nt(e.getContext("2d")))}_onFrameAvailable(){if(!this._source)return;const e=this.canvas?.nativeElement?.getContext("2d");this._source.drawCurrentFrame(Nt(e)),requestAnimationFrame(()=>this._onFrameAvailable())}}return n.\u0275fac=function(e){return new(e||n)(V(Ze))},n.\u0275cmp=Wt({type:n,selectors:[["ui-video-view"]],viewQuery:function(e,i){if(1&e&&(An(x$,5,lt),An(M$,5,lt)),2&e){let r;Pt(r=Ft())&&(i.container=r.first),Pt(r=Ft())&&(i.canvas=r.first)}},inputs:{source:"source"},decls:2,vars:2,consts:[["class","no-source","label","No video source!",4,"ngIf"],["class","canvas-container",4,"ngIf"],["label","No video source!",1,"no-source"],[1,"canvas-container"],["container",""],["canvas",""]],template:function(e,i){1&e&&(xn(0,T$,2,0,"div",0),xn(1,k$,4,0,"div",1)),2&e&&(Xe("ngIf",!i.source),Le(1),Xe("ngIf",i.source))},dependencies:[Wo],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;flex-direction:column;justify-content:center;align-items:stretch}.canvas-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:hidden;align-content:center;justify-items:center}canvas[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.no-source[_ngcontent-%COMP%]{align-self:center;font-size:96px}"]}),n})();const I$=["canvas"];let O1=(()=>{class n{constructor(){}ngOnChanges(e){!this.canvas||this._renderGraph()}updateCanvasSize(e){if(!this.canvas)return;const i=this.canvas.nativeElement;i.width!=e&&(i.width=e,i.height=64,this._renderGraph())}get labelLeft(){const e=this.graphConfig?.property?.series?.activeRanges;return e&&e.length&&this.timeline?`${this.timeline.frameToPx(e[0].start)}px`:0}_renderGraph(){const e=this.graphConfig?.property,i=this.timeline,r=this.canvas.nativeElement,o=r.width,a=Nt(r.getContext("2d"));if(a.clearRect(0,0,o,r.height),!e||!i)return;const c=e.series,d=this.graphConfig?.color;let p=c.min??0,g=c.max??1;p>=0&&g<=1&&(p=0,g=1),p===g&&(g+=1);const{start:E,end:S}=c.activeRanges[0]??{start:0,end:c.length};a.fillStyle=d,a.arc(i.frameToPx(E),29,5,0,2*Math.PI),a.arc(i.frameToPx(S-1),29,5,0,2*Math.PI),a.fill(),a.save();try{a.fillStyle=this._lighten(d),a.beginPath(),a.moveTo(i.frameToPx(E),28);for(let G=E;G<S;G++){const te=c.at(G);"number"==typeof te&&a.lineTo(i.frameToPx(G),30*(1-(te-p)/(g-p)))}a.lineTo(i.frameToPx(S-1),28),a.fill()}finally{a.restore()}a.beginPath(),a.strokeStyle=d,a.lineWidth=2,a.moveTo(i.frameToPx(E),29),a.lineTo(i.frameToPx(S-1),29),a.stroke()}_lighten(e){e=e.replace(/[^0-9A-F]/gi,"");var i=parseInt(e,16);return"rgba("+(i>>16&255)+","+(i>>8&255)+","+(255&i)+",0.15)"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Wt({type:n,selectors:[["ui-graph"]],viewQuery:function(e,i){if(1&e&&An(I$,5,lt),2&e){let r;Pt(r=Ft())&&(i.canvas=r.first)}},inputs:{graphConfig:"graphConfig",timeline:"timeline"},features:[kn],decls:5,vars:3,consts:[[1,"graph-container"],["canvas",""],[1,"label"]],template:function(e,i){1&e&&(Ie(0,"div",0),ct(1,"canvas",null,1),Oe(),Ie(3,"div",2),Ot(4),Oe()),2&e&&(Le(3),Hr("left",i.labelLeft),Le(1),uo(null==i.graphConfig||null==i.graphConfig.property?null:i.graphConfig.property.label))},styles:["[_nghost-%COMP%]{padding:8px 0}[_nghost-%COMP%]:hover{background-color:#0000000d}.label[_ngcontent-%COMP%]{background-color:#e1e1e1!important;color:#212121;border-radius:32px;margin-top:48px;margin-bottom:8px;display:inline-block;padding:4px 8px;font-size:12px;position:relative}.graph-container[_ngcontent-%COMP%]{position:absolute;height:64px;width:100%}"]}),n})();class A$ extends EventTarget{constructor(t,e){super(),this.timeline=e,this._width=t}get width(){return this._width}set width(t){t!=this._width&&(this._width=t,this.dispatchEvent(new Event("timeline-changed")))}timeToPx(t){if(t<0)return Number.NEGATIVE_INFINITY;const e=this.timeline.duration;return t>e?Number.POSITIVE_INFINITY:this.width*(t/e)}frameToPx(t){return this.timeToPx(this.timeline.timeToFrame(t))}pxToTime(t){if(t<0)return Number.NEGATIVE_INFINITY;const e=this.width;return t>e?Number.POSITIVE_INFINITY:this.timeline.duration*(t/e)}pxToFrame(t){return this.timeline.frameToTime(this.pxToTime(t))}}function R$(n,t){if(1&n){const e=yp();Ie(0,"button",9),Dt("click",function(){const o=Es(e).$implicit;return Cs(Un().setPlaybackRate(o))}),Ie(1,"span"),Ot(2),Oe()()}if(2&n){const e=t.$implicit,i=Un();Le(2),uo(i.formatPlaybackRateLabel(e))}}let O$=(()=>{class n{constructor(e){this._preferences=e,this._disposer=new Yo,this._sourceDisposer=new Yo(!0),this.playbackRateOptions=[1,.5,.25,.125]}set videoSource(e){this._source!==e&&(this._sourceDisposer.dispose(),this._source=e,this._source&&(this._source.loop=this._preferences.loopVideo,this._source.playbackRate=this._preferences.playbackRate))}ngOnDestroy(){this._disposer.dispose()}get playStateIcon(){return"play"==this._source?.state?"pause":"play_arrow"}togglePlay(){const e=Nt(this._source);"play"==e.state?e.stop():e.play()}get repeatStateIcon(){return this._preferences.loopVideo?"repeat_on":"repeat"}toggleRepeat(){const e=!this._preferences.loopVideo;this._preferences.loopVideo=e,Nt(this._source).loop=e}get playbackRate(){return this._preferences.playbackRate}formatPlaybackRateLabel(e){return`${e}x`}setPlaybackRate(e){this._preferences.playbackRate=e,Nt(this._source).playbackRate=e}}return n.\u0275fac=function(e){return new(e||n)(V(qu))},n.\u0275cmp=Wt({type:n,selectors:[["ui-video-controls"]],inputs:{videoSource:"videoSource"},decls:16,vars:5,consts:[[1,"toolbar"],["mat-icon-button",""],[3,"click"],[1,"spacer"],[1,"playbackRate"],["mat-button","",3,"matMenuTriggerFor"],["playbackRateMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","",1,"repeat",3,"click"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(Ie(0,"div",0)(1,"button",1)(2,"mat-icon",2),Dt("click",function(){return i.togglePlay()}),Ot(3),Oe()(),ct(4,"div",3),Ie(5,"div",4)(6,"button",5)(7,"mat-icon"),Ot(8,"speed"),Oe(),Ot(9),Oe(),Ie(10,"mat-menu",null,6),xn(12,R$,3,1,"button",7),Oe()(),Ie(13,"button",8),Dt("click",function(){return i.toggleRepeat()}),Ie(14,"mat-icon"),Ot(15),Oe()()()),2&e){const r=Vr(11);Le(3),uo(i.playStateIcon),Le(3),Xe("matMenuTriggerFor",r),Le(3),Er(" ",i.formatPlaybackRateLabel(i.playbackRate)," "),Le(3),Xe("ngForOf",i.playbackRateOptions),Le(3),uo(i.repeatStateIcon)}},dependencies:[vC,$g,Od,tM,ic,rM],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.spacer[_ngcontent-%COMP%]{flex-grow:1}.playbackRate[_ngcontent-%COMP%], .loop[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]}),n})();const P$=["canvas"];function F$(n,t){if(1&n&&ct(0,"ui-graph",6),2&n){const e=t.$implicit,i=Un();Xe("graphConfig",e)("timeline",i.visualTimeline)}}let N$=(()=>{class n{constructor(e,i){this.viewRef=e,this.zone=i,this._observer=new ResizeObserver(()=>{this.zone.run(()=>{this._updateCanvasSize()})}),this.timeHandlePosition={x:0,y:0},this._isPlaying=!1,this._wasPlayingBeforeDrag=!1,this.computeTimeHandleSnap=(r,o,s,a)=>{if(!this.visualTimeline)return{x:0,y:0};const c=this.canvas.nativeElement.getBoundingClientRect();let d=this.visualTimeline.pxToFrame(r.x-c.x);return d===Number.NEGATIVE_INFINITY?d=0:d===Number.POSITIVE_INFINITY&&(d=this.visualTimeline.timeline.frameCount),this.videoSource&&this.videoSource.seek(this.visualTimeline.timeline.timeToFrame(d)),{x:c.x+this.visualTimeline.frameToPx(d)-5,y:s.y}}}set recording(e){e!==this.recording&&(this._recording=e,this.videoSource=e?.videoSource.seekable?e?.videoSource:void 0,this.visualTimeline=e?.timeline?new A$(this.canvas.nativeElement.width,e.timeline):void 0,this._scheduleRender())}ngAfterViewInit(){this._observer.observe(this.viewRef.element.nativeElement),this.graphs.changes.subscribe(e=>{const i=this.canvas.nativeElement.width;this.graphs.forEach(r=>r.updateCanvasSize(i))}),this._updateCanvasSize()}ngAfterViewChecked(){const e="play"===this.videoSource?.state;if(e!=this._isPlaying&&(console.log("play state changes"),this._isPlaying=e,e)){let r=function(){if(!i.visualTimeline||!i.videoSource)return;const o=i.visualTimeline.timeToPx(i.videoSource.currentTime);isFinite(o)&&(i.timeHandlePosition={x:o,y:0}),i._isPlaying&&requestAnimationFrame(r)};const i=this;requestAnimationFrame(r)}}onDragTimeHandleStart(e){this._wasPlayingBeforeDrag="play"==this.videoSource?.state,this._wasPlayingBeforeDrag&&this.videoSource?.stop()}onDragTimeHandleEnd(e){this._wasPlayingBeforeDrag&&this.videoSource?.play()}_updateCanvasSize(){const e=this.canvas.nativeElement,i=Nt(this.canvas.nativeElement.parentElement),r=i.clientHeight,o=i.clientWidth;e.width==o&&e.height==r||(e.width=o,e.height=r,this.visualTimeline&&(this.visualTimeline.width=o),this._render(),this.graphs.forEach(s=>s.updateCanvasSize(o)))}_scheduleRender(){this._scheduledRender||(this._scheduledRender=requestAnimationFrame(()=>{this._render(),this._scheduledRender=void 0}))}_render(){const e=Nt(this.canvas.nativeElement.getContext("2d")),{width:i,height:r}=e.canvas;if(e.clearRect(0,0,i,r),!this._recording)return;const c=this._recording.timeline.frameCount,p=i/Math.min(Math.floor(i/10),c);e.beginPath();for(let E=.5+p;E<=i;E+=p){const S=Math.round(E);let R;R=S>=E?S-.5:S+.5,e.moveTo(R,0),e.lineTo(R,r-20)}e.strokeStyle="#EEEEEE",e.lineWidth=1,e.stroke();const g=Math.max(2,Math.floor(50/p))*p;e.strokeStyle="#DDDDDD",e.fillStyle="#222222",e.lineWidth=2,e.beginPath();for(let E=g;E<i;E+=g){const S=Math.round(E);e.moveTo(S,0),e.lineTo(S,r-15);const R=Math.floor(E/i*c);e.textAlign="center",e.fillText(`${R+1}`,S,r-5)}e.moveTo(1,0),e.lineTo(1,r-15),e.moveTo(i-1,0),e.lineTo(i-1,r-15),e.stroke()}}return n.\u0275fac=function(e){return new(e||n)(V(In),V(Ze))},n.\u0275cmp=Wt({type:n,selectors:[["ui-timeline-view"]],viewQuery:function(e,i){if(1&e&&(An(P$,5,lt),An(O1,5)),2&e){let r;Pt(r=Ft())&&(i.canvas=r.first),Pt(r=Ft())&&(i.graphs=r)}},inputs:{recording:"recording",viewConfig:"viewConfig"},decls:7,vars:4,consts:[[1,"timeline"],["canvas",""],["id","handle","cdkDrag","",3,"cdkDragConstrainPosition","cdkDragFreeDragPosition","cdkDragStarted","cdkDragReleased"],["appendOnly","","itemSize","50",1,"graph-viewport"],[3,"graphConfig","timeline",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"videoSource"],[3,"graphConfig","timeline"]],template:function(e,i){1&e&&(Ie(0,"div",0),ct(1,"canvas",null,1),Ie(3,"div",2),Dt("cdkDragStarted",function(o){return i.onDragTimeHandleStart(o)})("cdkDragReleased",function(o){return i.onDragTimeHandleEnd(o)}),Oe(),Ie(4,"cdk-virtual-scroll-viewport",3),xn(5,F$,1,2,"ui-graph",4),Oe()(),ct(6,"ui-video-controls",5)),2&e&&(Le(3),Xe("cdkDragConstrainPosition",i.computeTimeHandleSnap)("cdkDragFreeDragPosition",i.timeHandlePosition),Le(2),Xe("cdkVirtualForOf",i.viewConfig.graphs),Le(1),Xe("videoSource",i.videoSource))},dependencies:[O6,p4,b4,Hx,O$,O1],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.timeline[_ngcontent-%COMP%]{position:relative;display:flex;flex-grow:1}canvas[_ngcontent-%COMP%]{position:absolute}#handle[_ngcontent-%COMP%]{position:absolute;width:1px;background-color:red;background-clip:padding-box;border:5px solid transparent;border-bottom:5px solid red;top:0;bottom:20px;margin-left:-5px;z-index:3}.graph-viewport[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin-bottom:24px}ui-graph[_ngcontent-%COMP%]{display:flex}"]}),n})(),L$=(()=>{class n{constructor(e,i,r,o){this._route=e,this._router=i,this._recordingService=r,this._progressTracker=o,this.viewConfig={graphs:[]}}ngOnInit(){var e=this;this._route.params.subscribe(function(){var i=Fe(function*(r){const o=r.id,s=e._recordingService.loadRecoring(o);e._progressTracker.trackPromise(s);const a=yield s;o==e._route.snapshot.params.id?(e.recording?.dispose(),e.recording=a,e.viewConfig.graphs=a?.properties?.properties?.filter(c=>c.series.hasChangesInRange(0,1))?.map((c,d)=>({color:P1[d%P1.length],property:c}))??[]):a.dispose()});return function(r){return i.apply(this,arguments)}}())}ngOnDestroy(){this.recording?.dispose()}}return n.\u0275fac=function(e){return new(e||n)(V(bo),V(Dn),V(Km),V(Qm))},n.\u0275cmp=Wt({type:n,selectors:[["app-recording-viewer"]],decls:4,vars:3,consts:[[1,"left-panel"],[3,"source"],[1,"right-panel"],[3,"recording","viewConfig"]],template:function(e,i){1&e&&(Ie(0,"div",0),ct(1,"ui-video-view",1),Oe(),Ie(2,"div",2),ct(3,"ui-timeline-view",3),Oe()),2&e&&(Le(1),Xe("source",null==i.recording?null:i.recording.videoSource),Le(2),Xe("recording",i.recording)("viewConfig",i.viewConfig))},dependencies:[R1,N$],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:row;padding:8px;gap:8px}.left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 1 33%;align-content:stretch;align-items:stretch}.right-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 0 300px;gap:8px}ui-video-view[_ngcontent-%COMP%]{flex-grow:1}ui-timeline-view[_ngcontent-%COMP%]{flex-grow:1}"]}),n})();const P1=["#E51C23","#9C27B0","#5677FC","#00BCD4","#259B24","#CDDC39","#FFC107","#795548","#737373"],B$=["scriptInput"];function U$(n,t){if(1&n&&(Ie(0,"div",9),Ot(1),Oe()),2&n){const e=Un();Le(1),Er(" ",e.scriptErrorMessage," ")}}let V$=(()=>{class n{constructor(e,i){this._preferences=i,this._parser=new SD,this.testIsRecording=!1,this._scriptTestRunner=new xD(e,{beginRecording:()=>(this.testIsRecording=!0,Promise.resolve()),endRecording:()=>(this.testIsRecording=!0,Promise.resolve())}),this.script=i.gestureScript,this.parsedScript=this._parser.parse(this.script)}ngOnInit(){}get triggerName(){return"none"}get gestureSummary(){switch(this.parsedScript.status){case"empty":return"none";case"success":return`${this.parsedScript.script.length} steps`}return"?"}get gestureName(){return"none"}get useGestureScript(){return this._preferences.useGestureScript}set useGestureScript(e){this._preferences.useGestureScript=e}scriptChanged(){var e=this;return Fe(function*(){const i=e.scriptInput.nativeElement.value;if(e.script=i,yield $u(500),i==e.script)if(e.parsedScript=e._parser.parse(e.script),e.scriptErrorMessage=void 0,"error"==e.parsedScript.status)e.scriptErrorMessage=e.parsedScript.message;else if("success"==e.parsedScript.status){try{e._scriptTestRunner.validate(e.parsedScript.script)}catch(r){return void(e.scriptErrorMessage=r.message)}e._preferences.gestureScript=e.script}})()}testScript(){this._scriptTestRunner.run(this.script)}}return n.\u0275fac=function(e){return new(e||n)(V(go),V(qu))},n.\u0275cmp=Wt({type:n,selectors:[["ui-oscilloscope-config-view"]],viewQuery:function(e,i){if(1&e&&An(B$,5),2&e){let r;Pt(r=Ft())&&(i.scriptInput=r.first)}},decls:25,vars:8,consts:[["multi",""],["hideToggle",""],[1,"spacer"],[3,"ngModel","ngModelChange"],[1,"gestures"],["rows","10","placeholder","Enter script...",3,"value","change"],["scriptInput",""],["class","errorMessage",4,"ngIf"],["mat-icon-button","",3,"disabled","click"],[1,"errorMessage"]],template:function(e,i){1&e&&(Ie(0,"mat-accordion",0)(1,"mat-expansion-panel",1)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),Ot(4," Trigger "),Oe(),Ie(5,"mat-panel-description"),Ot(6),Oe()(),Ie(7,"p"),Ot(8,"Configure trigger"),Oe()(),Ie(9,"mat-expansion-panel",1)(10,"mat-expansion-panel-header")(11,"mat-panel-title"),Ot(12," Gesture "),Oe(),Ie(13,"mat-panel-description"),Ot(14),ct(15,"div",2),Ie(16,"mat-slide-toggle",3),Dt("ngModelChange",function(o){return i.useGestureScript=o}),Oe()()(),Ie(17,"div",4)(18,"textarea",5,6),Dt("change",function(){return i.scriptChanged()}),Ot(20,"      "),Oe(),xn(21,U$,2,1,"div",7),Ie(22,"button",8),Dt("click",function(){return i.testScript()}),Ie(23,"mat-icon"),Ot(24,"play_arrow"),Oe()()()()()),2&e&&(Le(6),Er(" ",i.triggerName," "),Le(8),Er(" ",i.gestureSummary," "),Le(2),Xe("ngModel",i.useGestureScript),Le(2),Yt("error",i.scriptErrorMessage),Xe("value",i.script),Le(3),Xe("ngIf",i.scriptErrorMessage),Le(1),Xe("disabled",i.scriptErrorMessage))},dependencies:[m6,WM,YM,p6,f6,Wo,$g,Od,S1,UT,W_],styles:["mat-panel-description[_ngcontent-%COMP%]{display:flex;flex-direction:row}mat-panel-description[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex-grow:1}.gestures[_ngcontent-%COMP%]{display:flex;flex-direction:column}textarea.error[_ngcontent-%COMP%]{outline:#D93025}.errorMessage[_ngcontent-%COMP%]{color:#d93025}"]}),n})();function H$(n,t){if(1&n&&(Fo(),ct(0,"circle",4)),2&n){const e=Un(),i=Vr(1);Hr("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),Ct("r",e._getCircleRadius())}}function j$(n,t){if(1&n&&(Fo(),ct(0,"circle",4)),2&n){const e=Un(),i=Vr(1);Hr("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),Ct("r",e._getCircleRadius())}}const $$=wo(class{constructor(n){this._elementRef=n}},"primary"),G$=new ve("mat-progress-spinner-default-options",{providedIn:"root",factory:function q$(){return{diameter:100}}});class Jr extends $${constructor(t,e,i,r,o,s,a,c){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=k.EMPTY,this.mode="determinate";const d=Jr._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),d.has(i.head)||d.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!o&&!o._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.color&&(this.color=this.defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&s&&c&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&c.run(()=>s.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=$n(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=$n(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,$n(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=yd(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Jr._diameters;let r=i.get(t);if(!r||!r.has(e)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),t.appendChild(o),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Jr._diameters=new WeakMap,Jr.\u0275fac=function(t){return new(t||Jr)(V(lt),V(yi),V(et,8),V(Fi,8),V(G$),V(Rn),V(nc),V(Ze))},Jr.\u0275cmp=Wt({type:Jr,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(Ct("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Hr("width",e.diameter,"px")("height",e.diameter,"px"),Yt("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[ze],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Fo(),Ie(0,"svg",0,1),xn(2,H$,1,11,"circle",2),xn(3,j$,1,9,"circle",3),Oe()),2&t&&(Hr("width",e.diameter,"px")("height",e.diameter,"px"),Xe("ngSwitch","indeterminate"===e.mode),Ct("viewBox",e._getViewBox()),Le(2),Xe("ngSwitchCase",!0),Le(1),Xe("ngSwitchCase",!1))},dependencies:[Nu,EC],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let Y$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({imports:[qt,po,qt]}),n})();function X$(n,t){1&n&&(Ie(0,"div"),ct(1,"mat-spinner"),Oe())}function K$(n,t){if(1&n&&(Ie(0,"div")(1,"div",4)(2,"mat-icon"),Ot(3,"error_outline"),Oe(),Ie(4,"div",5)(5,"div",6),Ot(6),Oe(),ct(7,"div",7),Oe()()()),2&n){const e=Un(2);Le(6),Er(" ",e.errorTitle," ")}}function Z$(n,t){1&n&&(Ie(0,"div")(1,"div",8)(2,"mat-icon"),Ot(3,"warning_amber"),Oe(),Ie(4,"div",5)(5,"div",6),Ot(6,"Not authorized."),Oe(),Ie(7,"div",7),Ot(8,"Authorize USB debugging on the device."),Oe()()()())}function Q$(n,t){if(1&n&&(Ie(0,"div",2),xn(1,X$,2,0,"div",3),xn(2,K$,8,1,"div",3),xn(3,Z$,9,0,"div",3),Oe()),2&n){const e=Un();Le(1),Xe("ngIf","connecting"==e.connectionState.type),Le(1),Xe("ngIf","error"==e.connectionState.type),Le(1),Xe("ngIf","unauthorized"==e.connectionState.type)}}function J$(n,t){if(1&n&&(Ie(0,"div",9)(1,"div",10),ct(2,"ui-video-view",11),Oe(),Ie(3,"div",12),ct(4,"ui-oscilloscope-config-view"),Oe()()),2&n){const e=Un();Le(2),Xe("source",e.liveVideo)}}const eG=[{path:"",redirectTo:"live",pathMatch:"full"},{path:"live",component:(()=>{class n{constructor(e){this._motionConnection=e,this._disposer=new Yo,this._isConnected=!1}ngOnInit(){this._disposer.addListener(this._motionConnection,"state-changed",e=>{this.isConnected="connected"==e.detail.type}),this.isConnected="connected"==this._motionConnection.state.type}ngOnDestroy(){this._disposer.dispose(),this.isConnected=!1}get connectionState(){return this._motionConnection.state}get isConnected(){return this._isConnected}set isConnected(e){this._isConnected!=e&&(this._isConnected=e,this.isConnected?this._onConnect():this._onDisconnect())}_onConnect(){this.liveVideo=this._motionConnection.createLiveViewSource()}_onDisconnect(){this.liveVideo?.dispose()}get errorTitle(){if("error"!==this._motionConnection.state.type)return"";switch(this._motionConnection.state.detail){case"deviceNotFound":return"Device not found";case"processNotFound":return"Process not found";case"windowNotFound":return"Window not found"}return this._motionConnection.state.message??"Unknwon error"}}return n.\u0275fac=function(e){return new(e||n)(V(go))},n.\u0275cmp=Wt({type:n,selectors:[["app-motion-viewer"]],decls:2,vars:2,consts:[["class","connection",4,"ngIf"],["class","contents",4,"ngIf"],[1,"connection"],[4,"ngIf"],[1,"message","error"],[1,"content"],[1,"title"],[1,"subtitle"],[1,"message","warning"],[1,"contents"],[1,"left-panel"],[3,"source"],[1,"right-panel"]],template:function(e,i){1&e&&(xn(0,Q$,4,3,"div",0),xn(1,J$,5,1,"div",1)),2&e&&(Xe("ngIf",!i.isConnected),Le(1),Xe("ngIf",i.isConnected))},dependencies:[Wo,Od,R1,V$,Jr],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:row}.connection[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:row;padding:8px;gap:8px;align-items:center;justify-content:center}.connection[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;flex-direction:row}.connection[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{align-self:center;justify-self:center;font-size:64px;width:64px;height:64px;color:#f9ab00}.connection[_ngcontent-%COMP%]   .message.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:16px;color:#d93025}.connection[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.connection[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px}.connection[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-top:4px}.contents[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:row;padding:8px;gap:8px}.left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 1 33%;align-content:stretch;align-items:stretch}.right-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 0 300px;gap:8px}ui-video-view[_ngcontent-%COMP%]{flex-grow:1}"]}),n})()},{path:"recording",component:L$}];let tG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n}),n.\u0275inj=at({providers:[{provide:fo,useFactory:t=>new nG(t),deps:[yl]},{provide:RS,useFactory:t=>new iG(t),deps:[yl]}],imports:[jS.forRoot(eG),jS]}),n})();class nG extends sC{constructor(t){super(t,"")}prepareExternalUrl(t){const e=super.prepareExternalUrl(t),i=e.match(/([^?]*)(\?.*)?/);return"motion.html"+(i?(i[2]??"")+(i[1]??""):e)}}let iG=(()=>{class n{constructor(e){this.platformLocation=e}get currentQueryParams(){return this.platformLocation?.search??""}shouldProcessUrl(e){return!0}extract(e){return this.preserveSearch(e)}merge(e,i){return e}preserveSearch(e){const i=new URLSearchParams(this.currentQueryParams);for(const r of n.queryParameters){const o=i.get(r),s=e.queryParams[r];o&&!s&&(e.queryParams[r]=o)}return e}}return n.queryParameters=["serial","pid","pname","wid"],n})(),rG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=dt({type:n,bootstrap:[Z4]}),n.\u0275inj=at({providers:[{provide:go,useFactory:()=>go.createFromUrlParams(new URLSearchParams(window.location.search))},{provide:DD,useValue:Wm.createStorage},Km,Qm,qu],imports:[GC,Kz,tH,Cx,NH,xx,oM,S$,tG,X4,Y$]}),n})();(function r2(){$E=!1})(),RB().bootstrapModule(rG).catch(n=>{if(`${n}`.startsWith("InvalidUrlParams")){const t=new URL(window.location.toString());return t.pathname=t.pathname.replace("motion.html","index.html"),void window.location.replace(t)}console.error(n)})},280:Ee=>{"use strict";Ee.exports=function Ce(J,D){for(var Y=new Array(arguments.length-1),T=0,B=2,k=!0;B<arguments.length;)Y[T++]=arguments[B++];return new Promise(function(f,j){Y[T]=function(q){if(k)if(k=!1,q)j(q);else{for(var H=new Array(arguments.length-1),W=0;W<H.length;)H[W++]=arguments[W];f.apply(null,H)}};try{J.apply(D||null,Y)}catch(X){k&&(k=!1,j(X))}})}},39:(Ee,Ce)=>{"use strict";var J=Ce;J.length=function(C){var f=C.length;if(!f)return 0;for(var j=0;--f%4>1&&"="===C.charAt(f);)++j;return Math.ceil(3*C.length)/4-j};for(var D=new Array(64),Y=new Array(123),T=0;T<64;)Y[D[T]=T<26?T+65:T<52?T+71:T<62?T-4:T-59|43]=T++;J.encode=function(C,f,j){for(var l,X=null,q=[],H=0,W=0;f<j;){var u=C[f++];switch(W){case 0:q[H++]=D[u>>2],l=(3&u)<<4,W=1;break;case 1:q[H++]=D[l|u>>4],l=(15&u)<<2,W=2;break;case 2:q[H++]=D[l|u>>6],q[H++]=D[63&u],W=0}H>8191&&((X||(X=[])).push(String.fromCharCode.apply(String,q)),H=0)}return W&&(q[H++]=D[l],q[H++]=61,1===W&&(q[H++]=61)),X?(H&&X.push(String.fromCharCode.apply(String,q.slice(0,H))),X.join("")):String.fromCharCode.apply(String,q.slice(0,H))};var B="invalid encoding";J.decode=function(C,f,j){for(var H,X=j,q=0,W=0;W<C.length;){var l=C.charCodeAt(W++);if(61===l&&q>1)break;if(void 0===(l=Y[l]))throw Error(B);switch(q){case 0:H=l,q=1;break;case 1:f[j++]=H<<2|(48&l)>>4,H=l,q=2;break;case 2:f[j++]=(15&H)<<4|(60&l)>>2,H=l,q=3;break;case 3:f[j++]=(3&H)<<6|l,q=0}}if(1===q)throw Error(B);return j-X},J.test=function(C){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(C)}},889:Ee=>{"use strict";function Ce(){this._listeners={}}Ee.exports=Ce,Ce.prototype.on=function(D,Y,T){return(this._listeners[D]||(this._listeners[D]=[])).push({fn:Y,ctx:T||this}),this},Ce.prototype.off=function(D,Y){if(void 0===D)this._listeners={};else if(void 0===Y)this._listeners[D]=[];else for(var T=this._listeners[D],B=0;B<T.length;)T[B].fn===Y?T.splice(B,1):++B;return this},Ce.prototype.emit=function(D){var Y=this._listeners[D];if(Y){for(var T=[],B=1;B<arguments.length;)T.push(arguments[B++]);for(B=0;B<Y.length;)Y[B].fn.apply(Y[B++].ctx,T)}return this}},530:Ee=>{"use strict";function Ce(B){return typeof Float32Array<"u"?function(){var k=new Float32Array([-0]),C=new Uint8Array(k.buffer),f=128===C[3];function j(W,l,u){k[0]=W,l[u]=C[0],l[u+1]=C[1],l[u+2]=C[2],l[u+3]=C[3]}function X(W,l,u){k[0]=W,l[u]=C[3],l[u+1]=C[2],l[u+2]=C[1],l[u+3]=C[0]}function q(W,l){return C[0]=W[l],C[1]=W[l+1],C[2]=W[l+2],C[3]=W[l+3],k[0]}function H(W,l){return C[3]=W[l],C[2]=W[l+1],C[1]=W[l+2],C[0]=W[l+3],k[0]}B.writeFloatLE=f?j:X,B.writeFloatBE=f?X:j,B.readFloatLE=f?q:H,B.readFloatBE=f?H:q}():function(){function k(f,j,X,q){var H=j<0?1:0;if(H&&(j=-j),0===j)f(1/j>0?0:2147483648,X,q);else if(isNaN(j))f(2143289344,X,q);else if(j>34028234663852886e22)f((H<<31|2139095040)>>>0,X,q);else if(j<11754943508222875e-54)f((H<<31|Math.round(j/1401298464324817e-60))>>>0,X,q);else{var W=Math.floor(Math.log(j)/Math.LN2);f((H<<31|W+127<<23|8388607&Math.round(j*Math.pow(2,-W)*8388608))>>>0,X,q)}}function C(f,j,X){var q=f(j,X),H=2*(q>>31)+1,W=q>>>23&255,l=8388607&q;return 255===W?l?NaN:H*(1/0):0===W?1401298464324817e-60*H*l:H*Math.pow(2,W-150)*(l+8388608)}B.writeFloatLE=k.bind(null,J),B.writeFloatBE=k.bind(null,D),B.readFloatLE=C.bind(null,Y),B.readFloatBE=C.bind(null,T)}(),typeof Float64Array<"u"?function(){var k=new Float64Array([-0]),C=new Uint8Array(k.buffer),f=128===C[7];function j(W,l,u){k[0]=W,l[u]=C[0],l[u+1]=C[1],l[u+2]=C[2],l[u+3]=C[3],l[u+4]=C[4],l[u+5]=C[5],l[u+6]=C[6],l[u+7]=C[7]}function X(W,l,u){k[0]=W,l[u]=C[7],l[u+1]=C[6],l[u+2]=C[5],l[u+3]=C[4],l[u+4]=C[3],l[u+5]=C[2],l[u+6]=C[1],l[u+7]=C[0]}function q(W,l){return C[0]=W[l],C[1]=W[l+1],C[2]=W[l+2],C[3]=W[l+3],C[4]=W[l+4],C[5]=W[l+5],C[6]=W[l+6],C[7]=W[l+7],k[0]}function H(W,l){return C[7]=W[l],C[6]=W[l+1],C[5]=W[l+2],C[4]=W[l+3],C[3]=W[l+4],C[2]=W[l+5],C[1]=W[l+6],C[0]=W[l+7],k[0]}B.writeDoubleLE=f?j:X,B.writeDoubleBE=f?X:j,B.readDoubleLE=f?q:H,B.readDoubleBE=f?H:q}():function(){function k(f,j,X,q,H,W){var l=q<0?1:0;if(l&&(q=-q),0===q)f(0,H,W+j),f(1/q>0?0:2147483648,H,W+X);else if(isNaN(q))f(0,H,W+j),f(2146959360,H,W+X);else if(q>17976931348623157e292)f(0,H,W+j),f((l<<31|2146435072)>>>0,H,W+X);else{var u;if(q<22250738585072014e-324)f((u=q/5e-324)>>>0,H,W+j),f((l<<31|u/4294967296)>>>0,H,W+X);else{var h=Math.floor(Math.log(q)/Math.LN2);1024===h&&(h=1023),f(4503599627370496*(u=q*Math.pow(2,-h))>>>0,H,W+j),f((l<<31|h+1023<<20|1048576*u&1048575)>>>0,H,W+X)}}}function C(f,j,X,q,H){var W=f(q,H+j),l=f(q,H+X),u=2*(l>>31)+1,h=l>>>20&2047,m=4294967296*(1048575&l)+W;return 2047===h?m?NaN:u*(1/0):0===h?5e-324*u*m:u*Math.pow(2,h-1075)*(m+4503599627370496)}B.writeDoubleLE=k.bind(null,J,0,4),B.writeDoubleBE=k.bind(null,D,4,0),B.readDoubleLE=C.bind(null,Y,0,4),B.readDoubleBE=C.bind(null,T,4,0)}(),B}function J(B,k,C){k[C]=255&B,k[C+1]=B>>>8&255,k[C+2]=B>>>16&255,k[C+3]=B>>>24}function D(B,k,C){k[C]=B>>>24,k[C+1]=B>>>16&255,k[C+2]=B>>>8&255,k[C+3]=255&B}function Y(B,k){return(B[k]|B[k+1]<<8|B[k+2]<<16|B[k+3]<<24)>>>0}function T(B,k){return(B[k]<<24|B[k+1]<<16|B[k+2]<<8|B[k+3])>>>0}Ee.exports=Ce(Ce)},716:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Ee){}return null}module.exports=inquire},479:Ee=>{"use strict";Ee.exports=function Ce(J,D,Y){var T=Y||8192,B=T>>>1,k=null,C=T;return function(j){if(j<1||j>B)return J(j);C+j>T&&(k=J(T),C=0);var X=D.call(k,C,C+=j);return 7&C&&(C=1+(7|C)),X}}},768:(Ee,Ce)=>{"use strict";var J=Ce;J.length=function(Y){for(var T=0,B=0,k=0;k<Y.length;++k)(B=Y.charCodeAt(k))<128?T+=1:B<2048?T+=2:55296==(64512&B)&&56320==(64512&Y.charCodeAt(k+1))?(++k,T+=4):T+=3;return T},J.read=function(Y,T,B){if(B-T<1)return"";for(var X,C=null,f=[],j=0;T<B;)(X=Y[T++])<128?f[j++]=X:X>191&&X<224?f[j++]=(31&X)<<6|63&Y[T++]:X>239&&X<365?(X=((7&X)<<18|(63&Y[T++])<<12|(63&Y[T++])<<6|63&Y[T++])-65536,f[j++]=55296+(X>>10),f[j++]=56320+(1023&X)):f[j++]=(15&X)<<12|(63&Y[T++])<<6|63&Y[T++],j>8191&&((C||(C=[])).push(String.fromCharCode.apply(String,f)),j=0);return C?(j&&C.push(String.fromCharCode.apply(String,f.slice(0,j))),C.join("")):String.fromCharCode.apply(String,f.slice(0,j))},J.write=function(Y,T,B){for(var C,f,k=B,j=0;j<Y.length;++j)(C=Y.charCodeAt(j))<128?T[B++]=C:C<2048?(T[B++]=C>>6|192,T[B++]=63&C|128):55296==(64512&C)&&56320==(64512&(f=Y.charCodeAt(j+1)))?(++j,T[B++]=(C=65536+((1023&C)<<10)+(1023&f))>>18|240,T[B++]=C>>12&63|128,T[B++]=C>>6&63|128,T[B++]=63&C|128):(T[B++]=C>>12|224,T[B++]=C>>6&63|128,T[B++]=63&C|128);return B-k}},343:(Ee,Ce)=>{"use strict";Ce.byteLength=function f(l){var u=C(l),m=u[1];return 3*(u[0]+m)/4-m},Ce.toByteArray=function X(l){var u,P,h=C(l),m=h[0],_=h[1],w=new Y(function j(l,u,h){return 3*(u+h)/4-h}(0,m,_)),b=0,M=_>0?m-4:m;for(P=0;P<M;P+=4)u=D[l.charCodeAt(P)]<<18|D[l.charCodeAt(P+1)]<<12|D[l.charCodeAt(P+2)]<<6|D[l.charCodeAt(P+3)],w[b++]=u>>16&255,w[b++]=u>>8&255,w[b++]=255&u;return 2===_&&(u=D[l.charCodeAt(P)]<<2|D[l.charCodeAt(P+1)]>>4,w[b++]=255&u),1===_&&(u=D[l.charCodeAt(P)]<<10|D[l.charCodeAt(P+1)]<<4|D[l.charCodeAt(P+2)]>>2,w[b++]=u>>8&255,w[b++]=255&u),w},Ce.fromByteArray=function W(l){for(var u,h=l.length,m=h%3,_=[],w=16383,b=0,M=h-m;b<M;b+=w)_.push(H(l,b,b+w>M?M:b+w));return 1===m?_.push(J[(u=l[h-1])>>2]+J[u<<4&63]+"=="):2===m&&_.push(J[(u=(l[h-2]<<8)+l[h-1])>>10]+J[u>>4&63]+J[u<<2&63]+"="),_.join("")};for(var J=[],D=[],Y=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0,k=T.length;B<k;++B)J[B]=T[B],D[T.charCodeAt(B)]=B;function C(l){var u=l.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=l.indexOf("=");return-1===h&&(h=u),[h,h===u?0:4-h%4]}function q(l){return J[l>>18&63]+J[l>>12&63]+J[l>>6&63]+J[63&l]}function H(l,u,h){for(var _=[],w=u;w<h;w+=3)_.push(q((l[w]<<16&16711680)+(l[w+1]<<8&65280)+(255&l[w+2])));return _.join("")}D["-".charCodeAt(0)]=62,D["_".charCodeAt(0)]=63},172:(Ee,Ce,J)=>{"use strict";var D=J(343),Y=J(461),T="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ce.Buffer=f,Ce.SlowBuffer=function w(x){return+x!=x&&(x=0),f.alloc(+x)},Ce.INSPECT_MAX_BYTES=50;var B=2147483647;function C(x){if(x>B)throw new RangeError('The value "'+x+'" is invalid for option "size"');var y=new Uint8Array(x);return Object.setPrototypeOf(y,f.prototype),y}function f(x,y,v){if("number"==typeof x){if("string"==typeof y)throw new TypeError('The "string" argument must be of type string. Received type number');return H(x)}return j(x,y,v)}function j(x,y,v){if("string"==typeof x)return function W(x,y){if(("string"!=typeof y||""===y)&&(y="utf8"),!f.isEncoding(y))throw new TypeError("Unknown encoding: "+y);var v=0|b(x,y),O=C(v),Z=O.write(x,y);return Z!==v&&(O=O.slice(0,Z)),O}(x,y);if(ArrayBuffer.isView(x))return function u(x){if(F(x,Uint8Array)){var y=new Uint8Array(x);return h(y.buffer,y.byteOffset,y.byteLength)}return l(x)}(x);if(null==x)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(F(x,ArrayBuffer)||x&&F(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(x,SharedArrayBuffer)||x&&F(x.buffer,SharedArrayBuffer)))return h(x,y,v);if("number"==typeof x)throw new TypeError('The "value" argument must not be of type number. Received type number');var O=x.valueOf&&x.valueOf();if(null!=O&&O!==x)return f.from(O,y,v);var Z=function m(x){if(f.isBuffer(x)){var y=0|_(x.length),v=C(y);return 0===v.length||x.copy(v,0,0,y),v}return void 0!==x.length?"number"!=typeof x.length||L(x.length)?C(0):l(x):"Buffer"===x.type&&Array.isArray(x.data)?l(x.data):void 0}(x);if(Z)return Z;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof x[Symbol.toPrimitive])return f.from(x[Symbol.toPrimitive]("string"),y,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}function X(x){if("number"!=typeof x)throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function H(x){return X(x),C(x<0?0:0|_(x))}function l(x){for(var y=x.length<0?0:0|_(x.length),v=C(y),O=0;O<y;O+=1)v[O]=255&x[O];return v}function h(x,y,v){if(y<0||x.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<y+(v||0))throw new RangeError('"length" is outside of buffer bounds');var O;return O=void 0===y&&void 0===v?new Uint8Array(x):void 0===v?new Uint8Array(x,y):new Uint8Array(x,y,v),Object.setPrototypeOf(O,f.prototype),O}function _(x){if(x>=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");return 0|x}function b(x,y){if(f.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||F(x,ArrayBuffer))return x.byteLength;if("string"!=typeof x)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);var v=x.length,O=arguments.length>2&&!0===arguments[2];if(!O&&0===v)return 0;for(var Z=!1;;)switch(y){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return $(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return Ae(x).length;default:if(Z)return O?-1:$(x).length;y=(""+y).toLowerCase(),Z=!0}}function M(x,y,v){var O=!1;if((void 0===y||y<0)&&(y=0),y>this.length||((void 0===v||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(y>>>=0))return"";for(x||(x="utf8");;)switch(x){case"hex":return A(this,y,v);case"utf8":case"utf-8":return Kt(this,y,v);case"ascii":return Qe(this,y,v);case"latin1":case"binary":return U(this,y,v);case"base64":return Ht(this,y,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,y,v);default:if(O)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),O=!0}}function P(x,y,v){var O=x[y];x[y]=x[v],x[v]=O}function K(x,y,v,O,Z){if(0===x.length)return-1;if("string"==typeof v?(O=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),L(v=+v)&&(v=Z?0:x.length-1),v<0&&(v=x.length+v),v>=x.length){if(Z)return-1;v=x.length-1}else if(v<0){if(!Z)return-1;v=0}if("string"==typeof y&&(y=f.from(y,O)),f.isBuffer(y))return 0===y.length?-1:ie(x,y,v,O,Z);if("number"==typeof y)return y&=255,"function"==typeof Uint8Array.prototype.indexOf?Z?Uint8Array.prototype.indexOf.call(x,y,v):Uint8Array.prototype.lastIndexOf.call(x,y,v):ie(x,[y],v,O,Z);throw new TypeError("val must be string, number or Buffer")}function ie(x,y,v,O,Z){var _t,pe=1,be=x.length,gt=y.length;if(void 0!==O&&("ucs2"===(O=String(O).toLowerCase())||"ucs-2"===O||"utf16le"===O||"utf-16le"===O)){if(x.length<2||y.length<2)return-1;pe=2,be/=2,gt/=2,v/=2}function xt(hr,Wi){return 1===pe?hr[Wi]:hr.readUInt16BE(Wi*pe)}if(Z){var rn=-1;for(_t=v;_t<be;_t++)if(xt(x,_t)===xt(y,-1===rn?0:_t-rn)){if(-1===rn&&(rn=_t),_t-rn+1===gt)return rn*pe}else-1!==rn&&(_t-=_t-rn),rn=-1}else for(v+gt>be&&(v=be-gt),_t=v;_t>=0;_t--){for(var Lt=!0,Mi=0;Mi<gt;Mi++)if(xt(x,_t+Mi)!==xt(y,Mi)){Lt=!1;break}if(Lt)return _t}return-1}function he(x,y,v,O){v=Number(v)||0;var Z=x.length-v;O?(O=Number(O))>Z&&(O=Z):O=Z;var pe=y.length;O>pe/2&&(O=pe/2);for(var be=0;be<O;++be){var gt=parseInt(y.substr(2*be,2),16);if(L(gt))return be;x[v+be]=gt}return be}function ye(x,y,v,O){return Ue($(y,x.length-v),x,v,O)}function ge(x,y,v,O){return Ue(function Q(x){for(var y=[],v=0;v<x.length;++v)y.push(255&x.charCodeAt(v));return y}(y),x,v,O)}function De(x,y,v,O){return Ue(Ae(y),x,v,O)}function vt(x,y,v,O){return Ue(function ue(x,y){for(var v,O,pe=[],be=0;be<x.length&&!((y-=2)<0);++be)O=(v=x.charCodeAt(be))>>8,pe.push(v%256),pe.push(O);return pe}(y,x.length-v),x,v,O)}function Ht(x,y,v){return D.fromByteArray(0===y&&v===x.length?x:x.slice(y,v))}function Kt(x,y,v){v=Math.min(x.length,v);for(var O=[],Z=y;Z<v;){var xt,_t,rn,Lt,pe=x[Z],be=null,gt=pe>239?4:pe>223?3:pe>191?2:1;if(Z+gt<=v)switch(gt){case 1:pe<128&&(be=pe);break;case 2:128==(192&(xt=x[Z+1]))&&(Lt=(31&pe)<<6|63&xt)>127&&(be=Lt);break;case 3:_t=x[Z+2],128==(192&(xt=x[Z+1]))&&128==(192&_t)&&(Lt=(15&pe)<<12|(63&xt)<<6|63&_t)>2047&&(Lt<55296||Lt>57343)&&(be=Lt);break;case 4:_t=x[Z+2],rn=x[Z+3],128==(192&(xt=x[Z+1]))&&128==(192&_t)&&128==(192&rn)&&(Lt=(15&pe)<<18|(63&xt)<<12|(63&_t)<<6|63&rn)>65535&&Lt<1114112&&(be=Lt)}null===be?(be=65533,gt=1):be>65535&&(O.push((be-=65536)>>>10&1023|55296),be=56320|1023&be),O.push(be),Z+=gt}return function Jt(x){var y=x.length;if(y<=4096)return String.fromCharCode.apply(String,x);for(var v="",O=0;O<y;)v+=String.fromCharCode.apply(String,x.slice(O,O+=4096));return v}(O)}function Qe(x,y,v){var O="";v=Math.min(x.length,v);for(var Z=y;Z<v;++Z)O+=String.fromCharCode(127&x[Z]);return O}function U(x,y,v){var O="";v=Math.min(x.length,v);for(var Z=y;Z<v;++Z)O+=String.fromCharCode(x[Z]);return O}function A(x,y,v){var O=x.length;(!y||y<0)&&(y=0),(!v||v<0||v>O)&&(v=O);for(var Z="",pe=y;pe<v;++pe)Z+=fe[x[pe]];return Z}function z(x,y,v){for(var O=x.slice(y,v),Z="",pe=0;pe<O.length-1;pe+=2)Z+=String.fromCharCode(O[pe]+256*O[pe+1]);return Z}function N(x,y,v){if(x%1!=0||x<0)throw new RangeError("offset is not uint");if(x+y>v)throw new RangeError("Trying to access beyond buffer length")}function I(x,y,v,O,Z,pe){if(!f.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>Z||y<pe)throw new RangeError('"value" argument is out of bounds');if(v+O>x.length)throw new RangeError("Index out of range")}function ne(x,y,v,O,Z,pe){if(v+O>x.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function re(x,y,v,O,Z){return y=+y,v>>>=0,Z||ne(x,0,v,4),Y.write(x,y,v,O,23,4),v+4}function ce(x,y,v,O,Z){return y=+y,v>>>=0,Z||ne(x,0,v,8),Y.write(x,y,v,O,52,8),v+8}Ce.kMaxLength=B,!(f.TYPED_ARRAY_SUPPORT=function k(){try{var x=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(x,y),42===x.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(x,y,v){return j(x,y,v)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(x,y,v){return function q(x,y,v){return X(x),x<=0?C(x):void 0!==y?"string"==typeof v?C(x).fill(y,v):C(x).fill(y):C(x)}(x,y,v)},f.allocUnsafe=function(x){return H(x)},f.allocUnsafeSlow=function(x){return H(x)},f.isBuffer=function(y){return null!=y&&!0===y._isBuffer&&y!==f.prototype},f.compare=function(y,v){if(F(y,Uint8Array)&&(y=f.from(y,y.offset,y.byteLength)),F(v,Uint8Array)&&(v=f.from(v,v.offset,v.byteLength)),!f.isBuffer(y)||!f.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===v)return 0;for(var O=y.length,Z=v.length,pe=0,be=Math.min(O,Z);pe<be;++pe)if(y[pe]!==v[pe]){O=y[pe],Z=v[pe];break}return O<Z?-1:Z<O?1:0},f.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(y,v){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(0===y.length)return f.alloc(0);var O;if(void 0===v)for(v=0,O=0;O<y.length;++O)v+=y[O].length;var Z=f.allocUnsafe(v),pe=0;for(O=0;O<y.length;++O){var be=y[O];if(F(be,Uint8Array))pe+be.length>Z.length?f.from(be).copy(Z,pe):Uint8Array.prototype.set.call(Z,be,pe);else{if(!f.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(Z,pe)}pe+=be.length}return Z},f.byteLength=b,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var y=this.length;if(y%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var v=0;v<y;v+=2)P(this,v,v+1);return this},f.prototype.swap32=function(){var y=this.length;if(y%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var v=0;v<y;v+=4)P(this,v,v+3),P(this,v+1,v+2);return this},f.prototype.swap64=function(){var y=this.length;if(y%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var v=0;v<y;v+=8)P(this,v,v+7),P(this,v+1,v+6),P(this,v+2,v+5),P(this,v+3,v+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var y=this.length;return 0===y?"":0===arguments.length?Kt(this,0,y):M.apply(this,arguments)},f.prototype.equals=function(y){if(!f.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y||0===f.compare(this,y)},f.prototype.inspect=function(){var y="",v=Ce.INSPECT_MAX_BYTES;return y=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(y+=" ... "),"<Buffer "+y+">"},T&&(f.prototype[T]=f.prototype.inspect),f.prototype.compare=function(y,v,O,Z,pe){if(F(y,Uint8Array)&&(y=f.from(y,y.offset,y.byteLength)),!f.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(void 0===v&&(v=0),void 0===O&&(O=y?y.length:0),void 0===Z&&(Z=0),void 0===pe&&(pe=this.length),v<0||O>y.length||Z<0||pe>this.length)throw new RangeError("out of range index");if(Z>=pe&&v>=O)return 0;if(Z>=pe)return-1;if(v>=O)return 1;if(this===y)return 0;for(var be=(pe>>>=0)-(Z>>>=0),gt=(O>>>=0)-(v>>>=0),xt=Math.min(be,gt),_t=this.slice(Z,pe),rn=y.slice(v,O),Lt=0;Lt<xt;++Lt)if(_t[Lt]!==rn[Lt]){be=_t[Lt],gt=rn[Lt];break}return be<gt?-1:gt<be?1:0},f.prototype.includes=function(y,v,O){return-1!==this.indexOf(y,v,O)},f.prototype.indexOf=function(y,v,O){return K(this,y,v,O,!0)},f.prototype.lastIndexOf=function(y,v,O){return K(this,y,v,O,!1)},f.prototype.write=function(y,v,O,Z){if(void 0===v)Z="utf8",O=this.length,v=0;else if(void 0===O&&"string"==typeof v)Z=v,O=this.length,v=0;else{if(!isFinite(v))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");v>>>=0,isFinite(O)?(O>>>=0,void 0===Z&&(Z="utf8")):(Z=O,O=void 0)}var pe=this.length-v;if((void 0===O||O>pe)&&(O=pe),y.length>0&&(O<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");for(var be=!1;;)switch(Z){case"hex":return he(this,y,v,O);case"utf8":case"utf-8":return ye(this,y,v,O);case"ascii":case"latin1":case"binary":return ge(this,y,v,O);case"base64":return De(this,y,v,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,y,v,O);default:if(be)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),be=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(y,v){var O=this.length;(y=~~y)<0?(y+=O)<0&&(y=0):y>O&&(y=O),(v=void 0===v?O:~~v)<0?(v+=O)<0&&(v=0):v>O&&(v=O),v<y&&(v=y);var Z=this.subarray(y,v);return Object.setPrototypeOf(Z,f.prototype),Z},f.prototype.readUintLE=f.prototype.readUIntLE=function(y,v,O){y>>>=0,v>>>=0,O||N(y,v,this.length);for(var Z=this[y],pe=1,be=0;++be<v&&(pe*=256);)Z+=this[y+be]*pe;return Z},f.prototype.readUintBE=f.prototype.readUIntBE=function(y,v,O){y>>>=0,v>>>=0,O||N(y,v,this.length);for(var Z=this[y+--v],pe=1;v>0&&(pe*=256);)Z+=this[y+--v]*pe;return Z},f.prototype.readUint8=f.prototype.readUInt8=function(y,v){return y>>>=0,v||N(y,1,this.length),this[y]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(y,v){return y>>>=0,v||N(y,2,this.length),this[y]|this[y+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(y,v){return y>>>=0,v||N(y,2,this.length),this[y]<<8|this[y+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(y,v){return y>>>=0,v||N(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+16777216*this[y+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(y,v){return y>>>=0,v||N(y,4,this.length),16777216*this[y]+(this[y+1]<<16|this[y+2]<<8|this[y+3])},f.prototype.readIntLE=function(y,v,O){y>>>=0,v>>>=0,O||N(y,v,this.length);for(var Z=this[y],pe=1,be=0;++be<v&&(pe*=256);)Z+=this[y+be]*pe;return Z>=(pe*=128)&&(Z-=Math.pow(2,8*v)),Z},f.prototype.readIntBE=function(y,v,O){y>>>=0,v>>>=0,O||N(y,v,this.length);for(var Z=v,pe=1,be=this[y+--Z];Z>0&&(pe*=256);)be+=this[y+--Z]*pe;return be>=(pe*=128)&&(be-=Math.pow(2,8*v)),be},f.prototype.readInt8=function(y,v){return y>>>=0,v||N(y,1,this.length),128&this[y]?-1*(255-this[y]+1):this[y]},f.prototype.readInt16LE=function(y,v){y>>>=0,v||N(y,2,this.length);var O=this[y]|this[y+1]<<8;return 32768&O?4294901760|O:O},f.prototype.readInt16BE=function(y,v){y>>>=0,v||N(y,2,this.length);var O=this[y+1]|this[y]<<8;return 32768&O?4294901760|O:O},f.prototype.readInt32LE=function(y,v){return y>>>=0,v||N(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},f.prototype.readInt32BE=function(y,v){return y>>>=0,v||N(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},f.prototype.readFloatLE=function(y,v){return y>>>=0,v||N(y,4,this.length),Y.read(this,y,!0,23,4)},f.prototype.readFloatBE=function(y,v){return y>>>=0,v||N(y,4,this.length),Y.read(this,y,!1,23,4)},f.prototype.readDoubleLE=function(y,v){return y>>>=0,v||N(y,8,this.length),Y.read(this,y,!0,52,8)},f.prototype.readDoubleBE=function(y,v){return y>>>=0,v||N(y,8,this.length),Y.read(this,y,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(y,v,O,Z){y=+y,v>>>=0,O>>>=0,Z||I(this,y,v,O,Math.pow(2,8*O)-1,0);var be=1,gt=0;for(this[v]=255&y;++gt<O&&(be*=256);)this[v+gt]=y/be&255;return v+O},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(y,v,O,Z){y=+y,v>>>=0,O>>>=0,Z||I(this,y,v,O,Math.pow(2,8*O)-1,0);var be=O-1,gt=1;for(this[v+be]=255&y;--be>=0&&(gt*=256);)this[v+be]=y/gt&255;return v+O},f.prototype.writeUint8=f.prototype.writeUInt8=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,1,255,0),this[v]=255&y,v+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,2,65535,0),this[v]=255&y,this[v+1]=y>>>8,v+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,2,65535,0),this[v]=y>>>8,this[v+1]=255&y,v+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,4,4294967295,0),this[v+3]=y>>>24,this[v+2]=y>>>16,this[v+1]=y>>>8,this[v]=255&y,v+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,4,4294967295,0),this[v]=y>>>24,this[v+1]=y>>>16,this[v+2]=y>>>8,this[v+3]=255&y,v+4},f.prototype.writeIntLE=function(y,v,O,Z){if(y=+y,v>>>=0,!Z){var pe=Math.pow(2,8*O-1);I(this,y,v,O,pe-1,-pe)}var be=0,gt=1,xt=0;for(this[v]=255&y;++be<O&&(gt*=256);)y<0&&0===xt&&0!==this[v+be-1]&&(xt=1),this[v+be]=(y/gt>>0)-xt&255;return v+O},f.prototype.writeIntBE=function(y,v,O,Z){if(y=+y,v>>>=0,!Z){var pe=Math.pow(2,8*O-1);I(this,y,v,O,pe-1,-pe)}var be=O-1,gt=1,xt=0;for(this[v+be]=255&y;--be>=0&&(gt*=256);)y<0&&0===xt&&0!==this[v+be+1]&&(xt=1),this[v+be]=(y/gt>>0)-xt&255;return v+O},f.prototype.writeInt8=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,1,127,-128),y<0&&(y=255+y+1),this[v]=255&y,v+1},f.prototype.writeInt16LE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,2,32767,-32768),this[v]=255&y,this[v+1]=y>>>8,v+2},f.prototype.writeInt16BE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,2,32767,-32768),this[v]=y>>>8,this[v+1]=255&y,v+2},f.prototype.writeInt32LE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,4,2147483647,-2147483648),this[v]=255&y,this[v+1]=y>>>8,this[v+2]=y>>>16,this[v+3]=y>>>24,v+4},f.prototype.writeInt32BE=function(y,v,O){return y=+y,v>>>=0,O||I(this,y,v,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[v]=y>>>24,this[v+1]=y>>>16,this[v+2]=y>>>8,this[v+3]=255&y,v+4},f.prototype.writeFloatLE=function(y,v,O){return re(this,y,v,!0,O)},f.prototype.writeFloatBE=function(y,v,O){return re(this,y,v,!1,O)},f.prototype.writeDoubleLE=function(y,v,O){return ce(this,y,v,!0,O)},f.prototype.writeDoubleBE=function(y,v,O){return ce(this,y,v,!1,O)},f.prototype.copy=function(y,v,O,Z){if(!f.isBuffer(y))throw new TypeError("argument should be a Buffer");if(O||(O=0),!Z&&0!==Z&&(Z=this.length),v>=y.length&&(v=y.length),v||(v=0),Z>0&&Z<O&&(Z=O),Z===O||0===y.length||0===this.length)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),y.length-v<Z-O&&(Z=y.length-v+O);var pe=Z-O;return this===y&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(v,O,Z):Uint8Array.prototype.set.call(y,this.subarray(O,Z),v),pe},f.prototype.fill=function(y,v,O,Z){if("string"==typeof y){if("string"==typeof v?(Z=v,v=0,O=this.length):"string"==typeof O&&(Z=O,O=this.length),void 0!==Z&&"string"!=typeof Z)throw new TypeError("encoding must be a string");if("string"==typeof Z&&!f.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(1===y.length){var pe=y.charCodeAt(0);("utf8"===Z&&pe<128||"latin1"===Z)&&(y=pe)}}else"number"==typeof y?y&=255:"boolean"==typeof y&&(y=Number(y));if(v<0||this.length<v||this.length<O)throw new RangeError("Out of range index");if(O<=v)return this;var be;if(v>>>=0,O=void 0===O?this.length:O>>>0,y||(y=0),"number"==typeof y)for(be=v;be<O;++be)this[be]=y;else{var gt=f.isBuffer(y)?y:f.from(y,Z),xt=gt.length;if(0===xt)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(be=0;be<O-v;++be)this[be+v]=gt[be%xt]}return this};var ee=/[^+/0-9A-Za-z-_]/g;function $(x,y){y=y||1/0;for(var v,O=x.length,Z=null,pe=[],be=0;be<O;++be){if((v=x.charCodeAt(be))>55295&&v<57344){if(!Z){if(v>56319){(y-=3)>-1&&pe.push(239,191,189);continue}if(be+1===O){(y-=3)>-1&&pe.push(239,191,189);continue}Z=v;continue}if(v<56320){(y-=3)>-1&&pe.push(239,191,189),Z=v;continue}v=65536+(Z-55296<<10|v-56320)}else Z&&(y-=3)>-1&&pe.push(239,191,189);if(Z=null,v<128){if((y-=1)<0)break;pe.push(v)}else if(v<2048){if((y-=2)<0)break;pe.push(v>>6|192,63&v|128)}else if(v<65536){if((y-=3)<0)break;pe.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((y-=4)<0)break;pe.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return pe}function Ae(x){return D.toByteArray(function We(x){if((x=(x=x.split("=")[0]).trim().replace(ee,"")).length<2)return"";for(;x.length%4!=0;)x+="=";return x}(x))}function Ue(x,y,v,O){for(var Z=0;Z<O&&!(Z+v>=y.length||Z>=x.length);++Z)y[Z+v]=x[Z];return Z}function F(x,y){return x instanceof y||null!=x&&null!=x.constructor&&null!=x.constructor.name&&x.constructor.name===y.name}function L(x){return x!=x}var fe=function(){for(var x="0123456789abcdef",y=new Array(256),v=0;v<16;++v)for(var O=16*v,Z=0;Z<16;++Z)y[O+Z]=x[v]+x[Z];return y}()},69:Ee=>{"use strict";var D,Ce="object"==typeof Reflect?Reflect:null,J=Ce&&"function"==typeof Ce.apply?Ce.apply:function(M,P,K){return Function.prototype.apply.call(M,P,K)};D=Ce&&"function"==typeof Ce.ownKeys?Ce.ownKeys:Object.getOwnPropertySymbols?function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:function(M){return Object.getOwnPropertyNames(M)};var T=Number.isNaN||function(M){return M!=M};function B(){B.init.call(this)}Ee.exports=B,Ee.exports.once=function m(b,M){return new Promise(function(P,K){function ie(ye){b.removeListener(M,he),K(ye)}function he(){"function"==typeof b.removeListener&&b.removeListener("error",ie),P([].slice.call(arguments))}w(b,M,he,{once:!0}),"error"!==M&&function _(b,M,P){"function"==typeof b.on&&w(b,"error",M,P)}(b,ie,{once:!0})})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var k=10;function C(b){if("function"!=typeof b)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}function f(b){return void 0===b._maxListeners?B.defaultMaxListeners:b._maxListeners}function j(b,M,P,K){var ie,he,ye;if(C(P),void 0===(he=b._events)?(he=b._events=Object.create(null),b._eventsCount=0):(void 0!==he.newListener&&(b.emit("newListener",M,P.listener?P.listener:P),he=b._events),ye=he[M]),void 0===ye)ye=he[M]=P,++b._eventsCount;else if("function"==typeof ye?ye=he[M]=K?[P,ye]:[ye,P]:K?ye.unshift(P):ye.push(P),(ie=f(b))>0&&ye.length>ie&&!ye.warned){ye.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+ye.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=b,ge.type=M,ge.count=ye.length,function Y(b){console&&console.warn&&console.warn(b)}(ge)}return b}function X(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q(b,M,P){var K={fired:!1,wrapFn:void 0,target:b,type:M,listener:P},ie=X.bind(K);return ie.listener=P,K.wrapFn=ie,ie}function H(b,M,P){var K=b._events;if(void 0===K)return[];var ie=K[M];return void 0===ie?[]:"function"==typeof ie?P?[ie.listener||ie]:[ie]:P?function h(b){for(var M=new Array(b.length),P=0;P<M.length;++P)M[P]=b[P].listener||b[P];return M}(ie):l(ie,ie.length)}function W(b){var M=this._events;if(void 0!==M){var P=M[b];if("function"==typeof P)return 1;if(void 0!==P)return P.length}return 0}function l(b,M){for(var P=new Array(M),K=0;K<M;++K)P[K]=b[K];return P}function w(b,M,P,K){if("function"==typeof b.on)K.once?b.once(M,P):b.on(M,P);else{if("function"!=typeof b.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b);b.addEventListener(M,function ie(he){K.once&&b.removeEventListener(M,ie),P(he)})}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(b){if("number"!=typeof b||b<0||T(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");k=b}}),B.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(M){if("number"!=typeof M||M<0||T(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this},B.prototype.getMaxListeners=function(){return f(this)},B.prototype.emit=function(M){for(var P=[],K=1;K<arguments.length;K++)P.push(arguments[K]);var ie="error"===M,he=this._events;if(void 0!==he)ie=ie&&void 0===he.error;else if(!ie)return!1;if(ie){var ye;if(P.length>0&&(ye=P[0]),ye instanceof Error)throw ye;var ge=new Error("Unhandled error."+(ye?" ("+ye.message+")":""));throw ge.context=ye,ge}var De=he[M];if(void 0===De)return!1;if("function"==typeof De)J(De,this,P);else{var vt=De.length,Ht=l(De,vt);for(K=0;K<vt;++K)J(Ht[K],this,P)}return!0},B.prototype.on=B.prototype.addListener=function(M,P){return j(this,M,P,!1)},B.prototype.prependListener=function(M,P){return j(this,M,P,!0)},B.prototype.once=function(M,P){return C(P),this.on(M,q(this,M,P)),this},B.prototype.prependOnceListener=function(M,P){return C(P),this.prependListener(M,q(this,M,P)),this},B.prototype.off=B.prototype.removeListener=function(M,P){var K,ie,he,ye,ge;if(C(P),void 0===(ie=this._events))return this;if(void 0===(K=ie[M]))return this;if(K===P||K.listener===P)0==--this._eventsCount?this._events=Object.create(null):(delete ie[M],ie.removeListener&&this.emit("removeListener",M,K.listener||P));else if("function"!=typeof K){for(he=-1,ye=K.length-1;ye>=0;ye--)if(K[ye]===P||K[ye].listener===P){ge=K[ye].listener,he=ye;break}if(he<0)return this;0===he?K.shift():function u(b,M){for(;M+1<b.length;M++)b[M]=b[M+1];b.pop()}(K,he),1===K.length&&(ie[M]=K[0]),void 0!==ie.removeListener&&this.emit("removeListener",M,ge||P)}return this},B.prototype.removeAllListeners=function(M){var P,K,ie;if(void 0===(K=this._events))return this;if(void 0===K.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==K[M]&&(0==--this._eventsCount?this._events=Object.create(null):delete K[M]),this;if(0===arguments.length){var ye,he=Object.keys(K);for(ie=0;ie<he.length;++ie)"removeListener"!==(ye=he[ie])&&this.removeAllListeners(ye);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(P=K[M]))this.removeListener(M,P);else if(void 0!==P)for(ie=P.length-1;ie>=0;ie--)this.removeListener(M,P[ie]);return this},B.prototype.listeners=function(M){return H(this,M,!0)},B.prototype.rawListeners=function(M){return H(this,M,!1)},B.listenerCount=function(b,M){return"function"==typeof b.listenerCount?b.listenerCount(M):W.call(b,M)},B.prototype.listenerCount=W,B.prototype.eventNames=function(){return this._eventsCount>0?D(this._events):[]}},461:(Ee,Ce)=>{Ce.read=function(J,D,Y,T,B){var k,C,f=8*B-T-1,j=(1<<f)-1,X=j>>1,q=-7,H=Y?B-1:0,W=Y?-1:1,l=J[D+H];for(H+=W,k=l&(1<<-q)-1,l>>=-q,q+=f;q>0;k=256*k+J[D+H],H+=W,q-=8);for(C=k&(1<<-q)-1,k>>=-q,q+=T;q>0;C=256*C+J[D+H],H+=W,q-=8);if(0===k)k=1-X;else{if(k===j)return C?NaN:1/0*(l?-1:1);C+=Math.pow(2,T),k-=X}return(l?-1:1)*C*Math.pow(2,k-T)},Ce.write=function(J,D,Y,T,B,k){var C,f,j,X=8*k-B-1,q=(1<<X)-1,H=q>>1,W=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,l=T?0:k-1,u=T?1:-1,h=D<0||0===D&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(f=isNaN(D)?1:0,C=q):(C=Math.floor(Math.log(D)/Math.LN2),D*(j=Math.pow(2,-C))<1&&(C--,j*=2),(D+=C+H>=1?W/j:W*Math.pow(2,1-H))*j>=2&&(C++,j/=2),C+H>=q?(f=0,C=q):C+H>=1?(f=(D*j-1)*Math.pow(2,B),C+=H):(f=D*Math.pow(2,H-1)*Math.pow(2,B),C=0));B>=8;J[Y+l]=255&f,l+=u,f/=256,B-=8);for(C=C<<B|f,X+=B;X>0;J[Y+l]=255&C,l+=u,C/=256,X-=8);J[Y+l-u]|=128*h}},894:Ee=>{Ee.exports="function"==typeof Object.create?function(J,D){D&&(J.super_=D,J.prototype=Object.create(D.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}))}:function(J,D){if(D){J.super_=D;var Y=function(){};Y.prototype=D.prototype,J.prototype=new Y,J.prototype.constructor=J}}},40:function(Ee,Ce,J){Ee.exports=function(D){"use strict";function Y(U){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(U)}function T(U,A){if(!(U instanceof A))throw new TypeError("Cannot call a class as a function")}function B(U,A){for(var z=0;z<A.length;z++){var N=A[z];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(U,N.key,N)}}function k(U,A,z){return A&&B(U.prototype,A),z&&B(U,z),U}function C(U,A,z){return A in U?Object.defineProperty(U,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):U[A]=z,U}function f(U,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(A&&A.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),A&&X(U,A)}function j(U){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(U)}function X(U,A){return(X=Object.setPrototypeOf||function(z,N){return z.__proto__=N,z})(U,A)}function q(U){if(void 0===U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function H(U,A){if(A&&("object"==typeof A||"function"==typeof A))return A;if(void 0!==A)throw new TypeError("Derived constructors may only return object or undefined");return q(U)}function W(U){var A=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var z,N=j(U);if(A){var I=j(this).constructor;z=Reflect.construct(N,arguments,I)}else z=N.apply(this,arguments);return H(this,z)}}function u(U,A){if(U){if("string"==typeof U)return h(U,A);var z=Object.prototype.toString.call(U).slice(8,-1);return"Object"===z&&U.constructor&&(z=U.constructor.name),"Map"===z||"Set"===z?Array.from(U):"Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?h(U,A):void 0}}function h(U,A){(null==A||A>U.length)&&(A=U.length);for(var z=0,N=new Array(A);z<A;z++)N[z]=U[z];return N}function m(U,A){var z=typeof Symbol<"u"&&U[Symbol.iterator]||U["@@iterator"];if(!z){if(Array.isArray(U)||(z=u(U))||A&&U&&"number"==typeof U.length){z&&(U=z);var N=0,I=function(){};return{s:I,n:function(){return N>=U.length?{done:!0}:{done:!1,value:U[N++]}},e:function(ee){throw ee},f:I}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ne,re=!0,ce=!1;return{s:function(){z=z.call(U)},n:function(){var ee=z.next();return re=ee.done,ee},e:function(ee){ce=!0,ne=ee},f:function(){try{re||null==z.return||z.return()}finally{if(ce)throw ne}}}}var _,w;function b(U){if(_){for(var A=arguments.length,z=new Array(A>1?A-1:0),N=1;N<A;N++)z[N-1]=arguments[N];_.apply(void 0,[U].concat(z))}}function M(U){if(w){for(var A=arguments.length,z=new Array(A>1?A-1:0),N=1;N<A;N++)z[N-1]=arguments[N];w.apply(void 0,[U].concat(z))}}var P=function(){function U(A){T(this,U),this.payload=A,this.nri=(96&this.payload[0])>>5,this.ntype=31&this.payload[0],this.isvcl=1==this.ntype||5==this.ntype,this.stype="",this.isfmb=!1}return k(U,[{key:"toString",value:function(){return"".concat(U.type(this),": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.ntype}},{key:"isKeyframe",value:function(){return this.ntype===U.IDR}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var A=new Uint8Array(this.getSize());return new DataView(A.buffer).setUint32(0,this.getSize()-4),A.set(this.getPayload(),4),A}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var A;return C(A={},U.IDR,"IDR"),C(A,U.SEI,"SEI"),C(A,U.SPS,"SPS"),C(A,U.PPS,"PPS"),C(A,U.NDR,"NDR"),C(A,U.AUD,"AUD"),A}},{key:"type",value:function(A){return A.ntype in U.TYPES?U.TYPES[A.ntype]:"UNKNOWN"}}]),U}();function K(U,A){var z=new Uint8Array((0|U.byteLength)+(0|A.byteLength));return z.set(U,0),z.set(A,0|U.byteLength),z}var ie=function(){function U(A){T(this,U),this.data=A,this.index=0,this.bitLength=8*A.byteLength}return k(U,[{key:"setData",value:function(A){this.data=A,this.index=0,this.bitLength=8*A.byteLength}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(A){if(this.bitsAvailable<A)return!1;this.index+=A}},{key:"readBits",value:function(A){return this.getBits(A,this.index,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"getBits",value:function(A,z){var N=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.bitsAvailable<A)return 0;var I=z%8,ne=this.data[z/8|0]&255>>>I,re=8-I;if(re>=A)return N&&(this.index+=A),ne>>re-A;N&&(this.index+=re);var ce=A-re;return ne<<ce|this.getBits(ce,z+re,N)}},{key:"skipLZ",value:function(){var A;for(A=0;A<this.bitLength-this.index;++A)if(0!==this.getBits(1,this.index+A,!1))return this.index+=A,A;return A}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var A=this.skipLZ();return this.readBits(A+1)-1}},{key:"readEG",value:function(){var A=this.readUEG();return 1&A?1+A>>>1:-1*(A>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),U}(),he=function(){function U(A){T(this,U),this.remuxer=A,this.track=A.mp4track}return k(U,[{key:"parseSPS",value:function(A){var z=U.readSPS(new Uint8Array(A));this.track.fps=z.fps,this.track.width=z.width,this.track.height=z.height,this.track.sps=[new Uint8Array(A)],this.track.codec="avc1.";for(var N=new DataView(A.buffer,A.byteOffset+1,4),I=0;I<3;++I){var ne=N.getUint8(I).toString(16);ne.length<2&&(ne="0"+ne),this.track.codec+=ne}}},{key:"parsePPS",value:function(A){this.track.pps=[new Uint8Array(A)]}},{key:"parseNAL",value:function(A){if(!A)return!1;var z=!1;switch(A.type()){case P.IDR:case P.NDR:z=!0;break;case P.PPS:this.track.pps||(this.parsePPS(A.getPayload()),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),z=!0;break;case P.SPS:this.track.sps||(this.parseSPS(A.getPayload()),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),z=!0;break;case P.AUD:b("AUD - ignoing");break;case P.SEI:b("SEI - ignoing")}return z}}],[{key:"extractNALu",value:function(A){for(var z,N,I=0,ne=A.byteLength,re=0,ce=[],ee=0;I<ne;)switch(z=A[I++],re){case 0:0===z&&(re=1);break;case 1:re=0===z?2:0;break;case 2:case 3:0===z?re=3:(1===z&&I<ne&&(ee!=I-re-1&&ce.push(A.subarray(ee,I-re-1)),ee=I),re=0)}return ee<ne&&(N=A.subarray(ee,ne)),[ce,N]}},{key:"skipScalingList",value:function(A,z){for(var N=8,I=8,ne=0;ne<z;ne++)0!==I&&(I=(N+A.readEG()+256)%256),N=0===I?N:I}},{key:"readSPS",value:function(A){var z,N,I,ne,re,ce,ee=new ie(A),We=0,$=0,Q=0,ue=0,Ae=1,Ue=0;ee.readUByte();for(var F=[],L=A.byteLength,fe=1;fe<L;fe++)fe+2<L&&3===ee.readBits(24,!1)?(F.push(ee.readBits(8)),F.push(ee.readBits(8)),fe+=2,ee.readBits(8)):F.push(ee.readBits(8));if(ee.setData(new Uint8Array(F)),z=ee.readUByte(),ee.readBits(5),ee.skipBits(3),ee.readUByte(),ee.skipUEG(),100===z||110===z||122===z||244===z||44===z||83===z||86===z||118===z||128===z){var x=ee.readUEG();if(3===x&&ee.skipBits(1),ee.skipUEG(),ee.skipUEG(),ee.skipBits(1),ee.readBoolean()){ce=3!==x?8:12;for(var y=0;y<ce;++y)ee.readBoolean()&&U.skipScalingList(ee,y<6?16:64)}}ee.skipUEG();var v=ee.readUEG();if(0===v)ee.readUEG();else if(1===v){ee.skipBits(1),ee.skipEG(),ee.skipEG(),N=ee.readUEG();for(var O=0;O<N;++O)ee.skipEG()}if(ee.skipUEG(),ee.skipBits(1),I=ee.readUEG(),ne=ee.readUEG(),0===(re=ee.readBits(1))&&ee.skipBits(1),ee.skipBits(1),ee.readBoolean()&&(We=ee.readUEG(),$=ee.readUEG(),Q=ee.readUEG(),ue=ee.readUEG()),ee.readBoolean()){if(ee.readBoolean()){var Z;switch(ee.readUByte()){case 1:Z=[1,1];break;case 2:Z=[12,11];break;case 3:Z=[10,11];break;case 4:Z=[16,11];break;case 5:Z=[40,33];break;case 6:Z=[24,11];break;case 7:Z=[20,11];break;case 8:Z=[32,11];break;case 9:Z=[80,33];break;case 10:Z=[18,11];break;case 11:Z=[15,11];break;case 12:Z=[64,33];break;case 13:Z=[160,99];break;case 14:Z=[4,3];break;case 15:Z=[3,2];break;case 16:Z=[2,1];break;case 255:Z=[ee.readUByte()<<8|ee.readUByte(),ee.readUByte()<<8|ee.readUByte()]}Z&&Z[0]>0&&Z[1]>0&&(Ae=Z[0]/Z[1])}if(ee.readBoolean()&&ee.skipBits(1),ee.readBoolean()&&(ee.skipBits(4),ee.readBoolean()&&ee.skipBits(24)),ee.readBoolean()&&(ee.skipUEG(),ee.skipUEG()),ee.readBoolean()){var pe=ee.readUInt(),be=ee.readUInt();ee.readBoolean()&&(Ue=be/(2*pe))}}return{fps:Ue>0?Ue:void 0,width:Math.ceil((16*(I+1)-2*We-2*$)*Ae),height:(2-re)*(ne+1)*16-(re?2:4)*(Q+ue)}}},{key:"parseHeader",value:function(A){var z=new ie(A.getPayload());z.readUByte(),A.isfmb=0===z.readUEG(),A.stype=z.readUEG()}}]),U}(),ye=function(){function U(A){T(this,U),this.remuxer=A,this.track=A.mp4track}return k(U,[{key:"extractAAC",value:function(A){var z,N,I=0,ne=A.byteLength,re=[];if(!U.isAACPattern(A))return M("Invalid ADTS audio format"),re;for(z=U.getHeaderLength(A),this.aacHeader||(this.aacHeader=A.subarray(0,z));I<ne;)N=U.getFrameLength(A),re.push(A.subarray(z,N)),A=A.slice(N),I+=N;return re}},{key:"setAACConfig",value:function(){var A,z,N,I=new Uint8Array(2),ne=this.aacHeader;ne&&(z=(60&ne[2])>>>2,N=(1&ne[2])<<2,N|=(192&ne[3])>>>6,I[0]=(A=1+((192&ne[2])>>>6))<<3,I[0]|=(14&z)>>1,I[1]|=(1&z)<<7,I[1]|=N<<3,this.track.codec="mp4a.40."+A,this.track.channelCount=N,this.track.config=I,this.remuxer.readyToDecode=!0)}}],[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(A){return 1&A[1]?7:9}},{key:"getFrameLength",value:function(A){return(3&A[3])<<11|A[4]<<3|(224&A[5])>>>5}},{key:"isAACPattern",value:function(A){return 255===A[0]&&240==(240&A[1])&&0==(6&A[1])}}]),U}(),ge=function(){function U(A){T(this,U),this.listener={},this.type=""|A}return k(U,[{key:"on",value:function(A,z){return this.listener[A]||(this.listener[A]=[]),this.listener[A].push(z),!0}},{key:"off",value:function(A,z){if(this.listener[A]){var N=this.listener[A].indexOf(z);return N>-1&&this.listener[A].splice(N,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(A,z){return!!this.listener[A]&&(this.listener[A].map(function(N){N.apply(null,[z])}),!0)}}]),U}(),De=function(){function U(){T(this,U)}return k(U,null,[{key:"init",value:function(){var A;for(A in U.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})U.types.hasOwnProperty(A)&&(U.types[A]=[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)]);var z=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),N=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);U.HDLR_TYPES={video:z,audio:N};var I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ne=new Uint8Array([0,0,0,0,0,0,0,0]);U.STTS=U.STSC=U.STCO=ne,U.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),U.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),U.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var re=new Uint8Array([105,115,111,109]),ce=new Uint8Array([97,118,99,49]),ee=new Uint8Array([0,0,0,1]);U.FTYP=U.box(U.types.ftyp,re,ee,re,ce),U.DINF=U.box(U.types.dinf,U.box(U.types.dref,I))}},{key:"box",value:function(A){for(var z=arguments.length,N=new Array(z>1?z-1:0),I=1;I<z;I++)N[I-1]=arguments[I];for(var ne,re=8,ce=N.length,ee=ce;ce--;)re+=N[ce].byteLength;for((ne=new Uint8Array(re))[0]=re>>24&255,ne[1]=re>>16&255,ne[2]=re>>8&255,ne[3]=255&re,ne.set(A,4),ce=0,re=8;ce<ee;++ce)ne.set(N[ce],re),re+=N[ce].byteLength;return ne}},{key:"hdlr",value:function(A){return U.box(U.types.hdlr,U.HDLR_TYPES[A])}},{key:"mdat",value:function(A){return U.box(U.types.mdat,A)}},{key:"mdhd",value:function(A,z){return U.box(U.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,A>>24&255,A>>16&255,A>>8&255,255&A,z>>24,z>>16&255,z>>8&255,255&z,85,196,0,0]))}},{key:"mdia",value:function(A){return U.box(U.types.mdia,U.mdhd(A.timescale,A.duration),U.hdlr(A.type),U.minf(A))}},{key:"mfhd",value:function(A){return U.box(U.types.mfhd,new Uint8Array([0,0,0,0,A>>24,A>>16&255,A>>8&255,255&A]))}},{key:"minf",value:function(A){return U.box(U.types.minf,"audio"===A.type?U.box(U.types.smhd,U.SMHD):U.box(U.types.vmhd,U.VMHD),U.DINF,U.stbl(A))}},{key:"moof",value:function(A,z,N){return U.box(U.types.moof,U.mfhd(A),U.traf(N,z))}},{key:"moov",value:function(A,z,N){for(var I=A.length,ne=[];I--;)ne[I]=U.trak(A[I]);return U.box.apply(null,[U.types.moov,U.mvhd(N,z)].concat(ne).concat(U.mvex(A)))}},{key:"mvex",value:function(A){for(var z=A.length,N=[];z--;)N[z]=U.trex(A[z]);return U.box.apply(null,[U.types.mvex].concat(N))}},{key:"mvhd",value:function(A,z){var N=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,A>>24&255,A>>16&255,A>>8&255,255&A,z>>24&255,z>>16&255,z>>8&255,255&z,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return U.box(U.types.mvhd,N)}},{key:"sdtp",value:function(A){var z,N,I=A.samples||[],ne=new Uint8Array(4+I.length);for(N=0;N<I.length;N++)ne[N+4]=(z=I[N].flags).dependsOn<<4|z.isDependedOn<<2|z.hasRedundancy;return U.box(U.types.sdtp,ne)}},{key:"stbl",value:function(A){return U.box(U.types.stbl,U.stsd(A),U.box(U.types.stts,U.STTS),U.box(U.types.stsc,U.STSC),U.box(U.types.stsz,U.STSZ),U.box(U.types.stco,U.STCO))}},{key:"avc1",value:function(A){var z,N,I,ne=[],re=[];for(z=0;z<A.sps.length;z++)I=(N=A.sps[z]).byteLength,ne.push(I>>>8&255),ne.push(255&I),ne=ne.concat(Array.prototype.slice.call(N));for(z=0;z<A.pps.length;z++)I=(N=A.pps[z]).byteLength,re.push(I>>>8&255),re.push(255&I),re=re.concat(Array.prototype.slice.call(N));var ce=U.box(U.types.avcC,new Uint8Array([1,ne[3],ne[4],ne[5],255,224|A.sps.length].concat(ne).concat([A.pps.length]).concat(re))),ee=A.width,We=A.height;return U.box(U.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ee>>8&255,255&ee,We>>8&255,255&We,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ce,U.box(U.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(A){var z=A.config.byteLength,N=new Uint8Array(26+z+3);return N.set([0,0,0,0,3,23+z,0,1,0,4,15+z,64,21,0,0,0,0,0,0,0,0,0,0,0,5,z]),N.set(A.config,26),N.set([6,1,2],26+z),N}},{key:"mp4a",value:function(A){var z=A.audiosamplerate;return U.box(U.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,A.channelCount,0,16,0,0,0,0,z>>8&255,255&z,0,0]),U.box(U.types.esds,U.esds(A)))}},{key:"stsd",value:function(A){return U.box(U.types.stsd,U.STSD,"audio"===A.type?U.mp4a(A):U.avc1(A))}},{key:"tkhd",value:function(A){var z=A.id,N=A.duration,I=A.width,ne=A.height,re=A.volume;return U.box(U.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,z>>24&255,z>>16&255,z>>8&255,255&z,0,0,0,0,N>>24,N>>16&255,N>>8&255,255&N,0,0,0,0,0,0,0,0,0,0,0,0,re>>0&255,re%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,I>>8&255,255&I,0,0,ne>>8&255,255&ne,0,0]))}},{key:"traf",value:function(A,z){var N=U.sdtp(A),I=A.id;return U.box(U.types.traf,U.box(U.types.tfhd,new Uint8Array([0,0,0,0,I>>24,I>>16&255,I>>8&255,255&I])),U.box(U.types.tfdt,new Uint8Array([0,0,0,0,z>>24,z>>16&255,z>>8&255,255&z])),U.trun(A,N.length+16+16+8+16+8+8),N)}},{key:"trak",value:function(A){return A.duration=A.duration||4294967295,U.box(U.types.trak,U.tkhd(A),U.mdia(A))}},{key:"trex",value:function(A){var z=A.id;return U.box(U.types.trex,new Uint8Array([0,0,0,0,z>>24,z>>16&255,z>>8&255,255&z,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(A,z){var N,I,ne,re,ce,ee,We=A.samples||[],$=We.length,Q=12+16*$,ue=new Uint8Array(Q);for(ue.set([0,0,15,1,$>>>24&255,$>>>16&255,$>>>8&255,255&$,(z+=8+Q)>>>24&255,z>>>16&255,z>>>8&255,255&z],0),N=0;N<$;N++)ne=(I=We[N]).duration,ue.set([ne>>>24&255,ne>>>16&255,ne>>>8&255,255&ne,(re=I.size)>>>24&255,re>>>16&255,re>>>8&255,255&re,(ce=I.flags).isLeading<<2|ce.dependsOn,ce.isDependedOn<<6|ce.hasRedundancy<<4|ce.paddingValue<<1|ce.isNonSync,61440&ce.degradPrio,15&ce.degradPrio,(ee=I.cts)>>>24&255,ee>>>16&255,ee>>>8&255,255&ee],12+16*N);return U.box(U.types.trun,ue)}},{key:"initSegment",value:function(A,z,N){U.types||U.init();var I,ne=U.moov(A,z,N);return(I=new Uint8Array(U.FTYP.byteLength+ne.byteLength)).set(U.FTYP),I.set(ne,U.FTYP.byteLength),I}}]),U}(),vt=1,Ht=function(){function U(){T(this,U)}return k(U,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!(!this.readyToDecode||!this.samples.length)||null}}],[{key:"getTrackID",value:function(){return vt++}}]),U}(),Kt=function(U){f(z,U);var A=W(z);function z(N){var I;return T(this,z),(I=A.call(this)).readyToDecode=!1,I.nextDts=0,I.dts=0,I.mp4track={id:Ht.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:N,duration:N,samples:[],config:"",codec:""},I.samples=[],I.aac=new ye(q(I)),I}return k(z,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"remux",value:function(N){if(N.length>0)for(var I=0;I<N.length;I++){var ne=N[I],re=ne.units,ce=re.byteLength;this.samples.push({units:re,size:ce,duration:ne.duration}),this.mp4track.len+=ce,this.readyToDecode||this.aac.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var N,I,ne=new Uint8Array(this.mp4track.len),re=0,ce=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var ee=this.samples.shift();(I=ee.duration)<=0?(b("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(I)),this.mp4track.len-=ee.size):(this.nextDts+=I,N={size:ee.size,duration:I,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},ne.set(ee.units,re),re+=ee.size,ce.push(N))}return ce.length?new Uint8Array(ne.buffer,0,this.mp4track.len):null}},{key:"getAacParser",value:function(){return this.aac}}]),z}(Ht),yn=function(U){f(z,U);var A=W(z);function z(N){var I;return T(this,z),(I=A.call(this)).readyToDecode=!1,I.nextDts=0,I.dts=0,I.mp4track={id:Ht.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:N,duration:N,samples:[]},I.samples=[],I.h264=new he(q(I)),I}return k(z,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0}},{key:"remux",value:function(N){var I,ne=m(N);try{for(ne.s();!(I=ne.n()).done;){var re,ce=I.value,ee=[],We=0,$=m(ce.units);try{for($.s();!(re=$.n()).done;){var Q=re.value;this.h264.parseNAL(Q)&&(ee.push(Q),We+=Q.getSize())}}catch(ue){$.e(ue)}finally{$.f()}ee.length>0&&this.readyToDecode&&(this.mp4track.len+=We,this.samples.push({units:ee,size:We,keyFrame:ce.keyFrame,duration:ce.duration,compositionTimeOffset:ce.compositionTimeOffset}))}}catch(ue){ne.e(ue)}finally{ne.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var N,I,ne=new Uint8Array(this.mp4track.len),re=0,ce=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var ee=this.samples.shift(),We=ee.units;if((I=ee.duration)<=0)b("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(I)),this.mp4track.len-=ee.size;else{this.nextDts+=I,N={size:ee.size,duration:I,cts:ee.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:ee.keyFrame?0:1,dependsOn:ee.keyFrame?2:1}};var $,Q=m(We);try{for(Q.s();!($=Q.n()).done;){var ue=$.value;ne.set(ue.getData(),re),re+=ue.getSize()}}catch(Ae){Q.e(Ae)}finally{Q.f()}ce.push(N)}}return ce.length?new Uint8Array(ne.buffer,0,this.mp4track.len):null}}]),z}(Ht),Jt=function(U){f(z,U);var A=W(z);function z(N){var I;return T(this,z),(I=A.call(this,"remuxer")).initialized=!1,I.trackTypes=[],I.tracks={},I.seq=1,I.env=N,I.timescale=1e3,I.mediaDuration=0,I.aacParser=null,I}return k(z,[{key:"addTrack",value:function(N){if("video"!==N&&"both"!==N||(this.tracks.video=new yn(this.timescale),this.trackTypes.push("video")),"audio"===N||"both"===N){var I=new Kt(this.timescale);this.aacParser=I.getAacParser(),this.tracks.audio=I,this.trackTypes.push("audio")}}},{key:"reset",value:function(){var N,I=m(this.trackTypes);try{for(I.s();!(N=I.n()).done;)this.tracks[N.value].resetTrack()}catch(re){I.e(re)}finally{I.f()}this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(this.initialized){var N,I=m(this.trackTypes);try{for(I.s();!(N=I.n()).done;){var ne=N.value,re=this.tracks[ne],ce=re.getPayload();if(ce&&ce.byteLength){var ee={type:ne,payload:K(De.moof(this.seq,re.dts,re.mp4track),De.mdat(ce)),dts:re.dts};"video"===ne&&(ee.fps=re.mp4track.fps),this.dispatch("buffer",ee);var We=(Q=void 0,void 0,void 0,Ue=void 0,Ue="",Q=Math.floor(re.dts/this.timescale),(ue=parseInt(Q/3600,10)%24)>0&&(Ue+=(ue<10?"0"+ue:ue)+":"),Ue+=((Ae=parseInt(Q/60,10)%60)<10?"0"+Ae:Ae)+":"+((Q=Q<0?0:Q%60)<10?"0"+Q:Q));b("put segment (".concat(ne,"): dts: ").concat(re.dts," frames: ").concat(re.mp4track.samples.length," second: ").concat(We)),re.flush(),this.seq++}}}catch(F){I.e(F)}finally{I.f()}}else this.isReady()&&(this.dispatch("ready"),this.initSegment(),this.initialized=!0,this.flush());var Q,ue,Ae,Ue}},{key:"initSegment",value:function(){var N,I=[],ne=m(this.trackTypes);try{for(ne.s();!(N=ne.n()).done;){var re=N.value,ce=this.tracks[re];if("browser"==this.env){var ee={type:re,payload:De.initSegment([ce.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",ee)}else I.push(ce.mp4track)}}catch($){ne.e($)}finally{ne.f()}if("node"==this.env){var We={type:"all",payload:De.initSegment(I,this.mediaDuration,this.timescale)};this.dispatch("buffer",We)}b("Initial segment generated.")}},{key:"isReady",value:function(){var N,I=m(this.trackTypes);try{for(I.s();!(N=I.n()).done;){var ne=N.value;if(!this.tracks[ne].readyToDecode||!this.tracks[ne].samples.length)return!1}}catch(re){I.e(re)}finally{I.f()}return!0}},{key:"remux",value:function(N){var I,ne=m(this.trackTypes);try{for(ne.s();!(I=ne.n()).done;){var re=I.value,ce=N[re];"audio"===re&&this.tracks.video&&!this.tracks.video.readyToDecode||ce.length>0&&this.tracks[re].remux(ce)}}catch(ee){ne.e(ee)}finally{ne.f()}this.flush()}}]),z}(ge),Qe=function(U){f(z,U);var A=W(z);function z(N,I){var ne;return T(this,z),(ne=A.call(this,"buffer")).type=I,ne.queue=new Uint8Array,ne.cleaning=!1,ne.pendingCleaning=0,ne.cleanOffset=30,ne.cleanRanges=[],ne.sourceBuffer=N,ne.sourceBuffer.addEventListener("updateend",function(){ne.pendingCleaning>0&&(ne.initCleanup(ne.pendingCleaning),ne.pendingCleaning=0),ne.cleaning=!1,ne.cleanRanges.length&&ne.doCleanup()}),ne.sourceBuffer.addEventListener("error",function(){ne.dispatch("error",{type:ne.type,name:"buffer",error:"buffer error"})}),ne}return k(z,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(this.cleanRanges.length){var N=this.cleanRanges.shift();b("".concat(this.type," remove range [").concat(N[0]," - ").concat(N[1],")")),this.cleaning=!0,this.sourceBuffer.remove(N[0],N[1])}else this.cleaning=!1}},{key:"initCleanup",value:function(N){try{if(this.sourceBuffer.updating)return void(this.pendingCleaning=N);if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var I=0;I<this.sourceBuffer.buffered.length;++I){var ne=this.sourceBuffer.buffered.start(I),re=this.sourceBuffer.buffered.end(I);N-ne>this.cleanOffset&&ne<(re=N-this.cleanOffset)&&this.cleanRanges.push([ne,re])}this.doCleanup()}}catch(ce){M("Error occured while cleaning ".concat(this.type," buffer - ").concat(ce.name,": ").concat(ce.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&this.sourceBuffer&&!this.sourceBuffer.updating)try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(I){var N="unexpectedError";"QuotaExceededError"===I.name?(b("".concat(this.type," buffer quota full")),N="QuotaExceeded"):(M("Error occured while appending ".concat(this.type," buffer - ").concat(I.name,": ").concat(I.message)),N="InvalidStateError"),this.dispatch("error",{type:this.type,name:N,error:"buffer error"})}}},{key:"feed",value:function(N){this.queue=K(this.queue,N)}}]),z}(ge);return function(U){f(z,U);var A=W(z);function z(N){var I;return T(this,z),(I=A.call(this,"jmuxer")).isReset=!1,I.options=Object.assign({},{node:"",mode:"both",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onError:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){}},N),I.env="object"===(typeof process>"u"?"undefined":Y(process))&&typeof window>"u"?"node":"browser",I.options.debug&&(_=console.log,w=console.error),I.options.fps||(I.options.fps=30),I.frameDuration=1e3/I.options.fps|0,I.remuxController=new Jt(I.env),I.remuxController.addTrack(I.options.mode),I.initData(),I.remuxController.on("buffer",I.onBuffer.bind(q(I))),"browser"==I.env&&(I.remuxController.on("ready",I.createBuffer.bind(q(I))),I.initBrowser()),I}return k(z,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.kfCounter=0,this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){"string"==typeof this.options.node&&""==this.options.node&&M("no video element were found to render, provide a valid video element"),this.node="string"==typeof this.options.node?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var N=this.feed.bind(this),I=this.destroy.bind(this);return this.stream=new D.Duplex({writableObjectMode:!0,read:function(ne){},write:function(ne,re,ce){N(ne),ce()},final:function(ne){I(),ne()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource,!window.MediaSource)throw"Oops! Browser does not support media source extension.";this.isMSESupported=!!window.MediaSource,this.mediaSource=new MediaSource,this.url=URL.createObjectURL(this.mediaSource),this.node.src=this.url,this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch{M("mediasource is not available to end")}}},{key:"feed",value:function(N){var I,ne,re,ce=!1,ee={video:[],audio:[]};if(N&&this.remuxController){if(re=N.duration?parseInt(N.duration):0,N.video){N.video=K(this.remainingData,N.video);var We=function l(U,A){return function(z){if(Array.isArray(z))return z}(U)||function(z,N){var I=null==z?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(null!=I){var ne,re,ce=[],ee=!0,We=!1;try{for(I=I.call(z);!(ee=(ne=I.next()).done)&&(ce.push(ne.value),!N||ce.length!==N);ee=!0);}catch($){We=!0,re=$}finally{try{ee||null==I.return||I.return()}finally{if(We)throw re}}return ce}}(U,A)||u(U,A)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(he.extractNALu(N.video),2);if(I=We[0],this.remainingData=(ne=We[1])||new Uint8Array,!(I.length>0))return M("Failed to extract any NAL units from video data:",ne),void("function"==typeof this.options.onMissingVideoFrames&&this.options.onMissingVideoFrames.call(null,N));ee.video=this.getVideoFrames(I,re,N.compositionTimeOffset),ce=!0}if(N.audio){if(!((I=this.remuxController.aacParser.extractAAC(N.audio)).length>0))return M("Failed to extract audio data from:",N.audio),void("function"==typeof this.options.onMissingAudioFrames&&this.options.onMissingAudioFrames.call(null,N));ee.audio=this.getAudioFrames(I,re),ce=!0}ce?this.remuxController.remux(ee):M("Input object must have video and/or audio property. Make sure it is a valid typed array")}}},{key:"getVideoFrames",value:function(N,I,ne){var re,ce=this,ee=[],We=[],$=0,Q=!1,ue=!1;this.pendingUnits.units&&(ee=this.pendingUnits.units,ue=this.pendingUnits.vcl,Q=this.pendingUnits.keyFrame,this.pendingUnits={});var Ae,Ue=m(N);try{for(Ue.s();!(Ae=Ue.n()).done;){var L=new P(Ae.value);L.type()!==P.IDR&&L.type()!==P.NDR||he.parseHeader(L),ee.length&&ue&&(L.isfmb||!L.isvcl)&&(We.push({units:ee,keyFrame:Q}),ee=[],Q=!1,ue=!1),ee.push(L),Q=Q||L.isKeyframe(),ue=ue||L.isvcl}}catch(x){Ue.e(x)}finally{Ue.f()}if(ee.length)if(I)if(ue)We.push({units:ee,keyFrame:Q});else{var fe=We.length-1;fe>=0&&(We[fe].units=We[fe].units.concat(ee))}else this.pendingUnits={units:ee,keyFrame:Q,vcl:ue};return re=I?I/We.length|0:this.frameDuration,$=I?I-re*We.length:0,We.map(function(x){x.duration=re,x.compositionTimeOffset=ne,$>0&&(x.duration++,$--),ce.kfCounter++,x.keyFrame&&ce.options.clearBuffer&&ce.kfPosition.push(ce.kfCounter*re/1e3)}),b("jmuxer: No. of frames of the last chunk: ".concat(We.length)),We}},{key:"getAudioFrames",value:function(N,I){var ne,re,ce=[],ee=0,We=m(N);try{for(We.s();!(re=We.n()).done;)ce.push({units:re.value})}catch(Q){We.e(Q)}finally{We.f()}return ne=I?I/ce.length|0:this.frameDuration,ee=I?I-ne*ce.length:0,ce.map(function(Q){Q.duration=ne,ee>0&&(Q.duration++,ee--)}),ce}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var N in this.bufferControllers)this.bufferControllers[N].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var N in this.bufferControllers)this.bufferControllers[N].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),"browser"==this.env&&this.initBrowser(),b("JMuxer was reset")}},{key:"createBuffer",value:function(){if(this.mseReady&&this.remuxController&&this.remuxController.isReady()&&!this.bufferControllers)for(var N in this.bufferControllers={},this.remuxController.tracks){var I=this.remuxController.tracks[N];if(!z.isSupported("".concat(N,'/mp4; codecs="').concat(I.mp4track.codec,'"')))return M("Browser does not support codec"),!1;var ne=this.mediaSource.addSourceBuffer("".concat(N,'/mp4; codecs="').concat(I.mp4track.codec,'"'));this.bufferControllers[N]=new Qe(ne,N),this.bufferControllers[N].on("error",this.onBufferError.bind(this))}}},{key:"startInterval",value:function(){var N=this;this.interval=setInterval(function(){N.options.flushingTime?N.applyAndClearBuffer():N.bufferControllers&&N.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var N=this.node.buffered.end(0);N-this.node.currentTime>this.options.maxDelay/1e3&&(console.log("delay"),this.node.currentTime=N-.001)}}},{key:"releaseBuffer",value:function(){for(var N in this.bufferControllers)this.bufferControllers[N].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(N){for(var I,ne="audio"===this.options.mode&&N||0,re=0;re<this.kfPosition.length&&!(this.kfPosition[re]>=N);re++)I=this.kfPosition[re];return I&&(this.kfPosition=this.kfPosition.filter(function(ce){return ce<I&&(ne=ce),ce>=I})),ne}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var N in this.bufferControllers){var I=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[N].initCleanup(I)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(N){this.options.readFpsFromTrack&&void 0!==N.fps&&this.options.fps!=N.fps&&(this.options.fps=N.fps,this.frameDuration=Math.ceil(1e3/N.fps),b("JMuxer changed FPS to ".concat(N.fps," from track data"))),"browser"==this.env?this.bufferControllers&&this.bufferControllers[N.type]&&this.bufferControllers[N.type].feed(N.payload):this.stream&&this.stream.push(N.payload),0===this.options.flushingTime&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),"function"==typeof this.options.onReady&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(N){if("QuotaExceeded"==N.name)return b("JMuxer cleaning ".concat(N.type," buffer due to QuotaExceeded error")),void this.bufferControllers[N.type].initCleanup(this.node.currentTime);"InvalidStateError"==N.name?(b("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE(),"function"==typeof this.options.onError&&this.options.onError.call(null,N)}}],[{key:"isSupported",value:function(N){return window.MediaSource&&window.MediaSource.isTypeSupported(N)}}]),z}(ge)}(J(295))},153:(Ee,Ce)=>{var l,w,D=(l=new Date,w=4,{setLogLevel:function(M){w=M==this.debug?1:M==this.info?2:M==this.warn?3:4},debug:function(M,P){void 0===console.debug&&(console.debug=console.log),1>=w&&console.debug("["+D.getDurationString(new Date-l,1e3)+"]","["+M+"]",P)},log:function(M,P){this.debug(M.msg)},info:function(M,P){2>=w&&console.info("["+D.getDurationString(new Date-l,1e3)+"]","["+M+"]",P)},warn:function(M,P){3>=w&&console.warn("["+D.getDurationString(new Date-l,1e3)+"]","["+M+"]",P)},error:function(M,P){4>=w&&console.error("["+D.getDurationString(new Date-l,1e3)+"]","["+M+"]",P)}});D.getDurationString=function(l,u){var h;function m(K,ie){for(var ye=(""+K).split(".");ye[0].length<ie;)ye[0]="0"+ye[0];return ye.join(".")}l<0?(h=!0,l=-l):h=!1;var w=l/(u||1),b=Math.floor(w/3600);w-=3600*b;var M=Math.floor(w/60),P=1e3*(w-=60*M);return P-=1e3*(w=Math.floor(w)),P=Math.floor(P),(h?"-":"")+b+":"+m(M,2)+":"+m(w,2)+"."+m(P,3)},D.printRanges=function(l){var u=l.length;if(u>0){for(var h="",m=0;m<u;m++)m>0&&(h+=","),h+="["+D.getDurationString(l.start(m))+","+D.getDurationString(l.end(m))+"]";return h}return"(empty)"};var Y=function(l){if(!(l instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=l,this.dataview=new DataView(l),this.position=0};Y.prototype.getPosition=function(){return this.position},Y.prototype.getEndPosition=function(){return this.buffer.byteLength},Y.prototype.getLength=function(){return this.buffer.byteLength},Y.prototype.seek=function(l){var u=Math.max(0,Math.min(this.buffer.byteLength,l));return this.position=isNaN(u)||!isFinite(u)?0:u,!0},Y.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},Y.prototype.readAnyInt=function(l,u){var h=0;if(this.position+l<=this.buffer.byteLength){switch(l){case 1:h=u?this.dataview.getInt8(this.position):this.dataview.getUint8(this.position);break;case 2:h=u?this.dataview.getInt16(this.position):this.dataview.getUint16(this.position);break;case 3:if(u)throw"No method for reading signed 24 bits values";h=this.dataview.getUint8(this.position)<<16,h|=this.dataview.getUint8(this.position+1)<<8,h|=this.dataview.getUint8(this.position+2);break;case 4:h=u?this.dataview.getInt32(this.position):this.dataview.getUint32(this.position);break;case 8:if(u)throw"No method for reading signed 64 bits values";h=this.dataview.getUint32(this.position)<<32,h|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+l}return this.position+=l,h}throw"Not enough bytes in buffer"},Y.prototype.readUint8=function(){return this.readAnyInt(1,!1)},Y.prototype.readUint16=function(){return this.readAnyInt(2,!1)},Y.prototype.readUint24=function(){return this.readAnyInt(3,!1)},Y.prototype.readUint32=function(){return this.readAnyInt(4,!1)},Y.prototype.readUint64=function(){return this.readAnyInt(8,!1)},Y.prototype.readString=function(l){if(this.position+l<=this.buffer.byteLength){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(this.readUint8());return u}throw"Not enough bytes in buffer"},Y.prototype.readCString=function(){for(var l=[];;){var u=this.readUint8();if(0===u)break;l.push(u)}return String.fromCharCode.apply(null,l)},Y.prototype.readInt8=function(){return this.readAnyInt(1,!0)},Y.prototype.readInt16=function(){return this.readAnyInt(2,!0)},Y.prototype.readInt32=function(){return this.readAnyInt(4,!0)},Y.prototype.readInt64=function(){return this.readAnyInt(8,!1)},Y.prototype.readUint8Array=function(l){for(var u=new Uint8Array(l),h=0;h<l;h++)u[h]=this.readUint8();return u},Y.prototype.readInt16Array=function(l){for(var u=new Int16Array(l),h=0;h<l;h++)u[h]=this.readInt16();return u},Y.prototype.readUint16Array=function(l){for(var u=new Int16Array(l),h=0;h<l;h++)u[h]=this.readUint16();return u},Y.prototype.readUint32Array=function(l){for(var u=new Uint32Array(l),h=0;h<l;h++)u[h]=this.readUint32();return u},Y.prototype.readInt32Array=function(l){for(var u=new Int32Array(l),h=0;h<l;h++)u[h]=this.readInt32();return u};var T=function(l,u,h){this._byteOffset=u||0,l instanceof ArrayBuffer?this.buffer=l:"object"==typeof l?(this.dataView=l,u&&(this._byteOffset+=u)):this.buffer=new ArrayBuffer(l||0),this.position=0,this.endianness=h??T.LITTLE_ENDIAN};T.prototype={},T.prototype.getPosition=function(){return this.position},T.prototype._realloc=function(l){if(this._dynamicSize){var u=this._byteOffset+this.position+l,h=this._buffer.byteLength;if(u<=h)return void(u>this._byteLength&&(this._byteLength=u));for(h<1&&(h=1);u>h;)h*=2;var m=new ArrayBuffer(h),_=new Uint8Array(this._buffer);new Uint8Array(m,0,_.length).set(_),this.buffer=m,this._byteLength=u}},T.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var l=new ArrayBuffer(this._byteLength),u=new Uint8Array(l),h=new Uint8Array(this._buffer,0,u.length);u.set(h),this.buffer=l}},T.BIG_ENDIAN=!1,T.LITTLE_ENDIAN=!0,T.prototype._byteLength=0,Object.defineProperty(T.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(T.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(l){this._buffer=l,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(T.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(l){this._byteOffset=l,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(T.prototype,"dataView",{get:function(){return this._dataView},set:function(l){this._byteOffset=l.byteOffset,this._buffer=l.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+l.byteLength}}),T.prototype.seek=function(l){var u=Math.max(0,Math.min(this.byteLength,l));this.position=isNaN(u)||!isFinite(u)?0:u},T.prototype.isEof=function(){return this.position>=this._byteLength},T.prototype.mapUint8Array=function(l){this._realloc(1*l);var u=new Uint8Array(this._buffer,this.byteOffset+this.position,l);return this.position+=1*l,u},T.prototype.readInt32Array=function(l,u){l=l??this.byteLength-this.position/4;var h=new Int32Array(l);return T.memcpy(h.buffer,0,this.buffer,this.byteOffset+this.position,l*h.BYTES_PER_ELEMENT),T.arrayToNative(h,u??this.endianness),this.position+=h.byteLength,h},T.prototype.readInt16Array=function(l,u){l=l??this.byteLength-this.position/2;var h=new Int16Array(l);return T.memcpy(h.buffer,0,this.buffer,this.byteOffset+this.position,l*h.BYTES_PER_ELEMENT),T.arrayToNative(h,u??this.endianness),this.position+=h.byteLength,h},T.prototype.readInt8Array=function(l){l=l??this.byteLength-this.position;var u=new Int8Array(l);return T.memcpy(u.buffer,0,this.buffer,this.byteOffset+this.position,l*u.BYTES_PER_ELEMENT),this.position+=u.byteLength,u},T.prototype.readUint32Array=function(l,u){l=l??this.byteLength-this.position/4;var h=new Uint32Array(l);return T.memcpy(h.buffer,0,this.buffer,this.byteOffset+this.position,l*h.BYTES_PER_ELEMENT),T.arrayToNative(h,u??this.endianness),this.position+=h.byteLength,h},T.prototype.readUint16Array=function(l,u){l=l??this.byteLength-this.position/2;var h=new Uint16Array(l);return T.memcpy(h.buffer,0,this.buffer,this.byteOffset+this.position,l*h.BYTES_PER_ELEMENT),T.arrayToNative(h,u??this.endianness),this.position+=h.byteLength,h},T.prototype.readUint8Array=function(l){l=l??this.byteLength-this.position;var u=new Uint8Array(l);return T.memcpy(u.buffer,0,this.buffer,this.byteOffset+this.position,l*u.BYTES_PER_ELEMENT),this.position+=u.byteLength,u},T.prototype.readFloat64Array=function(l,u){l=l??this.byteLength-this.position/8;var h=new Float64Array(l);return T.memcpy(h.buffer,0,this.buffer,this.byteOffset+this.position,l*h.BYTES_PER_ELEMENT),T.arrayToNative(h,u??this.endianness),this.position+=h.byteLength,h},T.prototype.readFloat32Array=function(l,u){l=l??this.byteLength-this.position/4;var h=new Float32Array(l);return T.memcpy(h.buffer,0,this.buffer,this.byteOffset+this.position,l*h.BYTES_PER_ELEMENT),T.arrayToNative(h,u??this.endianness),this.position+=h.byteLength,h},T.prototype.readInt32=function(l){var u=this._dataView.getInt32(this.position,l??this.endianness);return this.position+=4,u},T.prototype.readInt16=function(l){var u=this._dataView.getInt16(this.position,l??this.endianness);return this.position+=2,u},T.prototype.readInt8=function(){var l=this._dataView.getInt8(this.position);return this.position+=1,l},T.prototype.readUint32=function(l){var u=this._dataView.getUint32(this.position,l??this.endianness);return this.position+=4,u},T.prototype.readUint16=function(l){var u=this._dataView.getUint16(this.position,l??this.endianness);return this.position+=2,u},T.prototype.readUint8=function(){var l=this._dataView.getUint8(this.position);return this.position+=1,l},T.prototype.readFloat32=function(l){var u=this._dataView.getFloat32(this.position,l??this.endianness);return this.position+=4,u},T.prototype.readFloat64=function(l){var u=this._dataView.getFloat64(this.position,l??this.endianness);return this.position+=8,u},T.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,T.memcpy=function(l,u,h,m,_){var w=new Uint8Array(l,u,_),b=new Uint8Array(h,m,_);w.set(b)},T.arrayToNative=function(l,u){return u==this.endianness?l:this.flipArrayEndianness(l)},T.nativeToEndian=function(l,u){return this.endianness==u?l:this.flipArrayEndianness(l)},T.flipArrayEndianness=function(l){for(var u=new Uint8Array(l.buffer,l.byteOffset,l.byteLength),h=0;h<l.byteLength;h+=l.BYTES_PER_ELEMENT)for(var m=h+l.BYTES_PER_ELEMENT-1,_=h;m>_;m--,_++){var w=u[_];u[_]=u[m],u[m]=w}return l},T.prototype.failurePosition=0,String.fromCharCodeUint8=function(l){for(var u=[],h=0;h<l.length;h++)u[h]=l[h];return String.fromCharCode.apply(null,u)},T.prototype.readString=function(l,u){return null==u||"ASCII"==u?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(l??this.byteLength-this.position)]):new TextDecoder(u).decode(this.mapUint8Array(l))},T.prototype.readCString=function(l){var u=this.byteLength-this.position,h=new Uint8Array(this._buffer,this._byteOffset+this.position),m=u;null!=l&&(m=Math.min(l,u));for(var _=0;_<m&&0!==h[_];_++);var w=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(_)]);return null!=l?this.position+=m-_:_!=u&&(this.position+=1),w};var B=Math.pow(2,32);T.prototype.readInt64=function(){return this.readInt32()*B+this.readUint32()},T.prototype.readUint64=function(){return this.readUint32()*B+this.readUint32()},T.prototype.readInt64=function(){return this.readUint32()*B+this.readUint32()},T.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},T.prototype.save=function(l){var u=new Blob([this.buffer]);if(!window.URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";var h=window.URL.createObjectURL(u),m=document.createElement("a");document.body.appendChild(m),m.setAttribute("href",h),m.setAttribute("download",l),m.setAttribute("target","_self"),m.click(),window.URL.revokeObjectURL(h)},T.prototype._dynamicSize=!0,Object.defineProperty(T.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(l){l||this._trimAlloc(),this._dynamicSize=l}}),T.prototype.shift=function(l){var u=new ArrayBuffer(this._byteLength-l),h=new Uint8Array(u),m=new Uint8Array(this._buffer,l,h.length);h.set(m),this.buffer=u,this.position-=l},T.prototype.writeInt32Array=function(l,u){if(this._realloc(4*l.length),l instanceof Int32Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapInt32Array(l.length,u);else for(var h=0;h<l.length;h++)this.writeInt32(l[h],u)},T.prototype.writeInt16Array=function(l,u){if(this._realloc(2*l.length),l instanceof Int16Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapInt16Array(l.length,u);else for(var h=0;h<l.length;h++)this.writeInt16(l[h],u)},T.prototype.writeInt8Array=function(l){if(this._realloc(1*l.length),l instanceof Int8Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapInt8Array(l.length);else for(var u=0;u<l.length;u++)this.writeInt8(l[u])},T.prototype.writeUint32Array=function(l,u){if(this._realloc(4*l.length),l instanceof Uint32Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapUint32Array(l.length,u);else for(var h=0;h<l.length;h++)this.writeUint32(l[h],u)},T.prototype.writeUint16Array=function(l,u){if(this._realloc(2*l.length),l instanceof Uint16Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapUint16Array(l.length,u);else for(var h=0;h<l.length;h++)this.writeUint16(l[h],u)},T.prototype.writeUint8Array=function(l){if(this._realloc(1*l.length),l instanceof Uint8Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapUint8Array(l.length);else for(var u=0;u<l.length;u++)this.writeUint8(l[u])},T.prototype.writeFloat64Array=function(l,u){if(this._realloc(8*l.length),l instanceof Float64Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapFloat64Array(l.length,u);else for(var h=0;h<l.length;h++)this.writeFloat64(l[h],u)},T.prototype.writeFloat32Array=function(l,u){if(this._realloc(4*l.length),l instanceof Float32Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)T.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapFloat32Array(l.length,u);else for(var h=0;h<l.length;h++)this.writeFloat32(l[h],u)},T.prototype.writeInt32=function(l,u){this._realloc(4),this._dataView.setInt32(this.position,l,u??this.endianness),this.position+=4},T.prototype.writeInt16=function(l,u){this._realloc(2),this._dataView.setInt16(this.position,l,u??this.endianness),this.position+=2},T.prototype.writeInt8=function(l){this._realloc(1),this._dataView.setInt8(this.position,l),this.position+=1},T.prototype.writeUint32=function(l,u){this._realloc(4),this._dataView.setUint32(this.position,l,u??this.endianness),this.position+=4},T.prototype.writeUint16=function(l,u){this._realloc(2),this._dataView.setUint16(this.position,l,u??this.endianness),this.position+=2},T.prototype.writeUint8=function(l){this._realloc(1),this._dataView.setUint8(this.position,l),this.position+=1},T.prototype.writeFloat32=function(l,u){this._realloc(4),this._dataView.setFloat32(this.position,l,u??this.endianness),this.position+=4},T.prototype.writeFloat64=function(l,u){this._realloc(8),this._dataView.setFloat64(this.position,l,u??this.endianness),this.position+=8},T.prototype.writeUCS2String=function(l,u,h){null==h&&(h=l.length);for(var m=0;m<l.length&&m<h;m++)this.writeUint16(l.charCodeAt(m),u);for(;m<h;m++)this.writeUint16(0)},T.prototype.writeString=function(l,u,h){var m=0;if(null==u||"ASCII"==u)if(null!=h){var _=Math.min(l.length,h);for(m=0;m<_;m++)this.writeUint8(l.charCodeAt(m));for(;m<h;m++)this.writeUint8(0)}else for(m=0;m<l.length;m++)this.writeUint8(l.charCodeAt(m));else this.writeUint8Array(new TextEncoder(u).encode(l.substring(0,h)))},T.prototype.writeCString=function(l,u){var h=0;if(null!=u){var m=Math.min(l.length,u);for(h=0;h<m;h++)this.writeUint8(l.charCodeAt(h));for(;h<u;h++)this.writeUint8(0)}else{for(h=0;h<l.length;h++)this.writeUint8(l.charCodeAt(h));this.writeUint8(0)}},T.prototype.writeStruct=function(l,u){for(var h=0;h<l.length;h+=2)this.writeType(l[h+1],u[l[h]],u)},T.prototype.writeType=function(l,u,h){var m;if("function"==typeof l)return l(this,u);if("object"==typeof l&&!(l instanceof Array))return l.set(this,u,h);var _=null,w="ASCII",b=this.position;switch("string"==typeof l&&/:/.test(l)&&(m=l.split(":"),l=m[0],_=parseInt(m[1])),"string"==typeof l&&/,/.test(l)&&(m=l.split(","),l=m[0],w=parseInt(m[1])),l){case"uint8":this.writeUint8(u);break;case"int8":this.writeInt8(u);break;case"uint16":this.writeUint16(u,this.endianness);break;case"int16":this.writeInt16(u,this.endianness);break;case"uint32":this.writeUint32(u,this.endianness);break;case"int32":this.writeInt32(u,this.endianness);break;case"float32":this.writeFloat32(u,this.endianness);break;case"float64":this.writeFloat64(u,this.endianness);break;case"uint16be":this.writeUint16(u,T.BIG_ENDIAN);break;case"int16be":this.writeInt16(u,T.BIG_ENDIAN);break;case"uint32be":this.writeUint32(u,T.BIG_ENDIAN);break;case"int32be":this.writeInt32(u,T.BIG_ENDIAN);break;case"float32be":this.writeFloat32(u,T.BIG_ENDIAN);break;case"float64be":this.writeFloat64(u,T.BIG_ENDIAN);break;case"uint16le":this.writeUint16(u,T.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(u,T.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(u,T.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(u,T.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(u,T.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(u,T.LITTLE_ENDIAN);break;case"cstring":this.writeCString(u,_);break;case"string":this.writeString(u,w,_);break;case"u16string":this.writeUCS2String(u,this.endianness,_);break;case"u16stringle":this.writeUCS2String(u,T.LITTLE_ENDIAN,_);break;case"u16stringbe":this.writeUCS2String(u,T.BIG_ENDIAN,_);break;default:if(3==l.length){for(var M=l[1],P=0;P<u.length;P++)this.writeType(M,u[P]);break}this.writeStruct(l,u)}null!=_&&(this.position=b,this._realloc(_),this.position=b+_)},T.prototype.writeUint64=function(l){var u=Math.floor(l/B);this.writeUint32(u),this.writeUint32(4294967295&l)},T.prototype.writeUint24=function(l){this.writeUint8((16711680&l)>>16),this.writeUint8((65280&l)>>8),this.writeUint8(255&l)},T.prototype.adjustUint32=function(l,u){var h=this.position;this.seek(l),this.writeUint32(u),this.seek(h)},T.prototype.mapInt32Array=function(l,u){this._realloc(4*l);var h=new Int32Array(this._buffer,this.byteOffset+this.position,l);return T.arrayToNative(h,u??this.endianness),this.position+=4*l,h},T.prototype.mapInt16Array=function(l,u){this._realloc(2*l);var h=new Int16Array(this._buffer,this.byteOffset+this.position,l);return T.arrayToNative(h,u??this.endianness),this.position+=2*l,h},T.prototype.mapInt8Array=function(l){this._realloc(1*l);var u=new Int8Array(this._buffer,this.byteOffset+this.position,l);return this.position+=1*l,u},T.prototype.mapUint32Array=function(l,u){this._realloc(4*l);var h=new Uint32Array(this._buffer,this.byteOffset+this.position,l);return T.arrayToNative(h,u??this.endianness),this.position+=4*l,h},T.prototype.mapUint16Array=function(l,u){this._realloc(2*l);var h=new Uint16Array(this._buffer,this.byteOffset+this.position,l);return T.arrayToNative(h,u??this.endianness),this.position+=2*l,h},T.prototype.mapFloat64Array=function(l,u){this._realloc(8*l);var h=new Float64Array(this._buffer,this.byteOffset+this.position,l);return T.arrayToNative(h,u??this.endianness),this.position+=8*l,h},T.prototype.mapFloat32Array=function(l,u){this._realloc(4*l);var h=new Float32Array(this._buffer,this.byteOffset+this.position,l);return T.arrayToNative(h,u??this.endianness),this.position+=4*l,h};var k=function(l){this.buffers=[],this.bufferIndex=-1,l&&(this.insertBuffer(l),this.bufferIndex=0)};(k.prototype=new T(new ArrayBuffer,0,T.BIG_ENDIAN)).initialized=function(){var l;return this.bufferIndex>-1||(this.buffers.length>0?0===(l=this.buffers[0]).fileStart?(this.buffer=l,this.bufferIndex=0,D.debug("MultiBufferStream","Stream ready for parsing"),!0):(D.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1):(D.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(l,u){D.debug("ArrayBuffer","Trying to create a new buffer of size: "+(l.byteLength+u.byteLength));var h=new Uint8Array(l.byteLength+u.byteLength);return h.set(new Uint8Array(l),0),h.set(new Uint8Array(u),l.byteLength),h.buffer},k.prototype.reduceBuffer=function(l,u,h){var m;return(m=new Uint8Array(h)).set(new Uint8Array(l,u,h)),m.buffer.fileStart=l.fileStart+u,m.buffer.usedBytes=0,m.buffer},k.prototype.insertBuffer=function(l){for(var u=!0,h=0;h<this.buffers.length;h++){var m=this.buffers[h];if(l.fileStart<=m.fileStart){if(l.fileStart===m.fileStart){if(l.byteLength>m.byteLength){this.buffers.splice(h,1),h--;continue}D.warn("MultiBufferStream","Buffer (fileStart: "+l.fileStart+" - Length: "+l.byteLength+") already appended, ignoring")}else l.fileStart+l.byteLength<=m.fileStart||(l=this.reduceBuffer(l,0,m.fileStart-l.fileStart)),D.debug("MultiBufferStream","Appending new buffer (fileStart: "+l.fileStart+" - Length: "+l.byteLength+")"),this.buffers.splice(h,0,l),0===h&&(this.buffer=l);u=!1;break}if(l.fileStart<m.fileStart+m.byteLength){var _=m.fileStart+m.byteLength-l.fileStart,w=l.byteLength-_;if(!(w>0)){u=!1;break}l=this.reduceBuffer(l,_,w)}}u&&(D.debug("MultiBufferStream","Appending new buffer (fileStart: "+l.fileStart+" - Length: "+l.byteLength+")"),this.buffers.push(l),0===h&&(this.buffer=l))},k.prototype.logBufferLevel=function(l){var u,h,m,_,b,w=[],M="";for(m=0,_=0,u=0;u<this.buffers.length;u++)h=this.buffers[u],0===u?(w.push(b={}),b.start=h.fileStart,b.end=h.fileStart+h.byteLength,M+="["+b.start+"-"):b.end===h.fileStart?b.end=h.fileStart+h.byteLength:((b={}).start=h.fileStart,M+=w[w.length-1].end-1+"], ["+b.start+"-",b.end=h.fileStart+h.byteLength,w.push(b)),m+=h.usedBytes,_+=h.byteLength;w.length>0&&(M+=b.end-1+"]"),(l?D.info:D.debug)("MultiBufferStream",0===this.buffers.length?"No more buffer in memory":this.buffers.length+" stored buffer(s) ("+m+"/"+_+" bytes), continuous ranges: "+M)},k.prototype.cleanBuffers=function(){var l,u;for(l=0;l<this.buffers.length;l++)(u=this.buffers[l]).usedBytes===u.byteLength&&(D.debug("MultiBufferStream","Removing buffer #"+l),this.buffers.splice(l,1),l--)},k.prototype.mergeNextBuffer=function(){var l;if(this.bufferIndex+1<this.buffers.length){if((l=this.buffers[this.bufferIndex+1]).fileStart===this.buffer.fileStart+this.buffer.byteLength){var u=this.buffer.byteLength,h=this.buffer.usedBytes,m=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,l),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=h,this.buffer.fileStart=m,D.debug("ISOFile","Concatenating buffer for box parsing (length: "+u+"->"+this.buffer.byteLength+")"),!0}return!1}return!1},k.prototype.findPosition=function(l,u,h){var m,_=null,w=-1;for(m=!0===l?0:this.bufferIndex;m<this.buffers.length&&(_=this.buffers[m]).fileStart<=u;)w=m,h&&(_.usedBytes=_.fileStart+_.byteLength<=u?_.byteLength:u-_.fileStart,this.logBufferLevel()),m++;return-1!==w&&(_=this.buffers[w]).fileStart+_.byteLength>=u?(D.debug("MultiBufferStream","Found position in existing buffer #"+w),w):-1},k.prototype.findEndContiguousBuf=function(l){var u,h,m,_=void 0!==l?l:this.bufferIndex;if(h=this.buffers[_],this.buffers.length>_+1)for(u=_+1;u<this.buffers.length&&(m=this.buffers[u]).fileStart===h.fileStart+h.byteLength;u++)h=m;return h.fileStart+h.byteLength},k.prototype.getEndFilePositionAfter=function(l){var u=this.findPosition(!0,l,!1);return-1!==u?this.findEndContiguousBuf(u):l},k.prototype.addUsedBytes=function(l){this.buffer.usedBytes+=l,this.logBufferLevel()},k.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},k.prototype.seek=function(l,u,h){var m;return-1!==(m=this.findPosition(u,l,h))?(this.buffer=this.buffers[m],this.bufferIndex=m,this.position=l-this.buffer.fileStart,D.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(D.debug("MultiBufferStream","Position "+l+" not found in buffered data"),!1)},k.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},k.prototype.getLength=function(){return this.byteLength},k.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength};var C=function(){var _=[];_[3]="ES_Descriptor",_[4]="DecoderConfigDescriptor",_[5]="DecoderSpecificInfo",_[6]="SLConfigDescriptor",this.getDescriptorName=function(M){return _[M]};var w=this,b={};return this.parseOneDescriptor=function(M){var ie,he,ye,K=0;for(ie=M.readUint8(),ye=M.readUint8();128&ye;)K=(127&ye)<<7,ye=M.readUint8();return D.debug("MPEG4DescriptorParser","Found "+(_[ie]||"Descriptor "+ie)+", size "+(K+=127&ye)+" at position "+M.getPosition()),(he=_[ie]?new b[_[ie]](K):new b.Descriptor(K)).parse(M),he},b.Descriptor=function(M,P){this.tag=M,this.size=P,this.descs=[]},b.Descriptor.prototype.parse=function(M){this.data=M.readUint8Array(this.size)},b.Descriptor.prototype.findDescriptor=function(M){for(var P=0;P<this.descs.length;P++)if(this.descs[P].tag==M)return this.descs[P];return null},b.Descriptor.prototype.parseRemainingDescriptors=function(M){for(var P=M.position;M.position<P+this.size;){var K=w.parseOneDescriptor(M);this.descs.push(K)}},b.ES_Descriptor=function(M){b.Descriptor.call(this,3,M)},b.ES_Descriptor.prototype=new b.Descriptor,b.ES_Descriptor.prototype.parse=function(M){if(this.ES_ID=M.readUint16(),this.flags=M.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=M.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags){var P=M.readUint8();this.URL=M.readString(P),this.size-=P+1}else this.URL="";32&this.flags?(this.OCR_ES_ID=M.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(M)},b.ES_Descriptor.prototype.getOTI=function(M){var P=this.findDescriptor(4);return P?P.oti:0},b.ES_Descriptor.prototype.getAudioConfig=function(M){var P=this.findDescriptor(4);if(!P)return null;var K=P.findDescriptor(5);if(K&&K.data){var ie=(248&K.data[0])>>3;return 31===ie&&K.data.length>=2&&(ie=32+((7&K.data[0])<<3)+((224&K.data[1])>>5)),ie}return null},b.DecoderConfigDescriptor=function(M){b.Descriptor.call(this,4,M)},b.DecoderConfigDescriptor.prototype=new b.Descriptor,b.DecoderConfigDescriptor.prototype.parse=function(M){this.oti=M.readUint8(),this.streamType=M.readUint8(),this.bufferSize=M.readUint24(),this.maxBitrate=M.readUint32(),this.avgBitrate=M.readUint32(),this.size-=13,this.parseRemainingDescriptors(M)},b.DecoderSpecificInfo=function(M){b.Descriptor.call(this,5,M)},b.DecoderSpecificInfo.prototype=new b.Descriptor,b.SLConfigDescriptor=function(M){b.Descriptor.call(this,6,M)},b.SLConfigDescriptor.prototype=new b.Descriptor,this},f={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){f.FullBox.prototype=new f.Box,f.ContainerBox.prototype=new f.Box,f.SampleEntry.prototype=new f.Box,f.TrackGroupTypeBox.prototype=new f.FullBox,f.BASIC_BOXES.forEach(function(l){f.createBoxCtor(l)}),f.FULL_BOXES.forEach(function(l){f.createFullBoxCtor(l)}),f.CONTAINER_BOXES.forEach(function(l){f.createContainerBoxCtor(l[0],null,l[1])})},Box:function(l,u,h){this.type=l,this.size=u,this.uuid=h},FullBox:function(l,u,h){f.Box.call(this,l,u,h),this.flags=0,this.version=0},ContainerBox:function(l,u,h){f.Box.call(this,l,u,h),this.boxes=[]},SampleEntry:function(l,u,h,m){f.ContainerBox.call(this,l,u),this.hdr_size=h,this.start=m},SampleGroupEntry:function(l){this.grouping_type=l},TrackGroupTypeBox:function(l,u){f.FullBox.call(this,l,u)},createBoxCtor:function(l,u){f.boxCodes.push(l),f[l+"Box"]=function(h){f.Box.call(this,l,h)},f[l+"Box"].prototype=new f.Box,u&&(f[l+"Box"].prototype.parse=u)},createFullBoxCtor:function(l,u){f[l+"Box"]=function(h){f.FullBox.call(this,l,h)},f[l+"Box"].prototype=new f.FullBox,f[l+"Box"].prototype.parse=function(h){this.parseFullHeader(h),u&&u.call(this,h)}},addSubBoxArrays:function(l){if(l){this.subBoxNames=l;for(var u=l.length,h=0;h<u;h++)this[l[h]+"s"]=[]}},createContainerBoxCtor:function(l,u,h){f[l+"Box"]=function(m){f.ContainerBox.call(this,l,m),f.addSubBoxArrays.call(this,h)},f[l+"Box"].prototype=new f.ContainerBox,u&&(f[l+"Box"].prototype.parse=u)},createMediaSampleEntryCtor:function(l,u,h){f.sampleEntryCodes[l]=[],f[l+"SampleEntry"]=function(m,_){f.SampleEntry.call(this,m,_),f.addSubBoxArrays.call(this,h)},f[l+"SampleEntry"].prototype=new f.SampleEntry,u&&(f[l+"SampleEntry"].prototype.parse=u)},createSampleEntryCtor:function(l,u,h,m){f.sampleEntryCodes[l].push(u),f[u+"SampleEntry"]=function(_){f[l+"SampleEntry"].call(this,u,_),f.addSubBoxArrays.call(this,m)},f[u+"SampleEntry"].prototype=new f[l+"SampleEntry"],h&&(f[u+"SampleEntry"].prototype.parse=h)},createEncryptedSampleEntryCtor:function(l,u,h){f.createSampleEntryCtor.call(this,l,u,h,["sinf"])},createSampleGroupCtor:function(l,u){f[l+"SampleGroupEntry"]=function(h){f.SampleGroupEntry.call(this,l,h)},f[l+"SampleGroupEntry"].prototype=new f.SampleGroupEntry,u&&(f[l+"SampleGroupEntry"].prototype.parse=u)},createTrackGroupCtor:function(l,u){f[l+"TrackGroupTypeBox"]=function(h){f.TrackGroupTypeBox.call(this,l,h)},f[l+"TrackGroupTypeBox"].prototype=new f.TrackGroupTypeBox,u&&(f[l+"TrackGroupTypeBox"].prototype.parse=u)},createUUIDBox:function(l,u,h,m){f.UUIDs.push(l),f.UUIDBoxes[l]=function(_){u?f.FullBox.call(this,"uuid",_,l):h?f.ContainerBox.call(this,"uuid",_,l):f.Box.call(this,"uuid",_,l)},f.UUIDBoxes[l].prototype=u?new f.FullBox:h?new f.ContainerBox:new f.Box,m&&(f.UUIDBoxes[l].prototype.parse=u?function(_){this.parseFullHeader(_),m&&m.call(this,_)}:m)}};f.initialize(),f.TKHD_FLAG_ENABLED=1,f.TKHD_FLAG_IN_MOVIE=2,f.TKHD_FLAG_IN_PREVIEW=4,f.TFHD_FLAG_BASE_DATA_OFFSET=1,f.TFHD_FLAG_SAMPLE_DESC=2,f.TFHD_FLAG_SAMPLE_DUR=8,f.TFHD_FLAG_SAMPLE_SIZE=16,f.TFHD_FLAG_SAMPLE_FLAGS=32,f.TFHD_FLAG_DUR_EMPTY=65536,f.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,f.TRUN_FLAGS_DATA_OFFSET=1,f.TRUN_FLAGS_FIRST_FLAG=4,f.TRUN_FLAGS_DURATION=256,f.TRUN_FLAGS_SIZE=512,f.TRUN_FLAGS_FLAGS=1024,f.TRUN_FLAGS_CTS_OFFSET=2048,f.Box.prototype.add=function(l){return this.addBox(new f[l+"Box"])},f.Box.prototype.addBox=function(l){return this.boxes.push(l),this[l.type+"s"]?this[l.type+"s"].push(l):this[l.type]=l,l},f.Box.prototype.set=function(l,u){return this[l]=u,this},f.Box.prototype.addEntry=function(l,u){var h=u||"entries";return this[h]||(this[h]=[]),this[h].push(l),this},f.parseUUID=function(l){return f.parseHex16(l)},f.parseHex16=function(l){for(var u="",h=0;h<16;h++){var m=l.readUint8().toString(16);u+=1===m.length?"0"+m:m}return u},f.parseOneBox=function(l,u,h){var m,b,M,_=l.getPosition(),w=0;if(l.getEndPosition()-_<8)return D.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:f.ERR_NOT_ENOUGH_DATA};if(h&&h<8)return D.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:f.ERR_NOT_ENOUGH_DATA};var P=l.readUint32(),K=l.readString(4),ie=K;if(D.debug("BoxParser","Found box of type '"+K+"' and size "+P+" at position "+_),w=8,"uuid"==K){if(l.getEndPosition()-l.getPosition()<16||h-w<16)return l.seek(_),D.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:f.ERR_NOT_ENOUGH_DATA};w+=16,ie=M=f.parseUUID(l)}if(1==P){if(l.getEndPosition()-l.getPosition()<8||h&&h-w<8)return l.seek(_),D.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+K+'" box'),{code:f.ERR_NOT_ENOUGH_DATA};P=l.readUint64(),w+=8}else if(0===P)if(h)P=h;else if("mdat"!==K)return D.error("BoxParser","Unlimited box size not supported for type: '"+K+"'"),m=new f.Box(K,P),{code:f.OK,box:m,size:m.size};return 0!==P&&P<w?(D.error("BoxParser","Box of type "+K+" has an invalid size "+P+" (too small to be a box)"),{code:f.ERR_NOT_ENOUGH_DATA,type:K,size:P,hdr_size:w,start:_}):0!==P&&h&&P>h?(D.error("BoxParser","Box of type '"+K+"' has a size "+P+" greater than its container size "+h),{code:f.ERR_NOT_ENOUGH_DATA,type:K,size:P,hdr_size:w,start:_}):0!==P&&_+P>l.getEndPosition()?(l.seek(_),D.info("BoxParser","Not enough data in stream to parse the entire '"+K+"' box"),{code:f.ERR_NOT_ENOUGH_DATA,type:K,size:P,hdr_size:w,start:_}):u?{code:f.OK,type:K,size:P,hdr_size:w,start:_}:(f[K+"Box"]?m=new f[K+"Box"](P):"uuid"!==K?(D.warn("BoxParser","Unknown box type: '"+K+"'"),(m=new f.Box(K,P)).has_unparsed_data=!0):f.UUIDBoxes[M]?m=new f.UUIDBoxes[M](P):(D.warn("BoxParser","Unknown uuid type: '"+M+"'"),(m=new f.Box(K,P)).uuid=M,m.has_unparsed_data=!0),m.hdr_size=w,m.start=_,m.write===f.Box.prototype.write&&"mdat"!==m.type&&(D.info("BoxParser","'"+ie+"' box writing not yet implemented, keeping unparsed data in memory for later write"),m.parseDataAndRewind(l)),m.parse(l),(b=l.getPosition()-(m.start+m.size))<0?(D.warn("BoxParser","Parsing of box '"+ie+"' did not read the entire indicated box data size (missing "+-b+" bytes), seeking forward"),l.seek(m.start+m.size)):b>0&&(D.error("BoxParser","Parsing of box '"+ie+"' read "+b+" more bytes than the indicated box data size, seeking backwards"),0!==m.size&&l.seek(m.start+m.size)),{code:f.OK,box:m,size:m.size})},f.Box.prototype.parse=function(l){"mdat"!=this.type?this.data=l.readUint8Array(this.size-this.hdr_size):l.seek(0===this.size?l.getEndPosition():this.start+this.size)},f.Box.prototype.parseDataAndRewind=function(l){this.data=l.readUint8Array(this.size-this.hdr_size),l.position-=this.size-this.hdr_size},f.FullBox.prototype.parseDataAndRewind=function(l){this.parseFullHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,l.position-=this.size-this.hdr_size},f.FullBox.prototype.parseFullHeader=function(l){this.version=l.readUint8(),this.flags=l.readUint24(),this.hdr_size+=4},f.FullBox.prototype.parse=function(l){this.parseFullHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size)},f.ContainerBox.prototype.parse=function(l){for(var u,h;l.getPosition()<this.start+this.size;){if((u=f.parseOneBox(l,!1,this.size-(l.getPosition()-this.start))).code!==f.OK)return;if(this.boxes.push(h=u.box),this.subBoxNames&&-1!=this.subBoxNames.indexOf(h.type))this[this.subBoxNames[this.subBoxNames.indexOf(h.type)]+"s"].push(h);else{var m="uuid"!==h.type?h.type:h.uuid;this[m]?D.warn("Box of type "+m+" already stored in field of this type"):this[m]=h}}},f.Box.prototype.parseLanguage=function(l){this.language=l.readUint16();var u=[];u[0]=this.language>>10&31,u[1]=this.language>>5&31,u[2]=31&this.language,this.languageString=String.fromCharCode(u[0]+96,u[1]+96,u[2]+96)},f.SAMPLE_ENTRY_TYPE_VISUAL="Visual",f.SAMPLE_ENTRY_TYPE_AUDIO="Audio",f.SAMPLE_ENTRY_TYPE_HINT="Hint",f.SAMPLE_ENTRY_TYPE_METADATA="Metadata",f.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",f.SAMPLE_ENTRY_TYPE_SYSTEM="System",f.SAMPLE_ENTRY_TYPE_TEXT="Text",f.SampleEntry.prototype.parseHeader=function(l){l.readUint8Array(6),this.data_reference_index=l.readUint16(),this.hdr_size+=8},f.SampleEntry.prototype.parse=function(l){this.parseHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size)},f.SampleEntry.prototype.parseDataAndRewind=function(l){this.parseHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,l.position-=this.size-this.hdr_size},f.SampleEntry.prototype.parseFooter=function(l){f.ContainerBox.prototype.parse.call(this,l)},f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_HINT),f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_METADATA),f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SUBTITLE),f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SYSTEM),f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_TEXT),f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,function(l){var u;this.parseHeader(l),l.readUint16(),l.readUint16(),l.readUint32Array(3),this.width=l.readUint16(),this.height=l.readUint16(),this.horizresolution=l.readUint32(),this.vertresolution=l.readUint32(),l.readUint32(),this.frame_count=l.readUint16(),u=Math.min(31,l.readUint8()),this.compressorname=l.readString(u),u<31&&l.readString(31-u),this.depth=l.readUint16(),l.readUint16(),this.parseFooter(l)}),f.createMediaSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_AUDIO,function(l){this.parseHeader(l),l.readUint32Array(2),this.channel_count=l.readUint16(),this.samplesize=l.readUint16(),l.readUint16(),l.readUint16(),this.samplerate=l.readUint32()/65536,this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),f.createEncryptedSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),f.createEncryptedSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),f.createEncryptedSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),f.createEncryptedSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),f.createEncryptedSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_TEXT,"enct"),f.createEncryptedSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_METADATA,"encm"),f.createBoxCtor("a1lx",function(l){var h=16*(1+(1&l.readUint8()));this.layer_size=[];for(var m=0;m<3;m++)this.layer_size[m]=16==h?l.readUint16():l.readUint32()}),f.createBoxCtor("a1op",function(l){this.op_index=l.readUint8()}),f.createFullBoxCtor("auxC",function(l){this.aux_type=l.readCString(),this.aux_subtype=l.readUint8Array(this.size-this.hdr_size-(this.aux_type.length+1))}),f.createBoxCtor("av1C",function(l){var m=l.readUint8();if(m>>7&!1)D.error("av1C marker problem");else if(this.version=127&m,1===this.version)if(m=l.readUint8(),this.seq_profile=m>>5&7,this.seq_level_idx_0=31&m,m=l.readUint8(),this.seq_tier_0=m>>7&1,this.high_bitdepth=m>>6&1,this.twelve_bit=m>>5&1,this.monochrome=m>>4&1,this.chroma_subsampling_x=m>>3&1,this.chroma_subsampling_y=m>>2&1,this.chroma_sample_position=3&m,m=l.readUint8(),this.reserved_1=m>>5&7,0===this.reserved_1){if(this.initial_presentation_delay_present=m>>4&1,1===this.initial_presentation_delay_present)this.initial_presentation_delay_minus_one=15&m;else if(this.reserved_2=15&m,0!==this.reserved_2)return void D.error("av1C reserved_2 parsing problem");this.configOBUs=l.readUint8Array(this.size-this.hdr_size-4)}else D.error("av1C reserved_1 parsing problem");else D.error("av1C version "+this.version+" not supported")}),f.createBoxCtor("avcC",function(l){var u,h;for(this.configurationVersion=l.readUint8(),this.AVCProfileIndication=l.readUint8(),this.profile_compatibility=l.readUint8(),this.AVCLevelIndication=l.readUint8(),this.lengthSizeMinusOne=3&l.readUint8(),this.nb_SPS_nalus=31&l.readUint8(),h=this.size-this.hdr_size-6,this.SPS=[],u=0;u<this.nb_SPS_nalus;u++)this.SPS[u]={},this.SPS[u].length=l.readUint16(),this.SPS[u].nalu=l.readUint8Array(this.SPS[u].length),h-=2+this.SPS[u].length;for(this.nb_PPS_nalus=l.readUint8(),h--,this.PPS=[],u=0;u<this.nb_PPS_nalus;u++)this.PPS[u]={},this.PPS[u].length=l.readUint16(),this.PPS[u].nalu=l.readUint8Array(this.PPS[u].length),h-=2+this.PPS[u].length;h>0&&(this.ext=l.readUint8Array(h))}),f.createBoxCtor("btrt",function(l){this.bufferSizeDB=l.readUint32(),this.maxBitrate=l.readUint32(),this.avgBitrate=l.readUint32()}),f.createBoxCtor("clap",function(l){this.cleanApertureWidthN=l.readUint32(),this.cleanApertureWidthD=l.readUint32(),this.cleanApertureHeightN=l.readUint32(),this.cleanApertureHeightD=l.readUint32(),this.horizOffN=l.readUint32(),this.horizOffD=l.readUint32(),this.vertOffN=l.readUint32(),this.vertOffD=l.readUint32()}),f.createBoxCtor("clli",function(l){this.max_content_light_level=l.readUint16(),this.max_pic_average_light_level=l.readUint16()}),f.createFullBoxCtor("co64",function(l){var u,h;if(u=l.readUint32(),this.chunk_offsets=[],0===this.version)for(h=0;h<u;h++)this.chunk_offsets.push(l.readUint64())}),f.createFullBoxCtor("CoLL",function(l){this.maxCLL=l.readUint16(),this.maxFALL=l.readUint16()}),f.createBoxCtor("colr",function(l){if(this.colour_type=l.readString(4),"nclx"===this.colour_type){this.colour_primaries=l.readUint16(),this.transfer_characteristics=l.readUint16(),this.matrix_coefficients=l.readUint16();var u=l.readUint8();this.full_range_flag=u>>7}else("rICC"===this.colour_type||"prof"===this.colour_type)&&(this.ICC_profile=l.readUint8Array(this.size-4))}),f.createFullBoxCtor("cprt",function(l){this.parseLanguage(l),this.notice=l.readCString()}),f.createFullBoxCtor("cslg",function(l){0===this.version&&(this.compositionToDTSShift=l.readInt32(),this.leastDecodeToDisplayDelta=l.readInt32(),this.greatestDecodeToDisplayDelta=l.readInt32(),this.compositionStartTime=l.readInt32(),this.compositionEndTime=l.readInt32())}),f.createFullBoxCtor("ctts",function(l){var u,h;if(u=l.readUint32(),this.sample_counts=[],this.sample_offsets=[],0===this.version)for(h=0;h<u;h++){this.sample_counts.push(l.readUint32());var m=l.readInt32();m<0&&D.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(m)}else if(1==this.version)for(h=0;h<u;h++)this.sample_counts.push(l.readUint32()),this.sample_offsets.push(l.readInt32())}),f.createBoxCtor("dac3",function(l){var u=l.readUint8(),h=l.readUint8(),m=l.readUint8();this.fscod=u>>6,this.bsid=u>>1&31,this.bsmod=(1&u)<<2|h>>6&3,this.acmod=h>>3&7,this.lfeon=h>>2&1,this.bit_rate_code=3&h|m>>5&7}),f.createBoxCtor("dec3",function(l){var u=l.readUint16();this.data_rate=u>>3,this.num_ind_sub=7&u,this.ind_subs=[];for(var h=0;h<this.num_ind_sub+1;h++){var m={};this.ind_subs.push(m);var _=l.readUint8(),w=l.readUint8(),b=l.readUint8();m.fscod=_>>6,m.bsid=_>>1&31,m.bsmod=(1&_)<<4|w>>4&15,m.acmod=w>>1&7,m.lfeon=1&w,m.num_dep_sub=b>>1&15,m.num_dep_sub>0&&(m.chan_loc=(1&b)<<8|l.readUint8())}}),f.createFullBoxCtor("dfLa",function(l){var m=[],_=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];for(this.parseFullHeader(l);;){var w=l.readUint8(),b=Math.min(127&w,_.length-1);if(b?l.readUint8Array(l.readUint24()):(l.readUint8Array(13),this.samplerate=l.readUint32()>>12,l.readUint8Array(20)),m.push(_[b]),128&w)break}this.numMetadataBlocks=m.length+" ("+m.join(", ")+")"}),f.createBoxCtor("dimm",function(l){this.bytessent=l.readUint64()}),f.createBoxCtor("dmax",function(l){this.time=l.readUint32()}),f.createBoxCtor("dmed",function(l){this.bytessent=l.readUint64()}),f.createBoxCtor("dOps",function(l){if(this.Version=l.readUint8(),this.OutputChannelCount=l.readUint8(),this.PreSkip=l.readUint16(),this.InputSampleRate=l.readUint32(),this.OutputGain=l.readInt16(),this.ChannelMappingFamily=l.readUint8(),0!==this.ChannelMappingFamily){this.StreamCount=l.readUint8(),this.CoupledCount=l.readUint8(),this.ChannelMapping=[];for(var u=0;u<this.OutputChannelCount;u++)this.ChannelMapping[u]=l.readUint8()}}),f.createFullBoxCtor("dref",function(l){var u;this.entries=[];for(var m=l.readUint32(),_=0;_<m;_++){if((u=f.parseOneBox(l,!1,this.size-(l.getPosition()-this.start))).code!==f.OK)return;this.entries.push(u.box)}}),f.createBoxCtor("drep",function(l){this.bytessent=l.readUint64()}),f.createFullBoxCtor("elng",function(l){this.extended_language=l.readString(this.size-this.hdr_size)}),f.createFullBoxCtor("elst",function(l){this.entries=[];for(var u=l.readUint32(),h=0;h<u;h++){var m={};this.entries.push(m),1===this.version?(m.segment_duration=l.readUint64(),m.media_time=l.readInt64()):(m.segment_duration=l.readUint32(),m.media_time=l.readInt32()),m.media_rate_integer=l.readInt16(),m.media_rate_fraction=l.readInt16()}}),f.createFullBoxCtor("emsg",function(l){1==this.version?(this.timescale=l.readUint32(),this.presentation_time=l.readUint64(),this.event_duration=l.readUint32(),this.id=l.readUint32(),this.scheme_id_uri=l.readCString(),this.value=l.readCString()):(this.scheme_id_uri=l.readCString(),this.value=l.readCString(),this.timescale=l.readUint32(),this.presentation_time_delta=l.readUint32(),this.event_duration=l.readUint32(),this.id=l.readUint32());var u=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));1==this.version&&(u-=4),this.message_data=l.readUint8Array(u)}),f.createFullBoxCtor("esds",function(l){var u=l.readUint8Array(this.size-this.hdr_size),h=new C;this.esd=h.parseOneDescriptor(new T(u.buffer,0,T.BIG_ENDIAN))}),f.createBoxCtor("fiel",function(l){this.fieldCount=l.readUint8(),this.fieldOrdering=l.readUint8()}),f.createBoxCtor("frma",function(l){this.data_format=l.readString(4)}),f.createBoxCtor("ftyp",function(l){var u=this.size-this.hdr_size;this.major_brand=l.readString(4),this.minor_version=l.readUint32(),u-=8,this.compatible_brands=[];for(var h=0;u>=4;)this.compatible_brands[h]=l.readString(4),u-=4,h++}),f.createFullBoxCtor("hdlr",function(l){0===this.version&&(l.readUint32(),this.handler=l.readString(4),l.readUint32Array(3),this.name=l.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1]&&(this.name=this.name.slice(0,-1)))}),f.createBoxCtor("hvcC",function(l){var u,h,_,w;this.configurationVersion=l.readUint8(),w=l.readUint8(),this.general_profile_space=w>>6,this.general_tier_flag=(32&w)>>5,this.general_profile_idc=31&w,this.general_profile_compatibility=l.readUint32(),this.general_constraint_indicator=l.readUint8Array(6),this.general_level_idc=l.readUint8(),this.min_spatial_segmentation_idc=4095&l.readUint16(),this.parallelismType=3&l.readUint8(),this.chroma_format_idc=3&l.readUint8(),this.bit_depth_luma_minus8=7&l.readUint8(),this.bit_depth_chroma_minus8=7&l.readUint8(),this.avgFrameRate=l.readUint16(),w=l.readUint8(),this.constantFrameRate=w>>6,this.numTemporalLayers=(13&w)>>3,this.temporalIdNested=(4&w)>>2,this.lengthSizeMinusOne=3&w,this.nalu_arrays=[];var b=l.readUint8();for(u=0;u<b;u++){var M=[];this.nalu_arrays.push(M),w=l.readUint8(),M.completeness=(128&w)>>7,M.nalu_type=63&w;var P=l.readUint16();for(h=0;h<P;h++){var K={};M.push(K),_=l.readUint16(),K.data=l.readUint8Array(_)}}}),f.createFullBoxCtor("iinf",function(l){var u;this.entry_count=0===this.version?l.readUint16():l.readUint32(),this.item_infos=[];for(var h=0;h<this.entry_count;h++){if((u=f.parseOneBox(l,!1,this.size-(l.getPosition()-this.start))).code!==f.OK)return;"infe"!==u.box.type&&D.error("BoxParser","Expected 'infe' box, got "+u.box.type),this.item_infos[h]=u.box}}),f.createFullBoxCtor("iloc",function(l){var u;u=l.readUint8(),this.offset_size=u>>4&15,this.length_size=15&u,u=l.readUint8(),this.base_offset_size=u>>4&15,this.index_size=1===this.version||2===this.version?15&u:0,this.items=[];var h=0;if(this.version<2)h=l.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";h=l.readUint32()}for(var m=0;m<h;m++){var _={};if(this.items.push(_),this.version<2)_.item_ID=l.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";_.item_ID=l.readUint16()}switch(_.construction_method=1===this.version||2===this.version?15&l.readUint16():0,_.data_reference_index=l.readUint16(),this.base_offset_size){case 0:_.base_offset=0;break;case 4:_.base_offset=l.readUint32();break;case 8:_.base_offset=l.readUint64();break;default:throw"Error reading base offset size"}var w=l.readUint16();_.extents=[];for(var b=0;b<w;b++){var M={};if(_.extents.push(M),1===this.version||2===this.version)switch(this.index_size){case 0:M.extent_index=0;break;case 4:M.extent_index=l.readUint32();break;case 8:M.extent_index=l.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:M.extent_offset=0;break;case 4:M.extent_offset=l.readUint32();break;case 8:M.extent_offset=l.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:M.extent_length=0;break;case 4:M.extent_length=l.readUint32();break;case 8:M.extent_length=l.readUint64();break;default:throw"Error reading extent index"}}}}),f.createBoxCtor("imir",function(l){var u=l.readUint8();this.reserved=u>>7,this.axis=1&u}),f.createFullBoxCtor("infe",function(l){if((0===this.version||1===this.version)&&(this.item_ID=l.readUint16(),this.item_protection_index=l.readUint16(),this.item_name=l.readCString(),this.content_type=l.readCString(),this.content_encoding=l.readCString()),1===this.version)return this.extension_type=l.readString(4),D.warn("BoxParser","Cannot parse extension type"),void l.seek(this.start+this.size);this.version>=2&&(2===this.version?this.item_ID=l.readUint16():3===this.version&&(this.item_ID=l.readUint32()),this.item_protection_index=l.readUint16(),this.item_type=l.readString(4),this.item_name=l.readCString(),"mime"===this.item_type?(this.content_type=l.readCString(),this.content_encoding=l.readCString()):"uri "===this.item_type&&(this.item_uri_type=l.readCString()))}),f.createFullBoxCtor("ipma",function(l){var u,h;for(entry_count=l.readUint32(),this.associations=[],u=0;u<entry_count;u++){var m={};this.associations.push(m),m.id=this.version<1?l.readUint16():l.readUint32();var _=l.readUint8();for(m.props=[],h=0;h<_;h++){var w=l.readUint8(),b={};m.props.push(b),b.essential=(128&w)>>7==1,b.property_index=1&this.flags?(127&w)<<8|l.readUint8():127&w}}}),f.createFullBoxCtor("iref",function(l){var u,m;for(this.references=[];l.getPosition()<this.start+this.size;){if((u=f.parseOneBox(l,!0,this.size-(l.getPosition()-this.start))).code!==f.OK)return;(m=0===this.version?new f.SingleItemTypeReferenceBox(u.type,u.size,u.hdr_size,u.start):new f.SingleItemTypeReferenceBoxLarge(u.type,u.size,u.hdr_size,u.start)).write===f.Box.prototype.write&&"mdat"!==m.type&&(D.warn("BoxParser",m.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),m.parseDataAndRewind(l)),m.parse(l),this.references.push(m)}}),f.createBoxCtor("irot",function(l){this.angle=3&l.readUint8()}),f.createFullBoxCtor("ispe",function(l){this.image_width=l.readUint32(),this.image_height=l.readUint32()}),f.createFullBoxCtor("kind",function(l){this.schemeURI=l.readCString(),this.value=l.readCString()}),f.createFullBoxCtor("leva",function(l){var u=l.readUint8();this.levels=[];for(var h=0;h<u;h++){var m={};this.levels[h]=m,m.track_ID=l.readUint32();var _=l.readUint8();switch(m.padding_flag=_>>7,m.assignment_type=127&_,m.assignment_type){case 0:m.grouping_type=l.readString(4);break;case 1:m.grouping_type=l.readString(4),m.grouping_type_parameter=l.readUint32();break;case 2:case 3:break;case 4:m.sub_track_id=l.readUint32();break;default:D.warn("BoxParser","Unknown leva assignement type")}}}),f.createBoxCtor("lsel",function(l){this.layer_id=l.readUint16()}),f.createBoxCtor("maxr",function(l){this.period=l.readUint32(),this.bytes=l.readUint32()}),f.createBoxCtor("mdcv",function(l){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=l.readUint16(),this.display_primaries[0].y=l.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=l.readUint16(),this.display_primaries[1].y=l.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=l.readUint16(),this.display_primaries[2].y=l.readUint16(),this.white_point={},this.white_point.x=l.readUint16(),this.white_point.y=l.readUint16(),this.max_display_mastering_luminance=l.readUint32(),this.min_display_mastering_luminance=l.readUint32()}),f.createFullBoxCtor("mdhd",function(l){1==this.version?(this.creation_time=l.readUint64(),this.modification_time=l.readUint64(),this.timescale=l.readUint32(),this.duration=l.readUint64()):(this.creation_time=l.readUint32(),this.modification_time=l.readUint32(),this.timescale=l.readUint32(),this.duration=l.readUint32()),this.parseLanguage(l),l.readUint16()}),f.createFullBoxCtor("mehd",function(l){1&this.flags&&(D.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.fragment_duration=1==this.version?l.readUint64():l.readUint32()}),f.createFullBoxCtor("meta",function(l){this.boxes=[],f.ContainerBox.prototype.parse.call(this,l)}),f.createFullBoxCtor("mfhd",function(l){this.sequence_number=l.readUint32()}),f.createFullBoxCtor("mfro",function(l){this._size=l.readUint32()}),f.createFullBoxCtor("mvhd",function(l){1==this.version?(this.creation_time=l.readUint64(),this.modification_time=l.readUint64(),this.timescale=l.readUint32(),this.duration=l.readUint64()):(this.creation_time=l.readUint32(),this.modification_time=l.readUint32(),this.timescale=l.readUint32(),this.duration=l.readUint32()),this.rate=l.readUint32(),this.volume=l.readUint16()>>8,l.readUint16(),l.readUint32Array(2),this.matrix=l.readUint32Array(9),l.readUint32Array(6),this.next_track_id=l.readUint32()}),f.createBoxCtor("npck",function(l){this.packetssent=l.readUint32()}),f.createBoxCtor("nump",function(l){this.packetssent=l.readUint64()}),f.createFullBoxCtor("padb",function(l){var u=l.readUint32();this.padbits=[];for(var h=0;h<Math.floor((u+1)/2);h++)this.padbits=l.readUint8()}),f.createBoxCtor("pasp",function(l){this.hSpacing=l.readUint32(),this.vSpacing=l.readUint32()}),f.createBoxCtor("payl",function(l){this.text=l.readString(this.size-this.hdr_size)}),f.createBoxCtor("payt",function(l){this.payloadID=l.readUint32();var u=l.readUint8();this.rtpmap_string=l.readString(u)}),f.createFullBoxCtor("pdin",function(l){var u=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var h=0;h<u;h++)this.rate[h]=l.readUint32(),this.initial_delay[h]=l.readUint32()}),f.createFullBoxCtor("pitm",function(l){this.item_id=0===this.version?l.readUint16():l.readUint32()}),f.createFullBoxCtor("pixi",function(l){var u;for(this.num_channels=l.readUint8(),this.bits_per_channels=[],u=0;u<this.num_channels;u++)this.bits_per_channels[u]=l.readUint8()}),f.createBoxCtor("pmax",function(l){this.bytes=l.readUint32()}),f.createFullBoxCtor("prft",function(l){this.ref_track_id=l.readUint32(),this.ntp_timestamp=l.readUint64(),this.media_time=0===this.version?l.readUint32():l.readUint64()}),f.createFullBoxCtor("pssh",function(l){if(this.system_id=f.parseHex16(l),this.version>0){var u=l.readUint32();this.kid=[];for(var h=0;h<u;h++)this.kid[h]=f.parseHex16(l)}var m=l.readUint32();m>0&&(this.data=l.readUint8Array(m))}),f.createFullBoxCtor("clef",function(l){this.width=l.readUint32(),this.height=l.readUint32()}),f.createFullBoxCtor("enof",function(l){this.width=l.readUint32(),this.height=l.readUint32()}),f.createFullBoxCtor("prof",function(l){this.width=l.readUint32(),this.height=l.readUint32()}),f.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),f.createBoxCtor("rtp ",function(l){this.descriptionformat=l.readString(4),this.sdptext=l.readString(this.size-this.hdr_size-4)}),f.createFullBoxCtor("saio",function(l){1&this.flags&&(this.aux_info_type=l.readUint32(),this.aux_info_type_parameter=l.readUint32());var u=l.readUint32();this.offset=[];for(var h=0;h<u;h++)this.offset[h]=0===this.version?l.readUint32():l.readUint64()}),f.createFullBoxCtor("saiz",function(l){1&this.flags&&(this.aux_info_type=l.readUint32(),this.aux_info_type_parameter=l.readUint32()),this.default_sample_info_size=l.readUint8();var u=l.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var h=0;h<u;h++)this.sample_info_size[h]=l.readUint8()}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.mime_format=l.readCString(),this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.namespace=l.readCString(),this.schema_location=l.readCString(),this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.mime_format=l.readCString(),this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(l){this.parseHeader(l),this.namespace=l.readCString(),this.schema_location=l.readCString(),this.auxiliary_mime_types=l.readCString(),this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.mime_format=l.readCString(),this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(l){this.parseHeader(l),this.displayFlags=l.readUint32(),this.horizontal_justification=l.readInt8(),this.vertical_justification=l.readInt8(),this.bg_color_rgba=l.readUint8Array(4),this.box_record=l.readInt16Array(4),this.style_record=l.readUint8Array(12),this.parseFooter(l)}),f.createSampleEntryCtor(f.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(l){this.parseHeader(l),this.parseFooter(l)}),f.createSampleGroupCtor("alst",function(l){var u,h=l.readUint16();for(this.first_output_sample=l.readUint16(),this.sample_offset=[],u=0;u<h;u++)this.sample_offset[u]=l.readUint32();var m=this.description_length-4-4*h;for(this.num_output_samples=[],this.num_total_samples=[],u=0;u<m/4;u++)this.num_output_samples[u]=l.readUint16(),this.num_total_samples[u]=l.readUint16()}),f.createSampleGroupCtor("avll",function(l){this.layerNumber=l.readUint8(),this.accurateStatisticsFlag=l.readUint8(),this.avgBitRate=l.readUint16(),this.avgFrameRate=l.readUint16()}),f.createSampleGroupCtor("avss",function(l){this.subSequenceIdentifier=l.readUint16(),this.layerNumber=l.readUint8();var u=l.readUint8();this.durationFlag=u>>7,this.avgRateFlag=u>>6&1,this.durationFlag&&(this.duration=l.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=l.readUint8(),this.avgBitRate=l.readUint16(),this.avgFrameRate=l.readUint16()),this.dependency=[];for(var h=l.readUint8(),m=0;m<h;m++){var _={};this.dependency.push(_),_.subSeqDirectionFlag=l.readUint8(),_.layerNumber=l.readUint8(),_.subSequenceIdentifier=l.readUint16()}}),f.createSampleGroupCtor("dtrt",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("mvif",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("prol",function(l){this.roll_distance=l.readInt16()}),f.createSampleGroupCtor("rap ",function(l){var u=l.readUint8();this.num_leading_samples_known=u>>7,this.num_leading_samples=127&u}),f.createSampleGroupCtor("rash",function(l){if(this.operation_point_count=l.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)D.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=l.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=l.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var u=0;u<this.operation_point_count;u++)this.available_bitrate[u]=l.readUint32(),this.target_rate_share[u]=l.readUint16()}this.maximum_bitrate=l.readUint32(),this.minimum_bitrate=l.readUint32(),this.discard_priority=l.readUint8()}}),f.createSampleGroupCtor("roll",function(l){this.roll_distance=l.readInt16()}),f.SampleGroupEntry.prototype.parse=function(l){D.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=l.readUint8Array(this.description_length)},f.createSampleGroupCtor("scif",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("scnm",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("seig",function(l){this.reserved=l.readUint8();var u=l.readUint8();this.crypt_byte_block=u>>4,this.skip_byte_block=15&u,this.isProtected=l.readUint8(),this.Per_Sample_IV_Size=l.readUint8(),this.KID=f.parseHex16(l),this.constant_IV_size=0,this.constant_IV=0,1===this.isProtected&&0===this.Per_Sample_IV_Size&&(this.constant_IV_size=l.readUint8(),this.constant_IV=l.readUint8Array(this.constant_IV_size))}),f.createSampleGroupCtor("stsa",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("sync",function(l){var u=l.readUint8();this.NAL_unit_type=63&u}),f.createSampleGroupCtor("tele",function(l){var u=l.readUint8();this.level_independently_decodable=u>>7}),f.createSampleGroupCtor("tsas",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("tscl",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createSampleGroupCtor("vipr",function(l){D.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),f.createFullBoxCtor("sbgp",function(l){this.grouping_type=l.readString(4),this.grouping_type_parameter=1===this.version?l.readUint32():0,this.entries=[];for(var u=l.readUint32(),h=0;h<u;h++){var m={};this.entries.push(m),m.sample_count=l.readInt32(),m.group_description_index=l.readInt32()}}),f.createFullBoxCtor("schm",function(l){this.scheme_type=l.readString(4),this.scheme_version=l.readUint32(),1&this.flags&&(this.scheme_uri=l.readString(this.size-this.hdr_size-8))}),f.createBoxCtor("sdp ",function(l){this.sdptext=l.readString(this.size-this.hdr_size)}),f.createFullBoxCtor("sdtp",function(l){var u,h=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var m=0;m<h;m++)u=l.readUint8(),this.is_leading[m]=u>>6,this.sample_depends_on[m]=u>>4&3,this.sample_is_depended_on[m]=u>>2&3,this.sample_has_redundancy[m]=3&u}),f.createFullBoxCtor("senc"),f.createFullBoxCtor("sgpd",function(l){this.grouping_type=l.readString(4),D.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.default_length=1===this.version?l.readUint32():0,this.version>=2&&(this.default_group_description_index=l.readUint32()),this.entries=[];for(var u=l.readUint32(),h=0;h<u;h++){var m;m=f[this.grouping_type+"SampleGroupEntry"]?new f[this.grouping_type+"SampleGroupEntry"](this.grouping_type):new f.SampleGroupEntry(this.grouping_type),this.entries.push(m),m.description_length=1===this.version&&0===this.default_length?l.readUint32():this.default_length,m.write===f.SampleGroupEntry.prototype.write&&(D.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),m.data=l.readUint8Array(m.description_length),l.position-=m.description_length),m.parse(l)}}),f.createFullBoxCtor("sidx",function(l){this.reference_ID=l.readUint32(),this.timescale=l.readUint32(),0===this.version?(this.earliest_presentation_time=l.readUint32(),this.first_offset=l.readUint32()):(this.earliest_presentation_time=l.readUint64(),this.first_offset=l.readUint64()),l.readUint16(),this.references=[];for(var u=l.readUint16(),h=0;h<u;h++){var m={};this.references.push(m);var _=l.readUint32();m.reference_type=_>>31&1,m.referenced_size=2147483647&_,m.subsegment_duration=l.readUint32(),_=l.readUint32(),m.starts_with_SAP=_>>31&1,m.SAP_type=_>>28&7,m.SAP_delta_time=268435455&_}}),f.SingleItemTypeReferenceBox=function(l,u,h,m){f.Box.call(this,l,u),this.hdr_size=h,this.start=m},f.SingleItemTypeReferenceBox.prototype=new f.Box,f.SingleItemTypeReferenceBox.prototype.parse=function(l){this.from_item_ID=l.readUint16();var u=l.readUint16();this.references=[];for(var h=0;h<u;h++)this.references[h]=l.readUint16()},f.SingleItemTypeReferenceBoxLarge=function(l,u,h,m){f.Box.call(this,l,u),this.hdr_size=h,this.start=m},f.SingleItemTypeReferenceBoxLarge.prototype=new f.Box,f.SingleItemTypeReferenceBoxLarge.prototype.parse=function(l){this.from_item_ID=l.readUint32();var u=l.readUint16();this.references=[];for(var h=0;h<u;h++)this.references[h]=l.readUint32()},f.createFullBoxCtor("SmDm",function(l){this.primaryRChromaticity_x=l.readUint16(),this.primaryRChromaticity_y=l.readUint16(),this.primaryGChromaticity_x=l.readUint16(),this.primaryGChromaticity_y=l.readUint16(),this.primaryBChromaticity_x=l.readUint16(),this.primaryBChromaticity_y=l.readUint16(),this.whitePointChromaticity_x=l.readUint16(),this.whitePointChromaticity_y=l.readUint16(),this.luminanceMax=l.readUint32(),this.luminanceMin=l.readUint32()}),f.createFullBoxCtor("smhd",function(l){this.balance=l.readUint16(),l.readUint16()}),f.createFullBoxCtor("ssix",function(l){this.subsegments=[];for(var u=l.readUint32(),h=0;h<u;h++){var m={};this.subsegments.push(m),m.ranges=[];for(var _=l.readUint32(),w=0;w<_;w++){var b={};m.ranges.push(b),b.level=l.readUint8(),b.range_size=l.readUint24()}}}),f.createFullBoxCtor("stco",function(l){var u;if(u=l.readUint32(),this.chunk_offsets=[],0===this.version)for(var h=0;h<u;h++)this.chunk_offsets.push(l.readUint32())}),f.createFullBoxCtor("stdp",function(l){var u=(this.size-this.hdr_size)/2;this.priority=[];for(var h=0;h<u;h++)this.priority[h]=l.readUint16()}),f.createFullBoxCtor("sthd"),f.createFullBoxCtor("stri",function(l){this.switch_group=l.readUint16(),this.alternate_group=l.readUint16(),this.sub_track_id=l.readUint32();var u=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var h=0;h<u;h++)this.attribute_list[h]=l.readUint32()}),f.createFullBoxCtor("stsc",function(l){var u,h;if(u=l.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(h=0;h<u;h++)this.first_chunk.push(l.readUint32()),this.samples_per_chunk.push(l.readUint32()),this.sample_description_index.push(l.readUint32())}),f.createFullBoxCtor("stsd",function(l){var u,h,m,_;for(this.entries=[],m=l.readUint32(),u=1;u<=m;u++){if((h=f.parseOneBox(l,!0,this.size-(l.getPosition()-this.start))).code!==f.OK)return;f[h.type+"SampleEntry"]?((_=new f[h.type+"SampleEntry"](h.size)).hdr_size=h.hdr_size,_.start=h.start):(D.warn("BoxParser","Unknown sample entry type: "+h.type),_=new f.SampleEntry(h.type,h.size,h.hdr_size,h.start)),_.write===f.SampleEntry.prototype.write&&(D.info("BoxParser","SampleEntry "+_.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),_.parseDataAndRewind(l)),_.parse(l),this.entries.push(_)}}),f.createFullBoxCtor("stsg",function(l){this.grouping_type=l.readUint32();var u=l.readUint16();this.group_description_index=[];for(var h=0;h<u;h++)this.group_description_index[h]=l.readUint32()}),f.createFullBoxCtor("stsh",function(l){var u,h;if(u=l.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(h=0;h<u;h++)this.shadowed_sample_numbers.push(l.readUint32()),this.sync_sample_numbers.push(l.readUint32())}),f.createFullBoxCtor("stss",function(l){var u,h;if(h=l.readUint32(),0===this.version)for(this.sample_numbers=[],u=0;u<h;u++)this.sample_numbers.push(l.readUint32())}),f.createFullBoxCtor("stsz",function(l){var u;if(this.sample_sizes=[],0===this.version)for(this.sample_size=l.readUint32(),this.sample_count=l.readUint32(),u=0;u<this.sample_count;u++)0===this.sample_size?this.sample_sizes.push(l.readUint32()):this.sample_sizes[u]=this.sample_size}),f.createFullBoxCtor("stts",function(l){var u,h,m;if(u=l.readUint32(),this.sample_counts=[],this.sample_deltas=[],0===this.version)for(h=0;h<u;h++)this.sample_counts.push(l.readUint32()),(m=l.readInt32())<0&&(D.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),m=1),this.sample_deltas.push(m)}),f.createFullBoxCtor("stvi",function(l){var u=l.readUint32();this.single_view_allowed=3&u,this.stereo_scheme=l.readUint32();var m,_,h=l.readUint32();for(this.stereo_indication_type=l.readString(h),this.boxes=[];l.getPosition()<this.start+this.size;){if((m=f.parseOneBox(l,!1,this.size-(l.getPosition()-this.start))).code!==f.OK)return;this.boxes.push(_=m.box),this[_.type]=_}}),f.createBoxCtor("styp",function(l){f.ftypBox.prototype.parse.call(this,l)}),f.createFullBoxCtor("stz2",function(l){var u,m;if(this.sample_sizes=[],0===this.version)if(this.reserved=l.readUint24(),this.field_size=l.readUint8(),m=l.readUint32(),4===this.field_size)for(u=0;u<m;u+=2){var _=l.readUint8();this.sample_sizes[u]=_>>4&15,this.sample_sizes[u+1]=15&_}else if(8===this.field_size)for(u=0;u<m;u++)this.sample_sizes[u]=l.readUint8();else if(16===this.field_size)for(u=0;u<m;u++)this.sample_sizes[u]=l.readUint16();else D.error("BoxParser","Error in length field in stz2 box")}),f.createFullBoxCtor("subs",function(l){var u,h,m,_;for(m=l.readUint32(),this.entries=[],u=0;u<m;u++){var w={};if(this.entries[u]=w,w.sample_delta=l.readUint32(),w.subsamples=[],(_=l.readUint16())>0)for(h=0;h<_;h++){var b={};w.subsamples.push(b),b.size=1==this.version?l.readUint32():l.readUint16(),b.priority=l.readUint8(),b.discardable=l.readUint8(),b.codec_specific_parameters=l.readUint32()}}}),f.createFullBoxCtor("tenc",function(l){if(l.readUint8(),0===this.version)l.readUint8();else{var u=l.readUint8();this.default_crypt_byte_block=u>>4&15,this.default_skip_byte_block=15&u}this.default_isProtected=l.readUint8(),this.default_Per_Sample_IV_Size=l.readUint8(),this.default_KID=f.parseHex16(l),1===this.default_isProtected&&0===this.default_Per_Sample_IV_Size&&(this.default_constant_IV_size=l.readUint8(),this.default_constant_IV=l.readUint8Array(this.default_constant_IV_size))}),f.createFullBoxCtor("tfdt",function(l){this.baseMediaDecodeTime=1==this.version?l.readUint64():l.readUint32()}),f.createFullBoxCtor("tfhd",function(l){var u=0;this.track_id=l.readUint32(),this.size-this.hdr_size>u&&this.flags&f.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=l.readUint64(),u+=8):this.base_data_offset=0,this.size-this.hdr_size>u&&this.flags&f.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=l.readUint32(),u+=4):this.default_sample_description_index=0,this.size-this.hdr_size>u&&this.flags&f.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=l.readUint32(),u+=4):this.default_sample_duration=0,this.size-this.hdr_size>u&&this.flags&f.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=l.readUint32(),u+=4):this.default_sample_size=0,this.size-this.hdr_size>u&&this.flags&f.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=l.readUint32(),u+=4):this.default_sample_flags=0}),f.createFullBoxCtor("tfra",function(l){this.track_ID=l.readUint32(),l.readUint24();var u=l.readUint8();this.length_size_of_traf_num=u>>4&3,this.length_size_of_trun_num=u>>2&3,this.length_size_of_sample_num=3&u,this.entries=[];for(var h=l.readUint32(),m=0;m<h;m++)1===this.version?(this.time=l.readUint64(),this.moof_offset=l.readUint64()):(this.time=l.readUint32(),this.moof_offset=l.readUint32()),this.traf_number=l["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=l["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=l["readUint"+8*(this.length_size_of_sample_num+1)]()}),f.createFullBoxCtor("tkhd",function(l){1==this.version?(this.creation_time=l.readUint64(),this.modification_time=l.readUint64(),this.track_id=l.readUint32(),l.readUint32(),this.duration=l.readUint64()):(this.creation_time=l.readUint32(),this.modification_time=l.readUint32(),this.track_id=l.readUint32(),l.readUint32(),this.duration=l.readUint32()),l.readUint32Array(2),this.layer=l.readInt16(),this.alternate_group=l.readInt16(),this.volume=l.readInt16()>>8,l.readUint16(),this.matrix=l.readInt32Array(9),this.width=l.readUint32(),this.height=l.readUint32()}),f.createBoxCtor("tmax",function(l){this.time=l.readUint32()}),f.createBoxCtor("tmin",function(l){this.time=l.readUint32()}),f.createBoxCtor("totl",function(l){this.bytessent=l.readUint32()}),f.createBoxCtor("tpay",function(l){this.bytessent=l.readUint32()}),f.createBoxCtor("tpyl",function(l){this.bytessent=l.readUint64()}),f.TrackGroupTypeBox.prototype.parse=function(l){this.parseFullHeader(l),this.track_group_id=l.readUint32()},f.createTrackGroupCtor("msrc"),f.TrackReferenceTypeBox=function(l,u,h,m){f.Box.call(this,l,u),this.hdr_size=h,this.start=m},f.TrackReferenceTypeBox.prototype=new f.Box,f.TrackReferenceTypeBox.prototype.parse=function(l){this.track_ids=l.readUint32Array((this.size-this.hdr_size)/4)},f.trefBox.prototype.parse=function(l){for(var u,h;l.getPosition()<this.start+this.size;){if((u=f.parseOneBox(l,!0,this.size-(l.getPosition()-this.start))).code!==f.OK)return;(h=new f.TrackReferenceTypeBox(u.type,u.size,u.hdr_size,u.start)).write===f.Box.prototype.write&&"mdat"!==h.type&&(D.info("BoxParser","TrackReference "+h.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),h.parseDataAndRewind(l)),h.parse(l),this.boxes.push(h)}},f.createFullBoxCtor("trep",function(l){for(this.track_ID=l.readUint32(),this.boxes=[];l.getPosition()<this.start+this.size;){if(ret=f.parseOneBox(l,!1,this.size-(l.getPosition()-this.start)),ret.code!==f.OK)return;box=ret.box,this.boxes.push(box)}}),f.createFullBoxCtor("trex",function(l){this.track_id=l.readUint32(),this.default_sample_description_index=l.readUint32(),this.default_sample_duration=l.readUint32(),this.default_sample_size=l.readUint32(),this.default_sample_flags=l.readUint32()}),f.createBoxCtor("trpy",function(l){this.bytessent=l.readUint64()}),f.createFullBoxCtor("trun",function(l){var u=0;if(this.sample_count=l.readUint32(),this.size-this.hdr_size>(u+=4)&&this.flags&f.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=l.readInt32(),u+=4):this.data_offset=0,this.size-this.hdr_size>u&&this.flags&f.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=l.readUint32(),u+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>u)for(var h=0;h<this.sample_count;h++)this.flags&f.TRUN_FLAGS_DURATION&&(this.sample_duration[h]=l.readUint32()),this.flags&f.TRUN_FLAGS_SIZE&&(this.sample_size[h]=l.readUint32()),this.flags&f.TRUN_FLAGS_FLAGS&&(this.sample_flags[h]=l.readUint32()),this.flags&f.TRUN_FLAGS_CTS_OFFSET&&(this.sample_composition_time_offset[h]=0===this.version?l.readUint32():l.readInt32())}),f.createFullBoxCtor("tsel",function(l){this.switch_group=l.readUint32();var u=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var h=0;h<u;h++)this.attribute_list[h]=l.readUint32()}),f.createFullBoxCtor("txtC",function(l){this.config=l.readCString()}),f.createFullBoxCtor("url ",function(l){1!==this.flags&&(this.location=l.readCString())}),f.createFullBoxCtor("urn ",function(l){this.name=l.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=l.readCString())}),f.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(l){this.LiveServerManifest=l.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),f.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(l){this.system_id=f.parseHex16(l);var u=l.readUint32();u>0&&(this.data=l.readUint8Array(u))}),f.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),f.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(l){this.default_AlgorithmID=l.readUint24(),this.default_IV_size=l.readUint8(),this.default_KID=f.parseHex16(l)}),f.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(l){this.fragment_count=l.readUint8(),this.entries=[];for(var u=0;u<this.fragment_count;u++){var h={},m=0,_=0;1===this.version?(m=l.readUint64(),_=l.readUint64()):(m=l.readUint32(),_=l.readUint32()),h.absolute_time=m,h.absolute_duration=_,this.entries.push(h)}}),f.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(l){1===this.version?(this.absolute_time=l.readUint64(),this.duration=l.readUint64()):(this.absolute_time=l.readUint32(),this.duration=l.readUint32())}),f.createFullBoxCtor("vmhd",function(l){this.graphicsmode=l.readUint16(),this.opcolor=l.readUint16Array(3)}),f.createFullBoxCtor("vpcC",function(l){var u;1===this.version?(this.profile=l.readUint8(),this.level=l.readUint8(),u=l.readUint8(),this.bitDepth=u>>4,this.chromaSubsampling=u>>1&7,this.videoFullRangeFlag=1&u,this.colourPrimaries=l.readUint8(),this.transferCharacteristics=l.readUint8(),this.matrixCoefficients=l.readUint8(),this.codecIntializationDataSize=l.readUint16(),this.codecIntializationData=l.readUint8Array(this.codecIntializationDataSize)):(this.profile=l.readUint8(),this.level=l.readUint8(),u=l.readUint8(),this.bitDepth=u>>4&15,this.colorSpace=15&u,u=l.readUint8(),this.chromaSubsampling=u>>4&15,this.transferFunction=u>>1&7,this.videoFullRangeFlag=1&u,this.codecIntializationDataSize=l.readUint16(),this.codecIntializationData=l.readUint8Array(this.codecIntializationDataSize))}),f.createBoxCtor("vttC",function(l){this.text=l.readString(this.size-this.hdr_size)}),f.createFullBoxCtor("vvcC",function(l){var u,h,m={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(ge){this.held_bits=ge.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(ge){this.held_bits=ge.readUint16(),this.num_held_bits=16},extract_bits:function(ge){var De=this.held_bits>>this.num_held_bits-ge&(1<<ge)-1;return this.num_held_bits-=ge,De}};if(m.stream_read_1_bytes(l),m.extract_bits(5),this.lengthSizeMinusOne=m.extract_bits(2),this.ptl_present_flag=m.extract_bits(1),this.ptl_present_flag){if(m.stream_read_2_bytes(l),this.ols_idx=m.extract_bits(9),this.num_sublayers=m.extract_bits(3),this.constant_frame_rate=m.extract_bits(2),this.chroma_format_idc=m.extract_bits(2),m.stream_read_1_bytes(l),this.bit_depth_minus8=m.extract_bits(3),m.extract_bits(5),m.stream_read_2_bytes(l),m.extract_bits(2),this.num_bytes_constraint_info=m.extract_bits(6),this.general_profile_idc=m.extract_bits(7),this.general_tier_flag=m.extract_bits(1),this.general_level_idc=l.readUint8(),m.stream_read_1_bytes(l),this.ptl_frame_only_constraint_flag=m.extract_bits(1),this.ptl_multilayer_enabled_flag=m.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(u=0;u<this.num_bytes_constraint_info-1;u++){var _=m.extract_bits(6);m.stream_read_1_bytes(l);var w=m.extract_bits(2);this.general_constraint_info[u]=_<<2|w}this.general_constraint_info[this.num_bytes_constraint_info-1]=m.extract_bits(6)}else m.extract_bits(6);for(m.stream_read_1_bytes(l),this.ptl_sublayer_present_mask=0,h=this.num_sublayers-2;h>=0;--h){var b=m.extract_bits(1);this.ptl_sublayer_present_mask|=b<<h}for(h=this.num_sublayers;h<=8&&this.num_sublayers>1;++h)m.extract_bits(1);for(h=this.num_sublayers-2;h>=0;--h)this.ptl_sublayer_present_mask&1<<h&&(this.sublayer_level_idc[h]=l.readUint8());if(this.ptl_num_sub_profiles=l.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(u=0;u<this.ptl_num_sub_profiles;u++)this.general_sub_profile_idc.push(l.readUint32());this.max_picture_width=l.readUint16(),this.max_picture_height=l.readUint16(),this.avg_frame_rate=l.readUint16()}this.nalu_arrays=[];var K=l.readUint8();for(u=0;u<K;u++){var ie=[];this.nalu_arrays.push(ie),m.stream_read_1_bytes(l),ie.completeness=m.extract_bits(1),m.extract_bits(2),ie.nalu_type=m.extract_bits(5);var he=1;for(13!=ie.nalu_type&&12!=ie.nalu_type&&(he=l.readUint16()),h=0;h<he;h++){var ye=l.readUint16();ie.push({data:l.readUint8Array(ye),length:ye})}}}),f.createFullBoxCtor("vvnC",function(l){var u=strm.readUint8();this.lengthSizeMinusOne=3&u}),f.SampleEntry.prototype.isVideo=function(){return!1},f.SampleEntry.prototype.isAudio=function(){return!1},f.SampleEntry.prototype.isSubtitle=function(){return!1},f.SampleEntry.prototype.isMetadata=function(){return!1},f.SampleEntry.prototype.isHint=function(){return!1},f.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},f.SampleEntry.prototype.getWidth=function(){return""},f.SampleEntry.prototype.getHeight=function(){return""},f.SampleEntry.prototype.getChannelCount=function(){return""},f.SampleEntry.prototype.getSampleRate=function(){return""},f.SampleEntry.prototype.getSampleSize=function(){return""},f.VisualSampleEntry.prototype.isVideo=function(){return!0},f.VisualSampleEntry.prototype.getWidth=function(){return this.width},f.VisualSampleEntry.prototype.getHeight=function(){return this.height},f.AudioSampleEntry.prototype.isAudio=function(){return!0},f.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},f.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},f.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},f.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},f.MetadataSampleEntry.prototype.isMetadata=function(){return!0},f.decimalToHex=function(l,u){var h=Number(l).toString(16);for(u=typeof u>"u"||null===u?u=2:u;h.length<u;)h="0"+h;return h},f.avc1SampleEntry.prototype.getCodec=f.avc2SampleEntry.prototype.getCodec=f.avc3SampleEntry.prototype.getCodec=f.avc4SampleEntry.prototype.getCodec=function(){var l=f.SampleEntry.prototype.getCodec.call(this);return this.avcC?l+"."+f.decimalToHex(this.avcC.AVCProfileIndication)+f.decimalToHex(this.avcC.profile_compatibility)+f.decimalToHex(this.avcC.AVCLevelIndication):l},f.hev1SampleEntry.prototype.getCodec=f.hvc1SampleEntry.prototype.getCodec=function(){var l,u=f.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(u+=".",this.hvcC.general_profile_space){case 0:u+="";break;case 1:u+="A";break;case 2:u+="B";break;case 3:u+="C"}u+=this.hvcC.general_profile_idc,u+=".";var h=this.hvcC.general_profile_compatibility,m=0;for(l=0;l<32&&(m|=1&h,31!=l);l++)m<<=1,h>>=1;u+=f.decimalToHex(m,0),u+=".",u+=0===this.hvcC.general_tier_flag?"L":"H",u+=this.hvcC.general_level_idc;var _=!1,w="";for(l=5;l>=0;l--)(this.hvcC.general_constraint_indicator[l]||_)&&(w="."+f.decimalToHex(this.hvcC.general_constraint_indicator[l],0)+w,_=!0);u+=w}return u},f.vvc1SampleEntry.prototype.getCodec=f.vvi1SampleEntry.prototype.getCodec=function(){var l,u=f.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){u+="."+this.vvcC.general_profile_idc,u+=this.vvcC.general_tier_flag?".H":".L",u+=this.vvcC.general_level_idc;var h="";if(this.vvcC.general_constraint_info){var w,m=[],_=0;for(_|=this.vvcC.ptl_frame_only_constraint<<7,_|=this.vvcC.ptl_multilayer_enabled<<6,l=0;l<this.vvcC.general_constraint_info.length;++l)m.push(_|=this.vvcC.general_constraint_info[l]>>2&63),_&&(w=l),_=this.vvcC.general_constraint_info[l]>>2&3;if(void 0===w)h=".CA";else{h=".C";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",M=0,P=0;for(l=0;l<=w;++l)for(M=M<<8|m[l],P+=8;P>=5;)h+=b[M>>P-5&31],M&=(1<<(P-=5))-1;P&&(h+=b[31&(M<<=5-P)])}}u+=h}return u},f.mp4aSampleEntry.prototype.getCodec=function(){var l=f.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var u=this.esds.esd.getOTI(),h=this.esds.esd.getAudioConfig();return l+"."+f.decimalToHex(u)+(h?"."+h:"")}return l},f.stxtSampleEntry.prototype.getCodec=function(){var l=f.SampleEntry.prototype.getCodec.call(this);return this.mime_format?l+"."+this.mime_format:l},f.vp08SampleEntry.prototype.getCodec=f.vp09SampleEntry.prototype.getCodec=function(){var l=f.SampleEntry.prototype.getCodec.call(this),u=this.vpcC.level;0==u&&(u="00");var h=this.vpcC.bitDepth;return 8==h&&(h="08"),l+".0"+this.vpcC.profile+"."+u+"."+h},f.av01SampleEntry.prototype.getCodec=function(){var h,l=f.SampleEntry.prototype.getCodec.call(this),u=this.av1C.seq_level_idx_0;return u<10&&(u="0"+u),2===this.av1C.seq_profile&&1===this.av1C.high_bitdepth?h=1===this.av1C.twelve_bit?"12":"10":this.av1C.seq_profile<=2&&(h=1===this.av1C.high_bitdepth?"10":"08"),l+"."+this.av1C.seq_profile+"."+u+(this.av1C.seq_tier_0?"H":"M")+"."+h},f.Box.prototype.writeHeader=function(l,u){this.size+=8,this.size>B&&(this.size+=8),"uuid"===this.type&&(this.size+=16),D.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+l.getPosition()+(u||"")),this.size>B?l.writeUint32(1):(this.sizePosition=l.getPosition(),l.writeUint32(this.size)),l.writeString(this.type,null,4),"uuid"===this.type&&l.writeUint8Array(this.uuid),this.size>B&&l.writeUint64(this.size)},f.FullBox.prototype.writeHeader=function(l){this.size+=4,f.Box.prototype.writeHeader.call(this,l," v="+this.version+" f="+this.flags),l.writeUint8(this.version),l.writeUint24(this.flags)},f.Box.prototype.write=function(l){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(l),l.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(l),this.data&&l.writeUint8Array(this.data))},f.ContainerBox.prototype.write=function(l){this.size=0,this.writeHeader(l);for(var u=0;u<this.boxes.length;u++)this.boxes[u]&&(this.boxes[u].write(l),this.size+=this.boxes[u].size);D.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},f.TrackReferenceTypeBox.prototype.write=function(l){this.size=4*this.track_ids.length,this.writeHeader(l),l.writeUint32Array(this.track_ids)},f.avcCBox.prototype.write=function(l){var u;for(this.size=7,u=0;u<this.SPS.length;u++)this.size+=2+this.SPS[u].length;for(u=0;u<this.PPS.length;u++)this.size+=2+this.PPS[u].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(l),l.writeUint8(this.configurationVersion),l.writeUint8(this.AVCProfileIndication),l.writeUint8(this.profile_compatibility),l.writeUint8(this.AVCLevelIndication),l.writeUint8(this.lengthSizeMinusOne+252),l.writeUint8(this.SPS.length+224),u=0;u<this.SPS.length;u++)l.writeUint16(this.SPS[u].length),l.writeUint8Array(this.SPS[u].nalu);for(l.writeUint8(this.PPS.length),u=0;u<this.PPS.length;u++)l.writeUint16(this.PPS[u].length),l.writeUint8Array(this.PPS[u].nalu);this.ext&&l.writeUint8Array(this.ext)},f.co64Box.prototype.write=function(l){var u;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(l),l.writeUint32(this.chunk_offsets.length),u=0;u<this.chunk_offsets.length;u++)l.writeUint64(this.chunk_offsets[u])},f.cslgBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=20,this.writeHeader(l),l.writeInt32(this.compositionToDTSShift),l.writeInt32(this.leastDecodeToDisplayDelta),l.writeInt32(this.greatestDecodeToDisplayDelta),l.writeInt32(this.compositionStartTime),l.writeInt32(this.compositionEndTime)},f.cttsBox.prototype.write=function(l){var u;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(l),l.writeUint32(this.sample_counts.length),u=0;u<this.sample_counts.length;u++)l.writeUint32(this.sample_counts[u]),1===this.version?l.writeInt32(this.sample_offsets[u]):l.writeUint32(this.sample_offsets[u])},f.drefBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4,this.writeHeader(l),l.writeUint32(this.entries.length);for(var u=0;u<this.entries.length;u++)this.entries[u].write(l),this.size+=this.entries[u].size;D.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},f.elngBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(l),l.writeString(this.extended_language)},f.elstBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(l),l.writeUint32(this.entries.length);for(var u=0;u<this.entries.length;u++){var h=this.entries[u];l.writeUint32(h.segment_duration),l.writeInt32(h.media_time),l.writeInt16(h.media_rate_integer),l.writeInt16(h.media_rate_fraction)}},f.emsgBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(l),l.writeCString(this.scheme_id_uri),l.writeCString(this.value),l.writeUint32(this.timescale),l.writeUint32(this.presentation_time_delta),l.writeUint32(this.event_duration),l.writeUint32(this.id),l.writeUint8Array(this.message_data)},f.ftypBox.prototype.write=function(l){this.size=8+4*this.compatible_brands.length,this.writeHeader(l),l.writeString(this.major_brand,null,4),l.writeUint32(this.minor_version);for(var u=0;u<this.compatible_brands.length;u++)l.writeString(this.compatible_brands[u],null,4)},f.hdlrBox.prototype.write=function(l){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(l),l.writeUint32(0),l.writeString(this.handler,null,4),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeCString(this.name)},f.kindBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(l),l.writeCString(this.schemeURI),l.writeCString(this.value)},f.mdhdBox.prototype.write=function(l){this.size=20,this.flags=0,this.version=0,this.writeHeader(l),l.writeUint32(this.creation_time),l.writeUint32(this.modification_time),l.writeUint32(this.timescale),l.writeUint32(this.duration),l.writeUint16(this.language),l.writeUint16(0)},f.mehdBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4,this.writeHeader(l),l.writeUint32(this.fragment_duration)},f.mfhdBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4,this.writeHeader(l),l.writeUint32(this.sequence_number)},f.mvhdBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=96,this.writeHeader(l),l.writeUint32(this.creation_time),l.writeUint32(this.modification_time),l.writeUint32(this.timescale),l.writeUint32(this.duration),l.writeUint32(this.rate),l.writeUint16(this.volume<<8),l.writeUint16(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32Array(this.matrix),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(this.next_track_id)},f.SampleEntry.prototype.writeHeader=function(l){this.size=8,f.Box.prototype.writeHeader.call(this,l),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint16(this.data_reference_index)},f.SampleEntry.prototype.writeFooter=function(l){for(var u=0;u<this.boxes.length;u++)this.boxes[u].write(l),this.size+=this.boxes[u].size;D.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},f.SampleEntry.prototype.write=function(l){this.writeHeader(l),l.writeUint8Array(this.data),this.size+=this.data.length,D.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},f.VisualSampleEntry.prototype.write=function(l){this.writeHeader(l),this.size+=70,l.writeUint16(0),l.writeUint16(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint16(this.width),l.writeUint16(this.height),l.writeUint32(this.horizresolution),l.writeUint32(this.vertresolution),l.writeUint32(0),l.writeUint16(this.frame_count),l.writeUint8(Math.min(31,this.compressorname.length)),l.writeString(this.compressorname,null,31),l.writeUint16(this.depth),l.writeInt16(-1),this.writeFooter(l)},f.AudioSampleEntry.prototype.write=function(l){this.writeHeader(l),this.size+=20,l.writeUint32(0),l.writeUint32(0),l.writeUint16(this.channel_count),l.writeUint16(this.samplesize),l.writeUint16(0),l.writeUint16(0),l.writeUint32(this.samplerate<<16),this.writeFooter(l)},f.stppSampleEntry.prototype.write=function(l){this.writeHeader(l),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,l.writeCString(this.namespace),l.writeCString(this.schema_location),l.writeCString(this.auxiliary_mime_types),this.writeFooter(l)},f.SampleGroupEntry.prototype.write=function(l){l.writeUint8Array(this.data)},f.sbgpBox.prototype.write=function(l){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(l),l.writeString(this.grouping_type,null,4),l.writeUint32(this.grouping_type_parameter),l.writeUint32(this.entries.length);for(var u=0;u<this.entries.length;u++){var h=this.entries[u];l.writeInt32(h.sample_count),l.writeInt32(h.group_description_index)}},f.sgpdBox.prototype.write=function(l){var u,h;for(this.flags=0,this.size=12,u=0;u<this.entries.length;u++)h=this.entries[u],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=h.data.length);for(this.writeHeader(l),l.writeString(this.grouping_type,null,4),1===this.version&&l.writeUint32(this.default_length),this.version>=2&&l.writeUint32(this.default_sample_description_index),l.writeUint32(this.entries.length),u=0;u<this.entries.length;u++)h=this.entries[u],1===this.version&&0===this.default_length&&l.writeUint32(h.description_length),h.write(l)},f.sidxBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(l),l.writeUint32(this.reference_ID),l.writeUint32(this.timescale),l.writeUint32(this.earliest_presentation_time),l.writeUint32(this.first_offset),l.writeUint16(0),l.writeUint16(this.references.length);for(var u=0;u<this.references.length;u++){var h=this.references[u];l.writeUint32(h.reference_type<<31|h.referenced_size),l.writeUint32(h.subsegment_duration),l.writeUint32(h.starts_with_SAP<<31|h.SAP_type<<28|h.SAP_delta_time)}},f.smhdBox.prototype.write=function(l){this.version=0,this.flags=1,this.size=4,this.writeHeader(l),l.writeUint16(this.balance),l.writeUint16(0)},f.stcoBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(l),l.writeUint32(this.chunk_offsets.length),l.writeUint32Array(this.chunk_offsets)},f.stscBox.prototype.write=function(l){var u;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(l),l.writeUint32(this.first_chunk.length),u=0;u<this.first_chunk.length;u++)l.writeUint32(this.first_chunk[u]),l.writeUint32(this.samples_per_chunk[u]),l.writeUint32(this.sample_description_index[u])},f.stsdBox.prototype.write=function(l){var u;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(l),l.writeUint32(this.entries.length),this.size+=4,u=0;u<this.entries.length;u++)this.entries[u].write(l),this.size+=this.entries[u].size;D.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},f.stshBox.prototype.write=function(l){var u;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(l),l.writeUint32(this.shadowed_sample_numbers.length),u=0;u<this.shadowed_sample_numbers.length;u++)l.writeUint32(this.shadowed_sample_numbers[u]),l.writeUint32(this.sync_sample_numbers[u])},f.stssBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(l),l.writeUint32(this.sample_numbers.length),l.writeUint32Array(this.sample_numbers)},f.stszBox.prototype.write=function(l){var u,h=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(u=0;u+1<this.sample_sizes.length;){if(this.sample_sizes[u+1]!==this.sample_sizes[0]){h=!1;break}u++}else h=!1;this.size=8,h||(this.size+=4*this.sample_sizes.length),this.writeHeader(l),l.writeUint32(h?this.sample_sizes[0]:0),l.writeUint32(this.sample_sizes.length),h||l.writeUint32Array(this.sample_sizes)},f.sttsBox.prototype.write=function(l){var u;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(l),l.writeUint32(this.sample_counts.length),u=0;u<this.sample_counts.length;u++)l.writeUint32(this.sample_counts[u]),l.writeUint32(this.sample_deltas[u])},f.tfdtBox.prototype.write=function(l){var u=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>u?1:0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(l),1===this.version?l.writeUint64(this.baseMediaDecodeTime):l.writeUint32(this.baseMediaDecodeTime)},f.tfhdBox.prototype.write=function(l){this.version=0,this.size=4,this.flags&f.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&f.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&f.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&f.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&f.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(l),l.writeUint32(this.track_id),this.flags&f.TFHD_FLAG_BASE_DATA_OFFSET&&l.writeUint64(this.base_data_offset),this.flags&f.TFHD_FLAG_SAMPLE_DESC&&l.writeUint32(this.default_sample_description_index),this.flags&f.TFHD_FLAG_SAMPLE_DUR&&l.writeUint32(this.default_sample_duration),this.flags&f.TFHD_FLAG_SAMPLE_SIZE&&l.writeUint32(this.default_sample_size),this.flags&f.TFHD_FLAG_SAMPLE_FLAGS&&l.writeUint32(this.default_sample_flags)},f.tkhdBox.prototype.write=function(l){this.version=0,this.size=80,this.writeHeader(l),l.writeUint32(this.creation_time),l.writeUint32(this.modification_time),l.writeUint32(this.track_id),l.writeUint32(0),l.writeUint32(this.duration),l.writeUint32(0),l.writeUint32(0),l.writeInt16(this.layer),l.writeInt16(this.alternate_group),l.writeInt16(this.volume<<8),l.writeUint16(0),l.writeInt32Array(this.matrix),l.writeUint32(this.width),l.writeUint32(this.height)},f.trexBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=20,this.writeHeader(l),l.writeUint32(this.track_id),l.writeUint32(this.default_sample_description_index),l.writeUint32(this.default_sample_duration),l.writeUint32(this.default_sample_size),l.writeUint32(this.default_sample_flags)},f.trunBox.prototype.write=function(l){this.version=0,this.size=4,this.flags&f.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&f.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&f.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&f.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&f.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&f.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(l),l.writeUint32(this.sample_count),this.flags&f.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=l.getPosition(),l.writeInt32(this.data_offset)),this.flags&f.TRUN_FLAGS_FIRST_FLAG&&l.writeUint32(this.first_sample_flags);for(var u=0;u<this.sample_count;u++)this.flags&f.TRUN_FLAGS_DURATION&&l.writeUint32(this.sample_duration[u]),this.flags&f.TRUN_FLAGS_SIZE&&l.writeUint32(this.sample_size[u]),this.flags&f.TRUN_FLAGS_FLAGS&&l.writeUint32(this.sample_flags[u]),this.flags&f.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?l.writeUint32(this.sample_composition_time_offset[u]):l.writeInt32(this.sample_composition_time_offset[u]))},f["url Box"].prototype.write=function(l){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(l),this.location&&l.writeCString(this.location)},f["urn Box"].prototype.write=function(l){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(l),l.writeCString(this.name),this.location&&l.writeCString(this.location)},f.vmhdBox.prototype.write=function(l){this.version=0,this.flags=1,this.size=8,this.writeHeader(l),l.writeUint16(this.graphicsmode),l.writeUint16Array(this.opcolor)},f.cttsBox.prototype.unpack=function(l){var u,h,m;for(m=0,u=0;u<this.sample_counts.length;u++)for(h=0;h<this.sample_counts[u];h++)l[m].pts=l[m].dts+this.sample_offsets[u],m++},f.sttsBox.prototype.unpack=function(l){var u,h,m;for(m=0,u=0;u<this.sample_counts.length;u++)for(h=0;h<this.sample_counts[u];h++)l[m].dts=0===m?0:l[m-1].dts+this.sample_deltas[u],m++},f.stcoBox.prototype.unpack=function(l){var u;for(u=0;u<this.chunk_offsets.length;u++)l[u].offset=this.chunk_offsets[u]},f.stscBox.prototype.unpack=function(l){var u,h,m,_,w;for(_=0,w=0,u=0;u<this.first_chunk.length;u++)for(h=0;h<(u+1<this.first_chunk.length?this.first_chunk[u+1]:1/0);h++)for(w++,m=0;m<this.samples_per_chunk[u];m++){if(!l[_])return;l[_].description_index=this.sample_description_index[u],l[_].chunk_index=w,_++}},f.stszBox.prototype.unpack=function(l){var u;for(u=0;u<this.sample_sizes.length;u++)l[u].size=this.sample_sizes[u]},f.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],f.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],f.boxEqualFields=function(l,u){if(l&&!u)return!1;var h;for(h in l)if(!(f.DIFF_BOXES_PROP_NAMES.indexOf(h)>-1)){if(l[h]instanceof f.Box||u[h]instanceof f.Box)continue;if(typeof l[h]>"u"||typeof u[h]>"u")continue;if("function"==typeof l[h]||"function"==typeof u[h])continue;if(l.subBoxNames&&l.subBoxNames.indexOf(h.slice(0,4))>-1||u.subBoxNames&&u.subBoxNames.indexOf(h.slice(0,4))>-1)continue;if("data"===h||"start"===h||"size"===h||"creation_time"===h||"modification_time"===h)continue;if(f.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(h)>-1)continue;if(l[h]!==u[h])return!1}return!0},f.boxEqual=function(l,u){if(!f.boxEqualFields(l,u))return!1;for(var h=0;h<f.DIFF_BOXES_PROP_NAMES.length;h++){var m=f.DIFF_BOXES_PROP_NAMES[h];if(l[m]&&u[m]&&!f.boxEqual(l[m],u[m]))return!1}return!0};var j=function(){};j.prototype.parseSample=function(l){var u,h,m=new Y(l.buffer);for(u=[];!m.isEos();)(h=f.parseOneBox(m,!1)).code===f.OK&&"vttc"===h.box.type&&u.push(h.box);return u},j.prototype.getText=function(l,u,h){function m(K,ie,he){return he=he||"0",(K+="").length>=ie?K:new Array(ie-K.length+1).join(he)+K}function _(K){var ie=Math.floor(K/3600),he=Math.floor((K-3600*ie)/60),ye=Math.floor(K-3600*ie-60*he),ge=Math.floor(1e3*(K-3600*ie-60*he-ye));return m(ie,2)+":"+m(he,2)+":"+m(ye,2)+"."+m(ge,3)}for(var w=this.parseSample(h),b="",M=0;M<w.length;M++){var P=w[M];b+=_(l)+" --\x3e "+_(u)+"\r\n",b+=P.payl.text}return b};var q=function(){};q.prototype.parseSample=function(l){return new Y(l.data.buffer).readString(l.data.length)},q.prototype.parseConfig=function(l){var h=new Y(l.buffer);return h.readUint32(),h.readCString()};var H=function(l){this.stream=l||new k,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};H.prototype.setSegmentOptions=function(l,u,h){var m=this.getTrackById(l);if(m){var _={};this.fragmentedTracks.push(_),_.id=l,_.user=u,_.trak=m,m.nextSample=0,_.segmentStream=null,_.nb_samples=1e3,_.rapAlignement=!0,h&&(h.nbSamples&&(_.nb_samples=h.nbSamples),h.rapAlignement&&(_.rapAlignement=h.rapAlignement))}},H.prototype.unsetSegmentOptions=function(l){for(var u=-1,h=0;h<this.fragmentedTracks.length;h++)this.fragmentedTracks[h].id==l&&(u=h);u>-1&&this.fragmentedTracks.splice(u,1)},H.prototype.setExtractionOptions=function(l,u,h){var m=this.getTrackById(l);if(m){var _={};this.extractedTracks.push(_),_.id=l,_.user=u,_.trak=m,m.nextSample=0,_.nb_samples=1e3,_.samples=[],h&&h.nbSamples&&(_.nb_samples=h.nbSamples)}},H.prototype.unsetExtractionOptions=function(l){for(var u=-1,h=0;h<this.extractedTracks.length;h++)this.extractedTracks[h].id==l&&(u=h);u>-1&&this.extractedTracks.splice(u,1)},H.prototype.parse=function(){var u,h;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;){if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}if(this.saveParsePosition&&this.saveParsePosition(),(u=f.parseOneBox(this.stream,!1)).code===f.ERR_NOT_ENOUGH_DATA){if(this.processIncompleteBox){if(this.processIncompleteBox(u))continue;return}return}var _;switch(_="uuid"!==(h=u.box).type?h.type:h.uuid,this.boxes.push(h),_){case"mdat":this.mdats.push(h);break;case"moof":this.moofs.push(h);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[_]&&D.warn("ISOFile","Duplicate Box of type: "+_+", overriding previous occurrence"),this[_]=h}this.updateUsedBytes&&this.updateUsedBytes(h,u)}},H.prototype.checkBuffer=function(l){if(null==l)throw"Buffer must be defined and non empty";if(void 0===l.fileStart)throw"Buffer must have a fileStart property";return 0===l.byteLength?(D.warn("ISOFile","Ignoring empty buffer (fileStart: "+l.fileStart+")"),this.stream.logBufferLevel(),!1):(D.info("ISOFile","Processing buffer (fileStart: "+l.fileStart+")"),l.usedBytes=0,this.stream.insertBuffer(l),this.stream.logBufferLevel(),!!this.stream.initialized()||(D.warn("ISOFile","Not ready to start parsing"),!1))},H.prototype.appendBuffer=function(l,u){var h;if(this.checkBuffer(l))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(u),this.nextSeekPosition?(h=this.nextSeekPosition,this.nextSeekPosition=void 0):h=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(h=this.stream.getEndFilePositionAfter(h))):h=this.nextParsePosition?this.nextParsePosition:0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(D.info("ISOFile","Done processing buffer (fileStart: "+l.fileStart+") - next buffer to fetch should have a fileStart position of "+h),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),D.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),h},H.prototype.getInfo=function(){var l,u,m,_,w,b,h={},M=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(h.hasMoov=!0,h.duration=this.moov.mvhd.duration,h.timescale=this.moov.mvhd.timescale,h.isFragmented=null!=this.moov.mvex,h.isFragmented&&this.moov.mvex.mehd&&(h.fragment_duration=this.moov.mvex.mehd.fragment_duration),h.isProgressive=this.isProgressive,h.hasIOD=null!=this.moov.iods,h.brands=[],h.brands.push(this.ftyp.major_brand),h.brands=h.brands.concat(this.ftyp.compatible_brands),h.created=new Date(M+1e3*this.moov.mvhd.creation_time),h.modified=new Date(M+1e3*this.moov.mvhd.modification_time),h.tracks=[],h.audioTracks=[],h.videoTracks=[],h.subtitleTracks=[],h.metadataTracks=[],h.hintTracks=[],h.otherTracks=[],l=0;l<this.moov.traks.length;l++){if(b=(m=this.moov.traks[l]).mdia.minf.stbl.stsd.entries[0],h.tracks.push(_={}),_.id=m.tkhd.track_id,_.name=m.mdia.hdlr.name,_.references=[],m.tref)for(u=0;u<m.tref.boxes.length;u++)_.references.push(w={}),w.type=m.tref.boxes[u].type,w.track_ids=m.tref.boxes[u].track_ids;m.edts&&(_.edits=m.edts.elst.entries),_.created=new Date(M+1e3*m.tkhd.creation_time),_.modified=new Date(M+1e3*m.tkhd.modification_time),_.movie_duration=m.tkhd.duration,_.movie_timescale=h.timescale,_.layer=m.tkhd.layer,_.alternate_group=m.tkhd.alternate_group,_.volume=m.tkhd.volume,_.matrix=m.tkhd.matrix,_.track_width=m.tkhd.width/65536,_.track_height=m.tkhd.height/65536,_.timescale=m.mdia.mdhd.timescale,_.cts_shift=m.mdia.minf.stbl.cslg,_.duration=m.mdia.mdhd.duration,_.samples_duration=m.samples_duration,_.codec=b.getCodec(),_.kind=m.udta&&m.udta.kinds.length?m.udta.kinds[0]:{schemeURI:"",value:""},_.language=m.mdia.elng?m.mdia.elng.extended_language:m.mdia.mdhd.languageString,_.nb_samples=m.samples.length,_.size=m.samples_size,_.bitrate=8*_.size*_.timescale/_.samples_duration,b.isAudio()?(_.type="audio",h.audioTracks.push(_),_.audio={},_.audio.sample_rate=b.getSampleRate(),_.audio.channel_count=b.getChannelCount(),_.audio.sample_size=b.getSampleSize()):b.isVideo()?(_.type="video",h.videoTracks.push(_),_.video={},_.video.width=b.getWidth(),_.video.height=b.getHeight()):b.isSubtitle()?(_.type="subtitles",h.subtitleTracks.push(_)):b.isHint()?(_.type="metadata",h.hintTracks.push(_)):b.isMetadata()?(_.type="metadata",h.metadataTracks.push(_)):(_.type="metadata",h.otherTracks.push(_))}else h.hasMoov=!1;if(h.mime="",h.hasMoov&&h.tracks){for(h.mime+=h.videoTracks&&h.videoTracks.length>0?'video/mp4; codecs="':h.audioTracks&&h.audioTracks.length>0?'audio/mp4; codecs="':'application/mp4; codecs="',l=0;l<h.tracks.length;l++)0!==l&&(h.mime+=","),h.mime+=h.tracks[l].codec;h.mime+='"; profiles="',h.mime+=this.ftyp.compatible_brands.join(),h.mime+='"'}return h},H.prototype.processSamples=function(l){var u,h;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(u=0;u<this.fragmentedTracks.length;u++){var m=this.fragmentedTracks[u];for(h=m.trak;h.nextSample<h.samples.length&&this.sampleProcessingStarted;){D.debug("ISOFile","Creating media fragment on track #"+m.id+" for sample "+h.nextSample);var _=this.createFragment(m.id,h.nextSample,m.segmentStream);if(!_)break;if(m.segmentStream=_,h.nextSample++,(h.nextSample%m.nb_samples==0||l||h.nextSample>=h.samples.length)&&(D.info("ISOFile","Sending fragmented data on track #"+m.id+" for samples ["+Math.max(0,h.nextSample-m.nb_samples)+","+(h.nextSample-1)+"]"),D.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(m.id,m.user,m.segmentStream.buffer,h.nextSample,l||h.nextSample>=h.samples.length),m.segmentStream=null,m!==this.fragmentedTracks[u]))break}}if(null!==this.onSamples)for(u=0;u<this.extractedTracks.length;u++){var w=this.extractedTracks[u];for(h=w.trak;h.nextSample<h.samples.length&&this.sampleProcessingStarted;){D.debug("ISOFile","Exporting on track #"+w.id+" sample #"+h.nextSample);var b=this.getSample(h,h.nextSample);if(!b)break;if(h.nextSample++,w.samples.push(b),(h.nextSample%w.nb_samples==0||h.nextSample>=h.samples.length)&&(D.debug("ISOFile","Sending samples on track #"+w.id+" for sample "+h.nextSample),this.onSamples&&this.onSamples(w.id,w.user,w.samples),w.samples=[],w!==this.extractedTracks[u]))break}}}},H.prototype.getBox=function(l){var u=this.getBoxes(l,!0);return u.length?u[0]:null},H.prototype.getBoxes=function(l,u){var h=[];return H._sweep.call(this,l,h,u),h},H._sweep=function(l,u,h){for(var m in this.type&&this.type==l&&u.push(this),this.boxes){if(u.length&&h)return;H._sweep.call(this.boxes[m],l,u,h)}},H.prototype.getTrackSamplesInfo=function(l){var u=this.getTrackById(l);if(u)return u.samples},H.prototype.getTrackSample=function(l,u){var h=this.getTrackById(l);return this.getSample(h,u)},H.prototype.releaseUsedSamples=function(l,u){var h=0,m=this.getTrackById(l);m.lastValidSample||(m.lastValidSample=0);for(var _=m.lastValidSample;_<u;_++)h+=this.releaseSample(m,_);D.info("ISOFile","Track #"+l+" released samples up to "+u+" (released size: "+h+", remaining: "+this.samplesDataSize+")"),m.lastValidSample=u},H.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},H.prototype.stop=function(){this.sampleProcessingStarted=!1},H.prototype.flush=function(){D.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},H.prototype.seekTrack=function(l,u,h){var m,_,w,P,b=0,M=0;if(0===h.samples.length)return D.info("ISOFile","No sample in track, cannot seek! Using time "+D.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(m=0;m<h.samples.length;m++){if(_=h.samples[m],0===m)M=0,P=_.timescale;else if(_.cts>l*_.timescale){M=m-1;break}u&&_.is_sync&&(b=m)}for(u&&(M=b),l=h.samples[M].cts,h.nextSample=M;h.samples[M].alreadyRead===h.samples[M].size&&h.samples[M+1];)M++;return w=h.samples[M].offset+h.samples[M].alreadyRead,D.info("ISOFile","Seeking to "+(u?"RAP":"")+" sample #"+h.nextSample+" on track "+h.tkhd.track_id+", time "+D.getDurationString(l,P)+" and offset: "+w),{offset:w,time:l/P}},H.prototype.seek=function(l,u){var _,w,h=this.moov,b={offset:1/0,time:1/0};if(this.moov){for(w=0;w<h.traks.length;w++)(_=this.seekTrack(l,u,h.traks[w])).offset<b.offset&&(b.offset=_.offset),_.time<b.time&&(b.time=_.time);return D.info("ISOFile","Seeking at time "+D.getDurationString(b.time,1)+" needs a buffer with a fileStart position of "+b.offset),b.offset===1/0?b={offset:this.nextParsePosition,time:0}:b.offset=this.stream.getEndFilePositionAfter(b.offset),D.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+b.offset),b}throw"Cannot seek: moov not received!"},H.prototype.equal=function(l){for(var u=0;u<this.boxes.length&&u<l.boxes.length;){if(!f.boxEqual(this.boxes[u],l.boxes[u]))return!1;u++}return!0},H.prototype.lastBoxStartPosition=0,H.prototype.parsingMdat=null,H.prototype.nextParsePosition=0,H.prototype.discardMdatData=!1,H.prototype.processIncompleteBox=function(l){var u;return"mdat"===l.type?(u=new f[l.type+"Box"](l.size),this.parsingMdat=u,this.boxes.push(u),this.mdats.push(u),u.start=l.start,u.hdr_size=l.hdr_size,this.stream.addUsedBytes(u.hdr_size),this.lastBoxStartPosition=u.start+u.size,this.stream.seek(u.start+u.size,!1,this.discardMdatData)?(this.parsingMdat=null,!0):(this.nextParsePosition=this.moovStartFound?this.stream.findEndContiguousBuf():u.start+u.size,!1)):("moov"===l.type&&(this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0)),this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer()?(this.nextParsePosition=this.stream.getEndPosition(),!0):(this.nextParsePosition=l.type?this.moovStartFound?this.stream.getEndPosition():this.stream.getPosition()+l.size:this.stream.getEndPosition(),!1))},H.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},H.prototype.processIncompleteMdat=function(){var l;return this.stream.seek((l=this.parsingMdat).start+l.size,!1,this.discardMdatData)?(D.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},H.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},H.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},H.prototype.updateUsedBytes=function(l,u){this.stream.addUsedBytes&&("mdat"===l.type?(this.stream.addUsedBytes(l.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(l.size-l.hdr_size)):this.stream.addUsedBytes(l.size))},H.prototype.add=f.Box.prototype.add,H.prototype.addBox=f.Box.prototype.addBox,H.prototype.init=function(l){var u=l||{},m=(this.add("ftyp").set("major_brand",u.brands&&u.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",u.brands||["iso4"]),this.add("moov"));return m.add("mvhd").set("timescale",u.timescale||600).set("rate",u.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",u.duration||0).set("volume",u.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),m.add("mvex"),this},H.prototype.addTrack=function(l){this.moov||this.init(l);var u=l||{};u.width=u.width||320,u.height=u.height||320,u.id=u.id||this.moov.mvhd.next_track_id,u.type=u.type||"avc1";var h=this.moov.add("trak");this.moov.mvhd.next_track_id=u.id+1,h.add("tkhd").set("flags",f.TKHD_FLAG_ENABLED|f.TKHD_FLAG_IN_MOVIE|f.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",u.id).set("duration",u.duration||0).set("layer",u.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",u.width<<16).set("height",u.height<<16);var m=h.add("mdia");m.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",u.timescale||1).set("duration",u.media_duration||0).set("language",u.language||"und"),m.add("hdlr").set("handler",u.hdlr||"vide").set("name",u.name||"Track created with MP4Box.js"),m.add("elng").set("extended_language",u.language||"fr-FR");var _=m.add("minf");if(void 0!==f[u.type+"SampleEntry"]){var w=new f[u.type+"SampleEntry"];w.data_reference_index=1;var b="";for(var M in f.sampleEntryCodes)for(var P=f.sampleEntryCodes[M],K=0;K<P.length;K++)if(P.indexOf(u.type)>-1){b=M;break}switch(b){case"Visual":if(_.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),w.set("width",u.width).set("height",u.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",u.type+" Compressor").set("depth",24),u.avcDecoderConfigRecord){var ie=new f.avcCBox,he=new Y(u.avcDecoderConfigRecord);ie.parse(he),w.addBox(ie)}break;case"Audio":_.add("smhd").set("balance",u.balance||0),w.set("channel_count",u.channel_count||2).set("samplesize",u.samplesize||16).set("samplerate",u.samplerate||65536);break;case"Hint":_.add("hmhd");break;case"Subtitle":"stpp"===(_.add("sthd"),u.type)&&w.set("namespace",u.namespace||"nonamespace").set("schema_location",u.schema_location||"").set("auxiliary_mime_types",u.auxiliary_mime_types||"");break;default:_.add("nmhd")}u.description&&w.addBox(u.description),u.description_boxes&&u.description_boxes.forEach(function(ge){w.addBox(ge)}),_.add("dinf").add("dref").addEntry((new f["url Box"]).set("flags",1));var ye=_.add("stbl");return ye.add("stsd").addEntry(w),ye.add("stts").set("sample_counts",[]).set("sample_deltas",[]),ye.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),ye.add("stco").set("chunk_offsets",[]),ye.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",u.id).set("default_sample_description_index",u.default_sample_description_index||1).set("default_sample_duration",u.default_sample_duration||0).set("default_sample_size",u.default_sample_size||0).set("default_sample_flags",u.default_sample_flags||0),this.buildTrakSampleLists(h),u.id}},f.Box.prototype.computeSize=function(l){var u=l||new T;u.endianness=T.BIG_ENDIAN,this.write(u)},H.prototype.addSample=function(l,u,h){var m=h||{},_={},w=this.getTrackById(l);if(null!==w){_.number=w.samples.length,_.track_id=w.tkhd.track_id,_.timescale=w.mdia.mdhd.timescale,_.description_index=m.sample_description_index?m.sample_description_index-1:0,_.description=w.mdia.minf.stbl.stsd.entries[_.description_index],_.data=u,_.size=u.byteLength,_.alreadyRead=_.size,_.duration=m.duration||1,_.cts=m.cts||0,_.dts=m.dts||0,_.is_sync=m.is_sync||!1,_.is_leading=m.is_leading||0,_.depends_on=m.depends_on||0,_.is_depended_on=m.is_depended_on||0,_.has_redundancy=m.has_redundancy||0,_.degradation_priority=m.degradation_priority||0,_.offset=0,_.subsamples=m.subsamples,w.samples.push(_),w.samples_size+=_.size,w.samples_duration+=_.duration,w.first_dts||(w.first_dts=m.dts),this.processSamples();var b=this.createSingleSampleMoof(_);return this.addBox(b),b.computeSize(),b.trafs[0].truns[0].data_offset=b.size+8,this.add("mdat").data=new Uint8Array(u),_}},H.prototype.createSingleSampleMoof=function(l){var u;u=l.is_sync?1<<25:65536;var h=new f.moofBox;h.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var m=h.add("traf"),_=this.getTrackById(l.track_id);return m.add("tfhd").set("track_id",l.track_id).set("flags",f.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),m.add("tfdt").set("baseMediaDecodeTime",l.dts-(_.first_dts||0)),m.add("trun").set("flags",f.TRUN_FLAGS_DATA_OFFSET|f.TRUN_FLAGS_DURATION|f.TRUN_FLAGS_SIZE|f.TRUN_FLAGS_FLAGS|f.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[l.duration]).set("sample_size",[l.size]).set("sample_flags",[u]).set("sample_composition_time_offset",[l.cts-l.dts]),h},H.prototype.lastMoofIndex=0,H.prototype.samplesDataSize=0,H.prototype.resetTables=function(){var l,u,m,w,b;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,l=0;l<this.moov.traks.length;l++){(u=this.moov.traks[l]).tkhd.duration=0,u.mdia.mdhd.duration=0,(u.mdia.minf.stbl.stco||u.mdia.minf.stbl.co64).chunk_offsets=[],(m=u.mdia.minf.stbl.stsc).first_chunk=[],m.samples_per_chunk=[],m.sample_description_index=[],(u.mdia.minf.stbl.stsz||u.mdia.minf.stbl.stz2).sample_sizes=[],(w=u.mdia.minf.stbl.stts).sample_counts=[],w.sample_deltas=[],(b=u.mdia.minf.stbl.ctts)&&(b.sample_counts=[],b.sample_offsets=[]);var P=u.mdia.minf.stbl.boxes.indexOf(u.mdia.minf.stbl.stss);-1!=P&&(u.mdia.minf.stbl.boxes[P]=null)}},H.initSampleGroups=function(l,u,h,m,_){var w,b,P,K;function ie(he,ye,ge){this.grouping_type=he,this.grouping_type_parameter=ye,this.sbgp=ge,this.last_sample_in_run=-1,this.entry_index=-1}for(u&&(u.sample_groups_info=[]),l.sample_groups_info||(l.sample_groups_info=[]),b=0;b<h.length;b++){for(K=h[b].grouping_type+"/"+h[b].grouping_type_parameter,P=new ie(h[b].grouping_type,h[b].grouping_type_parameter,h[b]),u&&(u.sample_groups_info[K]=P),l.sample_groups_info[K]||(l.sample_groups_info[K]=P),w=0;w<m.length;w++)m[w].grouping_type===h[b].grouping_type&&(P.description=m[w],P.description.used=!0);if(_)for(w=0;w<_.length;w++)_[w].grouping_type===h[b].grouping_type&&(P.fragment_description=_[w],P.fragment_description.used=!0,P.is_fragment=!0)}if(u){if(_)for(b=0;b<_.length;b++)!_[b].used&&_[b].version>=2&&(K=_[b].grouping_type+"/0",(P=new ie(_[b].grouping_type,0)).is_fragment=!0,u.sample_groups_info[K]||(u.sample_groups_info[K]=P))}else for(b=0;b<m.length;b++)!m[b].used&&m[b].version>=2&&(K=m[b].grouping_type+"/0",P=new ie(m[b].grouping_type,0),l.sample_groups_info[K]||(l.sample_groups_info[K]=P))},H.setSampleGroupProperties=function(l,u,h,m){var _,w;for(_ in u.sample_groups=[],m)if(u.sample_groups[_]={},u.sample_groups[_].grouping_type=m[_].grouping_type,u.sample_groups[_].grouping_type_parameter=m[_].grouping_type_parameter,h>=m[_].last_sample_in_run&&(m[_].last_sample_in_run<0&&(m[_].last_sample_in_run=0),m[_].entry_index++,m[_].entry_index<=m[_].sbgp.entries.length-1&&(m[_].last_sample_in_run+=m[_].sbgp.entries[m[_].entry_index].sample_count)),u.sample_groups[_].group_description_index=m[_].entry_index<=m[_].sbgp.entries.length-1?m[_].sbgp.entries[m[_].entry_index].group_description_index:-1,0!==u.sample_groups[_].group_description_index){var b;b=m[_].fragment_description?m[_].fragment_description:m[_].description,u.sample_groups[_].group_description_index>0?(w=u.sample_groups[_].group_description_index>65535?(u.sample_groups[_].group_description_index>>16)-1:u.sample_groups[_].group_description_index-1,b&&w>=0&&(u.sample_groups[_].description=b.entries[w])):b&&b.version>=2&&b.default_group_description_index>0&&(u.sample_groups[_].description=b.entries[b.default_group_description_index-1])}},H.process_sdtp=function(l,u,h){!u||(l?(u.is_leading=l.is_leading[h],u.depends_on=l.sample_depends_on[h],u.is_depended_on=l.sample_is_depended_on[h],u.has_redundancy=l.sample_has_redundancy[h]):(u.is_leading=0,u.depends_on=0,u.is_depended_on=0,u.has_redundancy=0))},H.prototype.buildSampleLists=function(){var l;for(l=0;l<this.moov.traks.length;l++)this.buildTrakSampleLists(this.moov.traks[l])},H.prototype.buildTrakSampleLists=function(l){var u,m,_,w,b,M,P,K,ie,he,ye,ge,De,vt,Ht,Kt,yn,Jt,Qe,U,A,z,I,ne;if(l.samples=[],l.samples_duration=0,l.samples_size=0,m=l.mdia.minf.stbl.stco||l.mdia.minf.stbl.co64,_=l.mdia.minf.stbl.stsc,w=l.mdia.minf.stbl.stsz||l.mdia.minf.stbl.stz2,b=l.mdia.minf.stbl.stts,M=l.mdia.minf.stbl.ctts,P=l.mdia.minf.stbl.stss,K=l.mdia.minf.stbl.stsd,ie=l.mdia.minf.stbl.subs,ge=l.mdia.minf.stbl.stdp,Jt=-1,Qe=-1,U=-1,A=-1,z=0,I=0,ne=0,H.initSampleGroups(l,null,he=l.mdia.minf.stbl.sbgps,ye=l.mdia.minf.stbl.sgpds),!(typeof w>"u")){for(u=0;u<w.sample_sizes.length;u++){var re={};re.number=u,re.track_id=l.tkhd.track_id,re.timescale=l.mdia.mdhd.timescale,re.alreadyRead=0,l.samples[u]=re,re.size=w.sample_sizes[u],l.samples_size+=re.size,0===u?(De=0,re.chunk_index=vt=1,re.chunk_run_index=De,yn=_.samples_per_chunk[De],Kt=0,Ht=De+1<_.first_chunk.length?_.first_chunk[De+1]-1:1/0):u<yn?(re.chunk_index=vt,re.chunk_run_index=De):(vt++,re.chunk_index=vt,Kt=0,vt<=Ht||(Ht=1+ ++De<_.first_chunk.length?_.first_chunk[De+1]-1:1/0),re.chunk_run_index=De,yn+=_.samples_per_chunk[De]),re.description_index=_.sample_description_index[re.chunk_run_index]-1,re.description=K.entries[re.description_index],re.offset=m.chunk_offsets[re.chunk_index-1]+Kt,Kt+=re.size,u>Jt&&(Qe++,Jt<0&&(Jt=0),Jt+=b.sample_counts[Qe]),u>0?(l.samples[u-1].duration=b.sample_deltas[Qe],l.samples_duration+=l.samples[u-1].duration,re.dts=l.samples[u-1].dts+l.samples[u-1].duration):re.dts=0,M?(u>=U&&(A++,U<0&&(U=0),U+=M.sample_counts[A]),re.cts=l.samples[u].dts+M.sample_offsets[A]):re.cts=re.dts,P?(u==P.sample_numbers[z]-1?(re.is_sync=!0,z++):(re.is_sync=!1,re.degradation_priority=0),ie&&ie.entries[I].sample_delta+ne==u+1&&(re.subsamples=ie.entries[I].subsamples,ne+=ie.entries[I].sample_delta,I++)):re.is_sync=!0,H.process_sdtp(l.mdia.minf.stbl.sdtp,re,re.number),re.degradation_priority=ge?ge.priority[u]:0,ie&&ie.entries[I].sample_delta+ne==u&&(re.subsamples=ie.entries[I].subsamples,ne+=ie.entries[I].sample_delta),(he.length>0||ye.length>0)&&H.setSampleGroupProperties(l,re,u,l.sample_groups_info)}u>0&&(l.samples[u-1].duration=Math.max(l.mdia.mdhd.duration-l.samples[u-1].dts,0),l.samples_duration+=l.samples[u-1].duration)}},H.prototype.updateSampleLists=function(){var l,u,h,m,_,w,b,M,P,K,ie,he,ye,ge,De;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(P=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==P.type)for(K=P,l=0;l<K.trafs.length;l++){for(he=this.getTrackById((ie=K.trafs[l]).tfhd.track_id),ye=this.getTrexById(ie.tfhd.track_id),m=ie.tfhd.flags&f.TFHD_FLAG_SAMPLE_DESC?ie.tfhd.default_sample_description_index:ye?ye.default_sample_description_index:1,_=ie.tfhd.flags&f.TFHD_FLAG_SAMPLE_DUR?ie.tfhd.default_sample_duration:ye?ye.default_sample_duration:0,w=ie.tfhd.flags&f.TFHD_FLAG_SAMPLE_SIZE?ie.tfhd.default_sample_size:ye?ye.default_sample_size:0,b=ie.tfhd.flags&f.TFHD_FLAG_SAMPLE_FLAGS?ie.tfhd.default_sample_flags:ye?ye.default_sample_flags:0,ie.sample_number=0,ie.sbgps.length>0&&H.initSampleGroups(he,ie,ie.sbgps,he.mdia.minf.stbl.sgpds,ie.sgpds),u=0;u<ie.truns.length;u++){var vt=ie.truns[u];for(h=0;h<vt.sample_count;h++){(ge={}).moof_number=this.lastMoofIndex,ge.number_in_traf=ie.sample_number,ie.sample_number++,ge.number=he.samples.length,ie.first_sample_index=he.samples.length,he.samples.push(ge),ge.track_id=he.tkhd.track_id,ge.timescale=he.mdia.mdhd.timescale,ge.description_index=m-1,ge.description=he.mdia.minf.stbl.stsd.entries[ge.description_index],ge.size=w,vt.flags&f.TRUN_FLAGS_SIZE&&(ge.size=vt.sample_size[h]),he.samples_size+=ge.size,ge.duration=_,vt.flags&f.TRUN_FLAGS_DURATION&&(ge.duration=vt.sample_duration[h]),he.samples_duration+=ge.duration,he.first_traf_merged||h>0?ge.dts=he.samples[he.samples.length-2].dts+he.samples[he.samples.length-2].duration:(ge.dts=ie.tfdt?ie.tfdt.baseMediaDecodeTime:0,he.first_traf_merged=!0),ge.cts=ge.dts,vt.flags&f.TRUN_FLAGS_CTS_OFFSET&&(ge.cts=ge.dts+vt.sample_composition_time_offset[h]),De=b,vt.flags&f.TRUN_FLAGS_FLAGS?De=vt.sample_flags[h]:0===h&&vt.flags&f.TRUN_FLAGS_FIRST_FLAG&&(De=vt.first_sample_flags),ge.is_sync=!(De>>16&1),ge.is_leading=De>>26&3,ge.depends_on=De>>24&3,ge.is_depended_on=De>>22&3,ge.has_redundancy=De>>20&3,ge.degradation_priority=65535&De;var Jt;Jt=ie.tfhd.flags&f.TFHD_FLAG_BASE_DATA_OFFSET?ie.tfhd.base_data_offset:ie.tfhd.flags&f.TFHD_FLAG_DEFAULT_BASE_IS_MOOF||0===u?K.start:M,ge.offset=0===u&&0===h?vt.flags&f.TRUN_FLAGS_DATA_OFFSET?Jt+vt.data_offset:Jt:M,M=ge.offset+ge.size,(ie.sbgps.length>0||ie.sgpds.length>0||he.mdia.minf.stbl.sbgps.length>0||he.mdia.minf.stbl.sgpds.length>0)&&H.setSampleGroupProperties(he,ge,ge.number_in_traf,ie.sample_groups_info)}}if(ie.subs){he.has_fragment_subsamples=!0;var Qe=ie.first_sample_index;for(u=0;u<ie.subs.entries.length;u++)(ge=he.samples[(Qe+=ie.subs.entries[u].sample_delta)-1]).subsamples=ie.subs.entries[u].subsamples}}},H.prototype.getSample=function(l,u){var h,m=l.samples[u];if(!this.moov)return null;if(m.data){if(m.alreadyRead==m.size)return m}else m.data=new Uint8Array(m.size),m.alreadyRead=0,this.samplesDataSize+=m.size,D.debug("ISOFile","Allocating sample #"+u+" on track #"+l.tkhd.track_id+" of size "+m.size+" (total: "+this.samplesDataSize+")");for(;;){var _=this.stream.findPosition(!0,m.offset+m.alreadyRead,!1);if(!(_>-1))return null;var w=(h=this.stream.buffers[_]).byteLength-(m.offset+m.alreadyRead-h.fileStart);if(m.size-m.alreadyRead<=w)return D.debug("ISOFile","Getting sample #"+u+" data (alreadyRead: "+m.alreadyRead+" offset: "+(m.offset+m.alreadyRead-h.fileStart)+" read size: "+(m.size-m.alreadyRead)+" full size: "+m.size+")"),T.memcpy(m.data.buffer,m.alreadyRead,h,m.offset+m.alreadyRead-h.fileStart,m.size-m.alreadyRead),h.usedBytes+=m.size-m.alreadyRead,this.stream.logBufferLevel(),m.alreadyRead=m.size,m;if(0===w)return null;D.debug("ISOFile","Getting sample #"+u+" partial data (alreadyRead: "+m.alreadyRead+" offset: "+(m.offset+m.alreadyRead-h.fileStart)+" read size: "+w+" full size: "+m.size+")"),T.memcpy(m.data.buffer,m.alreadyRead,h,m.offset+m.alreadyRead-h.fileStart,w),m.alreadyRead+=w,h.usedBytes+=w,this.stream.logBufferLevel()}},H.prototype.releaseSample=function(l,u){var h=l.samples[u];return h.data?(this.samplesDataSize-=h.size,h.data=null,h.alreadyRead=0,h.size):0},H.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},H.prototype.getCodecs=function(){var l,u="";for(l=0;l<this.moov.traks.length;l++)l>0&&(u+=","),u+=this.moov.traks[l].mdia.minf.stbl.stsd.entries[0].getCodec();return u},H.prototype.getTrexById=function(l){var u;if(!this.moov||!this.moov.mvex)return null;for(u=0;u<this.moov.mvex.trexs.length;u++){var h=this.moov.mvex.trexs[u];if(h.track_id==l)return h}return null},H.prototype.getTrackById=function(l){if(void 0===this.moov)return null;for(var u=0;u<this.moov.traks.length;u++){var h=this.moov.traks[u];if(h.tkhd.track_id==l)return h}return null},H.prototype.items=[],H.prototype.itemsDataSize=0,H.prototype.flattenItemInfo=function(){var u,h,m,l=this.items,_=this.meta;if(null!=_&&void 0!==_.hdlr&&void 0!==_.iinf){for(u=0;u<_.iinf.item_infos.length;u++)(m={}).id=_.iinf.item_infos[u].item_ID,l[m.id]=m,m.ref_to=[],m.name=_.iinf.item_infos[u].item_name,_.iinf.item_infos[u].protection_index>0&&(m.protection=_.ipro.protections[_.iinf.item_infos[u].protection_index-1]),m.type=_.iinf.item_infos[u].item_type?_.iinf.item_infos[u].item_type:"mime",m.content_type=_.iinf.item_infos[u].content_type,m.content_encoding=_.iinf.item_infos[u].content_encoding;if(_.iloc)for(u=0;u<_.iloc.items.length;u++){var b=_.iloc.items[u];switch(m=l[b.item_ID],0!==b.data_reference_index&&(D.warn("Item storage with reference to other files: not supported"),m.source=_.dinf.boxes[b.data_reference_index-1]),b.construction_method){case 0:break;case 1:case 2:D.warn("Item storage with construction_method : not supported")}for(m.extents=[],m.size=0,h=0;h<b.extents.length;h++)m.extents[h]={},m.extents[h].offset=b.extents[h].extent_offset+b.base_offset,m.extents[h].length=b.extents[h].extent_length,m.extents[h].alreadyRead=0,m.size+=m.extents[h].length}if(_.pitm&&(l[_.pitm.item_id].primary=!0),_.iref)for(u=0;u<_.iref.references.length;u++){var M=_.iref.references[u];for(h=0;h<M.references.length;h++)l[M.from_item_ID].ref_to.push({type:M.type,id:M.references[h]})}if(_.iprp)for(var P=0;P<_.iprp.ipmas.length;P++){var K=_.iprp.ipmas[P];for(u=0;u<K.associations.length;u++){var ie=K.associations[u];for(void 0===(m=l[ie.id]).properties&&(m.properties={},m.properties.boxes=[]),h=0;h<ie.props.length;h++){var he=ie.props[h];if(he.property_index>0&&he.property_index-1<_.iprp.ipco.boxes.length){var ye=_.iprp.ipco.boxes[he.property_index-1];m.properties[ye.type]=ye,m.properties.boxes.push(ye)}}}}}},H.prototype.getItem=function(l){var u,h;if(!this.meta)return null;if(!(h=this.items[l]).data&&h.size)h.data=new Uint8Array(h.size),h.alreadyRead=0,this.itemsDataSize+=h.size,D.debug("ISOFile","Allocating item #"+l+" of size "+h.size+" (total: "+this.itemsDataSize+")");else if(h.alreadyRead===h.size)return h;for(var m=0;m<h.extents.length;m++){var _=h.extents[m];if(_.alreadyRead!==_.length){var w=this.stream.findPosition(!0,_.offset+_.alreadyRead,!1);if(!(w>-1))return null;var b=(u=this.stream.buffers[w]).byteLength-(_.offset+_.alreadyRead-u.fileStart);if(!(_.length-_.alreadyRead<=b))return D.debug("ISOFile","Getting item #"+l+" extent #"+m+" partial data (alreadyRead: "+_.alreadyRead+" offset: "+(_.offset+_.alreadyRead-u.fileStart)+" read size: "+b+" full extent size: "+_.length+" full item size: "+h.size+")"),T.memcpy(h.data.buffer,h.alreadyRead,u,_.offset+_.alreadyRead-u.fileStart,b),_.alreadyRead+=b,h.alreadyRead+=b,u.usedBytes+=b,this.stream.logBufferLevel(),null;D.debug("ISOFile","Getting item #"+l+" extent #"+m+" data (alreadyRead: "+_.alreadyRead+" offset: "+(_.offset+_.alreadyRead-u.fileStart)+" read size: "+(_.length-_.alreadyRead)+" full extent size: "+_.length+" full item size: "+h.size+")"),T.memcpy(h.data.buffer,h.alreadyRead,u,_.offset+_.alreadyRead-u.fileStart,_.length-_.alreadyRead),u.usedBytes+=_.length-_.alreadyRead,this.stream.logBufferLevel(),h.alreadyRead+=_.length-_.alreadyRead,_.alreadyRead=_.length}}return h.alreadyRead===h.size?h:null},H.prototype.releaseItem=function(l){var u=this.items[l];if(u.data){this.itemsDataSize-=u.size,u.data=null,u.alreadyRead=0;for(var h=0;h<u.extents.length;h++)u.extents[h].alreadyRead=0;return u.size}return 0},H.prototype.processItems=function(l){for(var u in this.items){var h=this.items[u];this.getItem(h.id),l&&!h.sent&&(l(h),h.sent=!0,h.data=null)}},H.prototype.hasItem=function(l){for(var u in this.items){var h=this.items[u];if(h.name===l)return h.id}return-1},H.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},H.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},H.prototype.itemToFragmentedTrackFile=function(l){var h,u=l||{};if(null==(h=u.itemId?this.getItem(u.itemId):this.getPrimaryItem()))return null;var m=new H;m.discardMdatData=!1;var _={type:h.type,description_boxes:h.properties.boxes};h.properties.ispe&&(_.width=h.properties.ispe.image_width,_.height=h.properties.ispe.image_height);var w=m.addTrack(_);return w?(m.addSample(w,h.data),m):null},H.prototype.write=function(l){for(var u=0;u<this.boxes.length;u++)this.boxes[u].write(l)},H.prototype.createFragment=function(l,u,h){var m=this.getTrackById(l),_=this.getSample(m,u);if(null==_)return _=m.samples[u],this.nextSeekPosition=this.nextSeekPosition?Math.min(_.offset+_.alreadyRead,this.nextSeekPosition):m.samples[u].offset+_.alreadyRead,null;var w=h||new T;w.endianness=T.BIG_ENDIAN;var b=this.createSingleSampleMoof(_);b.write(w),b.trafs[0].truns[0].data_offset=b.size+8,D.debug("MP4Box","Adjusting data_offset with new value "+b.trafs[0].truns[0].data_offset),w.adjustUint32(b.trafs[0].truns[0].data_offset_position,b.trafs[0].truns[0].data_offset);var M=new f.mdatBox;return M.data=_.data,M.write(w),w},H.writeInitializationSegment=function(l,u,h,m){var _;D.debug("ISOFile","Generating initialization segment");var K=new T;K.endianness=T.BIG_ENDIAN,l.write(K);var ie=u.add("mvex");for(h&&ie.add("mehd").set("fragment_duration",h),_=0;_<u.traks.length;_++)ie.add("trex").set("track_id",u.traks[_].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",m).set("default_sample_size",0).set("default_sample_flags",65536);return u.write(K),K.buffer},H.prototype.save=function(l){var u=new T;u.endianness=T.BIG_ENDIAN,this.write(u),u.save(l)},H.prototype.getBuffer=function(){var l=new T;return l.endianness=T.BIG_ENDIAN,this.write(l),l.buffer},H.prototype.initializeSegmentation=function(){var l,m,_,w;for(null===this.onSegment&&D.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),m=[],l=0;l<this.fragmentedTracks.length;l++){var b=new f.moovBox;b.mvhd=this.moov.mvhd,b.boxes.push(b.mvhd),_=this.getTrackById(this.fragmentedTracks[l].id),b.boxes.push(_),b.traks.push(_),(w={}).id=_.tkhd.track_id,w.user=this.fragmentedTracks[l].user,w.buffer=H.writeInitializationSegment(this.ftyp,b,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[l].samples.length>0?this.moov.traks[l].samples[0].duration:0),m.push(w)}return m},f.Box.prototype.printHeader=function(l){this.size+=8,this.size>B&&(this.size+=8),"uuid"===this.type&&(this.size+=16),l.log(l.indent+"size:"+this.size),l.log(l.indent+"type:"+this.type)},f.FullBox.prototype.printHeader=function(l){this.size+=4,f.Box.prototype.printHeader.call(this,l),l.log(l.indent+"version:"+this.version),l.log(l.indent+"flags:"+this.flags)},f.Box.prototype.print=function(l){this.printHeader(l)},f.ContainerBox.prototype.print=function(l){this.printHeader(l);for(var u=0;u<this.boxes.length;u++)if(this.boxes[u]){var h=l.indent;l.indent+=" ",this.boxes[u].print(l),l.indent=h}},H.prototype.print=function(l){l.indent="";for(var u=0;u<this.boxes.length;u++)this.boxes[u]&&this.boxes[u].print(l)},f.mvhdBox.prototype.print=function(l){f.FullBox.prototype.printHeader.call(this,l),l.log(l.indent+"creation_time: "+this.creation_time),l.log(l.indent+"modification_time: "+this.modification_time),l.log(l.indent+"timescale: "+this.timescale),l.log(l.indent+"duration: "+this.duration),l.log(l.indent+"rate: "+this.rate),l.log(l.indent+"volume: "+(this.volume>>8)),l.log(l.indent+"matrix: "+this.matrix.join(", ")),l.log(l.indent+"next_track_id: "+this.next_track_id)},f.tkhdBox.prototype.print=function(l){f.FullBox.prototype.printHeader.call(this,l),l.log(l.indent+"creation_time: "+this.creation_time),l.log(l.indent+"modification_time: "+this.modification_time),l.log(l.indent+"track_id: "+this.track_id),l.log(l.indent+"duration: "+this.duration),l.log(l.indent+"volume: "+(this.volume>>8)),l.log(l.indent+"matrix: "+this.matrix.join(", ")),l.log(l.indent+"layer: "+this.layer),l.log(l.indent+"alternate_group: "+this.alternate_group),l.log(l.indent+"width: "+this.width),l.log(l.indent+"height: "+this.height)};var W_createFile=function(l,u){var h=void 0===l||l,m=new H(u);return m.discardMdatData=!h,m};Ce.cn=W_createFile},884:(Ee,Ce,J)=>{"use strict";Ee.exports=J(95)},95:(Ee,Ce,J)=>{"use strict";var D=Ce;function Y(){D.util._configure(),D.Writer._configure(D.BufferWriter),D.Reader._configure(D.BufferReader)}D.build="minimal",D.Writer=J(650),D.BufferWriter=J(813),D.Reader=J(270),D.BufferReader=J(354),D.util=J(211),D.rpc=J(830),D.roots=J(671),D.configure=Y,Y()},270:(Ee,Ce,J)=>{"use strict";Ee.exports=C;var Y,D=J(211),T=D.LongBits,B=D.utf8;function k(W,l){return RangeError("index out of range: "+W.pos+" + "+(l||1)+" > "+W.len)}function C(W){this.buf=W,this.pos=0,this.len=W.length}var l,f=typeof Uint8Array<"u"?function(l){if(l instanceof Uint8Array||Array.isArray(l))return new C(l);throw Error("illegal buffer")}:function(l){if(Array.isArray(l))return new C(l);throw Error("illegal buffer")},j=function(){return D.Buffer?function(u){return(C.create=function(m){return D.Buffer.isBuffer(m)?new Y(m):f(m)})(u)}:f};function X(){var W=new T(0,0),l=0;if(!(this.len-this.pos>4)){for(;l<3;++l){if(this.pos>=this.len)throw k(this);if(W.lo=(W.lo|(127&this.buf[this.pos])<<7*l)>>>0,this.buf[this.pos++]<128)return W}return W.lo=(W.lo|(127&this.buf[this.pos++])<<7*l)>>>0,W}for(;l<4;++l)if(W.lo=(W.lo|(127&this.buf[this.pos])<<7*l)>>>0,this.buf[this.pos++]<128)return W;if(W.lo=(W.lo|(127&this.buf[this.pos])<<28)>>>0,W.hi=(W.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return W;if(l=0,this.len-this.pos>4){for(;l<5;++l)if(W.hi=(W.hi|(127&this.buf[this.pos])<<7*l+3)>>>0,this.buf[this.pos++]<128)return W}else for(;l<5;++l){if(this.pos>=this.len)throw k(this);if(W.hi=(W.hi|(127&this.buf[this.pos])<<7*l+3)>>>0,this.buf[this.pos++]<128)return W}throw Error("invalid varint encoding")}function q(W,l){return(W[l-4]|W[l-3]<<8|W[l-2]<<16|W[l-1]<<24)>>>0}function H(){if(this.pos+8>this.len)throw k(this,8);return new T(q(this.buf,this.pos+=4),q(this.buf,this.pos+=4))}C.create=j(),C.prototype._slice=D.Array.prototype.subarray||D.Array.prototype.slice,C.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return l;if((this.pos+=5)>this.len)throw this.pos=this.len,k(this,10);return l}),C.prototype.int32=function(){return 0|this.uint32()},C.prototype.sint32=function(){var l=this.uint32();return l>>>1^-(1&l)|0},C.prototype.bool=function(){return 0!==this.uint32()},C.prototype.fixed32=function(){if(this.pos+4>this.len)throw k(this,4);return q(this.buf,this.pos+=4)},C.prototype.sfixed32=function(){if(this.pos+4>this.len)throw k(this,4);return 0|q(this.buf,this.pos+=4)},C.prototype.float=function(){if(this.pos+4>this.len)throw k(this,4);var l=D.float.readFloatLE(this.buf,this.pos);return this.pos+=4,l},C.prototype.double=function(){if(this.pos+8>this.len)throw k(this,4);var l=D.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,l},C.prototype.bytes=function(){var l=this.uint32(),u=this.pos,h=this.pos+l;if(h>this.len)throw k(this,l);return this.pos+=l,Array.isArray(this.buf)?this.buf.slice(u,h):u===h?new this.buf.constructor(0):this._slice.call(this.buf,u,h)},C.prototype.string=function(){var l=this.bytes();return B.read(l,0,l.length)},C.prototype.skip=function(l){if("number"==typeof l){if(this.pos+l>this.len)throw k(this,l);this.pos+=l}else do{if(this.pos>=this.len)throw k(this)}while(128&this.buf[this.pos++]);return this},C.prototype.skipType=function(W){switch(W){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(W=7&this.uint32());)this.skipType(W);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+W+" at offset "+this.pos)}return this},C._configure=function(W){Y=W,C.create=j(),Y._configure();var l=D.Long?"toLong":"toNumber";D.merge(C.prototype,{int64:function(){return X.call(this)[l](!1)},uint64:function(){return X.call(this)[l](!0)},sint64:function(){return X.call(this).zzDecode()[l](!1)},fixed64:function(){return H.call(this)[l](!0)},sfixed64:function(){return H.call(this)[l](!1)}})}},354:(Ee,Ce,J)=>{"use strict";Ee.exports=T;var D=J(270);(T.prototype=Object.create(D.prototype)).constructor=T;var Y=J(211);function T(B){D.call(this,B)}T._configure=function(){Y.Buffer&&(T.prototype._slice=Y.Buffer.prototype.slice)},T.prototype.string=function(){var k=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+k,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+k,this.len))},T._configure()},671:Ee=>{"use strict";Ee.exports={}},830:(Ee,Ce,J)=>{"use strict";Ce.Service=J(346)},346:(Ee,Ce,J)=>{"use strict";Ee.exports=Y;var D=J(211);function Y(T,B,k){if("function"!=typeof T)throw TypeError("rpcImpl must be a function");D.EventEmitter.call(this),this.rpcImpl=T,this.requestDelimited=Boolean(B),this.responseDelimited=Boolean(k)}(Y.prototype=Object.create(D.EventEmitter.prototype)).constructor=Y,Y.prototype.rpcCall=function T(B,k,C,f,j){if(!f)throw TypeError("request must be specified");var X=this;if(!j)return D.asPromise(T,X,B,k,C,f);if(X.rpcImpl)try{return X.rpcImpl(B,k[X.requestDelimited?"encodeDelimited":"encode"](f).finish(),function(H,W){if(H)return X.emit("error",H,B),j(H);if(null!==W){if(!(W instanceof C))try{W=C[X.responseDelimited?"decodeDelimited":"decode"](W)}catch(l){return X.emit("error",l,B),j(l)}return X.emit("data",W,B),j(null,W)}X.end(!0)})}catch(q){return X.emit("error",q,B),void setTimeout(function(){j(q)},0)}else setTimeout(function(){j(Error("already ended"))},0)},Y.prototype.end=function(B){return this.rpcImpl&&(B||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},942:(Ee,Ce,J)=>{"use strict";Ee.exports=Y;var D=J(211);function Y(C,f){this.lo=C>>>0,this.hi=f>>>0}var T=Y.zero=new Y(0,0);T.toNumber=function(){return 0},T.zzEncode=T.zzDecode=function(){return this},T.length=function(){return 1};var B=Y.zeroHash="\0\0\0\0\0\0\0\0";Y.fromNumber=function(f){if(0===f)return T;var j=f<0;j&&(f=-f);var X=f>>>0,q=(f-X)/4294967296>>>0;return j&&(q=~q>>>0,X=~X>>>0,++X>4294967295&&(X=0,++q>4294967295&&(q=0))),new Y(X,q)},Y.from=function(f){if("number"==typeof f)return Y.fromNumber(f);if(D.isString(f)){if(!D.Long)return Y.fromNumber(parseInt(f,10));f=D.Long.fromString(f)}return f.low||f.high?new Y(f.low>>>0,f.high>>>0):T},Y.prototype.toNumber=function(f){if(!f&&this.hi>>>31){var j=1+~this.lo>>>0,X=~this.hi>>>0;return j||(X=X+1>>>0),-(j+4294967296*X)}return this.lo+4294967296*this.hi},Y.prototype.toLong=function(f){return D.Long?new D.Long(0|this.lo,0|this.hi,Boolean(f)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(f)}};var k=String.prototype.charCodeAt;Y.fromHash=function(f){return f===B?T:new Y((k.call(f,0)|k.call(f,1)<<8|k.call(f,2)<<16|k.call(f,3)<<24)>>>0,(k.call(f,4)|k.call(f,5)<<8|k.call(f,6)<<16|k.call(f,7)<<24)>>>0)},Y.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Y.prototype.zzEncode=function(){var f=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^f)>>>0,this.lo=(this.lo<<1^f)>>>0,this},Y.prototype.zzDecode=function(){var f=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^f)>>>0,this.hi=(this.hi>>>1^f)>>>0,this},Y.prototype.length=function(){var f=this.lo,j=(this.lo>>>28|this.hi<<4)>>>0,X=this.hi>>>24;return 0===X?0===j?f<16384?f<128?1:2:f<2097152?3:4:j<16384?j<128?5:6:j<2097152?7:8:X<128?9:10}},211:function(Ee,Ce,J){"use strict";var D=Ce;function Y(B,k,C){for(var f=Object.keys(k),j=0;j<f.length;++j)(void 0===B[f[j]]||!C)&&(B[f[j]]=k[f[j]]);return B}function T(B){function k(C,f){if(!(this instanceof k))return new k(C,f);Object.defineProperty(this,"message",{get:function(){return C}}),Error.captureStackTrace?Error.captureStackTrace(this,k):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),f&&Y(this,f)}return k.prototype=Object.create(Error.prototype,{constructor:{value:k,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>B,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),k}D.asPromise=J(280),D.base64=J(39),D.EventEmitter=J(889),D.float=J(530),D.inquire=J(716),D.utf8=J(768),D.pool=J(479),D.LongBits=J(942),D.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),D.global=D.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||this,D.emptyArray=Object.freeze?Object.freeze([]):[],D.emptyObject=Object.freeze?Object.freeze({}):{},D.isInteger=Number.isInteger||function(k){return"number"==typeof k&&isFinite(k)&&Math.floor(k)===k},D.isString=function(k){return"string"==typeof k||k instanceof String},D.isObject=function(k){return k&&"object"==typeof k},D.isset=D.isSet=function(k,C){var f=k[C];return!(null==f||!k.hasOwnProperty(C))&&("object"!=typeof f||(Array.isArray(f)?f.length:Object.keys(f).length)>0)},D.Buffer=function(){try{var B=D.inquire("buffer").Buffer;return B.prototype.utf8Write?B:null}catch{return null}}(),D._Buffer_from=null,D._Buffer_allocUnsafe=null,D.newBuffer=function(k){return"number"==typeof k?D.Buffer?D._Buffer_allocUnsafe(k):new D.Array(k):D.Buffer?D._Buffer_from(k):typeof Uint8Array>"u"?k:new Uint8Array(k)},D.Array=typeof Uint8Array<"u"?Uint8Array:Array,D.Long=D.global.dcodeIO&&D.global.dcodeIO.Long||D.global.Long||D.inquire("long"),D.key2Re=/^true|false|0|1$/,D.key32Re=/^-?(?:0|[1-9][0-9]*)$/,D.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,D.longToHash=function(k){return k?D.LongBits.from(k).toHash():D.LongBits.zeroHash},D.longFromHash=function(k,C){var f=D.LongBits.fromHash(k);return D.Long?D.Long.fromBits(f.lo,f.hi,C):f.toNumber(Boolean(C))},D.merge=Y,D.lcFirst=function(k){return k.charAt(0).toLowerCase()+k.substring(1)},D.newError=T,D.ProtocolError=T("ProtocolError"),D.oneOfGetter=function(k){for(var C={},f=0;f<k.length;++f)C[k[f]]=1;return function(){for(var j=Object.keys(this),X=j.length-1;X>-1;--X)if(1===C[j[X]]&&null!=this[j[X]])return j[X]}},D.oneOfSetter=function(k){return function(C){for(var f=0;f<k.length;++f)k[f]!==C&&delete this[k[f]]}},D.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},D._configure=function(){var B=D.Buffer;B?(D._Buffer_from=B.from!==Uint8Array.from&&B.from||function(C,f){return new B(C,f)},D._Buffer_allocUnsafe=B.allocUnsafe||function(C){return new B(C)}):D._Buffer_from=D._Buffer_allocUnsafe=null}},650:(Ee,Ce,J)=>{"use strict";Ee.exports=X;var Y,D=J(211),T=D.LongBits,B=D.base64,k=D.utf8;function C(_,w,b){this.fn=_,this.len=w,this.next=void 0,this.val=b}function f(){}function j(_){this.head=_.head,this.tail=_.tail,this.len=_.len,this.next=_.states}function X(){this.len=0,this.head=new C(f,0,0),this.tail=this.head,this.states=null}var q=function(){return D.Buffer?function(){return(X.create=function(){return new Y})()}:function(){return new X}};function H(_,w,b){w[b]=255&_}function l(_,w){this.len=_,this.next=void 0,this.val=w}function u(_,w,b){for(;_.hi;)w[b++]=127&_.lo|128,_.lo=(_.lo>>>7|_.hi<<25)>>>0,_.hi>>>=7;for(;_.lo>127;)w[b++]=127&_.lo|128,_.lo=_.lo>>>7;w[b++]=_.lo}function h(_,w,b){w[b]=255&_,w[b+1]=_>>>8&255,w[b+2]=_>>>16&255,w[b+3]=_>>>24}X.create=q(),X.alloc=function(w){return new D.Array(w)},D.Array!==Array&&(X.alloc=D.pool(X.alloc,D.Array.prototype.subarray)),X.prototype._push=function(w,b,M){return this.tail=this.tail.next=new C(w,b,M),this.len+=b,this},(l.prototype=Object.create(C.prototype)).fn=function W(_,w,b){for(;_>127;)w[b++]=127&_|128,_>>>=7;w[b]=_},X.prototype.uint32=function(w){return this.len+=(this.tail=this.tail.next=new l((w>>>=0)<128?1:w<16384?2:w<2097152?3:w<268435456?4:5,w)).len,this},X.prototype.int32=function(w){return w<0?this._push(u,10,T.fromNumber(w)):this.uint32(w)},X.prototype.sint32=function(w){return this.uint32((w<<1^w>>31)>>>0)},X.prototype.int64=X.prototype.uint64=function(w){var b=T.from(w);return this._push(u,b.length(),b)},X.prototype.sint64=function(w){var b=T.from(w).zzEncode();return this._push(u,b.length(),b)},X.prototype.bool=function(w){return this._push(H,1,w?1:0)},X.prototype.sfixed32=X.prototype.fixed32=function(w){return this._push(h,4,w>>>0)},X.prototype.sfixed64=X.prototype.fixed64=function(w){var b=T.from(w);return this._push(h,4,b.lo)._push(h,4,b.hi)},X.prototype.float=function(w){return this._push(D.float.writeFloatLE,4,w)},X.prototype.double=function(w){return this._push(D.float.writeDoubleLE,8,w)};var m=D.Array.prototype.set?function(w,b,M){b.set(w,M)}:function(w,b,M){for(var P=0;P<w.length;++P)b[M+P]=w[P]};X.prototype.bytes=function(w){var b=w.length>>>0;if(!b)return this._push(H,1,0);if(D.isString(w)){var M=X.alloc(b=B.length(w));B.decode(w,M,0),w=M}return this.uint32(b)._push(m,b,w)},X.prototype.string=function(w){var b=k.length(w);return b?this.uint32(b)._push(k.write,b,w):this._push(H,1,0)},X.prototype.fork=function(){return this.states=new j(this),this.head=this.tail=new C(f,0,0),this.len=0,this},X.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new C(f,0,0),this.len=0),this},X.prototype.ldelim=function(){var w=this.head,b=this.tail,M=this.len;return this.reset().uint32(M),M&&(this.tail.next=w.next,this.tail=b,this.len+=M),this},X.prototype.finish=function(){for(var w=this.head.next,b=this.constructor.alloc(this.len),M=0;w;)w.fn(w.val,b,M),M+=w.len,w=w.next;return b},X._configure=function(_){Y=_,X.create=q(),Y._configure()}},813:(Ee,Ce,J)=>{"use strict";Ee.exports=T;var D=J(650);(T.prototype=Object.create(D.prototype)).constructor=T;var Y=J(211);function T(){D.call(this)}function B(k,C,f){k.length<40?Y.utf8.write(k,C,f):C.utf8Write?C.utf8Write(k,f):C.write(k,f)}T._configure=function(){T.alloc=Y._Buffer_allocUnsafe,T.writeBytesBuffer=Y.Buffer&&Y.Buffer.prototype instanceof Uint8Array&&"set"===Y.Buffer.prototype.set.name?function(C,f,j){f.set(C,j)}:function(C,f,j){if(C.copy)C.copy(f,j,0,C.length);else for(var X=0;X<C.length;)f[j++]=C[X++]}},T.prototype.bytes=function(C){Y.isString(C)&&(C=Y._Buffer_from(C,"base64"));var f=C.length>>>0;return this.uint32(f),f&&this._push(T.writeBytesBuffer,f,C),this},T.prototype.string=function(C){var f=Y.Buffer.byteLength(C);return this.uint32(f),f&&this._push(B,f,C),this},T._configure()},891:Ee=>{"use strict";var J={};function D(C,f,j){j||(j=Error);var q=function(H){function W(l,u,h){return H.call(this,function X(H,W,l){return"string"==typeof f?f:f(H,W,l)}(l,u,h))||this}return function Ce(C,f){C.prototype=Object.create(f.prototype),C.prototype.constructor=C,C.__proto__=f}(W,H),W}(j);q.prototype.name=j.name,q.prototype.code=C,J[C]=q}function Y(C,f){if(Array.isArray(C)){var j=C.length;return C=C.map(function(X){return String(X)}),j>2?"one of ".concat(f," ").concat(C.slice(0,j-1).join(", "),", or ")+C[j-1]:2===j?"one of ".concat(f," ").concat(C[0]," or ").concat(C[1]):"of ".concat(f," ").concat(C[0])}return"of ".concat(f," ").concat(String(C))}D("ERR_INVALID_OPT_VALUE",function(C,f){return'The value "'+f+'" is invalid for option "'+C+'"'},TypeError),D("ERR_INVALID_ARG_TYPE",function(C,f,j){var X,q;if("string"==typeof f&&function T(C,f,j){return C.substr(!j||j<0?0:+j,f.length)===f}(f,"not ")?(X="must not be",f=f.replace(/^not /,"")):X="must be",function B(C,f,j){return(void 0===j||j>C.length)&&(j=C.length),C.substring(j-f.length,j)===f}(C," argument"))q="The ".concat(C," ").concat(X," ").concat(Y(f,"type"));else{var H=function k(C,f,j){return"number"!=typeof j&&(j=0),!(j+f.length>C.length)&&-1!==C.indexOf(f,j)}(C,".")?"property":"argument";q='The "'.concat(C,'" ').concat(H," ").concat(X," ").concat(Y(f,"type"))}return q+". Received type ".concat(typeof j)},TypeError),D("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),D("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),D("ERR_STREAM_PREMATURE_CLOSE","Premature close"),D("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),D("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),D("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),D("ERR_STREAM_WRITE_AFTER_END","write after end"),D("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),D("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),D("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ee.exports.q=J},339:(Ee,Ce,J)=>{"use strict";var D=Object.keys||function(q){var H=[];for(var W in q)H.push(W);return H};Ee.exports=f;var Y=J(154),T=J(520);J(894)(f,Y);for(var B=D(T.prototype),k=0;k<B.length;k++){var C=B[k];f.prototype[C]||(f.prototype[C]=T.prototype[C])}function f(q){if(!(this instanceof f))return new f(q);Y.call(this,q),T.call(this,q),this.allowHalfOpen=!0,q&&(!1===q.readable&&(this.readable=!1),!1===q.writable&&(this.writable=!1),!1===q.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",j)))}function j(){this._writableState.ended||process.nextTick(X,this)}function X(q){q.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(H){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=H,this._writableState.destroyed=H)}})},71:(Ee,Ce,J)=>{"use strict";Ee.exports=Y;var D=J(25);function Y(T){if(!(this instanceof Y))return new Y(T);D.call(this,T)}J(894)(Y,D),Y.prototype._transform=function(T,B,k){k(null,T)}},154:(Ee,Ce,J)=>{"use strict";var D;Ee.exports=De,De.ReadableState=ge,J(69);var q,T=function(L,fe){return L.listeners(fe).length},B=J(970),k=J(172).Buffer,C=global.Uint8Array||function(){},X=J(616);q=X&&X.debuglog?X.debuglog("stream"):function(){};var M,P,K,H=J(19),W=J(920),u=J(102).getHighWaterMark,h=J(891).q,m=h.ERR_INVALID_ARG_TYPE,_=h.ERR_STREAM_PUSH_AFTER_EOF,w=h.ERR_METHOD_NOT_IMPLEMENTED,b=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;J(894)(De,B);var ie=W.errorOrDestroy,he=["error","close","destroy","pause","resume"];function ge(F,L,fe){D=D||J(339),"boolean"!=typeof fe&&(fe=L instanceof D),this.objectMode=!!(F=F||{}).objectMode,fe&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=u(this,F,"readableHighWaterMark",fe),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==F.emitClose,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(M||(M=J(54).s),this.decoder=new M(F.encoding),this.encoding=F.encoding)}function De(F){if(D=D||J(339),!(this instanceof De))return new De(F);this._readableState=new ge(F,this,this instanceof D),this.readable=!0,F&&("function"==typeof F.read&&(this._read=F.read),"function"==typeof F.destroy&&(this._destroy=F.destroy)),B.call(this)}function vt(F,L,fe,x,y){q("readableAddChunk",L);var O,v=F._readableState;if(null===L)v.reading=!1,function U(F,L){if(q("onEofChunk"),!L.ended){if(L.decoder){var fe=L.decoder.end();fe&&fe.length&&(L.buffer.push(fe),L.length+=L.objectMode?1:fe.length)}L.ended=!0,L.sync?A(F):(L.needReadable=!1,L.emittedReadable||(L.emittedReadable=!0,z(F)))}}(F,v);else if(y||(O=function Kt(F,L){var fe;return!function j(F){return k.isBuffer(F)||F instanceof C}(L)&&"string"!=typeof L&&void 0!==L&&!F.objectMode&&(fe=new m("chunk",["string","Buffer","Uint8Array"],L)),fe}(v,L)),O)ie(F,O);else if(v.objectMode||L&&L.length>0)if("string"!=typeof L&&!v.objectMode&&Object.getPrototypeOf(L)!==k.prototype&&(L=function f(F){return k.from(F)}(L)),x)v.endEmitted?ie(F,new b):Ht(F,v,L,!0);else if(v.ended)ie(F,new _);else{if(v.destroyed)return!1;v.reading=!1,v.decoder&&!fe?(L=v.decoder.write(L),v.objectMode||0!==L.length?Ht(F,v,L,!1):N(F,v)):Ht(F,v,L,!1)}else x||(v.reading=!1,N(F,v));return!v.ended&&(v.length<v.highWaterMark||0===v.length)}function Ht(F,L,fe,x){L.flowing&&0===L.length&&!L.sync?(L.awaitDrain=0,F.emit("data",fe)):(L.length+=L.objectMode?1:fe.length,x?L.buffer.unshift(fe):L.buffer.push(fe),L.needReadable&&A(F)),N(F,L)}Object.defineProperty(De.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(L){!this._readableState||(this._readableState.destroyed=L)}}),De.prototype.destroy=W.destroy,De.prototype._undestroy=W.undestroy,De.prototype._destroy=function(F,L){L(F)},De.prototype.push=function(F,L){var x,fe=this._readableState;return fe.objectMode?x=!0:"string"==typeof F&&((L=L||fe.defaultEncoding)!==fe.encoding&&(F=k.from(F,L),L=""),x=!0),vt(this,F,L,!1,x)},De.prototype.unshift=function(F){return vt(this,F,null,!0,!1)},De.prototype.isPaused=function(){return!1===this._readableState.flowing},De.prototype.setEncoding=function(F){M||(M=J(54).s);var L=new M(F);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;for(var fe=this._readableState.buffer.head,x="";null!==fe;)x+=L.write(fe.data),fe=fe.next;return this._readableState.buffer.clear(),""!==x&&this._readableState.buffer.push(x),this._readableState.length=x.length,this};var yn=1073741824;function Qe(F,L){return F<=0||0===L.length&&L.ended?0:L.objectMode?1:F!=F?L.flowing&&L.length?L.buffer.head.data.length:L.length:(F>L.highWaterMark&&(L.highWaterMark=function Jt(F){return F>=yn?F=yn:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}(F)),F<=L.length?F:L.ended?L.length:(L.needReadable=!0,0))}function A(F){var L=F._readableState;q("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(q("emitReadable",L.flowing),L.emittedReadable=!0,process.nextTick(z,F))}function z(F){var L=F._readableState;q("emitReadable_",L.destroyed,L.length,L.ended),!L.destroyed&&(L.length||L.ended)&&(F.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,$(F)}function N(F,L){L.readingMore||(L.readingMore=!0,process.nextTick(I,F,L))}function I(F,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&0===L.length);){var fe=L.length;if(q("maybeReadMore read 0"),F.read(0),fe===L.length)break}L.readingMore=!1}function re(F){var L=F._readableState;L.readableListening=F.listenerCount("readable")>0,L.resumeScheduled&&!L.paused?L.flowing=!0:F.listenerCount("data")>0&&F.resume()}function ce(F){q("readable nexttick read 0"),F.read(0)}function We(F,L){q("resume",L.reading),L.reading||F.read(0),L.resumeScheduled=!1,F.emit("resume"),$(F),L.flowing&&!L.reading&&F.read(0)}function $(F){var L=F._readableState;for(q("flow",L.flowing);L.flowing&&null!==F.read(););}function Q(F,L){return 0===L.length?null:(L.objectMode?fe=L.buffer.shift():!F||F>=L.length?(fe=L.decoder?L.buffer.join(""):1===L.buffer.length?L.buffer.first():L.buffer.concat(L.length),L.buffer.clear()):fe=L.buffer.consume(F,L.decoder),fe);var fe}function ue(F){var L=F._readableState;q("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,process.nextTick(Ae,L,F))}function Ae(F,L){if(q("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&0===F.length&&(F.endEmitted=!0,L.readable=!1,L.emit("end"),F.autoDestroy)){var fe=L._writableState;(!fe||fe.autoDestroy&&fe.finished)&&L.destroy()}}function Ue(F,L){for(var fe=0,x=F.length;fe<x;fe++)if(F[fe]===L)return fe;return-1}De.prototype.read=function(F){q("read",F),F=parseInt(F,10);var L=this._readableState,fe=F;if(0!==F&&(L.emittedReadable=!1),0===F&&L.needReadable&&((0!==L.highWaterMark?L.length>=L.highWaterMark:L.length>0)||L.ended))return q("read: emitReadable",L.length,L.ended),0===L.length&&L.ended?ue(this):A(this),null;if(0===(F=Qe(F,L))&&L.ended)return 0===L.length&&ue(this),null;var y,x=L.needReadable;return q("need readable",x),(0===L.length||L.length-F<L.highWaterMark)&&q("length less than watermark",x=!0),L.ended||L.reading?q("reading or ended",x=!1):x&&(q("do read"),L.reading=!0,L.sync=!0,0===L.length&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(F=Qe(fe,L))),null===(y=F>0?Q(F,L):null)?(L.needReadable=L.length<=L.highWaterMark,F=0):(L.length-=F,L.awaitDrain=0),0===L.length&&(L.ended||(L.needReadable=!0),fe!==F&&L.ended&&ue(this)),null!==y&&this.emit("data",y),y},De.prototype._read=function(F){ie(this,new w("_read()"))},De.prototype.pipe=function(F,L){var fe=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=F;break;case 1:x.pipes=[x.pipes,F];break;default:x.pipes.push(F)}x.pipesCount+=1,q("pipe count=%d opts=%j",x.pipesCount,L);var v=L&&!1===L.end||F===process.stdout||F===process.stderr?Mi:Z;function Z(){q("onend"),F.end()}x.endEmitted?process.nextTick(v):fe.once("end",v),F.on("unpipe",function O(hr,Wi){q("onunpipe"),hr===fe&&Wi&&!1===Wi.hasUnpiped&&(Wi.hasUnpiped=!0,function gt(){q("cleanup"),F.removeListener("close",rn),F.removeListener("finish",Lt),F.removeListener("drain",pe),F.removeListener("error",_t),F.removeListener("unpipe",O),fe.removeListener("end",Z),fe.removeListener("end",Mi),fe.removeListener("data",xt),be=!0,x.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&pe()}())});var pe=function ne(F){return function(){var fe=F._readableState;q("pipeOnDrain",fe.awaitDrain),fe.awaitDrain&&fe.awaitDrain--,0===fe.awaitDrain&&T(F,"data")&&(fe.flowing=!0,$(F))}}(fe);F.on("drain",pe);var be=!1;function xt(hr){q("ondata");var Wi=F.write(hr);q("dest.write",Wi),!1===Wi&&((1===x.pipesCount&&x.pipes===F||x.pipesCount>1&&-1!==Ue(x.pipes,F))&&!be&&(q("false write response, pause",x.awaitDrain),x.awaitDrain++),fe.pause())}function _t(hr){q("onerror",hr),Mi(),F.removeListener("error",_t),0===T(F,"error")&&ie(F,hr)}function rn(){F.removeListener("finish",Lt),Mi()}function Lt(){q("onfinish"),F.removeListener("close",rn),Mi()}function Mi(){q("unpipe"),fe.unpipe(F)}return fe.on("data",xt),function ye(F,L,fe){if("function"==typeof F.prependListener)return F.prependListener(L,fe);F._events&&F._events[L]?Array.isArray(F._events[L])?F._events[L].unshift(fe):F._events[L]=[fe,F._events[L]]:F.on(L,fe)}(F,"error",_t),F.once("close",rn),F.once("finish",Lt),F.emit("pipe",fe),x.flowing||(q("pipe resume"),fe.resume()),F},De.prototype.unpipe=function(F){var L=this._readableState,fe={hasUnpiped:!1};if(0===L.pipesCount)return this;if(1===L.pipesCount)return F&&F!==L.pipes||(F||(F=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,F&&F.emit("unpipe",this,fe)),this;if(!F){var x=L.pipes,y=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var v=0;v<y;v++)x[v].emit("unpipe",this,{hasUnpiped:!1});return this}var O=Ue(L.pipes,F);return-1===O||(L.pipes.splice(O,1),L.pipesCount-=1,1===L.pipesCount&&(L.pipes=L.pipes[0]),F.emit("unpipe",this,fe)),this},De.prototype.addListener=De.prototype.on=function(F,L){var fe=B.prototype.on.call(this,F,L),x=this._readableState;return"data"===F?(x.readableListening=this.listenerCount("readable")>0,!1!==x.flowing&&this.resume()):"readable"===F&&!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,q("on readable",x.length,x.reading),x.length?A(this):x.reading||process.nextTick(ce,this)),fe},De.prototype.removeListener=function(F,L){var fe=B.prototype.removeListener.call(this,F,L);return"readable"===F&&process.nextTick(re,this),fe},De.prototype.removeAllListeners=function(F){var L=B.prototype.removeAllListeners.apply(this,arguments);return("readable"===F||void 0===F)&&process.nextTick(re,this),L},De.prototype.resume=function(){var F=this._readableState;return F.flowing||(q("resume"),F.flowing=!F.readableListening,function ee(F,L){L.resumeScheduled||(L.resumeScheduled=!0,process.nextTick(We,F,L))}(this,F)),F.paused=!1,this},De.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},De.prototype.wrap=function(F){var L=this,fe=this._readableState,x=!1;for(var y in F.on("end",function(){if(q("wrapped end"),fe.decoder&&!fe.ended){var O=fe.decoder.end();O&&O.length&&L.push(O)}L.push(null)}),F.on("data",function(O){q("wrapped data"),fe.decoder&&(O=fe.decoder.write(O)),fe.objectMode&&null==O||!(fe.objectMode||O&&O.length)||L.push(O)||(x=!0,F.pause())}),F)void 0===this[y]&&"function"==typeof F[y]&&(this[y]=function(Z){return function(){return F[Z].apply(F,arguments)}}(y));for(var v=0;v<he.length;v++)F.on(he[v],this.emit.bind(this,he[v]));return this._read=function(O){q("wrapped _read",O),x&&(x=!1,F.resume())},this},"function"==typeof Symbol&&(De.prototype[Symbol.asyncIterator]=function(){return void 0===P&&(P=J(872)),P(this)}),Object.defineProperty(De.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(De.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(De.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),De._fromList=Q,Object.defineProperty(De.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(De.from=function(F,L){return void 0===K&&(K=J(412)),K(De,F,L)})},25:(Ee,Ce,J)=>{"use strict";Ee.exports=j;var D=J(891).q,Y=D.ERR_METHOD_NOT_IMPLEMENTED,T=D.ERR_MULTIPLE_CALLBACK,B=D.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=D.ERR_TRANSFORM_WITH_LENGTH_0,C=J(339);function f(H,W){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(null===u)return this.emit("error",new T);l.writechunk=null,l.writecb=null,null!=W&&this.push(W),u(H);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function j(H){if(!(this instanceof j))return new j(H);C.call(this,H),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,H&&("function"==typeof H.transform&&(this._transform=H.transform),"function"==typeof H.flush&&(this._flush=H.flush)),this.on("prefinish",X)}function X(){var H=this;"function"!=typeof this._flush||this._readableState.destroyed?q(this,null,null):this._flush(function(W,l){q(H,W,l)})}function q(H,W,l){if(W)return H.emit("error",W);if(null!=l&&H.push(l),H._writableState.length)throw new k;if(H._transformState.transforming)throw new B;return H.push(null)}J(894)(j,C),j.prototype.push=function(H,W){return this._transformState.needTransform=!1,C.prototype.push.call(this,H,W)},j.prototype._transform=function(H,W,l){l(new Y("_transform()"))},j.prototype._write=function(H,W,l){var u=this._transformState;if(u.writecb=l,u.writechunk=H,u.writeencoding=W,!u.transforming){var h=this._readableState;(u.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},j.prototype._read=function(H){var W=this._transformState;null===W.writechunk||W.transforming?W.needTransform=!0:(W.transforming=!0,this._transform(W.writechunk,W.writeencoding,W.afterTransform))},j.prototype._destroy=function(H,W){C.prototype._destroy.call(this,H,function(l){W(l)})}},520:(Ee,Ce,J)=>{"use strict";function Y($){var Q=this;this.next=null,this.entry=null,this.finish=function(){!function We($,Q,ue){var Ae=$.entry;for($.entry=null;Ae;){var Ue=Ae.callback;Q.pendingcb--,Ue(ue),Ae=Ae.next}Q.corkedRequestsFree.next=$}(Q,$)}}var T;Ee.exports=ge,ge.WritableState=he;var ye,B={deprecate:J(532)},k=J(970),C=J(172).Buffer,f=global.Uint8Array||function(){},q=J(920),W=J(102).getHighWaterMark,l=J(891).q,u=l.ERR_INVALID_ARG_TYPE,h=l.ERR_METHOD_NOT_IMPLEMENTED,m=l.ERR_MULTIPLE_CALLBACK,_=l.ERR_STREAM_CANNOT_PIPE,w=l.ERR_STREAM_DESTROYED,b=l.ERR_STREAM_NULL_VALUES,M=l.ERR_STREAM_WRITE_AFTER_END,P=l.ERR_UNKNOWN_ENCODING,K=q.errorOrDestroy;function ie(){}function he($,Q,ue){T=T||J(339),"boolean"!=typeof ue&&(ue=Q instanceof T),this.objectMode=!!($=$||{}).objectMode,ue&&(this.objectMode=this.objectMode||!!$.writableObjectMode),this.highWaterMark=W(this,$,"writableHighWaterMark",ue),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===$.decodeStrings),this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ue){!function U($,Q){var ue=$._writableState,Ae=ue.sync,Ue=ue.writecb;if("function"!=typeof Ue)throw new m;if(function Qe($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}(ue),Q)!function Jt($,Q,ue,Ae,Ue){--Q.pendingcb,ue?(process.nextTick(Ue,Ae),process.nextTick(ce,$,Q),$._writableState.errorEmitted=!0,K($,Ae)):(Ue(Ae),$._writableState.errorEmitted=!0,K($,Ae),ce($,Q))}($,ue,Ae,Q,Ue);else{var F=I(ue)||$.destroyed;!F&&!ue.corked&&!ue.bufferProcessing&&ue.bufferedRequest&&N($,ue),Ae?process.nextTick(A,$,ue,F,Ue):A($,ue,F,Ue)}}(Q,Ue)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==$.emitClose,this.autoDestroy=!!$.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Y(this)}function ge($){var Q=this instanceof(T=T||J(339));if(!Q&&!ye.call(ge,this))return new ge($);this._writableState=new he($,this,Q),this.writable=!0,$&&("function"==typeof $.write&&(this._write=$.write),"function"==typeof $.writev&&(this._writev=$.writev),"function"==typeof $.destroy&&(this._destroy=$.destroy),"function"==typeof $.final&&(this._final=$.final)),k.call(this)}function yn($,Q,ue,Ae,Ue,F,L){Q.writelen=Ae,Q.writecb=L,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new w("write")):ue?$._writev(Ue,Q.onwrite):$._write(Ue,F,Q.onwrite),Q.sync=!1}function A($,Q,ue,Ae){ue||function z($,Q){0===Q.length&&Q.needDrain&&(Q.needDrain=!1,$.emit("drain"))}($,Q),Q.pendingcb--,Ae(),ce($,Q)}function N($,Q){Q.bufferProcessing=!0;var ue=Q.bufferedRequest;if($._writev&&ue&&ue.next){var Ue=new Array(Q.bufferedRequestCount),F=Q.corkedRequestsFree;F.entry=ue;for(var L=0,fe=!0;ue;)Ue[L]=ue,ue.isBuf||(fe=!1),ue=ue.next,L+=1;Ue.allBuffers=fe,yn($,Q,!0,Q.length,Ue,"",F.finish),Q.pendingcb++,Q.lastBufferedRequest=null,F.next?(Q.corkedRequestsFree=F.next,F.next=null):Q.corkedRequestsFree=new Y(Q),Q.bufferedRequestCount=0}else{for(;ue;){var x=ue.chunk;if(yn($,Q,!1,Q.objectMode?1:x.length,x,ue.encoding,ue.callback),ue=ue.next,Q.bufferedRequestCount--,Q.writing)break}null===ue&&(Q.lastBufferedRequest=null)}Q.bufferedRequest=ue,Q.bufferProcessing=!1}function I($){return $.ending&&0===$.length&&null===$.bufferedRequest&&!$.finished&&!$.writing}function ne($,Q){$._final(function(ue){Q.pendingcb--,ue&&K($,ue),Q.prefinished=!0,$.emit("prefinish"),ce($,Q)})}function ce($,Q){var ue=I(Q);if(ue&&(function re($,Q){!Q.prefinished&&!Q.finalCalled&&("function"!=typeof $._final||Q.destroyed?(Q.prefinished=!0,$.emit("prefinish")):(Q.pendingcb++,Q.finalCalled=!0,process.nextTick(ne,$,Q)))}($,Q),0===Q.pendingcb&&(Q.finished=!0,$.emit("finish"),Q.autoDestroy))){var Ae=$._readableState;(!Ae||Ae.autoDestroy&&Ae.endEmitted)&&$.destroy()}return ue}J(894)(ge,k),he.prototype.getBuffer=function(){for(var Q=this.bufferedRequest,ue=[];Q;)ue.push(Q),Q=Q.next;return ue},function(){try{Object.defineProperty(he.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(ye=Function.prototype[Symbol.hasInstance],Object.defineProperty(ge,Symbol.hasInstance,{value:function(Q){return!!ye.call(this,Q)||this===ge&&Q&&Q._writableState instanceof he}})):ye=function(Q){return Q instanceof this},ge.prototype.pipe=function(){K(this,new _)},ge.prototype.write=function($,Q,ue){var Ae=this._writableState,Ue=!1,F=!Ae.objectMode&&function X($){return C.isBuffer($)||$ instanceof f}($);return F&&!C.isBuffer($)&&($=function j($){return C.from($)}($)),"function"==typeof Q&&(ue=Q,Q=null),F?Q="buffer":Q||(Q=Ae.defaultEncoding),"function"!=typeof ue&&(ue=ie),Ae.ending?function De($,Q){var ue=new M;K($,ue),process.nextTick(Q,ue)}(this,ue):(F||function vt($,Q,ue,Ae){var Ue;return null===ue?Ue=new b:"string"!=typeof ue&&!Q.objectMode&&(Ue=new u("chunk",["string","Buffer"],ue)),!Ue||(K($,Ue),process.nextTick(Ae,Ue),!1)}(this,Ae,$,ue))&&(Ae.pendingcb++,Ue=function Kt($,Q,ue,Ae,Ue,F){if(!ue){var L=function Ht($,Q,ue){return!$.objectMode&&!1!==$.decodeStrings&&"string"==typeof Q&&(Q=C.from(Q,ue)),Q}(Q,Ae,Ue);Ae!==L&&(ue=!0,Ue="buffer",Ae=L)}var fe=Q.objectMode?1:Ae.length;Q.length+=fe;var x=Q.length<Q.highWaterMark;if(x||(Q.needDrain=!0),Q.writing||Q.corked){var y=Q.lastBufferedRequest;Q.lastBufferedRequest={chunk:Ae,encoding:Ue,isBuf:ue,callback:F,next:null},y?y.next=Q.lastBufferedRequest:Q.bufferedRequest=Q.lastBufferedRequest,Q.bufferedRequestCount+=1}else yn($,Q,!1,fe,Ae,Ue,F);return x}(this,Ae,F,$,Q,ue)),Ue},ge.prototype.cork=function(){this._writableState.corked++},ge.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,!$.writing&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&N(this,$))},ge.prototype.setDefaultEncoding=function(Q){if("string"==typeof Q&&(Q=Q.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Q+"").toLowerCase())>-1))throw new P(Q);return this._writableState.defaultEncoding=Q,this},Object.defineProperty(ge.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ge.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ge.prototype._write=function($,Q,ue){ue(new h("_write()"))},ge.prototype._writev=null,ge.prototype.end=function($,Q,ue){var Ae=this._writableState;return"function"==typeof $?(ue=$,$=null,Q=null):"function"==typeof Q&&(ue=Q,Q=null),null!=$&&this.write($,Q),Ae.corked&&(Ae.corked=1,this.uncork()),Ae.ending||function ee($,Q,ue){Q.ending=!0,ce($,Q),ue&&(Q.finished?process.nextTick(ue):$.once("finish",ue)),Q.ended=!0,$.writable=!1}(this,Ae,ue),this},Object.defineProperty(ge.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ge.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Q){!this._writableState||(this._writableState.destroyed=Q)}}),ge.prototype.destroy=q.destroy,ge.prototype._undestroy=q.undestroy,ge.prototype._destroy=function($,Q){Q($)}},872:(Ee,Ce,J)=>{"use strict";var D;function Y(w,b,M){return b in w?Object.defineProperty(w,b,{value:M,enumerable:!0,configurable:!0,writable:!0}):w[b]=M,w}var T=J(542),B=Symbol("lastResolve"),k=Symbol("lastReject"),C=Symbol("error"),f=Symbol("ended"),j=Symbol("lastPromise"),X=Symbol("handlePromise"),q=Symbol("stream");function H(w,b){return{value:w,done:b}}function W(w){var b=w[B];if(null!==b){var M=w[q].read();null!==M&&(w[j]=null,w[B]=null,w[k]=null,b(H(M,!1)))}}function l(w){process.nextTick(W,w)}var h=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((Y(D={get stream(){return this[q]},next:function(){var b=this,M=this[C];if(null!==M)return Promise.reject(M);if(this[f])return Promise.resolve(H(void 0,!0));if(this[q].destroyed)return new Promise(function(he,ye){process.nextTick(function(){b[C]?ye(b[C]):he(H(void 0,!0))})});var K,P=this[j];if(P)K=new Promise(function u(w,b){return function(M,P){w.then(function(){b[f]?M(H(void 0,!0)):b[X](M,P)},P)}}(P,this));else{var ie=this[q].read();if(null!==ie)return Promise.resolve(H(ie,!1));K=new Promise(this[X])}return this[j]=K,K}},Symbol.asyncIterator,function(){return this}),Y(D,"return",function(){var b=this;return new Promise(function(M,P){b[q].destroy(null,function(K){K?P(K):M(H(void 0,!0))})})}),D),h);Ee.exports=function(b){var M,P=Object.create(m,(Y(M={},q,{value:b,writable:!0}),Y(M,B,{value:null,writable:!0}),Y(M,k,{value:null,writable:!0}),Y(M,C,{value:null,writable:!0}),Y(M,f,{value:b._readableState.endEmitted,writable:!0}),Y(M,X,{value:function(ie,he){var ye=P[q].read();ye?(P[j]=null,P[B]=null,P[k]=null,ie(H(ye,!1))):(P[B]=ie,P[k]=he)},writable:!0}),M));return P[j]=null,T(b,function(K){if(K&&"ERR_STREAM_PREMATURE_CLOSE"!==K.code){var ie=P[k];return null!==ie&&(P[j]=null,P[B]=null,P[k]=null,ie(K)),void(P[C]=K)}var he=P[B];null!==he&&(P[j]=null,P[B]=null,P[k]=null,he(H(void 0,!0))),P[f]=!0}),b.on("readable",l.bind(null,P)),P}},19:(Ee,Ce,J)=>{"use strict";function D(l,u){var h=Object.keys(l);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(l);u&&(m=m.filter(function(_){return Object.getOwnPropertyDescriptor(l,_).enumerable})),h.push.apply(h,m)}return h}function T(l,u,h){return u in l?Object.defineProperty(l,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):l[u]=h,l}function k(l,u){for(var h=0;h<u.length;h++){var m=u[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var j=J(172).Buffer,q=J(361).inspect,H=q&&q.custom||"inspect";function W(l,u,h){j.prototype.copy.call(l,u,h)}Ee.exports=function(){function l(){(function B(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}return function C(l,u,h){u&&k(l.prototype,u),h&&k(l,h)}(l,[{key:"push",value:function(h){var m={data:h,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(h){var m={data:h,next:this.head};0===this.length&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(0===this.length)return"";for(var m=this.head,_=""+m.data;m=m.next;)_+=h+m.data;return _}},{key:"concat",value:function(h){if(0===this.length)return j.alloc(0);for(var m=j.allocUnsafe(h>>>0),_=this.head,w=0;_;)W(_.data,m,w),w+=_.data.length,_=_.next;return m}},{key:"consume",value:function(h,m){var _;return h<this.head.data.length?(_=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):_=h===this.head.data.length?this.shift():m?this._getString(h):this._getBuffer(h),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var m=this.head,_=1,w=m.data;for(h-=w.length;m=m.next;){var b=m.data,M=h>b.length?b.length:h;if(w+=M===b.length?b:b.slice(0,h),0==(h-=M)){M===b.length?(++_,this.head=m.next?m.next:this.tail=null):(this.head=m,m.data=b.slice(M));break}++_}return this.length-=_,w}},{key:"_getBuffer",value:function(h){var m=j.allocUnsafe(h),_=this.head,w=1;for(_.data.copy(m),h-=_.data.length;_=_.next;){var b=_.data,M=h>b.length?b.length:h;if(b.copy(m,m.length-h,0,M),0==(h-=M)){M===b.length?(++w,this.head=_.next?_.next:this.tail=null):(this.head=_,_.data=b.slice(M));break}++w}return this.length-=w,m}},{key:H,value:function(h,m){return q(this,function Y(l){for(var u=1;u<arguments.length;u++){var h=null!=arguments[u]?arguments[u]:{};u%2?D(Object(h),!0).forEach(function(m){T(l,m,h[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(h)):D(Object(h)).forEach(function(m){Object.defineProperty(l,m,Object.getOwnPropertyDescriptor(h,m))})}return l}({},m,{depth:0,customInspect:!1}))}}]),l}()},920:Ee=>{"use strict";function J(k,C){T(k,C),D(k)}function D(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function T(k,C){k.emit("error",C)}Ee.exports={destroy:function Ce(k,C){var f=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(C?C(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(T,this,k)):process.nextTick(T,this,k)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(k||null,function(q){!C&&q?f._writableState?f._writableState.errorEmitted?process.nextTick(D,f):(f._writableState.errorEmitted=!0,process.nextTick(J,f,q)):process.nextTick(J,f,q):C?(process.nextTick(D,f),C(q)):process.nextTick(D,f)}),this)},undestroy:function Y(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function B(k,C){var f=k._readableState,j=k._writableState;f&&f.autoDestroy||j&&j.autoDestroy?k.destroy(C):k.emit("error",C)}}},542:(Ee,Ce,J)=>{"use strict";var D=J(891).q.ERR_STREAM_PREMATURE_CLOSE;function T(){}Ee.exports=function k(C,f,j){if("function"==typeof f)return k(C,null,f);f||(f={}),j=function Y(C){var f=!1;return function(){if(!f){f=!0;for(var j=arguments.length,X=new Array(j),q=0;q<j;q++)X[q]=arguments[q];C.apply(this,X)}}}(j||T);var X=f.readable||!1!==f.readable&&C.readable,q=f.writable||!1!==f.writable&&C.writable,H=function(){C.writable||l()},W=C._writableState&&C._writableState.finished,l=function(){q=!1,W=!0,X||j.call(C)},u=C._readableState&&C._readableState.endEmitted,h=function(){X=!1,u=!0,q||j.call(C)},m=function(M){j.call(C,M)},_=function(){var M;return X&&!u?((!C._readableState||!C._readableState.ended)&&(M=new D),j.call(C,M)):q&&!W?((!C._writableState||!C._writableState.ended)&&(M=new D),j.call(C,M)):void 0},w=function(){C.req.on("finish",l)};return function B(C){return C.setHeader&&"function"==typeof C.abort}(C)?(C.on("complete",l),C.on("abort",_),C.req?w():C.on("request",w)):q&&!C._writableState&&(C.on("end",H),C.on("close",H)),C.on("end",h),C.on("finish",l),!1!==f.error&&C.on("error",m),C.on("close",_),function(){C.removeListener("complete",l),C.removeListener("abort",_),C.removeListener("request",w),C.req&&C.req.removeListener("finish",l),C.removeListener("end",H),C.removeListener("close",H),C.removeListener("finish",l),C.removeListener("end",h),C.removeListener("error",m),C.removeListener("close",_)}}},412:Ee=>{Ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(Ee,Ce,J)=>{"use strict";var D,T=J(891).q,B=T.ERR_MISSING_ARGS,k=T.ERR_STREAM_DESTROYED;function C(l){if(l)throw l}function j(l,u,h,m){m=function Y(l){var u=!1;return function(){u||(u=!0,l.apply(void 0,arguments))}}(m);var _=!1;l.on("close",function(){_=!0}),void 0===D&&(D=J(542)),D(l,{readable:u,writable:h},function(b){if(b)return m(b);_=!0,m()});var w=!1;return function(b){if(!_&&!w){if(w=!0,function f(l){return l.setHeader&&"function"==typeof l.abort}(l))return l.abort();if("function"==typeof l.destroy)return l.destroy();m(b||new k("pipe"))}}}function X(l){l()}function q(l,u){return l.pipe(u)}function H(l){return l.length&&"function"==typeof l[l.length-1]?l.pop():C}Ee.exports=function W(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];var m=H(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new B("streams");var _,w=u.map(function(b,M){var P=M<u.length-1;return j(b,P,M>0,function(ie){_||(_=ie),ie&&w.forEach(X),!P&&(w.forEach(X),m(_))})});return u.reduce(q)}},102:(Ee,Ce,J)=>{"use strict";var D=J(891).q.ERR_INVALID_OPT_VALUE;Ee.exports={getHighWaterMark:function T(B,k,C,f){var j=function Y(B,k,C){return null!=B.highWaterMark?B.highWaterMark:k?B[C]:null}(k,f,C);if(null!=j){if(!isFinite(j)||Math.floor(j)!==j||j<0)throw new D(f?C:"highWaterMark",j);return Math.floor(j)}return B.objectMode?16:16384}}},970:(Ee,Ce,J)=>{Ee.exports=J(69).EventEmitter},502:(Ee,Ce,J)=>{var D=J(172),Y=D.Buffer;function T(k,C){for(var f in k)C[f]=k[f]}function B(k,C,f){return Y(k,C,f)}Y.from&&Y.alloc&&Y.allocUnsafe&&Y.allocUnsafeSlow?Ee.exports=D:(T(D,Ce),Ce.Buffer=B),B.prototype=Object.create(Y.prototype),T(Y,B),B.from=function(k,C,f){if("number"==typeof k)throw new TypeError("Argument must not be a number");return Y(k,C,f)},B.alloc=function(k,C,f){if("number"!=typeof k)throw new TypeError("Argument must be a number");var j=Y(k);return void 0!==C?"string"==typeof f?j.fill(C,f):j.fill(C):j.fill(0),j},B.allocUnsafe=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return Y(k)},B.allocUnsafeSlow=function(k){if("number"!=typeof k)throw new TypeError("Argument must be a number");return D.SlowBuffer(k)}},295:(Ee,Ce,J)=>{Ee.exports=T;var D=J(69).EventEmitter;function T(){D.call(this)}J(894)(T,D),T.Readable=J(154),T.Writable=J(520),T.Duplex=J(339),T.Transform=J(25),T.PassThrough=J(71),T.finished=J(542),T.pipeline=J(954),T.Stream=T,T.prototype.pipe=function(B,k){var C=this;function f(u){B.writable&&!1===B.write(u)&&C.pause&&C.pause()}function j(){C.readable&&C.resume&&C.resume()}C.on("data",f),B.on("drain",j),!B._isStdio&&(!k||!1!==k.end)&&(C.on("end",q),C.on("close",H));var X=!1;function q(){X||(X=!0,B.end())}function H(){X||(X=!0,"function"==typeof B.destroy&&B.destroy())}function W(u){if(l(),0===D.listenerCount(this,"error"))throw u}function l(){C.removeListener("data",f),B.removeListener("drain",j),C.removeListener("end",q),C.removeListener("close",H),C.removeListener("error",W),B.removeListener("error",W),C.removeListener("end",l),C.removeListener("close",l),B.removeListener("close",l)}return C.on("error",W),B.on("error",W),C.on("end",l),C.on("close",l),B.on("close",l),B.emit("pipe",C),B}},54:(Ee,Ce,J)=>{"use strict";var D=J(502).Buffer,Y=D.isEncoding||function(w){switch((w=""+w)&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(w){var b;switch(this.encoding=function B(w){var b=function T(w){if(!w)return"utf8";for(var b;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(b)return;w=(""+w).toLowerCase(),b=!0}}(w);if("string"!=typeof b&&(D.isEncoding===Y||!Y(w)))throw new Error("Unknown encoding: "+w);return b||w}(w),this.encoding){case"utf16le":this.text=W,this.end=l,b=4;break;case"utf8":this.fillLast=X,b=4;break;case"base64":this.text=u,this.end=h,b=3;break;default:return this.write=m,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=D.allocUnsafe(b)}function C(w){return w<=127?0:w>>5==6?2:w>>4==14?3:w>>3==30?4:w>>6==2?-1:-2}function X(w){var b=this.lastTotal-this.lastNeed,M=function j(w,b,M){if(128!=(192&b[0]))return w.lastNeed=0,"\ufffd";if(w.lastNeed>1&&b.length>1){if(128!=(192&b[1]))return w.lastNeed=1,"\ufffd";if(w.lastNeed>2&&b.length>2&&128!=(192&b[2]))return w.lastNeed=2,"\ufffd"}}(this,w);return void 0!==M?M:this.lastNeed<=w.length?(w.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(w.copy(this.lastChar,b,0,w.length),void(this.lastNeed-=w.length))}function W(w,b){if((w.length-b)%2==0){var M=w.toString("utf16le",b);if(M){var P=M.charCodeAt(M.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],M.slice(0,-1)}return M}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",b,w.length-1)}function l(w){var b=w&&w.length?this.write(w):"";return this.lastNeed?b+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):b}function u(w,b){var M=(w.length-b)%3;return 0===M?w.toString("base64",b):(this.lastNeed=3-M,this.lastTotal=3,1===M?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",b,w.length-M))}function h(w){var b=w&&w.length?this.write(w):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(w){return w.toString(this.encoding)}function _(w){return w&&w.length?this.write(w):""}Ce.s=k,k.prototype.write=function(w){if(0===w.length)return"";var b,M;if(this.lastNeed){if(void 0===(b=this.fillLast(w)))return"";M=this.lastNeed,this.lastNeed=0}else M=0;return M<w.length?b?b+this.text(w,M):this.text(w,M):b||""},k.prototype.end=function H(w){var b=w&&w.length?this.write(w):"";return this.lastNeed?b+"\ufffd":b},k.prototype.text=function q(w,b){var M=function f(w,b,M){var P=b.length-1;if(P<M)return 0;var K=C(b[P]);return K>=0?(K>0&&(w.lastNeed=K-1),K):--P<M||-2===K?0:(K=C(b[P]))>=0?(K>0&&(w.lastNeed=K-2),K):--P<M||-2===K?0:(K=C(b[P]))>=0?(K>0&&(2===K?K=0:w.lastNeed=K-3),K):0}(this,w,b);if(!this.lastNeed)return w.toString("utf8",b);this.lastTotal=M;var P=w.length-(M-this.lastNeed);return w.copy(this.lastChar,0,P),w.toString("utf8",b,P)},k.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length}},532:Ee=>{function J(D){try{if(!global.localStorage)return!1}catch{return!1}var Y=global.localStorage[D];return null!=Y&&"true"===String(Y).toLowerCase()}Ee.exports=function Ce(D,Y){if(J("noDeprecation"))return D;var T=!1;return function B(){if(!T){if(J("throwDeprecation"))throw new Error(Y);J("traceDeprecation")?console.trace(Y):console.warn(Y),T=!0}return D.apply(this,arguments)}}},361:()=>{},616:()=>{}},Ee=>{Ee(Ee.s=388)}]);